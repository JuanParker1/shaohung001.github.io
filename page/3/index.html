<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>aKer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
    <meta name="google-site-verification" content="4ibqBFKTH9pzNJzZlbE3r1AaiwTFg4sNw9KZ5oQL9c4">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="aKer">
<meta property="og:url" content="https://shaohung001.github.io/page/3/index.html">
<meta property="og:site_name" content="aKer">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="aKer">
  
    <link rel="alternate" href="/atom.xml" title="aKer" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  
    <link rel="stylesheet" href="/css/vdonate.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-4114757821090309",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="aKer" rel="home"> aKer </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">

      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-2018-7-23lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/08/02/2018-7-23lesson/">2018-7-23lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/08/02/2018-7-23lesson/" class="article-date">
	  <time datetime="2018-08-02T13:48:43.000Z" itemprop="datePublished">August 2, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="2018-7-23"><a href="#2018-7-23" class="headerlink" title="2018/7/23"></a>2018/7/23</h3><p>今天又发布了Colox 的第二版本，感悟到其中一些思想。<br>要做好一个完整，商用的产品，需要经过：</p>
<ol>
<li>核心功能研发</li>
<li>整体方向，回款（产品售卖、广告营收、产品获利、周边发展等）</li>
<li>UI 整体视觉</li>
<li>上线</li>
<li>开发营收</li>
<li>产品推广、改进</li>
</ol>
<p>这几个阶段我觉得是个人开发很好的流程，而且一经决定一定要坚持下去。<br>我好几次都把产品开发拖的很长。原因有几个：</p>
<ol>
<li>我在学习后台（当时有这么好的学习资源）</li>
<li>后台差不多了，也使用当时的语言js 学习游戏开发（也是刚好有这资源）</li>
<li>一直的学习，心却是有点累。</li>
</ol>
<p>所以有时在家里搞着搞着，才搞了一个功能，或者某些小功能就退却，打游戏到了深夜。<br>之前在粉粉，每天下班回来晚，已经是半条命；现在新的公司终于终于能抽出空了呀！而且目前还在开发阶段，也不会特别特别紧，所以整体感觉都好了很多。<br>目前把产品推进，“哈皮涂色” 进入到了开发营收。我觉得可以有这几个点营收：</p>
<ol>
<li>设置页面给一个二维码，是“鼓励开发哥哥，让他快马加鞭做出更好的产品”</li>
<li>横幅广告、激励性广告营收</li>
<li>内购该产品</li>
</ol>
<h3 id="CollectionView-里面layer-frame-frame"><a href="#CollectionView-里面layer-frame-frame" class="headerlink" title="CollectionView 里面layer.frame = frame"></a>CollectionView 里面layer.frame = frame</h3><p><a href="http://adad184.com/2015/11/10/disable-uicollectionview-implicit-animation/" target="_blank" rel="noopener">http://adad184.com/2015/11/10/disable-uicollectionview-implicit-animation/</a><br>UICollectionView.reloadData 时会做隐式动画。<br>可以使用以下三种：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">//方法一</span><br><span class="line">[UIView performWithoutAnimation:^&#123;</span><br><span class="line"></span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">&#125;];</span><br><span class="line"></span><br><span class="line">//方法二</span><br><span class="line">[UIView animateWithDuration:0 animations:^&#123;</span><br><span class="line">    [collectionView performBatchUpdates:^&#123;</span><br><span class="line">        [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">    &#125; completion:nil];</span><br><span class="line">&#125;];</span><br><span class="line">    </span><br><span class="line">//方法三</span><br><span class="line">[UIView setAnimationsEnabled:NO];</span><br><span class="line">[self.trackPanel performBatchUpdates:^&#123;</span><br><span class="line">    [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];</span><br><span class="line">&#125; completion:^(BOOL finished) &#123;</span><br><span class="line">    [UIView setAnimationsEnabled:YES];</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure></p>
<p>但是我要做的是一个gradientLayer 的布局(单元格形状不一样，布局是一样的)，不得已。<br>于是这句话拯救了我，不然我就要用一张图片解决我问题了，问题是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">如果你的cell中还包含有CALayer的动画 比如这样</span><br><span class="line">- (void)layoutSubviews</span><br><span class="line">&#123;</span><br><span class="line">    [super layoutSubviews];</span><br><span class="line">    </span><br><span class="line">    self.frameLayer.frame = self.frameView.bounds;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>解决方法是：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[CATransaction begin];</span><br><span class="line">[CATransaction setDisableActions:YES];</span><br><span class="line">self.frameLayer.frame = self.frameView.bounds;</span><br><span class="line">[CATransaction commit];</span><br></pre></td></tr></table></figure></p>
<h3 id="LaunchScreen-storyboard-动态设置版本号"><a href="#LaunchScreen-storyboard-动态设置版本号" class="headerlink" title="LaunchScreen.storyboard 动态设置版本号"></a>LaunchScreen.storyboard 动态设置版本号</h3><p><a href="https://www.jianshu.com/p/5253f671436b" target="_blank" rel="noopener">https://www.jianshu.com/p/5253f671436b</a><br>哈哈，连header 都是拿的原作者的。<br>小弟这里记录记录。</p>
<ol>
<li>选中LaunchScreen.storyboard 的label，为该label 的Show the Identity inspector(XCode 最右边栏从左到右边：文本、问好、xx -&gt; 就是这玩意啦),在Document - Label 填入”APP_VERSION”.</li>
<li>点击Project - Target - Build Phases - “New Run Script Phase”</li>
<li>给新创建的”Run Script” 改名为 “Update Launch Version”, 同时展开它</li>
<li>在Shell 后面输入 <code>/bin/bash</code>，然后在下面输入脚本语句写入:<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">versionNumber=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleShortVersionString&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;)</span><br><span class="line">sed -i bak -e &quot;/userLabel=\&quot;APP_VERSION\&quot;/s/text=\&quot;[^\&quot;]*\&quot;/text=\&quot;v $versionNumber\&quot;/&quot; $PROJECT_DIR/XXT/resource/Base.lproj/LaunchScreen.storyboard</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>以上script 注意3个点:</p>
<ol>
<li><code>$PROJECT_DIR/XXT/resource/Base.lproj/LaunchScreen.storyboard</code><br><code>XXT</code>是工程target 名。</li>
<li><code>/resource/</code> 是对应LaunchScreen 位置(ps 我改过他的位置了)</li>
<li><code>sed</code> 前面有折行。如果运行正确，效果没出来的，给<code>sed</code> 前面折行</li>
</ol>
<p>至此以后就不用那么麻烦了。</p>
<h3 id="记录一次iOS-上传release-包出现”ITMS-90037”，debug-正常"><a href="#记录一次iOS-上传release-包出现”ITMS-90037”，debug-正常" class="headerlink" title="记录一次iOS 上传release 包出现”ITMS-90037”，debug 正常"></a>记录一次iOS 上传release 包出现”ITMS-90037”，debug 正常</h3><ol>
<li>debug 非常正常。打包到fir.im 里面OK。</li>
<li>上传testfly 的时候，总是出现<code>ERROR ITMS-90037: &quot;This bundle is invalid. The Info.plist file is missing or could not be parsed. Please check it for embedded control characters.&quot;</code><br>查google，大部分说<blockquote>
<p>问题描述：这个包是无效的。Info。plist文件丢失或不能被解析。请检查plist的字符。<br>问题解决：info.plist 里面有一个非法字符，用终端打开这个文件查看一下，可能会有中文的字符或其他不能识别的字符。</p>
</blockquote>
</li>
</ol>
<p>但是我大眼瞪小眼还是没看出来。<br>从另一个角度：APP 之前可以上传；中间重大改版，里面用到了AliyunvideoPlayer 我觉得有问题。<br>然后我看到这篇文章：<a href="https://www.jianshu.com/p/f62c7767e16b" target="_blank" rel="noopener">https://www.jianshu.com/p/f62c7767e16b</a><br>里面链接到这篇<a href="https://blog.csdn.net/q_littlestone/article/details/51000112" target="_blank" rel="noopener">https://blog.csdn.net/q_littlestone/article/details/51000112</a> 里面的这篇：<a href="http://ios.jobbole.com/84323/" target="_blank" rel="noopener">http://ios.jobbole.com/84323/</a><br>终于找到了最终问题，并说明了原因：<br>里面有第三方framework。其framework 里面的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Bundle version</span><br><span class="line">Bundle identifier</span><br><span class="line">Bundle versions string, short</span><br></pre></td></tr></table></figure></p>
<p>没有和项目自己的对应。如果你自己还有bundle，里面取名不要使用<strong>Info.plist</strong> 或者<strong>info.plist</strong><br>处理办法：</p>
<ol>
<li>改变自己bundle 里面的Info.plist / info.plist</li>
<li>讲第三方的Info.plist 里面的 “Bundle version/Bundle identifier/Bundle versions string, short” 改为和主Info.plist 内容一致。<br>最终终于通过了。<br>我的天，我花了快1天半呀。<br>需要不断尝试，同时看是否能上传成功，同时也要和以前对比。<br>打包、上传。半条命。</li>
</ol>
<h3 id="记录一次Xcode-release-下打包CFBundleVersion-1"><a href="#记录一次Xcode-release-下打包CFBundleVersion-1" class="headerlink" title="记录一次Xcode release 下打包CFBundleVersion +1"></a>记录一次Xcode release 下打包CFBundleVersion +1</h3><p>打包增加CFBundleVersion 需要另外考虑一件事：几个同事之间打包，build 号可能会污染。可以使用时间或者git 上传次数。<br>当前使用的是自动+1 操作。<br>首先</p>
<ol>
<li>在Build Phases 里面增加一个Run script.</li>
<li>修改下名字，比如：AutoIncreaseBuildVersion</li>
<li>把其拖到第一个下面</li>
<li>增加script 如：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">// 判断是哪个configuration</span><br><span class="line">// Release Debug 或者只自定义的配置</span><br><span class="line">if [ &quot;Release&quot; != &quot;$&#123;CONFIGURATION&#125;&quot; ]</span><br><span class="line">// 如果是Release做哪些事情</span><br><span class="line">then</span><br><span class="line">// 如果不是Release做哪些事情</span><br><span class="line">    exit 0 退出 不执行下面的代码</span><br><span class="line">fi</span><br><span class="line">buildNumber=$(/usr/libexec/PlistBuddy -c &quot;Print CFBundleVersion&quot; &quot;$INFOPLIST_FILE&quot;)</span><br><span class="line">buildNumber=$(($buildNumber + 1))</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$INFOPLIST_FILE&quot;</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>上面的exit 0 可以注释也可以加上。效果就是其他CONFIGURATION 不会执行下面动作</p>
<p><strong>跟随时间变化</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/bash</span><br><span class="line">buildNumber=$(date +%Y%m%d%H%M%S)</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$INFOPLIST_FILE&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>获取info.plist信息 CFBundleVersion 可以更改为想获取的信息的名字</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">buildNumber=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleVersion&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;)  </span><br><span class="line">shortVersion=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleShortVersionString&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;)  </span><br><span class="line">buildNumber=`date +&quot;%m%d&quot;`  </span><br><span class="line">buildNumber=&quot;$shortVersion.$buildNumber&quot;  </span><br><span class="line"></span><br><span class="line">// 设置info.plist</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;</span><br></pre></td></tr></table></figure></p>
<p><strong>修改项目显示名称为版本号（适用于不同版本号装到一个机器里面，便于区分是哪个版本）</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">#/bin/bash</span><br><span class="line">if [ &quot;Release&quot; != &quot;$&#123;CONFIGURATION&#125;&quot; ]; then</span><br><span class="line"></span><br><span class="line">DisplayName=$(/usr/libexec/PlistBuddy -c &quot;Print CFBundleShortVersionString&quot; &quot;$INFOPLIST_FILE&quot;)</span><br><span class="line">DisplayName=&quot;ep$&#123;DisplayName&#125;-I&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleDisplayName $DisplayName&quot; &quot;$INFOPLIST_FILE&quot;</span><br><span class="line"></span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">DisplayName=&quot;真正的项目名称&quot;</span><br><span class="line">/usr/libexec/PlistBuddy -c &quot;Set :CFBundleDisplayName $DisplayName&quot; &quot;$INFOPLIST_FILE&quot;</span><br><span class="line"></span><br><span class="line">fi</span><br></pre></td></tr></table></figure></p>
<h3 id="记录一次使用Egret-wing-调试出现"><a href="#记录一次使用Egret-wing-调试出现" class="headerlink" title="记录一次使用Egret wing 调试出现"></a>记录一次使用Egret wing 调试出现</h3><p>“No such module: atom_renderer_v8_util”<br>崩溃到这一句”return process.binding(<code>atom_${process.type}_${name}</code>)”</p>
<p>然后换成debug 用chrome 可以用几次，但是用出错。<br>明明没有代码错误，把代码拷到另一个工程，又能运行。<br>最终解决：把翻墙关了。<br>网上也有一些解决方案，但都没有说到点，心里还嘀咕怎么可能跟我shadowSocks 有关。<br>后来确实没有再出现了。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2018-6-28lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/07/21/2018-6-28lesson/">2018/6/28lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/07/21/2018-6-28lesson/" class="article-date">
	  <time datetime="2018-07-21T01:28:37.000Z" itemprop="datePublished">July 21, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="2018-6-28"><a href="#2018-6-28" class="headerlink" title="2018/6/28"></a>2018/6/28</h3><p>记录一下这几天的事<br>之前从粉粉离职，原因有很多很多方面导致我在这大热天毅然决然的选择离开.</p>
<ol>
<li>工资从未提升，哪怕变动或者变少都行，表示公司有一定考核.<br>2.周末采取单双休，双休的时候感觉太幸福了；单休的时候，周日等于没有休息，等于连上12天班。饥饿策略。</li>
<li>项目采用快速迭代策略，2周一版本，代码质量要管控、逻辑要管控、需求没有明确特别是需求不明确，做到一定才发现有些有冲突，或者有些和另外东西结合了，或者导致另外东西也要变动，然而时间也是被一并算进迭代版本里面。正如最后要走时，旭哥和我开玩笑的说‘在外面公司好点，因为他们不懂代码，粉粉技术懂，所以就会很紧，以后你就会舒服啦’。是的，他们懂代码他们也为我尽量宽松了些，但是细节可能在做到的时候才会碰到。</li>
<li>公司感受不到我的存在位置，我就是个码农？这不是我想要的。</li>
</ol>
<p>进粉粉目的如同我刚上大学就知道自己绝不会考研一样：‘我是来学技术的’。学完如果公司还有我存在的意义，那么我会选择留下来，以上总总都没有。</p>
<p>后来和根根（前粉粉安卓组成员）聊天时，他说的也正是我明了的：<strong>粉粉 是不是觉得 举步维艰</strong> 、<strong>陷入泥潭一样？</strong></p>
<p>所以我预算的最好的时间就是学完，前端学完，后端学完，溜了溜了。<br>期间面试了有十数家公司。</p>
<p>有+我才3个开发的公司，产品基本等于设想的。</p>
<p>有要做区块链 的公司（好多家都想蹭这个热度）</p>
<p>有做广告SDK 的（当时去到该处，我先看他们代码，告诉他们这要做什么，对我来说有什么理解、难处等等）</p>
<p>有做心理学社交的，我当时先让他电话面试，别他们觉得不合适，我就可以不用过去了</p>
<p>也有做公司产品+外包的</p>
<p>我拒绝了几个（3、4个，六月份找工作确实不好找）</p>
<p>我被拒绝了2次一个做医疗社交的，看他开价12 - 19，，又看到他们内部技术，我的天，那就意思意思17左吧，，真没漫天要价。一个做看小说的，似乎有个产品叫“漫画”似乎要很牛逼的，，我特么不写着我自己期望的嘛，你特么喊我过来，问的问题我以为什么鬼。搞得很牛逼的样子，反正不用理这个。继续自己的学习发展，确实很都比的人）</p>
<p>得到4、5个offer。最后来到一个也是做社交的小公司。正好可以把从粉粉学到的运用上去。</p>
<p>老实说，当时看到他们的代码，有种熟悉又不熟悉的味道。代码规范、格式，这里不存在的。创建者是个php 的小哥（即将离开），能力不咋滴（产品逻辑、规范、Wiki、流程都不知道）还拽的250似得。我也懒得和这种性格有缺陷的人多聊一会，问documents 有没有？不存在的，全部是3、4年前写的种使用字典；服务端也别想有documents。反正一团糟。哈哈。反正所有东西都是3、4年前那一套。</p>
<p>那我就慢慢来好了，我不急，急不来，自己好好规划规划就可以了。</p>
<p>来到这个公司，有几个特点。</p>
<p>优点：公司有自己目前主营业务。新来了个小哥php 、规范等和自己有共同语言，产品负责人和c 哥很像。多年产品人，设计，游戏设计。新来的那个小哥也做白鹭游戏，这个是我想要的。之后可能也会分配做些游戏。老板似乎是宁波人，公司方面也有和宁波政府合作。这个和我也有点想去宁波发展发展有点好处。额，还可以还可以。</p>
<p>缺点：确实没有粉粉明面上的热闹，进来之后感觉我有点无足轻重。技术垃圾到极点（目前都走光了，剩下产品大哥-长得有点像‘无所谓’的杨坤，和php 小哥）。老板性格、说话有点像干辉，哈哈。老板一点都不懂技术，但是比较会被技术说的云里雾里，然后似懂非懂。老板管理上不咋滴的。</p>
<p>好吧，吐槽吐槽就到这里了。不多说，溜了溜了。</p>
<h3 id="UICollectionView-addSubviews-UIView-内部有autolayout-CollectionView-视觉出bug"><a href="#UICollectionView-addSubviews-UIView-内部有autolayout-CollectionView-视觉出bug" class="headerlink" title="UICollectionView addSubviews UIView 内部有autolayout CollectionView 视觉出bug"></a>UICollectionView addSubviews UIView 内部有autolayout CollectionView 视觉出bug</h3><p>错误确定为：<br>CollectionView addSubviews 里面不能存在内部有约束的UIView。<br>否则其直接导致CollectionView 内部结构、内部约束直接紊乱。<br>其上的新增detailInfoview 有两种方法可以处理<br>1：如同当前新建view 处理，内部全部为frame 布局。目前来看似乎还不错<br>2：在CollectionViewLayout 上多流出来一个layoutAttributes，给第一个，然后frame 由代理DataSource 从controller 得到。这样等于得到一个特定cell</p>
<h3 id="Xcode-插件还能用"><a href="#Xcode-插件还能用" class="headerlink" title="Xcode 插件还能用"></a>Xcode 插件还能用</h3><p>curl -fsSL <a href="https://raw.github.com/alcatraz/Alcatraz/master/Scripts/install.sh" target="_blank" rel="noopener">https://raw.github.com/alcatraz/Alcatraz/master/Scripts/install.sh</a> | sh<br>但是提示 <strong>xcrun: error: unable to find utility “xcodebuild”, not a developer tool or in PATH</strong></p>
<p><a href="https://www.jianshu.com/p/ff1d99fe1d17" target="_blank" rel="noopener">https://www.jianshu.com/p/ff1d99fe1d17</a></p>
<p>opened Xcode.<br>Preferences<br>Locations<br>Selected the Command Lin Tools: (选择xcode版本)</p>
<p>-&gt; <strong>Alcatraz successfully installed!!1!🍻  Please restart your Xcode (9.4).</strong></p>
<p>然后解决Xcode 8 之后不能使用Alcatraz</p>
<p><a href="https://www.jianshu.com/p/0b541f145a1a" target="_blank" rel="noopener">https://www.jianshu.com/p/0b541f145a1a</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ sudo gem install update_xcode_plugins</span><br><span class="line">$ update_xcode_plugins</span><br><span class="line">$ update_xcode_plugins --unsign</span><br></pre></td></tr></table></figure>
<p><strong>Choose which Xcode you would like to unsign (use arrows): Xcode (9.1) [Signed]: /Applications/Xcode.app</strong><br><code>$ Y</code></p>
<p>似乎出现了Xcode 关闭之后，再打开，PackageManager 不见了。<br>解决请参考：</p>
<p><a href="https://www.jianshu.com/p/a9448154c09e" target="_blank" rel="noopener">https://www.jianshu.com/p/a9448154c09e</a></p>
<p>之后确实都出来了，不知是否这个原因</p>
<h3 id="iOS-转场动画"><a href="#iOS-转场动画" class="headerlink" title="iOS 转场动画"></a>iOS 转场动画</h3><p>很久没有做转场动画了。这里把遇到的坑填一填。</p>
<h3 id="如果程序中改变了某个空间的transform-不要使用frame；视觉bug-是其会变成CGRectZero"><a href="#如果程序中改变了某个空间的transform-不要使用frame；视觉bug-是其会变成CGRectZero" class="headerlink" title="如果程序中改变了某个空间的transform 不要使用frame；视觉bug 是其会变成CGRectZero"></a>如果程序中改变了某个空间的transform 不要使用frame；视觉bug 是其会变成CGRectZero</h3><p><a href="https://www.jianshu.com/p/9dfd337e8266" target="_blank" rel="noopener">https://www.jianshu.com/p/9dfd337e8266</a><br>应该使用bounds+center</p>
<h3 id="iOS-某个VC-rotation-还有statusBar-状态"><a href="#iOS-某个VC-rotation-还有statusBar-状态" class="headerlink" title="iOS 某个VC rotation 还有statusBar 状态"></a>iOS 某个VC rotation 还有statusBar 状态</h3><p>//<a href="http://www.jianshu.com/p/4196d7cf95f4" target="_blank" rel="noopener">http://www.jianshu.com/p/4196d7cf95f4</a><br>BaseNavigationViewController:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">/*顶部状态栏 接下来会调用该viewController 的</span><br><span class="line">- (BOOL)prefersStatusBarHidden &#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line">- (UIStatusBarStyle)preferredStatusBarStyle &#123;</span><br><span class="line">    return UIStatusBarStyleLightContent;</span><br><span class="line">&#125;</span><br><span class="line">*/</span><br><span class="line">-(UIViewController *)childViewControllerForStatusBarStyle&#123;</span><br><span class="line">    return self.topViewController;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>程序默认为<strong>UIInterfaceOrientationMaskPortrait</strong><br>那么在BaseNavigationViewControlelr<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-(UIInterfaceOrientationMask)supportedInterfaceOrientations&#123;</span><br><span class="line">    return UIInterfaceOrientationMaskPortrait;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>在需要的ViewController加入：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">- (BOOL)shouldAutorotate &#123;</span><br><span class="line">    return !self.isLocked;</span><br><span class="line">&#125;</span><br><span class="line">//这个比较重要。这里告诉了system 当前到底支持哪些种旋转方式</span><br><span class="line">- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123;</span><br><span class="line">    if (self.isLocked) &#123;</span><br><span class="line">        return UIInterfaceOrientationMaskPortrait;</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        return UIInterfaceOrientationMaskPortrait|</span><br><span class="line">            UIInterfaceOrientationMaskLandscapeLeft|</span><br><span class="line">            UIInterfaceOrientationMaskLandscapeRight;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation</span><br><span class="line">&#123;</span><br><span class="line">    if (self.isLocked) &#123;</span><br><span class="line">        return toInterfaceOrientation = UIInterfaceOrientationPortrait;</span><br><span class="line">    &#125;else&#123;</span><br><span class="line">        return YES;</span><br><span class="line">    &#125;</span><br><span class="line">    return (toInterfaceOrientation == UIInterfaceOrientationPortrait);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>以上即可在相关view 里面控制rotate。</p>
<h3 id="最近老婆看电视剧太多又说不看了，我想到的是，又一个新的轮回开始了"><a href="#最近老婆看电视剧太多又说不看了，我想到的是，又一个新的轮回开始了" class="headerlink" title="最近老婆看电视剧太多又说不看了，我想到的是，又一个新的轮回开始了"></a>最近老婆看电视剧太多又说不看了，我想到的是，又一个新的轮回开始了</h3><p>2018/7/9<br>她说看太多不想看了。那我们来预测一下接下来她会怎么做，然后每天记录她当天的态度。</p>
<p>什么是新的轮回？那就是，难受，不看电视剧，所以连同什么综艺节目（跑男、唱歌的、宝宝剧场）都不会看。当然，对于黄妈肯定是一开始很义正言辞的。<br>于是最近的3天到5天（最长5天，不可能超过5天，这也要考虑进去周末休息日）她一天比一天难受。很想看，但是又还记得刚说过的话。<br>下一个阶段是工作回来太累了，回到家不知道干什么，毕竟工作属于需要静下心来的；于是她就花点时间做菜，做好吃的。这阶段属于过渡期，这几天饭菜之类的都会可口一些吧。<br>当然过渡期不能称为阶段，因为这很短，大约2天~3天。期间还会有不应期，菜饭做好吃好，不想写东西，又睡不着，此时还不能看任何视频，这就难受了。于是就趴在床上看淘宝。<br>腐女嘛，不是看视频就是看淘宝，看淘宝还不买的那种，因为她知道她没钱。我要是店主，我肯定不开淘宝店了。页面统计数据挺好看的，就是没人买-&gt;都是她这种小妮子光看不买系列。<br>下一个阶段就是有些忘记之前说过的话啦，没全忘记那种。在一起吃饭时，她会嘿嘿嘿的偷笑，拿出iPad，怼到我面前，就像是我们一起看，看综艺节目（当前还不敢看电视剧的）。看着看着，然后又趴到床上看淘宝。<br>接下来的2~3天左右就会发现她捧着iPad在床上看看综艺节目演变成偷偷看韩剧，这时回头看她，她是带着耳机的，时不时偷笑；说她的时候，她就会不好意思，然后又继续看，有时也会放下。此时她的睡眠也不会熬夜。<br>其实这阶段还属于偷偷看。不敢光明正大看，也不能不看，估计不看的话，会，会，会坏掉的。<br>再接下来，有两个阶段，可以合并为一个。<br>先是吃饭的时候看韩剧，一起看一起看（说实话，那些逗逼韩剧那么多人看，我都想转行拍片了，没技术没含量没思想）。然后就是，自己一个人在后面，边吃零食、边看电视剧啦。<br>快乐的一个人看电视剧，手边总有吃的。因为没有吃的，她会把吃的扒拉过来放在身边，没吃嗑一点。</p>
<p>实际：<br>第1~3天（7月9号为第1天）：<br>第1天：<br>第1天晚上回去，一菜一汤。然后屁颠屁颠坐下来看看weex。由于立马不看电视剧，接口看了下QQ，点开了QQ空间，里面看了好一会视频。看到我喝酒，怕被我打，赶紧不看了。<br>接着又看了会weex，手机上开发者页面，这么小屏幕，肯定看不下去，于是东搞搞西搞搞，这晚就过去了。<br>比较关键的是，她自己不能看视频，还不让我打游戏，，，这神逻辑。我又没说我不打游戏。我打游戏休闲娱乐，她居然也不让我看。哈哈。<br>第2天：<br>第2天晚上回去，进门就看到她开始看综艺节目啦。看来之前多次轮循，现在比较明目张胆了。我一说之后，马上收起来，屁颠屁颠去拿饭吃了。<br>今天晚上她身体不舒服，搞七搞八，视频又不能看，于是吃完饭差不多9点多了，就自己睡着了。<br>第3天：<br>第3天晚上回去，你懂得，饭也没煮，一开门就看到她在那看电视剧了。<br>嘿，这个转换的快啊。她赶紧收起来，然后不好意思屁颠屁颠去给我热粥。我吃饭时，让她做code review。那个脾气倔的，嘴巴都嘟起来，一直抠脚。我的天，不过是聊聊天而已，说实话，心里有点晦气-&gt;什么鬼。<br>然后她跑上床，又开始看起来了。我说了三次她才停下来，厉害厉害。</p>
<p>第3天之后我就不必再写了，这人没救了。丢阿黄一个人在家，自己整天整夜看电视剧，沉迷的很。<br>最近工作也是不顺，整天还这么沉迷，“还一点点没看完，就快看完了”。<br>整天说，不准再打这么多游戏了；多写东西，别老打游戏；还撇着嘴，埋怨我整天打游戏。<br>我的天，我都很少打游戏好吧。<br>我打游戏有准则，她看视频都是没有限度的。她视电视剧犹如猛兽，所以老是说不看了，然而还是沉迷不止。<br>我觉得游戏是休闲，是比赛，我不觉得打游戏如何堕落。<br>她这简直是找抽。</p>
<h3 id="申明init-入口"><a href="#申明init-入口" class="headerlink" title="申明init 入口"></a>申明init 入口</h3><p>申明initWithURL:(id)xx 入口有两种方法。<br>1: initWithURL:(id)xx NS_DESIGNATED_INITIALIZER;使用宏提示其为为设计入口。<br>这时会出现：<br><!--https://blog.csdn.net/zcube/article/details/51657417--><br>如果用了NS_DESIGNATED_INITIALIZER，那么警告中出现init还是initWithNibName或是其它，取决于你的继承的父类类型：</p>
<p>UIViewController</p>
<p>Method override for the designated initializer of the superclass ‘-initWithNibName:bundle:’ not found<br>Method override for the designated initializer of the superclass ‘-initWithCoder:’ not found<br>UIView</p>
<p>Method override for the designated initializer of the superclass ‘-initWithFrame:’ not found<br>Method override for the designated initializer of the superclass ‘-initWithCoder:’ not found<br>NSObject</p>
<p>Method override for the designated initializer of the superclass ‘-init’ not found</p>
<p>那么就实现比如UIView 的<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- (instanceType)initWithFrame:(CGRect)frame &#123;return [self initWithURL:nil];&#125;</span><br><span class="line">- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;return [self initWithURL:nil];&#125;</span><br></pre></td></tr></table></figure></p>
<p>2: 把其他的入口设置为NS_UNAVAILABLE</p>
<h3 id="这几天上传两个APP-收到2-1-拒绝大礼包"><a href="#这几天上传两个APP-收到2-1-拒绝大礼包" class="headerlink" title="这几天上传两个APP 收到2.1 拒绝大礼包"></a>这几天上传两个APP 收到2.1 拒绝大礼包</h3><ol>
<li>首先是我写的一个房产计算器的项目。<br>一开始是因为在标题里面有<strong>免费</strong>的字样，去掉之后就出来2.1 大礼包了。<br>2.1 礼包说我这可能有隐藏功能、有贷款方面东西。</li>
</ol>
<p>我回复邮件说，我这绝对没有隐藏功能，也没有贷款方面的东西。因为觉得世面上的不好用、广告太多等，所以做了个这个功能。这个功能也是自主研发的，不是市面上的抄袭品。</p>
<ol start="2">
<li>还有一个涂色的项目。<br>上来直接就是2.1 大礼包。<br>我猜测原因是我展示页面出现<strong>免费</strong>字样，引导了用户。还有就是可能有隐藏功能。</li>
</ol>
<p>目前这两个项目我都做了广告，所以也不具备广告功能。我回复涂色项目的，我们没有隐藏功能，免费是因为素材时设计师们的心血，但是为了分享这份灵感，所以使用免费，但是绝没有付费，更不用说，除苹果外的第三方付费了。<br>免费同时也因为市面上其他APP 都是要付费的，我们就专打免费策略。最后，我们删除了展示页面的那张带有<strong>免费</strong>字样的图片。 </p>
<p>最后再说一句：如果是原数据被拒绝，同时你认为不必要上传新的二进制，你就直接回复该邮件。<br>然后静静等待，不需要点击#提交以供审核#。如果点了，那么相当于重新审核，可能会等待7~8天。<br>相关帖子：<a href="http://www.cocoachina.com/bbs/read.php?tid-298671-page-1.html" target="_blank" rel="noopener">http://www.cocoachina.com/bbs/read.php?tid-298671-page-1.html</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2018-5-9lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/05/20/2018-5-9lesson/">2018-5-9lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/05/20/2018-5-9lesson/" class="article-date">
	  <time datetime="2018-05-20T03:25:52.000Z" itemprop="datePublished">May 20, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2018/04/23</p>
<h3 id="Clang-Attributes-黑魔法小记"><a href="#Clang-Attributes-黑魔法小记" class="headerlink" title="Clang Attributes 黑魔法小记"></a>Clang Attributes 黑魔法小记</h3><p><a href="http://blog.sunnyxx.com/2016/05/14/clang-attributes/#objc_requires_super" target="_blank" rel="noopener">http://blog.sunnyxx.com/2016/05/14/clang-attributes/#objc_requires_super</a></p>
<p>objc_subclassing_restricted</p>
<p>objc_requires_super</p>
<p>objc_boxable</p>
<p>constructor/desctructor</p>
<p>objc_runtime_name</p>
<h3 id="Mac-启动服务配置"><a href="#Mac-启动服务配置" class="headerlink" title="Mac 启动服务配置"></a>Mac 启动服务配置</h3><p>redis<br>start: redis-server /usr/local/etc/redis.conf<br>stop:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps axu|grep redis  ## 查找redis-server的PID</span><br><span class="line">kill -9 PID</span><br></pre></td></tr></table></figure>
<p>mysql<br>start<br>mysql-server start</p>
<h3 id="2018-05-07交涉"><a href="#2018-05-07交涉" class="headerlink" title="2018/05/07交涉"></a>2018/05/07交涉</h3><p>2017年2月来到粉粉，一开始一直学习进阶姿态。当时c哥来了不久，要成立一个海外团队。当时的人选是LPD(我猜的，毕竟我刚来不太久5月，而LPD 刚好在那个时候选择了回家发展)，后来大师、我、c哥去小会议室说明了计划，任务。<br>我在6、7月份的时候开始和c哥合作，为了合作更愉快，c哥甚至于搬到我位置边。那个时候我只想着更好的处理，学习，进阶，发展。是的，那个时候和他合作的一款绘图，简直让我开心不已，我和他不断交谈，不断完善。后来正要开始一款记账软件的时候，老板也已经没有耐心：没有产品思维，没有变现途径，当断则断的砍掉了该业务。当时我iOS、一个安卓、一个实习编辑(他的口头禅：原来是你小子，把皇君给我的好吃都给吃了回扣了)、c哥就此分开。实习编辑直接辞职；c哥也还想挽回一些结果，但还是回天乏力，于是也选择了离开；我和安卓又回到了之前的岗位了(好奇，我们居然不开掉了？虽然工资一年来没有变化，但是实力绝对学够了，幸好当时没离开，学到就是值);<br>c哥离开前给了我份设计稿，一种MetaBall 的设计记账软件。当时我花了九牛二虎之力，万分努力打磨出来。核心物件出来了，我们又继续打磨产品，打磨整个工程。一开始上线是在c哥账号，叫”Drop”， 后改名叫”小池记账”，再后来改名叫”小泉记账”；<br>真正的问题开始在2018年1月左右。<br>c哥打算喊我去他们公司开发。我心里思考是，如果我去了，按照c哥性格，我估计工资高不到哪去，肯定说什么创业啦，不要在意这么多啦，好好完成功能等等等；学的东西肯定也是不够的。<br>于是c哥说，能把源码给到他们。他的承诺是3个月10w 量，给我3w(我和他一人一半，算是6w)；我不看重这个，这个不是买断，也不是完全合作，我源码一给，相当于我没有任何有利地位了。最终做法：我同意3个月给他尝试，源码给他(核心效果代码做静态库处理，就这他还想要源码，说他们员工很轴，估计当时他就像独吞全部成果吧)，2500给我(相当于5000两人，我做事公平)；<br>我们当时有一款矢量图软件，我有“商店”，但是素材商品快速制作在于c哥手，直到2018年5月终于得到该技术，也就是2018年5月5日周六我前往他们公司，然后c哥终于回忆起来制作历程交付与我(其实教程我之前有一份不完整的，要提交给公司的，但是谁也看不懂，做不出来)。同时作为回馈，我给他们公司员工做一下技术指导，指导过程发现，他们公司的其他好几款其他APP，比如“Uki”，还有其他APP的核心代码都从我那份拷贝得来。这是技术流失。<br>然后如标题，2018年5月7号周一，我与c哥交涉“drop”下一步合作事宜，这天离当时已经有4月多之久(当时的考虑就是还没得到制作画画素材技术，不谈论该话题)；<br>当时我问这个话题的时候，他以为我要3w 的承诺；我说我知道没有10w 的量，但是3个月已过，接下来怎么继续合作；他还说接下来10w 日货，还是承诺2w；兄得，如果把所以权，都给你，就跟我没什么事一样了，拿到我所有源码就这么为所欲为么？那要这么说，我来替你运营，日活10个人，我给你1千万；那些没有意义的承诺。<br>我的字典里一直有句话：</p>
<blockquote>
<p>不要跟比自己境况差的人，讨价还价<br>更不要跟比自己有钱的人，抢着买单</p>
</blockquote>
<p>能让则让，小弟这么拼命给你干活，你就拿到我源码就“你要介意的话，我们下一版代码会重新写”；我的意思很简单，商业利益失败，朋友还要交的，c哥接下来一句“包括涂色的布局ui也不要用我的设计，既然在意就说清楚，大家都有知识产权对吧”，直接挑明了朋友都没得做。那算了，说明我的意义就这么大，就是那个有静态库的源码的价值。<br>行行行，你是项目负责人，全是你的成就。我啥都没有起到作用，毕竟代码书写被你改了嘛。<br>后来的几天，我全力工作，优化那个涂色项目。接下来其实我完全可以就这么卖了“drop”源码，或者开源了，反正对我意义不大，我的能力不是只有drop。得了芝麻“有静态库的源码”丢了西瓜。<br>之前这么崇拜你的我，也算清醒。我觉得我不太吃亏。对我来说，重要的是涂色项目，一个完整生态，商品和商店，而且可以量产。<br>其实回顾来说，我觉得做人真不必如此，你的钱是我10倍多，我连午饭都要去很远很远的食堂，晚饭省钱饿着回家吃的我，都不舍得花钱，有孩子要养，最近又有买房需求，再说，涂色素材技术本应回交公司，我当时还特意解决了c哥公司很多重大崩溃技术，我觉得您真不必如此。<br>最后一次尊重。您高升就好。“drop”我会留下自己开发，不然对你们公司肯定是致命的，毕竟全公司都花时间搞那个了，我公开出去，或者自己搞个差不多的，我的功能肯定比你多，开发比你快、稳定，然后就跟着你的ISO，蹭你们热量，你们会白做的！<br>接下来我继续加油，避开他以前的设计范畴，一些以前我也参与的设计我就不必客气，这不全是你的功劳，不全是你的成就。都是一起探讨出来的，当时我的努力，我身后要保护的人，都提醒我，该客气时客气，该凶时就该认真对待了！<br>之前去他们公司，看他们的代码，确实，一个成功的产品，开发的人还是很重要的。代码规范，模块划分。我猜想，c哥现在公司应该开不久，或者说开不大。<br>前几天开了些文章，他国对中国封锁核弹、氢弹技术，中国克服困难做出来了；他国对中国封锁航天技术，中国又突出重围。我想我也正需要这股拼劲。这几天硬着头皮，老婆小小的学了把一个方便设计的软件，我自己搞了搞ps，把开源的声音、字体、图片等都找全；<br>给自己软件做东西，你会发现，你总是这个做简单点，那个可以省略就省略吧。于是做的总是自己都不满意。回头想想，你给公司做的时候你会这样么？你肯定是硬着头皮也要搞出来，能搞出来的就搞得更好那种。<br>你要的是，把做公司的那种态度用到写自己的上面，同时，规划好时间，集中精力攻破难关。<br>这次学到的东西也很多很多，同时也警醒自己，有些事情一定要思考思考在思考，一定不能出大错。这次错误，算是损失，但是很能忍。<br>毕竟也学了那么多，同时还长进了这么多。<br>应该应该的，小弟就该吃糠，小弟家人就是垃圾，不应该有这么多思想，不应该要求这么多。<br>timestamp: 2018/5/9 田小新</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2018-04-22lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/04/22/2018-04-22lesson/">2018-04-22lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/04/22/2018-04-22lesson/" class="article-date">
	  <time datetime="2018-04-22T14:51:41.000Z" itemprop="datePublished">April 22, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2018/03/14</p>
<h3 id="公司引入零食架，却得”破损率”一说"><a href="#公司引入零食架，却得”破损率”一说" class="headerlink" title="公司引入零食架，却得”破损率”一说"></a>公司引入零食架，却得”破损率”一说</h3><p>听到#破损率#这事情，这种说法，我不能接受。<br>作为企业员工，我不觉得该事件缘由仅因为该无由头的数据，然后单方面说退出，然后就过去了。<br>我坐在公司，我作为公司一份子，和大家相处，我不觉得#破损率# === #物品丢盗#!!!<br>或许#破埙率#没有直接了当说明其 === #物品丢盗#，但是各位同事心中其实已经对其隐喻画上等号。</p>
<ol>
<li>“破损率”由总量和当前剩余量以及所得量(金额 以下称“所得金”)有关。</li>
<li>总量由该公司清点，当前剩余量也由该公司清点</li>
<li>所得金数据也由该公司清点。</li>
</ol>
<p>商品购买模式：<br>购买者在商品架直接挑选；<br>微信网页内购买，选中相应商品、数量。付款。</p>
<p>购买操作复杂，且可能多操作和误操作等无法模拟数据对等情况。<br>对于用户而言，如果卖方没能提供舒适操作，而且没有更多措施防止其己身损失，我想这不是用户的错，这是人的错，或者是，该种买卖信用机制是有问题的。<br>这种将一切信任丢给用户，如果该企业勘察数据到一定量就提出“破损率” 超过xxx，然后退出、无其他正确发言。我觉得一开始就应该提出有这种“商业模式”，或者称“全靠用户信用交易模式”。即使“破损率”接受范围为99%，我觉得该破损情况都有可能变为100%。<br>中间有太多的突破和漏洞:</p>
<ol>
<li>该企业下单，指定数量、种类、时间等到相应公司；</li>
<li>相关商品从仓库到达指定销售架；</li>
<li>商品从开始卖，隔数天就有人抽查；</li>
<li>清点“破损率”</li>
</ol>
<p>以上的2、3、4点都有可能有问题。<br>“三方”：买方、物品运送过程、清点过程人员以及购买页面的操作方。</p>
<p>对于一个无法真正确定是否购买，购买流程是否是闭环，那么就会出现其他流程可以做手脚的机会。因为即使做手脚也可能说“破损率”。<br>那么多的疑点，却全由“破损率”，也即我所在公司内部员工心中已有的定义#物品丢盗# 承担。我没有说是否引进这种便捷小零食商架带来的更多的便利，但带来的负面影响却对公司内部营造的团结、互助、信任带来损害。</p>
<p>综上所述，我不能接受“破损率”一说。</p>
<h3 id="coreData中integer16-integer32-integer64的区别"><a href="#coreData中integer16-integer32-integer64的区别" class="headerlink" title="coreData中integer16,integer32,integer64的区别"></a>coreData中integer16,integer32,integer64的区别</h3><p>摘抄自: <a href="http://blog.csdn.net/juyufeng_huazhu/article/details/50239699" target="_blank" rel="noopener">http://blog.csdn.net/juyufeng_huazhu/article/details/50239699</a><br>Integer 16 can have minimum value of -32,768 to 32,767<br>Integer 32 can have minimum value of -2,147,483,648 to 2,147,483,647<br>Integer 64 can have minimum value of -very large to very large</p>
<h3 id="在viewDidLoad处理完的200ms-如果获取得到数据-那么用户将会无感空白过程"><a href="#在viewDidLoad处理完的200ms-如果获取得到数据-那么用户将会无感空白过程" class="headerlink" title="在viewDidLoad处理完的200ms 如果获取得到数据 那么用户将会无感空白过程"></a>在viewDidLoad处理完的200ms 如果获取得到数据 那么用户将会无感空白过程</h3><h3 id="Redis-在线尝试"><a href="#Redis-在线尝试" class="headerlink" title="Redis 在线尝试"></a>Redis 在线尝试</h3><p><a href="http://try.redis.io/" target="_blank" rel="noopener">http://try.redis.io/</a></p>
<h3 id="MAC-查看端口占用"><a href="#MAC-查看端口占用" class="headerlink" title="MAC 查看端口占用"></a>MAC 查看端口占用</h3><p>命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">lsof -i tcp:port （list open files）</span><br><span class="line">KILL port</span><br></pre></td></tr></table></figure>
<p>（port替换成端口号，比如6379）可以查看该端口被什么程序占用，并显示PID，方便KILL</p>
<h3 id="React-CSS-布局"><a href="#React-CSS-布局" class="headerlink" title="React CSS 布局"></a>React CSS 布局</h3><p>父容器的style 需要使用flex 魔盒布局时，是要添加display: flex<br>原因是其默认是display: block<br>最终如 :<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">.row1 &#123;</span><br><span class="line">    padding: 30px;</span><br><span class="line">    /* align-content: space-around; */</span><br><span class="line">    flex-direction: row;</span><br><span class="line">    background-color: blue;</span><br><span class="line">    #display: flex#</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="运行麒麟子工程代码"><a href="#运行麒麟子工程代码" class="headerlink" title="运行麒麟子工程代码"></a>运行麒麟子工程代码</h3><p>server 有个start_all_mac.sh 的python 脚本，直接开三个terminal 运行各个句子, 注意点：启动顺序是:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">node ./hall_server/app.js ../configs_mac.js</span><br><span class="line">node ./account_server/app.js ../configs_mac.js</span><br><span class="line">node ./game_server/app.js ../configs_mac.js</span><br></pre></td></tr></table></figure>
<p>先开启hall 然后account, 然后game, 不然报错;<br>client 使用scenes：start.scene; 当前CocoaCreator v：1.8; 在运行时出现loadResource 方法找不到：直接注释，直接进入loadScene；<br>浏览器比如： localhost:5876?account=xxx;<br>置顶不同的account 即可debug 测试</p>
<h3 id="pod-更新出错。重点是brew-link-libyaml"><a href="#pod-更新出错。重点是brew-link-libyaml" class="headerlink" title="pod 更新出错。重点是brew link libyaml"></a>pod 更新出错。重点是brew link libyaml</h3><p><a href="https://stackoverflow.com/questions/9434002/how-to-solve-ruby-installation-is-missing-psych-error" target="_blank" rel="noopener">https://stackoverflow.com/questions/9434002/how-to-solve-ruby-installation-is-missing-psych-error</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ brew doctor</span><br><span class="line">$ brew link libyaml</span><br></pre></td></tr></table></figure>
<h3 id="cocoapod-更新极其缓慢，翻墙还是慢"><a href="#cocoapod-更新极其缓慢，翻墙还是慢" class="headerlink" title="cocoapod 更新极其缓慢，翻墙还是慢"></a>cocoapod 更新极其缓慢，翻墙还是慢</h3><p>翻墙可以连接外网了，但是还是很慢。按理不会的，但是原因却在于：翻墙时，浏览器proxy 地址改过，但是terminal 却没有改动，相当于没有翻墙。<br><a href="http://lovean.net/?id=185" target="_blank" rel="noopener">http://lovean.net/?id=185</a><br>使用#export  ALL_PROXY=socks5://127.0.0.1:1080# 将所有proxy 改为该端口，这是翻墙，就非常快了。<br>使用#curl -i <a href="http://ip.cn#" target="_blank" rel="noopener">http://ip.cn#</a> 可以查看当前外网地址看是否翻墙成功</p>
<h3 id="同源策略、跨域解决方案"><a href="#同源策略、跨域解决方案" class="headerlink" title="同源策略、跨域解决方案"></a>同源策略、跨域解决方案</h3><p><a href="https://www.cnblogs.com/rockmadman/p/6836834.html" target="_blank" rel="noopener">https://www.cnblogs.com/rockmadman/p/6836834.html</a></p>
<h3 id="自己的centos-操作"><a href="#自己的centos-操作" class="headerlink" title="自己的centos 操作"></a>自己的centos 操作</h3><p>查看redis在哪个processID<br>ps -ef |grep redis</p>
<p>redis<br>/etc/redis-4.09<br>配置：redis.conf<br>    daemonize no<br>protected-mode yes<br>启动和关闭：<br>                /src<br>                    ./redis-server ../redis.conf     启动redis<br>                    ./redis-cli shutdown        关闭redis</p>
<p>mysql开启<br>service mysqld start</p>
<p>git download nvm<br>nvm conf 配置:<br>vim ~/.bashrc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#nvm</span><br><span class="line">export NVM_DIR=&quot;/root/GIT/nvm/&quot;</span><br><span class="line">source &quot;$NVM_DIR/nvm.sh&quot;</span><br></pre></td></tr></table></figure></p>
<p>保存之后<br>source ~/.bashrc（修改也需要重启）<br>PATH 和 source ./<br>nvm use 8.11.1<br>这样就可以使用8.11.1 版本的node<br>node -v<br>npm -v</p>
<p>terminal<br>查找某个文件<br>whereis nginx</p>
<p>cd nginx<br>配置<br>$vim conf/nginx.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 末尾括号外面加上下面这一行</span><br><span class="line">include ./vhost/*.conf;</span><br></pre></td></tr></table></figure></p>
<p>创建vhost/<a href="http://www.lsgood.top.conf" target="_blank" rel="noopener">www.lsgood.top.conf</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">	server</span><br><span class="line">	&#123;</span><br><span class="line">		listen 80;	//通用80端口</span><br><span class="line">		server_name lsgood.top;</span><br><span class="line">		root /root/Blog;	//声明目录</span><br><span class="line">		index index.html;	//html 目录</span><br><span class="line">		location / &#123;	//这个很重要</span><br><span class="line">			proxy_set_header Host $host;</span><br><span class="line">		proxy_set_header x-real-ip $remote_addr;</span><br><span class="line">		proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;</span><br><span class="line">		proxy_pass http://127.0.0.1:3000/;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后./nginx/sbin/nginx -t</p>
<p>启动nginx :<br>[root nginx] $./sbin/nginx<br>[root nginx] $./sbin/nginx -c ./conf/nginx.conf<br>reload stop nginx :<br>[root nginx] $./sbin/nginx -s reload/stop</p>
<p>查看启动服务<br>netstat -nltp<br>查看所有进程<br>ps -ef<br>ps -ef |grep mysql/redis/node/nginx</p>
<p>修改host<br>vim /etc/hosts<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1 lsgood.top</span><br></pre></td></tr></table></figure></p>
<p>然后ping lsgood.top</p>
<p>curl <a href="http://lsgood.top" target="_blank" rel="noopener">http://lsgood.top</a><br>curl 127.0.0.1:3000</p>
<p>腾讯解析域名网站<br>DNSPOD</p>
<p>ll == ls -l<br>ls -a</p>
<p>填写nginx.conf<br>参照多个域名同时对应多个路径<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">#最下面添加如</span><br><span class="line">server </span><br><span class="line">&#123;</span><br><span class="line">	a.lsgood.top</span><br><span class="line">	location / &#123;</span><br><span class="line">		127.0.0.1:3000</span><br><span class="line">	&#125;</span><br><span class="line">	location /other0/ &#123;</span><br><span class="line">		127.0.0.1:3001</span><br><span class="line">	&#125;</span><br><span class="line">	location /other1/ &#123;</span><br><span class="line">		127.0.0.1:3002</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">server </span><br><span class="line">&#123;</span><br><span class="line">	b.lsgood.top</span><br><span class="line">	location / &#123;</span><br><span class="line">		127.0.0.1:7000</span><br><span class="line">	&#125;</span><br><span class="line">	location /other0/ &#123;</span><br><span class="line">		127.0.0.1:7001</span><br><span class="line">	&#125;</span><br><span class="line">	location /other1/ &#123;</span><br><span class="line">		127.0.0.1:7002</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>阿里云域名购买<br>/域名-解析<br>    /添加解析<br>        /主机记录选填 “*” 子域名前缀<br>        /记录值填写自己的主机IP, 如176.122.191.87</p>
<h3 id="我的服务器操作"><a href="#我的服务器操作" class="headerlink" title="我的服务器操作"></a>我的服务器操作</h3><pre><code>·    后台更换    完成
·    首页每次需要下载素材bug  完成
•    tabbar 栏目图片更换    完成
·    banner
·    section 栏目 完成50%    完成
</code></pre><p>查看redis在哪个processID<br>ps -ef |grep redis</p>
<p>redis<br>/etc/redis-4.09<br>配置：redis.conf<br>    daemonize no<br>protected-mode yes<br>启动和关闭：<br>                /src<br>                    ./redis-server ../redis.conf     启动redis<br>                    ./redis-cli shutdown        关闭redis</p>
<p>mysql开启<br>service mysqld start</p>
<p>git download nvm<br>nvm conf 配置:<br>vim ./.bashrc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">#nvm</span><br><span class="line">export NVM_DIR=&quot;/root/GIT/nvm/&quot;</span><br><span class="line">source &quot;$NVM_DIR/nvm.sh&quot;</span><br></pre></td></tr></table></figure></p>
<p>保存之后<br>source ~/.bashrc（修改也需要重启）<br>PATH 和 source ./<br>nvm use 8.11.1<br>这样就可以使用8.11.1 版本的node<br>node -v<br>npm -v</p>
<p>terminal<br>查找某个文件<br>whereis nginx</p>
<p>cd nginx<br>配置<br>$vim conf/nginx.conf<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 末尾括号外面加上下面这一行</span><br><span class="line">include ./vhost/*.conf;</span><br></pre></td></tr></table></figure></p>
<p>创建vhost/<a href="http://www.lsgood.top.conf" target="_blank" rel="noopener">www.lsgood.top.conf</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">http</span><br><span class="line">&#123;</span><br><span class="line">server&#123;</span><br><span class="line">	listen 80;	//通用80端口</span><br><span class="line">	server_name lsgood.top;</span><br><span class="line">	root /root/Blog;	//声明目录</span><br><span class="line">	index index.html;	//html 目录</span><br><span class="line">	location / &#123;	//这个很重要</span><br><span class="line">		proxy_set_header Host $host;</span><br><span class="line">      proxy_set_header x-real-ip $remote_addr;</span><br><span class="line">      proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for;</span><br><span class="line">      proxy_pass http://127.0.0.1:3000/;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然后./nginx/sbin/nginx -t</p>
<p>启动nginx/sbin/nginx</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2018-3-3lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2018/03/04/2018-3-3lesson/">2018/3/4Lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2018/03/04/2018-3-3lesson/" class="article-date">
	  <time datetime="2018-03-04T13:48:44.000Z" itemprop="datePublished">March 4, 2018</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2017/10/12</p>
<h3 id="Xcode-9-beta-3-breaks-the-new-os-log-logger-883"><a href="#Xcode-9-beta-3-breaks-the-new-os-log-logger-883" class="headerlink" title="Xcode 9 beta 3 breaks the new os_log logger #883"></a>Xcode 9 beta 3 breaks the new os_log logger #883</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">if (message) &#123;</span><br><span class="line">        const char *msg = [message UTF8String];</span><br><span class="line">        switch (logMessage-&gt;_flag) &#123;</span><br><span class="line">            case DDLogFlagError     :</span><br><span class="line">                os_log_error(OS_LOG_DEFAULT, &quot;%s&quot;, msg);</span><br><span class="line">                break;</span><br><span class="line">            case DDLogFlagWarning   :</span><br><span class="line">            case DDLogFlagInfo      :</span><br><span class="line">                os_log_info(OS_LOG_DEFAULT, &quot;%s&quot;, msg);</span><br><span class="line">                break;</span><br><span class="line">            case DDLogFlagDebug     :</span><br><span class="line">            case DDLogFlagVerbose   :</span><br><span class="line">            default                 :</span><br><span class="line">                os_log_debug(OS_LOG_DEFAULT, &quot;%s&quot;, msg);</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="记一下昨晚2017-10-30-学习拆换苹果手机电池过程"><a href="#记一下昨晚2017-10-30-学习拆换苹果手机电池过程" class="headerlink" title="记一下昨晚2017/10/30 学习拆换苹果手机电池过程"></a>记一下昨晚2017/10/30 学习拆换苹果手机电池过程</h3><p>1：手机底部螺丝拧开<br>2：用提供的吸盘将屏幕吸起（可以用个牙签什么的顶住，然后一一打开）<br>3：将电池右下角的一个金属盖拧开，有两个螺丝<br>4：此时已经可以拔起该连接线<br>接下来几步是重点：<br>5：刮下电池底部膜，刮到出现白色黏条<br>6：白色黏条最重要！：慢慢把他抽出来。<br>总共左右两条黏条，千万不要抽断，不然要翘起电池，用牙签或其他方便工具卷着给他抽出来。<br>7：然后于是就把电池取出来了。<br>8：装上新电池，测试一下能不能成功开机。<br>9：买电池会送白色黏条。这时留一点在外面，白色黏条箭头在顶部。先把白色黏条黏在电池底部，然后黏在电池仓。<br>10：按着之前方式拧上螺丝，合上盖。<br>完成</p>
<h3 id="git-回退到本地commit的某个SHA-1"><a href="#git-回退到本地commit的某个SHA-1" class="headerlink" title="git 回退到本地commit的某个SHA-1"></a>git 回退到本地commit的某个SHA-1</h3><p>根据-–soft -–mixed -–hard，会对working tree和index和HEAD进行重置:<br>    git reset -–mixed：此为默认方式，不带任何参数的git reset，即时这种方式，它回退到某个版本，只保留源码，回退commit和index信息<br>    git reset -–soft：回退到某个版本，只回退了commit的信息，不会恢复到index file一级。如果还要提交，直接commit即可<br>    git reset -–hard：彻底回退到某个版本，本地的源码也会变为上一个版本的内容</p>
<p>例如：git reset –hard SHA-1   此时的SHA-1 可以使用sourcetree 查看；或者使用git log 也可查看到该SHA-1</p>
<h3 id="iOS-手机震动"><a href="#iOS-手机震动" class="headerlink" title="iOS 手机震动"></a>iOS 手机震动</h3><p>// 普通短震，3D Touch 中 Peek 震动反馈<br>AudioServicesPlaySystemSound(1519);</p>
<p>// 普通短震，3D Touch 中 Pop 震动反馈<br>AudioServicesPlaySystemSound(1520);</p>
<p>// 连续三次短震<br>AudioServicesPlaySystemSound(1521);</p>
<h3 id="这里记录一次昨天下午讨论团队职业规划过程及感悟"><a href="#这里记录一次昨天下午讨论团队职业规划过程及感悟" class="headerlink" title="这里记录一次昨天下午讨论团队职业规划过程及感悟"></a>这里记录一次昨天下午讨论团队职业规划过程及感悟</h3><p>既然是团队职业规划，那当时是要将团队提升作为目标。<br>个人升级是最重要，自己不升级，怎么有话题，如何跟别人谈共享、交流、提升？<br>OK，自己升级，学习完，交流，交流之中补足，这很好。<br>最近任务要稍微好些，比刚从海外团队回来时间要充沛一些。早上从10点开始搞，基本下午进度好，能在8点左右完成，回家。此时基本整个人再也不想看电脑屏幕了，我想吐~~~咦，你不是热爱写代码吗？我去你妈的热爱写代码，去你妈的热爱。热爱是建立的单纯的想写代码，当和职业挂钩，每天重重复复，去你妈的还能每时每刻保有最初的心。<br>接着回到家，嗯，团队升级嘛，但是自己还有挺多的事，比如我自己手上还有3、4个小玩意进度才开启；哦，我还没吃饭，世界最好吃的饭是陪家人，于是等老婆也累的半死回到家，俩人在21点到22：20之间吃完饭。这时心里有点空荡荡的，接下来的时间每天比例，一半休息掉（再嘴里吼着“不能浪费时间，学习工作”的，你把头伸过来，大哥给你看个宝贝），另一半写自己的小东西，探索道路。玩能到12点半，工作也能到12点半。<br>第二天早上来，把公司所为的“两小时一次记录工作了啥”的邮件发了。真不知道这“两小时”记录是什么鬼，写重复的也不是，但是不写，更不是，又是心里一句去他妈的, 当然知道这是上上上层安排的，对大师博士还是一如既往尊敬。<br>周六是单双休，周日是都有休息。周六当时的规定是到公司学习，补足，交流，如果工作有没完成的，可以完成。你懂得，工作太足，就怕你闲着，怕你闲出病到时按工伤就不好了，于是基本周六都是工作木有两样。之前我有过思路：如果早上把PPT 赶好，中午的时候和大家交流最近学习、工作进展。那这挺好。但是从来周六都是工作，嘿嘿，这理由真他妈给力。周六要不就是我单纯学习自己的小知识点，但是能拿来讲的没能汇聚，只能自己独自搞一些小工程进行最佳实践。所以大师那句，“都没见你分享几篇”，给蛋疼的，不是不想不愿，而是无时无力。<br>“时间是挤出来的”<br>谁谁谁，这句话谁说的，把头伸过来，我给他看个宝贝。<br>你有生活，我没有生活的啊？你每天都能跟狗一样学习，不知疲倦？每天还跟大学一般拼了这条狗命的？<br>是的，我工作时候用心，我特么在工作中确实拼了这条狗命。每天下班都是难得休息，难得让脑袋放空。<br>团队提升，团队职业规划。这些都是要建立良好的机制，良好的环境。我特么自己忙的死了，还要陪他们玩团队职业规划的游戏。<br>我曰。<br>每天自己加油了。只能自己Add Oil了。<br>之前也有几次，他们讲一些知识，我去学习听讲。如果有机会，我就只能当做code review 来跟进。这是最好的结果了。<br>当然，一切建立在，周六上午能空闲一下的基础上。</p>
<h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><p>1：由于用到贴图，网上寻觅不得.<br>只说 UIGraphicsBeginImageContext(&lt;#CGSize size#&gt;)-&gt;换成UIGraphicsBeginImageContextWithOptions(&lt;#CGSize size#&gt;,&lt;#Bool opaque#&gt;,&lt;#CGFloat scale#&gt;)<br>上面这句话是重点 scale是缩放因子，使用[UIScreen mainScreen].scale即可；<br>中间的opaque是识别里面有没有alpha通道，如果有通道则填入NO，相反的哦；<br>size则为你的图片的大小，比如上面一张大图，下面一张watermark，这size为大图的大小，毕竟大图在下面，第一个放入的； 这样子图片就会变为高清！！！没错，如果还没有变为高清，是有另一个原因的，那就是你的贴图不是@2x或者@3x的倍率，将其放入图片文件夹或者source，加入后缀，一定使用@3x，@2x也不怎么清晰！！！<br>最后一步才是本文重点.<br>网上没人说，自己尝试出来的</p>
<p>这一段是苹果私密api，用来找出Reveal的各个APP的bundleID，挺好用的<br>// Class<br>LSApplicationWorkspace_class = objc_getClass(“LSApplicationWorkspace”);<br>//<br>NSObject<em> workspace = [LSApplicationWorkspace_class performSelector:@selector(defaultWorkspace)];<br>//<br>NSArray </em>array = [workspace performSelector:@selector(allApplications)];<br>// id a = array[0];<br>//<br>NSLog(@”apps: %@”, [workspace performSelector:@selector(allApplications)]);</p>
<h3 id="ASOverLayoutSpec"><a href="#ASOverLayoutSpec" class="headerlink" title="ASOverLayoutSpec"></a>ASOverLayoutSpec</h3><p>这里用到ASStackLayoutSpec 布局。之前都是从上往下布局完，样式OK。<br>但是新的需求来了，要求在其上面加上一个蒙版：<br>布局，我使用ASBackgroundLayoutSpec child 是上面的蒙版；back 是之前的背景布局；<br>但是总是出现拉伸；<br>后来试试使用ASOverLayoutSpec 返回来，试图终于如愿了。</p>
<h3 id="最近在学习js"><a href="#最近在学习js" class="headerlink" title="最近在学习js"></a>最近在学习js</h3><p>看阮一峰的文章ing…<br>从其早期JavaScript 文章往现在的时间线看。边看边敲command+shift+i<br>看廖雪峰JavaScript 文章</p>
<h3 id="scrollView-contentSize"><a href="#scrollView-contentSize" class="headerlink" title="scrollView.contentSize"></a>scrollView.contentSize</h3><p>如果scrollView 不想上下出现拉动bug，将contentSize.height 设为0；否则contentSize.width 设为0；会默认设置为等大小试图</p>
<h3 id="2018-1-10打包静态库-包含第三方库"><a href="#2018-1-10打包静态库-包含第三方库" class="headerlink" title="2018/1/10打包静态库(包含第三方库)"></a>2018/1/10打包静态库(包含第三方库)</h3><p><a href="https://www.jianshu.com/p/155a3cfb765e?utm_campaign=hugo" target="_blank" rel="noopener">https://www.jianshu.com/p/155a3cfb765e?utm_campaign=hugo</a><br><a href="https://www.jianshu.com/p/13bf46df9387" target="_blank" rel="noopener">https://www.jianshu.com/p/13bf46df9387</a><br>1：此处注意一点：需要输出包含有第三方的静态库，那么直接在拖进控件的时候不要选择”add to target”;<br>2：在Build Phrase 的compile Source 确认需要到处的多少个类<br>3：设置适配所有模拟器架构 project -&gt; buildSeting -&gt; Build Active Architecture Only 设为NO<br>以上两个目录把所有需要打包静态库的步骤和所需操作都罗列了。</p>
<h3 id="创建podSpec"><a href="#创建podSpec" class="headerlink" title="创建podSpec"></a>创建podSpec</h3><p><a href="https://www.jianshu.com/p/d7d1942dd3f1" target="_blank" rel="noopener">https://www.jianshu.com/p/d7d1942dd3f1</a><br>此处source 需要把目录改为对应目录。比如里面的文件夹需要/xxx/$.h/m</p>
<h3 id="记录一次粉粉匿名做动画CAAnimation-的keyframe-动画和POP-动画同时存在产生的问题"><a href="#记录一次粉粉匿名做动画CAAnimation-的keyframe-动画和POP-动画同时存在产生的问题" class="headerlink" title="记录一次粉粉匿名做动画CAAnimation 的keyframe 动画和POP 动画同时存在产生的问题"></a>记录一次粉粉匿名做动画CAAnimation 的keyframe 动画和POP 动画同时存在产生的问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">POPAnimatableProperty *property = [POPAnimatableProperty propertyWithName:@&quot;com.ffrj.starMove&quot; initializer:^(POPMutableAnimatableProperty *prop) &#123;</span><br><span class="line">                prop.writeBlock = ^(CALayer *obj, const CGFloat *values) &#123;</span><br><span class="line">                    CGFloat currentTime = values[0];</span><br><span class="line">                    obj.timeOffset = currentTime;</span><br><span class="line">                &#125;;</span><br><span class="line">                prop.threshold = 0.01;</span><br><span class="line">            &#125;];</span><br><span class="line">            POPBasicAnimation *animation = [POPBasicAnimation animation];</span><br><span class="line">            animation.fromValue = @0;</span><br><span class="line">            animation.duration = 0;</span><br><span class="line">            animation.property = property;</span><br><span class="line">            [popArr addObject:animation];</span><br><span class="line">            //</span><br><span class="line">            CGPoint startPoint = YYTextCGRectGetCenter(starBtn.frame);</span><br><span class="line">            CGPoint endPoint = CGPointMake((i+1)*minScaleWidth+30, 35+kTopStatusBarAndNavHeight);</span><br><span class="line">            CGPoint controlPoint = CGPointMake((endPoint.x+30), (YYTextCGRectGetCenter(starBtn.frame).y-endPoint.y)/2.0);</span><br><span class="line">            UIBezierPath *path = [UIBezierPath bezierPath];</span><br><span class="line">            [path moveToPoint:startPoint];</span><br><span class="line">            [path addQuadCurveToPoint:endPoint controlPoint:controlPoint];</span><br><span class="line">            CAKeyframeAnimation *positionAnimation = [CAKeyframeAnimation animation];</span><br><span class="line">            positionAnimation.keyPath = @&quot;position&quot;;</span><br><span class="line">            positionAnimation.path = path.CGPath;</span><br><span class="line">            CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.scale&quot;];</span><br><span class="line">            scaleAnimation.fromValue    = @1;</span><br><span class="line">            scaleAnimation.toValue      = @0.0;</span><br><span class="line">            CABasicAnimation *opacityAnimation = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;];</span><br><span class="line">            opacityAnimation.fromValue  = @1.0;</span><br><span class="line">            opacityAnimation.toValue    = @0.0;</span><br><span class="line">            CAAnimationGroup *animationGroup = [CAAnimationGroup animation];</span><br><span class="line">            [animationGroup setAnimations:@[positionAnimation,scaleAnimation, opacityAnimation]];</span><br><span class="line">            animationGroup.duration = 1.0;</span><br><span class="line">            animationGroup.removedOnCompletion=NO;</span><br><span class="line">            animationGroup.fillMode=kCAFillModeForwards;</span><br><span class="line">            [starBtn.layer addAnimation:animationGroup forKey:@&quot;animationGroup&quot;];</span><br><span class="line">            starBtn.layer.speed = 0.0;</span><br></pre></td></tr></table></figure>
<p>上面是加了CAAnimation 动画， 但是同时还加入了POP 某一个animation 的上下浮动位移动画:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">if (!_startedAnimated) &#123;</span><br><span class="line">        _startedAnimated = YES;</span><br><span class="line">        [self.starArray enumerateObjectsUsingBlock:^(UIButton * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">            POPBasicAnimation *basicAnimation = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerPositionY];</span><br><span class="line">            basicAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut];</span><br><span class="line">            basicAnimation.duration = 1.3;</span><br><span class="line">            basicAnimation.beginTime = CACurrentMediaTime()+(arc4random()%30*0.033);</span><br><span class="line">            basicAnimation.toValue = @(obj.centerY-8);</span><br><span class="line">            basicAnimation.autoreverses = YES;</span><br><span class="line">            basicAnimation.repeatForever = YES;</span><br><span class="line">            [obj.layer pop_addAnimation:basicAnimation forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">        &#125;];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>这时出现了浮动POP 动画无法启动情况。<br>这里处理为: 在 prop.writeBlock 里面，使用贝塞尔数值计算进行位移。</p>
<h3 id="这里记录一次js-function-和箭头函数不同点"><a href="#这里记录一次js-function-和箭头函数不同点" class="headerlink" title="这里记录一次js function 和箭头函数不同点"></a>这里记录一次js function 和箭头函数不同点</h3><ul>
<li>function 里面的this 指针是内部函数，外部需要const 一个。</li>
</ul>
<p>箭头函数 由于内部将this 置空，他是没有this 的，他的this 属于外部调用的。同时，由于没有this 指针，所以其arguments 也是undefined 的。</p>
<ul>
<li>module.export = xxx / exports default xxx / export = xxx 区别</li>
</ul>
<h3 id="写一个比较简洁的iOS-并发获取数据，combine-之后返回"><a href="#写一个比较简洁的iOS-并发获取数据，combine-之后返回" class="headerlink" title="写一个比较简洁的iOS 并发获取数据，combine 之后返回"></a>写一个比较简洁的iOS 并发获取数据，combine 之后返回</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">- (void)getPlannerRShopBanner</span><br><span class="line">&#123;</span><br><span class="line">    @weakify(self);</span><br><span class="line">    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">        @strongify(self);</span><br><span class="line">        __block NSArray *recommandArray = nil;</span><br><span class="line">        __block NSArray *plannerNewsArray = nil;</span><br><span class="line">        __block NSUInteger count = 0;</span><br><span class="line">        dispatch_semaphore_t semaphore_t = dispatch_semaphore_create(0);</span><br><span class="line">        [self.apiSession getPlannerShopBannerAndCallback:^(NSArray *model, PCError *error) &#123;</span><br><span class="line">            if (isValidArray(model) &amp;&amp; model.count &gt; 0) &#123;</span><br><span class="line">                count ++;</span><br><span class="line">                recommandArray = model;</span><br><span class="line">                if (count == 2) &#123;</span><br><span class="line">                    dispatch_semaphore_signal(semaphore_t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                dispatch_semaphore_signal(semaphore_t);</span><br><span class="line">            &#125;</span><br><span class="line">            [self autoSavePlannerDataChange];</span><br><span class="line">        &#125;];</span><br><span class="line">        [self.apiSession getNewPlannerBannerCallback:^(NSArray *model, PCError *error) &#123;</span><br><span class="line">            if (isValidArray(model) &amp;&amp; model.count &gt; 0) &#123;</span><br><span class="line">                count ++;</span><br><span class="line">                plannerNewsArray = model;</span><br><span class="line">                if (count == 2) &#123;</span><br><span class="line">                    dispatch_semaphore_signal(semaphore_t);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                dispatch_semaphore_signal(semaphore_t);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;];</span><br><span class="line">        dispatch_semaphore_wait(semaphore_t, DISPATCH_TIME_FOREVER);</span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            if (count == 2) &#123;</span><br><span class="line">                dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    self.view.headerRecommandDict = [recommandArray firstObject];</span><br><span class="line">                    self.view.headerPlannerNewsDict = [plannerNewsArray firstObject];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">                DLog(@&quot;没有获取到ad 或者某个ad 获取失败&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="这里记录一个前端在解析json字符串-内容包含-n-产生无法解析且报错情景"><a href="#这里记录一个前端在解析json字符串-内容包含-n-产生无法解析且报错情景" class="headerlink" title="这里记录一个前端在解析json字符串,内容包含#\n# 产生无法解析且报错情景"></a>这里记录一个前端在解析json字符串,内容包含#\n# 产生无法解析且报错情景</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if ([json containsString:@&quot;\n&quot;]) &#123;</span><br><span class="line">        json = [json stringByReplacingOccurrencesOfString:@&quot;\n&quot; withString:@&quot;\\u000A&quot;];</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>首先解决方案如上，在解析前先替换该字符为ascii码。</p>
<p>出现的错误：<code>Printing description of error:Error Domain=NSCocoaErrorDomain Code=3840 &quot;Unescaped control character around character 90.&quot; UserInfo={NSDebugDescription=Unescaped control character around character 90.}</code></p>
<p>出现的类似语句:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"font"</span>:&#123;&#125;,<span class="attr">"stickDate"</span>:<span class="string">""</span>,<span class="attr">"bookId"</span>:<span class="number">18558</span>,<span class="attr">"diaryType"</span>:<span class="number">0</span>,<span class="attr">"diaryEmotionNode"</span>:&#123;<span class="attr">"content"</span>:<span class="string">"1♡</span></span><br><span class="line"><span class="string">可乐要加冰</span></span><br><span class="line"><span class="string">柠檬要加水</span></span><br><span class="line"><span class="string">我的生活要加你</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">咖啡要加糖</span></span><br><span class="line"><span class="string">披萨要加盐</span></span><br><span class="line"><span class="string">我们的感情要加点油</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">别说什么东南西北都是你</span></span><br><span class="line"><span class="string">别说什么天涯海角都是你</span></span><br><span class="line"><span class="string">别说什么心里眼里都是你</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">我只需要你说</span></span><br><span class="line"><span class="string">你的生活加点我.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">或者给我一条人生建议</span></span><br><span class="line"><span class="string">让我和你在一起.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">感情不要甜言蜜语</span></span><br><span class="line"><span class="string">不要纠缠不休.</span></span><br><span class="line"><span class="string">只需要一句“我喜欢你”</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">感谢收听悦兮电台第六期《要加点你》</span></span><br><span class="line"><span class="string">我是主播:苏雨诺</span></span><br><span class="line"><span class="string">编辑:苏雨纤</span></span><br><span class="line"><span class="string">写文:江抒</span></span><br><span class="line"><span class="string">本次播音结束，请大家期待下一期～"</span>,<span class="attr">"imageList"</span>:[]&#125;,<span class="attr">"geo"</span>:&#123;<span class="attr">"region"</span>:<span class="string">"普陀区"</span>,<span class="attr">"city"</span>:<span class="string">"上海市"</span>,<span class="attr">"address"</span>:<span class="string">"上海市普陀区云岭东路靠近东渡国际嘉庭广场"</span>,<span class="attr">"longitude"</span>:<span class="string">"121.387844"</span>,<span class="attr">"latitude"</span>:<span class="string">"31.222706"</span>,<span class="attr">"name"</span>:<span class="string">"东渡国际嘉庭广场"</span>,<span class="attr">"province"</span>:<span class="string">"上海市"</span>&#125;,<span class="attr">"lbsChange"</span>:<span class="number">0</span>,<span class="attr">"lbs"</span>:&#123;<span class="attr">"region"</span>:<span class="string">"普陀区"</span>,<span class="attr">"city"</span>:<span class="string">"上海市"</span>,<span class="attr">"address"</span>:<span class="string">"上海市普陀区云岭东路靠近东渡国际嘉庭广场"</span>,<span class="attr">"longitude"</span>:<span class="string">"121.387844"</span>,<span class="attr">"latitude"</span>:<span class="string">"31.222706"</span>,<span class="attr">"name"</span>:<span class="string">"东渡国际嘉庭广场"</span>,<span class="attr">"province"</span>:<span class="string">"上海市"</span>&#125;&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"content"</span>:<span class="string">"23333♡\n可乐要加冰\n柠檬要加水\n我的生活要加你\n\n咖啡要加糖\n披萨要加盐\n我们的感情要加点油\n\n别说什么东南西北都是你\n别说什么天涯海角都是你\n别说什么心里眼里都是你\n\n我只需要你说\n你的生活加点我.\n\n或者给我一条人生建议\n让我和你在一起.\n\n感情不要甜言蜜语\n不要纠缠不休.\n只需要一句“我喜欢你”\n\n感谢收听悦兮电台第六期《要加点你》\n我是主播:苏雨诺\n编辑:苏雨纤\n写文:江抒\n本次播音结束，请大家期待下一期～"</span>,<span class="attr">"imageList"</span>:[]&#125;</span><br></pre></td></tr></table></figure>
<h3 id="今天2018-2-9-放假过年啦"><a href="#今天2018-2-9-放假过年啦" class="headerlink" title="今天2018/2/9 放假过年啦"></a>今天2018/2/9 放假过年啦</h3><h3 id="2018-2-24-redis-的homebrew-安装"><a href="#2018-2-24-redis-的homebrew-安装" class="headerlink" title="2018/2/24 redis 的homebrew 安装"></a>2018/2/24 redis 的homebrew 安装</h3><p><a href="http://blog.csdn.net/chenshuai1993/article/details/51519384" target="_blank" rel="noopener">http://blog.csdn.net/chenshuai1993/article/details/51519384</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">什么是原子性,什么是原子性操作？</span><br><span class="line">举个例子：</span><br><span class="line">A想要从自己的帐户中转1000块钱到B的帐户里。那个从A开始转帐，到转帐结束的这一个过程，称之为一个事务。在这个事务里，要做如下操作：</span><br><span class="line"> 1. 从A的帐户中减去1000块钱。如果A的帐户原来有3000块钱，现在就变成2000块钱了。</span><br><span class="line"> 2. 在B的帐户里加1000块钱。如果B的帐户如果原来有2000块钱，现在则变成3000块钱了。</span><br><span class="line">如果在A的帐户已经减去了1000块钱的时候，忽然发生了意外，比如停电什么的，导致转帐事务意外终止了，而此时B的帐户里还没有增加1000块钱。那么，我们称这个操作失败了，要进行回滚。回滚就是回到事务开始之前的状态，也就是回到A的帐户还没减1000块的状态，B的帐户的原来的状态。此时A的帐户仍然有3000块，B的帐户仍然有2000块。</span><br><span class="line">我们把这种要么一起成功（A帐户成功减少1000，同时B帐户成功增加1000），要么一起失败（A帐户回到原来状态，B帐户也回到原来状态）的操作叫原子性操作。</span><br><span class="line">如果把一个事务可看作是一个程序,它要么完整的被执行,要么完全不执行。这种特性就叫原子性。</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mac 下安装也可以使用 homebrew，homebrew 是 mac 的包管理器。</p>
</blockquote>
<p>1、执行 brew install redis</p>
<p>2、启动 redis，可以使用后台服务启动 brew services start redis。或者直接启动：redis-server /usr/local/etc/redis.conf</p>
<p>在远程服务上执行命令<br>redis-cli -h host -p port -a password</p>
<p>查看redis服务是否启动</p>
<p>ps aux | grep redis</p>
<p>这篇文章也不错<br><a href="https://www.jianshu.com/p/af33284aa57a" target="_blank" rel="noopener">https://www.jianshu.com/p/af33284aa57a</a></p>
<h3 id="记一次Mac-node-logger-保存path-权限问题"><a href="#记一次Mac-node-logger-保存path-权限问题" class="headerlink" title="记一次Mac node logger 保存path 权限问题"></a>记一次Mac node logger 保存path 权限问题</h3><p>记一次运行node 服务器，其logger 记录path 在xxxx。<br>该目录没有获得权限，为只读。<br>错误表现：console 一直print：<br>ERROR 29252 [egg-logger] [/data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2000/egg-web.log] Error: EACCES: permission denied, open ‘/data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2018/egg-web.log’<br>解决方案:</p>
<ol>
<li><p>ctrl C 打断输出</p>
</li>
<li><p>在ternimal cd 到该目录,如:<code>$ cd /data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2000</code></p>
</li>
<li>然后 <code>$ chmod -R 777 *</code></li>
</ol>
<blockquote>
<p>将该目录下使用递归 赋予777 权限(chmod : change mode ,-R recursive, 777 可读可写权限)</p>
</blockquote>
<h3 id="将本地git-push-到远程repository"><a href="#将本地git-push-到远程repository" class="headerlink" title="将本地git push 到远程repository"></a>将本地git push 到远程repository</h3><p>git init<br>git commit -m “first commit”<br>git remote add origin <a href="mailto:git@github.com" target="_blank" rel="noopener">git@github.com</a>:shaohung001/ahuang_project.git<br>git push -u origin master</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2017-08-29lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/10/06/2017-08-29lesson/">2017-08-29lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/10/06/2017-08-29lesson/" class="article-date">
	  <time datetime="2017-10-06T12:23:31.000Z" itemprop="datePublished">October 6, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2017/8/29<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">NSURL *url = [NSURL URLWithString: @&quot;http://www.baidu.com/s?tn=baiduhome_pg&amp;bs=NSRUL&amp;f=8&amp;rsv_bp=1&amp;rsv_spt=1&amp;wd=NSurl&amp;inputT=2709&quot;];  </span><br><span class="line">NSLog(@&quot;Scheme: %@&quot;, [url scheme]); </span><br><span class="line">NSLog(@&quot;Host: %@&quot;, [url host]); </span><br><span class="line">NSLog(@&quot;Port: %@&quot;, [url port]);  </span><br><span class="line">NSLog(@&quot;Path: %@&quot;, [url path]);  </span><br><span class="line">NSLog(@&quot;Relative path: %@&quot;, [url relativePath]); </span><br><span class="line">NSLog(@&quot;Path components as array: %@&quot;, [url pathComponents]);   </span><br><span class="line">NSLog(@&quot;Parameter string: %@&quot;, [url parameterString]);  </span><br><span class="line">NSLog(@&quot;Query: %@&quot;, [url query]);   </span><br><span class="line">NSLog(@&quot;Fragment: %@&quot;, [url fragment]); </span><br><span class="line">NSLog(@&quot;User: %@&quot;, [url user]); </span><br><span class="line">NSLog(@&quot;Password: %@&quot;, [url password]);</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">2012-03-31 18:22:20.904 SmallDemoList[5473:11603] 12131232</span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Scheme: http </span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Host: www.baidu.com </span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Port: (null) </span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Path: /s </span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Relative path: /s </span><br><span class="line">2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Path components as array: ( </span><br><span class="line"> &quot;/&quot;, </span><br><span class="line">) </span><br><span class="line">2012-03-31 18:22:20.916 SmallDemoList[5473:11603] Parameter string: (null) </span><br><span class="line">2012-03-31 18:22:20.917 SmallDemoList[5473:11603] Query: tn=baiduhome_pg&amp;bs=NSRUL&amp;f=8&amp;rsv_bp=1&amp;rsv_spt=1&amp;wd=NSurl&amp;inputT=2709</span><br><span class="line">2012-03-31 18:22:20.917 SmallDemoList[5473:11603] Fragment: (null) </span><br><span class="line">2012-03-31 18:22:20.917 SmallDemoList[5473:11603] User: (null) </span><br><span class="line">2012-03-31 18:22:20.917 SmallDemoList[5473:11603] Password: (null)</span><br></pre></td></tr></table></figure>
<hr>
<p>sourcetree 自己比较常用的<br>1：amand 钩子 对本地的进行amand<br>2：将“xxx”重置到本次提交 - 强行合并 丢弃所有工作副本改动       将本地数据回调到选中版本，删除所有工作副本<br>3：要commit 前，查看所有改动，确认所有改动是否正确</p>
<h3 id="接下来的时间，是时候拆解一个项目，成为一个一个精品轮子了"><a href="#接下来的时间，是时候拆解一个项目，成为一个一个精品轮子了" class="headerlink" title="接下来的时间，是时候拆解一个项目，成为一个一个精品轮子了"></a>接下来的时间，是时候拆解一个项目，成为一个一个精品轮子了</h3><ul>
<li>日记</li>
<li>单位换算</li>
<li>BMI</li>
<li>手账</li>
<li>给他们写一个小型聊天demo</li>
</ul>
<h3 id="记一次输入键盘-在inputView替换状态resignKeyboard-出现的问题"><a href="#记一次输入键盘-在inputView替换状态resignKeyboard-出现的问题" class="headerlink" title="记一次输入键盘 在inputView替换状态resignKeyboard 出现的问题"></a>记一次输入键盘 在inputView替换状态resignKeyboard 出现的问题</h3><p>其中在 emoji状态，如果resign 那么其会走 showKeyboard 和hideKeyboard ，由于keyboard 比较慢，，会出现completion 最慢，，最后导致界面不能滑动</p>
<h3 id="导航栏的几种推栈、退栈"><a href="#导航栏的几种推栈、退栈" class="headerlink" title="导航栏的几种推栈、退栈"></a>导航栏的几种推栈、退栈</h3><ol>
<li>没导航栏-&gt;有导航栏   没导航栏&lt;-有导航栏</li>
<li>有导航栏-&gt;有导航栏   有导航栏&lt;-有导航栏</li>
<li>没导航栏-&gt;没导航栏   没导航栏&lt;-没导航栏</li>
</ol>
<p>这一类都是需要注意的一个地方，在viewwillApeare 和viewWillDisapear 2个方法里面的对应2个方法优化:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.navigationController.navigationBarHidden = YES;</span><br><span class="line">[self.navigationController setNavigationBarHidden:YES animated:animated];</span><br></pre></td></tr></table></figure></p>
<h3 id="日期格式"><a href="#日期格式" class="headerlink" title="日期格式"></a>日期格式</h3><p><a href="http://www.cnblogs.com/wayne23/archive/2013/03/25/2981009.html" target="_blank" rel="noopener">http://www.cnblogs.com/wayne23/archive/2013/03/25/2981009.html</a></p>
<p>时间与日期处理</p>
<p>主要有以下类：<br>NSDate – 表示一个绝对的时间点<br>NSTimeZone – 时区信息<br>NSLocale – 本地化信息<br>NSDateComponents – 一个封装了具体年月日、时秒分、周、季度等的类<br>NSCalendar – 日历类，它提供了大部分的日期计算接口，并且允许您在NSDate和NSDateComponents之间转换<br>NSDateFormatter – 用来在日期和字符串之间转换</p>
<p>NSDate</p>
<p>NSDate用来表示公历的GMT时间(格林威治时间)。 有下面几种初始化方法：</p>
<ol>
<li><ul>
<li>(id)init</li>
</ul>
</li>
</ol>
<p>默认初始化，返回当前时间，也可以直接调用类方法 +(id)date</p>
<p>NSDate <em>date = [[NSDate alloc] init];<br>//NSDate </em>date = [NSDate date];<br>NSLog(@”print date is %@”,date);<br>将打印出计算机当前时间：2013-03-04 08:57:20 +0000</p>
<ol start="2">
<li><ul>
<li>(id)initWithTimeIntervalSinceNow:(NSTimeInterval)seconds</li>
</ul>
</li>
</ol>
<p>以当前时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSinceNow:(NSTimeInterval)seconds</p>
<p>NSDate <em>date = [[NSDate alloc] initWithTimeIntervalSinceNow:20];<br>//NSDate </em>date = [NSDate dateWithTimeIntervalSinceNow:20];<br>NSLog(@”print date is %@”,date);<br>假如当前时间是2013-03-04 08:57:20 +0000，那么初始化后得到的时间是2013-03-04 08:57:40 +0000</p>
<ol start="3">
<li><ul>
<li>(id)initWithTimeIntervalSince1970:(NSTimeInterval)seconds</li>
</ul>
</li>
</ol>
<p>以GMT时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSince1970:(NSTimeInterval)seconds</p>
<p>NSDate <em>date = [[NSDate alloc] initWithTimeIntervalSince1970:-20];<br>//NSDate </em>date = [NSDate dateWithTimeIntervalSince1970:-20];<br>NSLog(@”print date is %@”,date);<br>得到的时间是格林威治时间往前20秒，将打印出：1969-12-31 23:59:40 +0000</p>
<ol start="4">
<li><ul>
<li>(id)initWithTimeIntervalSinceReferenceDate:(NSTimeInterval)seconds</li>
</ul>
</li>
</ol>
<p>以2001-1-1 0:0:0的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSinceReferenceDate:(NSTimeInterval)seconds</p>
<p>NSDate <em>date = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:80];<br>//NSDate </em>date = [NSDate dateWithTimeIntervalSinceReferenceDate:80];<br>NSLog(@”print date is %@”,date);<br>将打印出：2001-01-01 00:01:20 +0000</p>
<ol start="5">
<li><ul>
<li>(id)initWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)refDate</li>
</ul>
</li>
</ol>
<p>以基准时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)date</p>
<p>复制代码<br>NSDate *date1 = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:20];<br>NSLog(@”print date1 is %@”,date1);</p>
<p>NSDate <em>date2 = [[NSDate alloc] initWithTimeInterval:10 sinceDate:date1];<br>//NSDate </em>date2 = [NSDate dateWithTimeInterval:10 sinceDate:date1];<br>NSLog(@”print date2 is %@”,date2);<br>复制代码<br>第一个基准时间是2001-01-01 00:00:20 +0000，根据基准时间偏移10秒的结果是2001-01-01 00:00:30 +0000</p>
<ol start="6">
<li><ul>
<li>(id)distantPast 与 + (id)distantFuture</li>
</ul>
</li>
</ol>
<p>这两个是类方法，分别用来返回一个极早的时间点和一个极晚的时间点</p>
<p>NSDate *date = [NSDate distantFuture];<br>NSLog(@”future date is %@”,date);</p>
<p>NSDate *date2 = [NSDate distantPast];<br>NSLog(@”past date is %@”,date2);<br>distantPast将返回：0001-12-30 00:00:00 +0000，distantFuture将返回：4001-01-01 00:00:00 +0000</p>
<p>NSDate的常用对象方法：</p>
<ol>
<li>-(id)dateByAddingTimeInterval:(NSTimeInterval)seconds</li>
</ol>
<p>返回以当前NSDate对象为基准，偏移多少秒后得到的新NSDate对象。(旧方法 - (id)addTimeInterval:(NSTimeInterval)seconds已被弃用)</p>
<p>NSDate <em>date = [NSDate dateWithTimeIntervalSince1970:0];<br>NSDate </em>date2 = [date dateByAddingTimeInterval:-20];<br>NSLog(@”%@”,date2);</p>
<ol start="2">
<li><ul>
<li>(BOOL)isEqualToDate:(NSDate *)anotherDate</li>
</ul>
</li>
</ol>
<p>将当前对象与参数传递的对象进行比较，根据是否相同返回BOOL值</p>
<p>NSDate <em>date = [NSDate dateWithTimeIntervalSince1970:0];<br>NSDate </em>date2 = [NSDate dateWithTimeInterval:0 sinceDate:date];<br>BOOL isEqual = [date isEqualToDate:date2];<br>NSLog(@”%i”,isEqual);</p>
<ol start="3">
<li><ul>
<li>(NSDate <em>)earlierDate:(NSDate </em>)anotherDate 与 - (NSDate <em>)laterDate:(NSDate </em>)anotherDate</li>
</ul>
</li>
</ol>
<p>比较两个NSDate对象，返回较早/较晚的时间点，并以新NSDate对象的形式返回</p>
<p>复制代码<br>NSDate <em>date = [NSDate dateWithTimeIntervalSince1970:0];<br>NSDate </em>date2 = [NSDate dateWithTimeInterval:-50 sinceDate:date];</p>
<p>NSDate *date3 = [date earlierDate:date2];<br>NSLog(@”earlier date is %@”,date3);</p>
<p>NSDate *date4 = [date laterDate:date2];<br>NSLog(@”later date is %@”,date4);<br>复制代码</p>
<ol start="4">
<li><ul>
<li>(NSComparisonResult)compare:(NSDate *)anotherDate</li>
</ul>
</li>
</ol>
<p>将当前对象与参数传递的对象进行比较，如果相同，返回0(NSOrderedSame)；对象时间早于参数时间，返回-1(NSOrderedAscending)；对象时间晚于参数时间，返回1(NSOrderedDescending)</p>
<p>NSDate <em>date = [NSDate dateWithTimeIntervalSince1970:0];<br>NSDate </em>date2 = [NSDate dateWithTimeInterval:-50 sinceDate:date];</p>
<p>NSInteger result = [date compare:date2];<br>NSLog(@”%i”,result);</p>
<ol start="5">
<li><ul>
<li>(NSTimeInterval)timeIntervalSince1970</li>
</ul>
</li>
</ol>
<p>返回当前对象时间与1970-1-1 0:0:0的相隔秒数，也可以这样理解：从1970-1-1 0:0:0开始，经过多少秒到达对象指定时间。</p>
<p>NSDate *date = [NSDate dateWithTimeIntervalSince1970:50];<br>NSInteger seconds = [date timeIntervalSince1970];<br>NSLog(@”%i”,seconds);<br>将返回结果50</p>
<ol start="6">
<li><ul>
<li>(NSTimeInterval)timeIntervalSinceReferenceDate</li>
</ul>
</li>
</ol>
<p>返回当前对象时间与2001-1-1 0:0:0的相隔秒数，也可以这样理解：从2001-1-1 0:0:0开始，经过多少秒到达对象指定时间。</p>
<p>NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:-30];<br>NSInteger seconds = [date timeIntervalSinceReferenceDate];<br>NSLog(@”%i”,seconds);<br>将返回结果-30，负数代表从2001-1-1 0:0:0开始，倒退30秒到达当前时间。</p>
<ol start="7">
<li><ul>
<li>(NSTimeInterval)timeIntervalSinceNow</li>
</ul>
</li>
</ol>
<p>返回当前对象时间与客户端时间的相隔秒数，也可以这样理解：从客户端当前时间开始，经过多少秒到达对象指定时间。</p>
<p>NSDate *date = [NSDate dateWithTimeIntervalSinceNow:100];<br>NSInteger seconds = [date timeIntervalSinceNow];<br>NSLog(@”%i”,seconds);<br>经测试返回了结果99，但初始化时提供的参数是100。这可能是因为第一句初始化代码到第二句计算代码之间有个1秒内的延时，所以计算时的客户端时间比初始化时的客户端时间快了1秒。</p>
<ol start="8">
<li><ul>
<li>(NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate</li>
</ul>
</li>
</ol>
<p>返回当前对象时间与参数传递的对象时间的相隔秒数，也可以这样理解：从参数时间开始，经过多少秒到达对象执行时间。</p>
<p>NSDate <em>date = [NSDate dateWithTimeIntervalSince1970:0];<br>NSDate </em>date2 = [NSDate dateWithTimeInterval:50 sinceDate:date];<br>NSInteger seconds = [date timeIntervalSinceDate:date2];<br>NSLog(@”%i”,seconds);<br>将返回结果-50，date为1970-1-1 0:0:0，date2为1970-1-1 0:0:50，从date2的时间开始，倒退50秒到达date的时间。</p>
<p>NSTimeZone</p>
<p>NSTimeZone表示时区信息。 有下面几种初始化方法：</p>
<ol>
<li><ul>
<li>(id)timeZoneWithName:(NSString <em>)aTimeZoneName / - (id)initWithName:(NSString </em>)aName</li>
</ul>
</li>
</ol>
<p>根据时区名称初始化。可以调用NSTimeZone的类方法 + (NSArray *)knownTimeZoneNames来返回所有已知的时区名称。</p>
<p>NSTimeZone <em>zone = [[NSTimeZone alloc] initWithName:@”America/Chicago”];<br>//NSTimeZone </em>zone = [NSTimeZone timeZoneWithName:@”America/Chicago”];<br>NSLog(@”%@”,zone);<br>打印出：America/Chicago (CST) offset -21600</p>
<ol start="2">
<li><ul>
<li>(id)timeZoneWithAbbreviation:(NSString *)abbreviation</li>
</ul>
</li>
</ol>
<p>根据时区缩写初始化。例如：EST(美国东部标准时间)、HKT(香港标准时间)</p>
<p>NSTimeZone *zone = [NSTimeZone timeZoneWithAbbreviation:@”EST”];<br>NSLog(@”%@”,zone);<br>打印出：Asia/Hong_Kong (HKT) offset 28800</p>
<ol start="3">
<li><ul>
<li>(NSTimeZone *)systemTimeZone</li>
</ul>
</li>
</ol>
<p>返回系统时区</p>
<p>NSTimeZone <em>zone = [NSTimeZone systemTimeZone];<br>NSLog(@”%@”,zone);<br>假如时区是上海，打印出的时区信息将会是：Asia/Shanghai (CST (China)) offset 28800，28800代表相对于GMT时间偏移的秒数，即8个小时。(8</em>60*60)</p>
<ol start="4">
<li><ul>
<li>(NSTimeZone *)localTimeZone</li>
</ul>
</li>
</ol>
<p>返回本地时区，与systemTimeZone的区别在于：本地时区可以被修改，而系统时区不能修改。</p>
<p>复制代码<br>[NSTimeZone setDefaultTimeZone:[[NSTimeZone alloc] initWithName:@”America/Chicago”]];</p>
<p>NSTimeZone <em>systemZone = [NSTimeZone systemTimeZone];<br>NSTimeZone </em>localZone = [NSTimeZone localTimeZone];</p>
<p>NSLog(@”%@”,systemZone);<br>NSLog(@”%@”,localZone);<br>复制代码<br>打印出的系统时区仍然是：Asia/Shanghai (CST (China)) offset 28800；而本地时区经过修改后，变成了：Local Time Zone (America/Chicago (CST) offset -21600)</p>
<ol start="5">
<li><ul>
<li>(id)timeZoneForSecondsFromGMT:(NSInteger)seconds</li>
</ul>
</li>
</ol>
<p>根据零时区的秒数偏移返回一个新时区对象</p>
<p>NSTimeZone *zone = [NSTimeZone timeZoneForSecondsFromGMT:28800];<br>NSLog(@”%@”,zone);<br>打印出：GMT+0800 (GMT+08:00) offset 28800</p>
<p>NSTimeZone常用对象方法与类方法：</p>
<ol>
<li><ul>
<li>(NSArray *)knownTimeZoneNames</li>
</ul>
</li>
</ol>
<p>以数组的形式返回所有已知的时区名称</p>
<p>NSArray <em>zoneArray = [NSTimeZone knownTimeZoneNames];<br>for(NSString </em>str in zoneArray)<br>{<br>    NSLog(@”%@”,str);<br>}</p>
<ol start="2">
<li><ul>
<li>(NSString <em>)name / - (NSString </em>)abbreviation</li>
</ul>
</li>
</ol>
<p>返回时区对象的名称或缩写</p>
<p>NSTimeZone <em>zone = [NSTimeZone localTimeZone];<br>NSString </em>strZoneName = [zone name];<br>NSString *strZoneAbbreviation = [zone abbreviation];<br>NSLog(@”name is %@”,strZoneName);<br>NSLog(@”abbreviation is %@”,strZoneAbbreviation);<br>name is Asia/Hong_Kong</p>
<p>abbreviation is HKT</p>
<ol start="3">
<li><ul>
<li>(NSInteger)secondsFromGMT</li>
</ul>
</li>
</ol>
<p>得到当前时区与零时区的间隔秒数</p>
<p>NSTimeZone *zone = [NSTimeZone localTimeZone];<br>int seconds = [zone secondsFromGMT];<br>NSLog(@”%i”,seconds);<br>NSLoale</p>
<p>NSLoale类返回本地化信息，主要体现在”语言”和”区域格式”这两个设置项。有下面几种初始化方法：</p>
<ol>
<li><ul>
<li>(id)systemLocale</li>
</ul>
</li>
</ol>
<p>返回系统初始本地化信息</p>
<p>NSLocale *locale = [NSLocale systemLocale];<br>NSLog(@”%@”,[[locale objectForKey:NSLocaleCalendar] calendarIdentifier]);</p>
<ol start="2">
<li><ul>
<li>(id)currentLocale / + (id)autoupdatingCurrentLocale</li>
</ul>
</li>
</ol>
<p>这两个类方法都将返回当前客户端的本地化信息，区别在于：currentLocale取得的值会一直保持在cache中，第一次用此方法实例化对象后，即使修改了本地化设定，这个对象也不会改变。而使用autoupdatingCurrentLocale，当每次修改本地化设定，其实例化的对象也会随之改变。</p>
<p>下面的代码演示了区别所在，假设初始本地化信息为en_US，先用这两个函数分别初始化两个对象，然后修改本地化设定语言为台湾繁体中文，再重新打印这两个对象的信息：</p>
<p>复制代码<br>NSLocale <em>locale1;<br>NSLocale </em>locale2;</p>
<ul>
<li><p>(IBAction)doTest:(id)sender<br>{<br>  locale1 = [NSLocale currentLocale];<br>  locale2 = [NSLocale autoupdatingCurrentLocale];</p>
<p>  NSLog(@”%@”,locale1.localeIdentifier); //print “en_US”<br>  NSLog(@”%@”,locale2.localeIdentifier); //print “en_US”<br>}</p>
</li>
<li><p>(IBAction)doAgain:(id)sender<br>{<br>  NSLog(@”%@”,locale1.localeIdentifier); //print “en_US”<br>  NSLog(@”%@”,locale2.localeIdentifier); //print “zh_TW”<br>}<br>复制代码</p>
</li>
</ul>
<ol start="3">
<li><ul>
<li>(id)initWithLocaleIdentifier:(NSString *)string</li>
</ul>
</li>
</ol>
<p>用标示符初始化本地化信息</p>
<p>NSLocale <em>locale = [[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”];<br>NSString </em>strSymbol = [locale objectForKey:NSLocaleCurrencySymbol];<br>NSLog(@”%@”,strSymbol);<br>代码用”zh_CN”来初始化对象，然后再打印出对象的货币符号，得到的结果是人民币符号￥</p>
<p>NSLoale常用对象方法与类方法：</p>
<ol>
<li><ul>
<li>(id)objectForKey:(id)key</li>
</ul>
</li>
</ol>
<p>根据不同的key返回各种本地化信息，例如下面的代码返回了当前货币符号：</p>
<p>NSLocale <em>locale = [NSLocale currentLocale];<br>NSString </em>strSymbol = [locale objectForKey:NSLocaleCurrencySymbol];<br>NSCalendar *calendar = [[NSLocale currentLocale] objectForKey:NSLocaleCalendar];</p>
<ol start="2">
<li><ul>
<li>(NSString *)displayNameForKey:(id)key value:(id)value</li>
</ul>
</li>
</ol>
<p>显示特定地区代号下相应键的显示名称：</p>
<p>NSLocale <em>locale = [[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”];<br>NSString </em>str = [locale displayNameForKey:NSLocaleIdentifier value:@”en_US”];<br>NSLog(@”%@”,str);<br>第一句代码代表以中文来实例化对象，然后得到”en_US”的NSLocaleIdentifier键的显示名称。最后输出的结果是”英文（美国）”</p>
<p>NSDateComponents</p>
<p>NSDateComponents封装了具体年月日、时秒分、周、季度等</p>
<p>复制代码<br>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setEra:1];<br>[compt setYear:2013];<br>[compt setMonth:3];<br>[compt setDay:15];<br>[compt setHour:11];<br>[compt setMinute:20];<br>[compt setSecond:55];<br>[compt setQuarter:2];<br>[compt setTimeZone:[NSTimeZone systemTimeZone]];<br>[compt setWeek:3];<br>[compt setWeekday:4];<br>[compt setWeekOfMonth:3];<br>[compt setWeekOfYear:2];<br>[compt setCalendar:[NSCalendar currentCalendar]];<br>复制代码<br>NSDateComponents相关方法：</p>
<ol>
<li>NSCalendar对象的 - (NSDateComponents <em>)components:(NSUInteger)unitFlags fromDate:(NSDate </em>)date</li>
</ol>
<p>取得一个NSDate对象的1个或多个部分，用NSDateComponents来封装</p>
<p>复制代码<br>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [NSDate date];<br>//NSDateComponents <em>compt = [calendar components:NSDayCalendarUnit fromDate:date];<br>NSDateComponents </em>compt = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:date];</p>
<p>NSLog(@”%d,%@”,[compt year],date);<br>NSLog(@”%d,%@”,[compt month],date);<br>NSLog(@”%d,%@”,[compt day],date);<br>复制代码<br>需要注意的是，只有明确指定了unitFlags，NSDateComponents相应的那一部分才有值。</p>
<ol start="2">
<li>NSCalendar对象的 - (NSDateComponents <em>)components:(NSUInteger)unitFlags fromDate:(NSDate </em>)startingDate toDate:(NSDate *)resultDate options : (NSUInteger)opts</li>
</ol>
<p>取得两个NSDate对象的时间间隔，用NSDateComponents来封装</p>
<p>复制代码<br>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [NSDate date];<br>NSDate <em>date2 = [NSDate dateWithTimeInterval:5</em>60<em>60+75 sinceDate:date];<br>NSDateComponents </em>compt = [calendar components:(NSMinuteCalendarUnit|NSSecondCalendarUnit) fromDate:date toDate:date2 options:0];</p>
<p>NSLog(@”%d”,[compt minute]);<br>NSLog(@”%d”,[compt second]);<br>复制代码<br>有几点需要注意：</p>
<p>① 得到的NSDateComponents对象可能会包含负数。例如：当toDate比fromDate晚10秒，second部分返回10；当toDate比fromDate早10秒，second部分返回-10</p>
<p>② 当指定unitFlags返回多个部分时，相隔的时间由多个部分共同组成(而不是独立去表示)。例如：上面的例子时间相差5小时1分15秒，如果指定只返回second部分，将得到18075秒；如果指定返回minute和second部分，将得到301分15秒；如果指定返回hour、minute和second，将得到5小时1分15秒。</p>
<ol start="3">
<li>NSCalendar对象的 - (NSDate <em>)dateFromComponents:(NSDateComponents </em>)comps</li>
</ol>
<p>根据NSDateComponents对象得到一个NSDate对象</p>
<p>复制代码<br>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setYear:2012];<br>[compt setMonth:5];<br>[compt setDay:11];</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [calendar dateFromComponents:compt];<br>//得到本地时间，避免时区问题<br>NSTimeZone <em>zone = [NSTimeZone systemTimeZone];<br>NSInteger interval = [zone secondsFromGMTForDate:date];<br>NSDate </em>localeDate = [date dateByAddingTimeInterval:interval];</p>
<p>NSLog(@”%@”,localeDate);<br>复制代码</p>
<ol start="4">
<li>NSCalendar对象的 - (NSDate <em>)dateByAddingComponents:(NSDateComponents </em>)comps toDate:(NSDate *)date options:(NSUInteger)opts</li>
</ol>
<p>在参数date基础上，增加一个NSDateComponents类型的时间增量</p>
<p>复制代码<br>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setDay:25];<br>[compt setHour:4];<br>[compt setMinute:66];</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [calendar dateByAddingComponents:compt toDate:[NSDate date] options:0];</p>
<p>//得到本地时间，避免时区问题<br>NSTimeZone <em>zone = [NSTimeZone systemTimeZone];<br>NSInteger interval = [zone secondsFromGMTForDate:date];<br>NSDate </em>localeDate = [date dateByAddingTimeInterval:interval];</p>
<p>NSLog(@”%@”,localeDate);<br>复制代码<br>当前时间的基础上，增加25天4小时66秒</p>
<p>NSCalendar</p>
<ol>
<li><ul>
<li>(id)currentCalendar / + (id)autoupdatingCurrentCalendar</li>
</ul>
</li>
</ol>
<p>这两个类方法都将返回当前客户端的逻辑日历，区别在于：currentCalendar取得的值会一直保持在cache中，第一次用此方法实例化对象后，即使修改了系统日历设定，这个对象也不会改变。而使用autoupdatingCurrentCalendar，当每次修改系统日历设定，其实例化的对象也会随之改变。</p>
<p>下面的代码演示了区别所在，假设初始Calendar设定为NSGregorianCalendar(公历)，先用这两个函数分别初始化两个对象，然后修改系统日历为NSJapaneseCalendar(日本和历)，再重新打印这两个对象的信息：</p>
<p>复制代码<br>NSCalendar <em>calendar;<br>NSCalendar </em>calendar2;</p>
<ul>
<li><p>(IBAction)doTest:(id)sender<br>{<br>  calendar = [NSCalendar currentCalendar];<br>  calendar2 = [NSCalendar autoupdatingCurrentCalendar];</p>
<p>  NSLog(@”%@”,calendar.calendarIdentifier); //print “gregorian”<br>  NSLog(@”%@”,calendar2.calendarIdentifier); //print “gregorian”<br>}</p>
</li>
<li><p>(IBAction)doAgain:(id)sender<br>{<br>  NSLog(@”%@”,calendar.calendarIdentifier); //print “gregorian”<br>  NSLog(@”%@”,calendar2.calendarIdentifier); //print “japanese”<br>}<br>复制代码</p>
</li>
</ul>
<ol start="2">
<li><ul>
<li>(id)initWithCalendarIdentifier:(NSString *)string</li>
</ul>
</li>
</ol>
<p>根据提供的日历标示符初始化</p>
<p>NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSChineseCalendar];<br>NSLog(@”%@”,calendar.calendarIdentifier);<br>系统中定义的日历有：</p>
<p>NSGregorianCalendar – 公历<br>NSBuddhistCalendar – 佛教日历<br>NSChineseCalendar – 中国农历<br>NSHebrewCalendar – 希伯来日历<br>NSIslamicCalendar – 伊斯兰历<br>NSIslamicCivilCalendar – 伊斯兰教日历<br>NSJapaneseCalendar – 日本日历<br>NSRepublicOfChinaCalendar – 中华民国日历（台湾）<br>NSPersianCalendar – 波斯历<br>NSIndianCalendar – 印度日历<br>NSISO8601Calendar – ISO8601</p>
<p>NSCalendar常用对象方法与类方法：</p>
<ol>
<li><ul>
<li>(void)setLocale:(NSLocale *)locale</li>
</ul>
</li>
</ol>
<p>设置本地化信息</p>
<p>NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];<br>[calendar setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”]];<br>NSLog(@”%@”,calendar.locale.localeIdentifier);</p>
<ol start="2">
<li><ul>
<li>(void)setTimeZone:(NSTimeZone *)tz</li>
</ul>
</li>
</ol>
<p>设置时区信息</p>
<p>NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];<br>[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@”HKT”]];<br>NSLog(@”%@”,calendar.timeZone);</p>
<ol start="3">
<li><ul>
<li>(void)setFirstWeekday:(NSUInteger)weekday</li>
</ul>
</li>
</ol>
<p>设置每周的第一天从星期几开始，比如：1代表星期日开始，2代表星期一开始，以此类推。默认值是1</p>
<p>如图所示，如果从星期天开始，日历的表现形式：</p>
<p>如果从星期二开始，日历的表现形式：</p>
<p>NSCalendar *calendar = [NSCalendar currentCalendar];<br>[calendar setFirstWeekday:3];<br>NSLog(@”%i”,calendar.firstWeekday);</p>
<ol start="4">
<li><ul>
<li>(void)setMinimumDaysInFirstWeek:(NSUInteger)mdw</li>
</ul>
</li>
</ol>
<p>设置每年及每月第一周必须包含的最少天数，比如：设定第一周最少包括3天，则value传入3</p>
<p>NSCalendar *calendar = [NSCalendar currentCalendar];<br>[calendar setMinimumDaysInFirstWeek:3];<br>NSLog(@”%i”,calendar.minimumDaysInFirstWeek);</p>
<ol start="5">
<li><ul>
<li>(NSUInteger)ordinalityOfUnit:(NSCalendarUnit)smaller inUnit:(NSCalendarUnit)larger forDate:(NSDate *)date</li>
</ul>
</li>
</ol>
<p>获取一个小的单位在一个大的单位里面的序数</p>
<p>NSCalendarUnit包含的值有：</p>
<p>NSEraCalendarUnit – 纪元单位。对于NSGregorianCalendar(公历)来说，只有公元前(BC)和公元(AD)；而对于其它历法可能有很多，例如日本和历是以每一代君王统治来做计算。<br>NSYearCalendarUnit – 年单位。值很大，相当于经历了多少年，未来多少年。<br>NSMonthCalendarUnit – 月单位。范围为1-12<br>NSDayCalendarUnit – 天单位。范围为1-31<br>NSHourCalendarUnit – 小时单位。范围为0-24<br>NSMinuteCalendarUnit – 分钟单位。范围为0-60<br>NSSecondCalendarUnit – 秒单位。范围为0-60<br>NSWeekCalendarUnit – 周单位。范围为1-53<br>NSWeekdayCalendarUnit – 星期单位，每周的7天。范围为1-7<br>NSWeekdayOrdinalCalendarUnit – 没完全搞清楚<br>NSQuarterCalendarUnit – 几刻钟，也就是15分钟。范围为1-4<br>NSWeekOfMonthCalendarUnit – 月包含的周数。最多为6个周<br>NSWeekOfYearCalendarUnit – 年包含的周数。最多为53个周<br>NSYearForWeekOfYearCalendarUnit – 没完全搞清楚<br>NSTimeZoneCalendarUnit – 没完全搞清楚</p>
<p>下面是一些示例：</p>
<p>① 当小单位为NSWeekdayCalendarUnit，大单位为NSWeekCalendarUnit时(即某个日期在这一周是第几天)，根据firstWeekday属性不同，返回的结果也不同。</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [NSDate dateWithTimeIntervalSinceReferenceDate:10];<br>//[calendar setFirstWeekday:2];<br>int count = [calendar ordinalityOfUnit:NSWeekdayCalendarUnit inUnit:NSWeekCalendarUnit forDate:date];<br>NSLog(@”%d”,count);<br>默认firstWeekday为1(星期天开始)的情况下，得到的结果是2，从下图可以看到是第2天。</p>
<p>假如firstWeekday被设置为2(星期一开始)的情况下，得到的结果是1，从下图可以看到是第1天</p>
<p>② 当小单位为NSWeekCalendarUnit，大单位为NSYearCalendarUnit时(即某个日期在这一年中是第几周)，根据minimumDaysInFirstWeek属性不同，返回的结果也不同。</p>
<p>复制代码<br>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setYear:2013];<br>[compt setMonth:1];<br>[compt setDay:20];</p>
<p>NSCalendar *calendar = [NSCalendar currentCalendar];</p>
<p>NSDate *date = [calendar dateFromComponents:compt];</p>
<p>//[calendar setMinimumDaysInFirstWeek:6];<br>int count = [calendar ordinalityOfUnit:NSWeekCalendarUnit inUnit:NSYearCalendarUnit forDate:date];<br>NSLog(@”%d”,count);<br>复制代码<br>从上图的日历中可以看出，在没有设置minimumDaysInFirstWeek的情况下，1月20日得到的结果是4(第四个周)。</p>
<p>默认情况下第一个周有5天，如果将minimumDaysInFirstWeek设置为6天，则原本是第一周的1月1日–1月5日被划分到了上一年，返回0；而1月6日–1月12日升为第一周，1月13日–1月19日升为第二周。。依此类推。</p>
<p>所以需要关注的是minimumDaysInFirstWeek与实际第一周包含天数的大小比较，如果提供的minimumDaysInFirstWeek比实际第一周的天数小，则一切不变；否则统计”一年中第几周”、”一个月中第几周”会产生变化。</p>
<ol start="6">
<li><ul>
<li>(NSRange)rangeOfUnit:(NSCalendarUnit)smaller inUnit:(NSCalendarUnit)larger forDate:(NSDate *)date</li>
</ul>
</li>
</ol>
<p>根据参数提供的时间点，得到一个小的单位在一个大的单位里面的取值范围</p>
<p>复制代码<br>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setYear:2013];<br>[compt setMonth:2];<br>[compt setDay:21];<br>[compt setHour:9];<br>[compt setMinute:45];<br>[compt setSecond:30];</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [calendar dateFromComponents:compt];</p>
<p>//得到本地时间，避免时区问题<br>NSTimeZone <em>zone = [NSTimeZone systemTimeZone];<br>NSInteger interval = [zone secondsFromGMTForDate:date];<br>NSDate </em>localeDate = [date dateByAddingTimeInterval:interval];</p>
<p>NSRange range = [calendar rangeOfUnit:NSDayCalendarUnit inUnit:NSYearCalendarUnit forDate:localeDate];</p>
<p>NSLog(@”%d – %d”,range.location,range.length);<br>复制代码<br>调用这个方法要明确一点，取得的是”范围”而不是”包含”，下面是一些例子：</p>
<p>① 小单位是NSDayCalendarUnit，大单位是NSYearCalendarUnit，并不是要取这一年包含多少天，而是要取”天”(Day)这个单位在这一年(Year)的取值范围。其实不管你提供的日期是多少，返回的值都是”1–31”。</p>
<p>② 小单位是NSDayCalendarUnit，大单位是NSMonthCalendarUnit。要取得参数时间点所对应的月份下，”天”(Day)的取值范围。根据参数时间的月份不同，值也不同。例如2月是1–28、3月是1–31、4月是1–30。</p>
<p>③ 小单位是NSWeekCalendarUnit，大单位是NSMonthCalendarUnit。要取得参数时间点所对应的月份下，”周”(Week)的取值范围。需要注意的是结果会受到minimumDaysInFirstWeek属性的影响。在默认minimumDaysInFirstWeek情况下，取得的范围值一般是”1–5”，从日历上可以看出来这个月包含5排，即5个周。</p>
<p>④ 小单位是NSDayCalendarUnit，大单位是NSWeekCalendarUnit。要取得周所包含的”天”(Day)的取值范围。下面是一个示例日历图：</p>
<p>在上图的日期条件下，假如提供的参数是4月1日–4月6日，那么对应的week就是1(第一个周)，可以看到第一个周包含有6天，从1号开始，那么最终得到的范围值为1–6。</p>
<p>假如提供的参数是4月18日，那么对应的week是3(第三个周)，第三个周包含有7天，从14号开始，那么最终得到的范围值是14–7。</p>
<p>假如提供的参数是4月30日，那么对应的week是5(第五个周)，第五个周只包含3天，从28号开始，那么最终得到的范围值是28–3。</p>
<ol start="7">
<li><ul>
<li>(BOOL)rangeOfUnit:(NSCalendarUnit)unit startDate:(NSDate *<em>)datep interval:(NSTimeInterval </em>)tip forDate:(NSDate *)date</li>
</ul>
</li>
</ol>
<p>根据参数提供的时间点，返回所在日历单位的开始时间。如果startDate和interval均可以计算，则返回YES；否则返回NO</p>
<p>unit – 日历单位<br>datep – 开始时间，通过参数返回<br>tip – 日历单位所对应的秒数，通过参数返回<br>date – 时间点参数</p>
<p>复制代码<br>NSDate *dateOut = nil;<br>NSTimeInterval count = 0;</p>
<p>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setYear:2013];<br>[compt setMonth:3];<br>[compt setDay:22];</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>NSDate </em>date = [calendar dateFromComponents:compt];<br>BOOL b = [calendar rangeOfUnit:NSMonthCalendarUnit startDate:&amp;dateOut interval:&amp;count forDate:date];<br>if(b)<br>{<br>    //得到本地时间，避免时区问题<br>    NSTimeZone <em>zone = [NSTimeZone systemTimeZone];<br>    NSInteger interval = [zone secondsFromGMTForDate:dateOut];<br>    NSDate </em>localeDate = [dateOut dateByAddingTimeInterval:interval];</p>
<pre><code>NSLog(@&quot;%@&quot;,localeDate);
NSLog(@&quot;%f&quot;,count);
</code></pre><p>}<br>else<br>{<br>    NSLog(@”无法计算”);<br>}<br>复制代码<br>上面的例子要求返回2013年3月22日当月的起始时间，以及当月的秒数。得到的结果是：2013-03-01 00:00:00 +0000，2678400。(2678400 = 31天 <em> 24小时 </em> 60分 * 60秒)。</p>
<p>假如将上面的日历单位改为NSWeekCalendarUnit，那么得到的结果是：2013-03-17 00:00:00 +0000，604800。当周的第一天是3月17日。(604800 = 7天 <em> 24小时 </em> 60分 * 60秒)。</p>
<p>假如将上面的日历单位改为NSYearCalendarUnit，那么得到的结果是：2013-01-01 00:00:00 +0000，31536000。这一年的第一天是1月1日，(31536000 = 365天 <em> 24小时 </em> 60分 * 60秒)。</p>
<p>NSDateFormatter</p>
<p>NSDateFormatter的日期格式如下:</p>
<p>复制代码<br>G – 纪元<br>一般会显示公元前(BC)和公元(AD)</p>
<p>y – 年<br>假如是2013年，那么yyyy=2013，yy=13  </p>
<p>M – 月<br>假如是3月，那么M=3，MM=03，MMM=Mar，MMMM=March<br>假如是11月，那么M=11，MM=11，MMM=Nov，MMMM=November</p>
<p>w – 年包含的周<br>假如是1月8日，那么w=2(这一年的第二个周)</p>
<p>W – 月份包含的周(与日历排列有关)<br>假如是2013年4月21日，那么W=4(这个月的第四个周)</p>
<p>F – 月份包含的周(与日历排列无关)<br>和上面的W不一样，F只是单纯以7天为一个单位来统计周，例如7号一定是第一个周，15号一定是第三个周，与日历排列无关。</p>
<p>D – 年包含的天数<br>假如是1月20日，那么D=20(这一年的第20天)<br>假如是2月25日，那么D=31+25=56(这一年的第56天)</p>
<p>d – 月份包含的天数<br>假如是5号，那么d=5，dd=05<br>假如是15号，那么d=15，dd=15</p>
<p>E – 星期<br>假如是星期五，那么E=Fri，EEEE=Friday</p>
<p>a – 上午(AM)/下午(PM)</p>
<p>H – 24小时制，显示为0–23<br>假如是午夜00:40，那么H=0:40，HH=00:40</p>
<p>h – 12小时制，显示为1–12<br>假如是午夜00:40，那么h=12:40</p>
<p>K – 12小时制，显示为0–11<br>假如是午夜00:40，那么K=0:40，KK=00:40</p>
<p>k – 24小时制，显示为1–24<br>假如是午夜00:40，那么k=24:40</p>
<p>m – 分钟<br>假如是5分钟，那么m=5，mm=05<br>假如是45分钟，那么m=45，mm=45</p>
<p>s – 秒<br>假如是5秒钟，那么s=5，ss=05<br>假如是45秒钟，那么s=45，ss=45</p>
<p>S – 毫秒<br>一般用SSS来显示</p>
<p>z – 时区<br>表现形式为GMT+08:00</p>
<p>Z – 时区<br>表现形式为+0800<br>复制代码<br>NSDateFormatter的两个最实用的方法是dateFromString和stringFromDate，前者将一个字符串经过格式化后变成NSDate对象，后者将NSDate对象格式化成字符串。</p>
<p>在调用setDateFormat设置格式化字符串时，可以加入一些别的字符串，用单引号来引入，例如：</p>
<p>[formatter setDateFormat:@”yyyy-MM-dd ‘some ‘’special’’ string’ HH:mm:ss”];<br>使用NSDateFormatter转换时间字符串时，默认的时区是系统时区，例如在中国一般都是北京时间(+8)，如果直接转换会导致结果相差8小时，所以一般的做法是先指定时区为GMT标准时间再转换，例如：</p>
<p>复制代码<br>NSDateFormatter *formatter = [[NSDateFormatter alloc] init];<br>[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];<br>[formatter setDateFormat:@”yyyy-MM-dd HH:mm:ss z”];</p>
<p>NSDateComponents *compt = [[NSDateComponents alloc] init];<br>[compt setYear:2013];<br>[compt setMonth:3];<br>[compt setDay:13];<br>[compt setHour:1];<br>[compt setMinute:55];<br>[compt setSecond:28];</p>
<p>NSCalendar <em>calendar = [NSCalendar currentCalendar];<br>[calendar setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];<br>NSDate </em>date = [calendar dateFromComponents:compt];<br>NSLog(@”%@”,date);<br>NSString *str = [formatter stringFromDate:date];<br>NSLog(@”%@”,str);</p>
<h3 id="关于pop-动画引擎两个例子"><a href="#关于pop-动画引擎两个例子" class="headerlink" title="关于pop 动画引擎两个例子"></a>关于pop 动画引擎两个例子</h3><p>取色功能动效遇到两个比较麻烦的点，<br>1). 今天在做一个动画的时候，使用‘pop’时候，发现动作做完了，然后一个按钮使其回归原位，但是再做动作的时候，就只动了一下。难以查看过程，当我打断点到layoutSubviews的时候，果然进去了。然后不知道是谁调用的，于是我去使用time profile看了那一段时间干了什么事。于是看到了layoutSubviews被调用了，是‘pop’某一块调用了，使view又跑回原位。这时候，要么将布局代码写到其他地方，要么使用UIView的动画，我选择了后者。<br>2). 在一个回馈动效中使用POPSpringAnimation，但是由于滑块可以快速多次滑动，所以在弹性高过预定值，会产生negative值，即负值，这时3D transform中，scaleXY会出现rotate情况，<code>https://github.com/facebook/pop/issues/76</code>，这里采用clamp，在结束时，不超过回弹值。可以使用下面给出的两端中其一都可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-(void)popupMensionNode&#123;</span><br><span class="line">    POPBasicAnimation *nodeAnim = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];</span><br><span class="line">    nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    nodeAnim.autoreverses = YES;</span><br><span class="line">    nodeAnim.duration = 0.25;</span><br><span class="line">    [_textNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-(void)popupMensionNode&#123;</span><br><span class="line">    POPSpringAnimation *imageNodeAnim = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    imageNodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];</span><br><span class="line">    imageNodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    imageNodeAnim.autoreverses = YES;</span><br><span class="line">    imageNodeAnim.clampMode = kPOPAnimationClampEnd;</span><br><span class="line">    imageNodeAnim.springBounciness = 8;</span><br><span class="line">//    imageNodeAnim.springSpeed = 20;</span><br><span class="line">    [_textNode.layer pop_addAnimation:imageNodeAnim forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="今天遇到这么个问题-UIImageView-上面有控件-label-和button-但是看起来很模糊"><a href="#今天遇到这么个问题-UIImageView-上面有控件-label-和button-但是看起来很模糊" class="headerlink" title="今天遇到这么个问题 UIImageView 上面有控件 label 和button ,但是看起来很模糊"></a>今天遇到这么个问题 UIImageView 上面有控件 label 和button ,但是看起来很模糊</h3><p>今天遇到这么个问题 UIImageView 上面有控件 label 和button ,但是看起来很模糊。我当时以为其是否因为是被设置backgroundColor ,但是在设置了UIImageView的图片时，还是模糊。目前未知原因，leave a tag。</p>
<h3 id="浮点精度计算-http-www-jianshu-com-p-25d24a184016"><a href="#浮点精度计算-http-www-jianshu-com-p-25d24a184016" class="headerlink" title="浮点精度计算  http://www.jianshu.com/p/25d24a184016"></a>浮点精度计算  <a href="http://www.jianshu.com/p/25d24a184016" target="_blank" rel="noopener">http://www.jianshu.com/p/25d24a184016</a></h3><p>NSDecimalNumber <em>price1 = [NSDecimalNumber decimalNumberWithString:@”15.99”];<br>NSDecimalNumber </em>price2 = [NSDecimalNumber decimalNumberWithString:@”29.99”];<br>NSDecimalNumber <em>coupon = [NSDecimalNumber decimalNumberWithString:@”5.00”];<br>NSDecimalNumber </em>discount = [NSDecimalNumber decimalNumberWithString:@”.90”];<br>NSDecimalNumber <em>numProducts = [NSDecimalNumber decimalNumberWithString:@”2.0”];<br>NSDecimalNumber </em>subtotal = [price1 decimalNumberByAdding:price2];//price1+price2<br>NSDecimalNumber <em>afterCoupon = [subtotal decimalNumberBySubtracting:coupon];//subtotal-conpon<br>NSDecimalNumber </em>afterDiscount = [afterCoupon decimalNumberByMultiplyingBy:discount];//afterCoupon<em>discount<br>NSDecimalNumber </em>average = [afterDiscount decimalNumberByDividingBy:numProducts];//afterDiscount/2<br>NSDecimalNumber <em>averageSquared = [average decimalNumberByRaisingToPower:2];//average</em>average<br>NSLog(@”Subtotal: %@”, subtotal);                       // 45.98<br>NSLog(@”After coupon: %@”, afterCoupon);                // 40.98<br>NSLog((@”After discount: %@”), afterDiscount);          // 36.882<br>NSLog(@”Average price per product: %@”, average);       // 18.441<br>NSLog(@”Average price squared: %@”, averageSquared);    // 340.070481</p>
<h3 id="iOS多target-http-www-cnblogs-com-yajunLi-p-6001132-html"><a href="#iOS多target-http-www-cnblogs-com-yajunLi-p-6001132-html" class="headerlink" title="iOS多target http://www.cnblogs.com/yajunLi/p/6001132.html"></a>iOS多target <a href="http://www.cnblogs.com/yajunLi/p/6001132.html" target="_blank" rel="noopener">http://www.cnblogs.com/yajunLi/p/6001132.html</a></h3><p>iOS 如何创建多个target，同时表达多target的意义</p>
<h3 id="理解的营收模式"><a href="#理解的营收模式" class="headerlink" title="理解的营收模式"></a>理解的营收模式</h3><p>1：类似onePassword   可以试用1个月 然后，需要购买服务，，收费，，也不贵，，大概也是6、7、10块这样的，永久使用，，，<br>2：限制一些输入，，比如用户可以选择我们给的默认文案，但是用户要自定义，，那就收费，，再给会员予以多个账本创建能力，，，未付费仅能使用1个<br>3：增值服务收费吧；云同步，导出账本，这一类功能开放<br>4：增值服务和广告</p>
<p>多快好省</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2017-08-24lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/08/24/2017-08-24lesson/">2017/08/24lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/08/24/2017-08-24lesson/" class="article-date">
	  <time datetime="2017-08-24T15:52:28.000Z" itemprop="datePublished">August 24, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2017/08/07<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">vim .gitignore</span><br><span class="line"></span><br><span class="line">*/build/*</span><br><span class="line">*.pbxuser</span><br><span class="line">!default.pbxuser</span><br><span class="line">*.mode1v3</span><br><span class="line">!default.mode1v3</span><br><span class="line">*.mode2v3</span><br><span class="line">!default.mode2v3</span><br><span class="line">*.perspectivev3</span><br><span class="line">!default.perspectivev3</span><br><span class="line">xcuserdata</span><br><span class="line">profile</span><br><span class="line">*.moved-aside</span><br><span class="line">DerivedData</span><br><span class="line">.idea/</span><br><span class="line">*.hmap</span><br><span class="line">DS_Store</span><br><span class="line"></span><br><span class="line">#CocoaPods</span><br><span class="line">Pods</span><br><span class="line">Podfile.lock</span><br><span class="line">build*</span><br><span class="line">pics*</span><br><span class="line">a.diff</span><br></pre></td></tr></table></figure></p>
<p>这时还没生效，要么全部quit掉，要么clean cache：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">改动过.gitignore文件之后，在repo的根目录下运行：</span><br><span class="line">git rm -r --cached .</span><br><span class="line">git add .</span><br><span class="line">之后可以进行提交：</span><br><span class="line">git commit -m &quot;fixed untracked files&quot;w</span><br></pre></td></tr></table></figure></p>
<h3 id="最近在学习openGL-ES"><a href="#最近在学习openGL-ES" class="headerlink" title="最近在学习openGL ES"></a>最近在学习openGL ES</h3><p>发现这没有速成方法，遂接下来要每天都抄写熟悉，熟练。这，是一门必修课，肯定会有大用处的。<br>另附学习的metaball学习，还没学成，继续。<br>罗列好的学习网址：</p>
<ul>
<li><a href="http://labs.byhook.com/2011/09/26/vector-metaballs/" target="_blank" rel="noopener">http://labs.byhook.com/2011/09/26/vector-metaballs/</a></li>
<li><a href="https://github.com/Dillion/VectorMetaballs" target="_blank" rel="noopener">https://github.com/Dillion/VectorMetaballs</a></li>
<li><a href="http://t-machine.org/index.php/2013/10/18/ios-open-gl-es-2-multiple-objects-at-once/" target="_blank" rel="noopener">http://t-machine.org/index.php/2013/10/18/ios-open-gl-es-2-multiple-objects-at-once/</a></li>
<li><a href="https://www.khronos.org/opengl/wiki/Framebuffer_Object_Extension_Examples" target="_blank" rel="noopener">https://www.khronos.org/opengl/wiki/Framebuffer_Object_Extension_Examples</a></li>
<li><a href="http://blog.db-in.com/all-about-opengl-es-2-x-part-2/#primitives" target="_blank" rel="noopener">http://blog.db-in.com/all-about-opengl-es-2-x-part-2/#primitives</a></li>
<li><a href="https://github.com/kesalin/OpenGLES" target="_blank" rel="noopener">https://github.com/kesalin/OpenGLES</a></li>
<li><a href="http://www.jianshu.com/p/750fde1d8b6a" target="_blank" rel="noopener">http://www.jianshu.com/p/750fde1d8b6a</a></li>
<li><a href="https://www.raywenderlich.com/3664/opengl-tutorial-for-ios-opengl-es-2-0" target="_blank" rel="noopener">https://www.raywenderlich.com/3664/opengl-tutorial-for-ios-opengl-es-2-0</a></li>
<li><a href="https://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures" target="_blank" rel="noopener">https://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures</a></li>
<li><a href="http://blog.csdn.net/icetime17/article/details/50429658" target="_blank" rel="noopener">http://blog.csdn.net/icetime17/article/details/50429658</a></li>
<li><a href="http://www.cnblogs.com/salam/p/5113572.html" target="_blank" rel="noopener">http://www.cnblogs.com/salam/p/5113572.html</a></li>
<li><a href="http://mobile.51cto.com/app-show-436793.htm" target="_blank" rel="noopener">http://mobile.51cto.com/app-show-436793.htm</a></li>
<li><a href="http://blog.csdn.net/yzfuture2010/article/details/7799800" target="_blank" rel="noopener">http://blog.csdn.net/yzfuture2010/article/details/7799800</a></li>
</ul>
<p>小的app 的生存之道就只有做好，然后苹果推荐。不然没有推广，再好都没用。是金子总会发光，可会发光的金子，时间一长，人就变了胃口喜欢钞票了。IT，时时刻刻要变化。说这些就是要推荐，那随随便便就可以苹果推荐了？？想多了，我查看了推过苹果推荐的，要么是公司花人力物力累积，要么是大牛写写出来绚丽。所以好的东西，需要的沉淀是必然的。没有花心思，只是小东西，苹果商店不缺，只有好的拼一把，才能出众！！！<br>openGL ES 这是非学不可。只要在我要用的领域学够！！！</p>
<h3 id="使用宏忽略警告-http-blog-csdn-net-majiakun1-article-details-46424925"><a href="#使用宏忽略警告-http-blog-csdn-net-majiakun1-article-details-46424925" class="headerlink" title="使用宏忽略警告 http://blog.csdn.net/majiakun1/article/details/46424925"></a>使用宏忽略警告 <a href="http://blog.csdn.net/majiakun1/article/details/46424925" target="_blank" rel="noopener">http://blog.csdn.net/majiakun1/article/details/46424925</a></h3><p>1.使用函数指针方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SEL selector = NSSelectorFromString(@&quot;someMethod&quot;);</span><br><span class="line">IMP imp = [_controller methodForSelector:selector];</span><br><span class="line">void (*func)(id, SEL) = (void *)imp;</span><br><span class="line">func(_controller, selector);</span><br></pre></td></tr></table></figure></p>
<p>当有额外参数时，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SEL selector = NSSelectorFromString(@&quot;processRegion:ofView:&quot;);</span><br><span class="line">IMP imp = [_controller methodForSelector:selector];</span><br><span class="line">CGRect (*func)(id, SEL, CGRect, UIView *) = (void *)imp;</span><br><span class="line">CGRect result = func(_controller, selector, someRect, someView);</span><br></pre></td></tr></table></figure></p>
<p>2.使用宏忽略警告<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#pragma clang diagnostic push </span><br><span class="line">#pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot; </span><br><span class="line">   [someController performSelector: NSSelectorFromString(@&quot;someMethod&quot;)]</span><br><span class="line">#pragma clang diagnostic pop</span><br></pre></td></tr></table></figure></p>
<p>通过使用#pragma clang diagnostic push/pop，你可以告诉Clang编译器仅仅为某一特定部分的代码来忽视特定警告。<br>如果需要忽视的警告有多处，可以定义一个宏<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">#define SuppressPerformSelectorLeakWarning(Stuff) \</span><br><span class="line">    do &#123; \</span><br><span class="line">        _Pragma(&quot;clang diagnostic push&quot;) \</span><br><span class="line">        _Pragma(&quot;clang diagnostic ignored \&quot;-Warc-performSelector-leaks\&quot;&quot;) \</span><br><span class="line">        Stuff; \</span><br><span class="line">        _Pragma(&quot;clang diagnostic pop&quot;) \</span><br><span class="line">    &#125; while (0)</span><br></pre></td></tr></table></figure></p>
<p>在产生警告也就是performSelector的地方用使用该宏，如<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SuppressPerformSelectorLeakWarning(</span><br><span class="line">    [_target performSelector:_action withObject:self]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<p>如果需要performSelector返回值的话，<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">id result;</span><br><span class="line">SuppressPerformSelectorLeakWarning(</span><br><span class="line">    result = [_target performSelector:_action withObject:self]</span><br><span class="line">);</span><br></pre></td></tr></table></figure></p>
<h3 id="iOS时区"><a href="#iOS时区" class="headerlink" title="iOS时区"></a>iOS时区</h3><pre><code>ADT = &quot;America/Halifax&quot;;
AKDT = &quot;America/Juneau&quot;;
AKST = &quot;America/Juneau&quot;;
ART = &quot;America/Argentina/Buenos_Aires&quot;;
AST = &quot;America/Halifax&quot;;
BDT = &quot;Asia/Dhaka&quot;;
BRST = &quot;America/Sao_Paulo&quot;;
BRT = &quot;America/Sao_Paulo&quot;;
BST = &quot;Europe/London&quot;;
CAT = &quot;Africa/Harare&quot;;
CDT = &quot;America/Chicago&quot;;
CEST = &quot;Europe/Paris&quot;;
CET = &quot;Europe/Paris&quot;;
CLST = &quot;America/Santiago&quot;;
CLT = &quot;America/Santiago&quot;;
COT = &quot;America/Bogota&quot;;
CST = &quot;America/Chicago&quot;;
EAT = &quot;Africa/Addis_Ababa&quot;;
EDT = &quot;America/New_York&quot;;
EEST = &quot;Europe/Istanbul&quot;;
EET = &quot;Europe/Istanbul&quot;;
EST = &quot;America/New_York&quot;;
GMT = GMT;
GST = &quot;Asia/Dubai&quot;;
HKT = &quot;Asia/Hong_Kong&quot;;
HST = &quot;Pacific/Honolulu&quot;;
ICT = &quot;Asia/Bangkok&quot;;
IRST = &quot;Asia/Tehran&quot;;
IST = &quot;Asia/Calcutta&quot;;
JST = &quot;Asia/Tokyo&quot;;
KST = &quot;Asia/Seoul&quot;;
MDT = &quot;America/Denver&quot;;
MSD = &quot;Europe/Moscow&quot;;
MSK = &quot;Europe/Moscow&quot;;
MST = &quot;America/Denver&quot;;
NZDT = &quot;Pacific/Auckland&quot;;
NZST = &quot;Pacific/Auckland&quot;;
PDT = &quot;America/Los_Angeles&quot;;
PET = &quot;America/Lima&quot;;
PHT = &quot;Asia/Manila&quot;;
PKT = &quot;Asia/Karachi&quot;;
PST = &quot;America/Los_Angeles&quot;;
SGT = &quot;Asia/Singapore&quot;;
UTC = UTC;
WAT = &quot;Africa/Lagos&quot;;
WEST = &quot;Europe/Lisbon&quot;;
WET = &quot;Europe/Lisbon&quot;;
WIT = &quot;Asia/Jakarta&quot;;
</code></pre><h3 id="离开海外部-稍微总结一下"><a href="#离开海外部-稍微总结一下" class="headerlink" title="离开海外部,稍微总结一下"></a>离开海外部,稍微总结一下</h3><p>twitter 分享，是不跳转<br>instagram 只能分享图片<br>twitter 在创建完app key、secret 时需要在permission 里面再设置一项：获得access 能力。同时update。<br>外国在UI上注重的比国内要强很多。外国在矩阵、重度OpenGL 比国内要强很多。</p>
<h3 id="Reveal-iFile-路径"><a href="#Reveal-iFile-路径" class="headerlink" title="Reveal_iFile_路径"></a>Reveal_iFile_路径</h3><p><a href="http://www.cnblogs.com/blfbuaa/p/7248252.html" target="_blank" rel="noopener">http://www.cnblogs.com/blfbuaa/p/7248252.html</a><br>这时候，我们在Mac浏览器里打开192.168.<em>.**</em>，就能够查看iPhone上的文件系统。并上传文件到iPhone了。</p>
<p>打开Mac上的Reveal。并选择”Help”-“Show Reveal Library in Finder”。这时候有2个文件：Reveal.framework和libReveal.dylib。</p>
<p>将Reveal.framework压缩(不能上传文件夹)并上传到iPhone的”/System/Library/Frameworks/”文件夹中，然后解压缩；</p>
<p>在iFile里打开”应用程序”文件夹(iFile的内置书签)，找到你想查看的APP文件夹里的info.plist文件。查找这个APP的Bundle ID，如果为com.example.domain。</p>
<p>在Mac上创建libReveal.plist，编辑内容为：<br>“`<br>{<br>Filter={<br>Bundles = “com.example.domain”;<br>}<br>}<br>上传libReveal.plist到”/Library/MobileSubstrate/DynamicLibraries”，也就是和libReveal.dylib在一起。</p>
<p>最后一步。重新启动iPhone。然后打开想要查看的APP。Mac上的Reveal就有反应啦！</p>
<h3 id="记一次GPUImage-在export-movie-内存暴涨，崩溃问题"><a href="#记一次GPUImage-在export-movie-内存暴涨，崩溃问题" class="headerlink" title="记一次GPUImage 在export movie 内存暴涨，崩溃问题"></a>记一次GPUImage 在export movie 内存暴涨，崩溃问题</h3><p>原因是在GPUImage 加了UIElementFilter 现实纹理，其在update中需要update 操作。机型是iOS 9 以上，只要视频大于2分钟，就一定出现崩溃现象。原因为，uielement 在update 内部操作中没有进行及时内存释放。此时操作，是将@autoreleasepool { [x update]; }包裹即可解决。 </p>
<h3 id="记一次比较闹心的事"><a href="#记一次比较闹心的事" class="headerlink" title="记一次比较闹心的事"></a>记一次比较闹心的事</h3><p>之前从海外组回归到原本团队，海外组探求之后，没能做到利益，没办法，其实海外领队和其中内部全部开发:两个开发-.-都知道。这其实是一个没有绝对胜仗可打的局。前面没有路走，只有试试、只有闯闯，成功就成功，失败领队都没有怨言，壮士扼腕，是我觉得的扼腕。<br>回来之后我完成原本project内部的业务部分。正如当时进来时，大师和我们说的，这里面基本都是业务，全是业务。<br>是的，基本都是业务，按照其中条条框框，按部就班，规规矩矩。<br>重回到之前状态，还是没找到感觉，但一回来就给我weex 和内部代码之间的交互。那好，我搞搞，建了个类写一写，写到一半，他们又说继承他们的。好好好，继承你们的，想着他们还可能用得上这个，没去掉，至少之后可以继续扩展下去，就留着那个类，这个留着后话。<br>继承他人的类，那个类不小啊，，700多行，然后其有一些view 是weex 交流。weex 的html是军哥那边搞的，他都没做好，我要和他一起搞。继承的类，想着尽量不动那些代码，就用for 循环 把其上的view 全部删了。那个页面真不要啊，和他们讨论，他们说要是有要添加的，那不就一块没啦。。听到这里我蛋疼的一比。这是weex 页面，客户端要改也是在我新添加的层上加啊。我仅仅是使用你的功能而已，整个view 都应该给你扔了了，全部在我新写的功能页面上才对。虽然我知道，这种删除做法是绝对的错误，但是，他适用在这。<br>接下来是一个打log 的问题上。这个project 能使用的log 有：CCLog、DLog、FSLog、等等等，NSLog 我也不清楚他们有否在Release 上去掉相应的定义，所以尽量不敢用NSLog。那就想着用我以前用的CCLog吧。然而问题又来了，不要打CCLog 啊(我当时还不知道有DLog这玩意)，难道用console window，用断点。我曹，我都骂出来。我现在用的黑苹果，不知为何其在大型项目会这么卡，编译也比较慢。先讲断点，我用的iPhone 6s，project如果不在断点页面运行，那么肯定断点几乎就不相应的；在相应断点页面却也不一定出来，出来也卡的半死。再讲我未断点和断点切换都能卡，我要特么不打log，是别想开发了。而且这种业务型的，不看内里数据，是无法继续的了，这又是一个蛋疼。<br>再说一个我的缺点吧，这是我的不对地方：<br>我不爱写注释。我不写注释，前提是东西简单、业务单项、方法名已经取好了。还有就是我从海外部转回来，作为我安分守己的性格，尽量都是做到不动其他代码，于是出现了我新建一个和之前类名很类似的类，却没有把他删除。我有错这个，但却不能错在我。我回来的时候，什么都没有知会，没有权利，只有义务。说我好歹是中级开发者，代码却没有好好维护，写不好代码，这我就更不同意了，我就一码农，开开心心生活的码农，，，开开心心多好，哈哈哈<br>接下来还是一个蛋疼的地方，注释掉的东西，我有时会留在那里。一个类东西不多，注释掉的有些用处，或者不太占位置，我就不会太在意那些。<br>于是在这次也特别说我的这点，这点我认了。之后勤快些吧，尽量谢谢注释吧，毕竟确实是我不对；如果有需要删除、测试代码等对源码可能造成影响的，我都要注意了；毕竟这也是个人修养，对我有好处，让我升级为好好码农也是不错的。。。<br>继承他人，有我不需要实现的功能，甚至替换他人代码层面，看到那些就蛋疼了。<br>最最最后说一个。我特么一过来就丢给我一个UI、丢一个wiki、我都还是不知道里面什么鬼，要问个人要转好几个弯，来来回回，晕头转向，过去了，大师态度我自己知道，说的很迷糊那种，问回来了还是迷迷糊糊。然而项目已经把时间差不多给你定好了。<br>你说蛋疼不。发版的时间就这么几天，那边都还没做好，下一个要做的功能又来了。<br>这次说我，我觉得很小题大作，我觉得无所谓，我会吸取教训，“小心、小心再小心”而已。我只是那只跳起来的鸡，刚好从海外组过来，是该杀杀锐气的。也为他人警示，警示也是有好处的警示，我认了。<br>规范也没说，那就个人尽量做好即可。我那一两个空文件，project 就卡的半死啦？？<br>那么多的重复库，重复定义，奇奇怪怪的内容、图片，就把我说一通？？<br>这个我嘴里服，心里也不服。说我不把项目当自己的搞，毛蛋！我要是不当回事，我代码就能写成以完成任务为主了。<br>再说之前那个类，那个类是我特么要写着留下来升华的，不用我早删了好伐，虽然不见得目前这个功能还没好，我可能会后面补上，但这个本来我就是要自己写，被你们决定要换思路的好伐，忘记是正常的，我现在还不知道这个weex内部怎么沟通的，脑子还是一团浆糊咧，哪可能记得那个啊。不要说你们写demo的时候第一次写把每个api 铭记，能记住的往后站，大部分都记不住好伐。我特么不标榜自己是多高尚的人，多聪明的人，我特么就是个努力的人，仅仅努力而已，我也不想我能写出多么超级超级好的代码，中国人是需要生活的，不是码神。<br>OK，说了那么多，是该说重点了。<br>这么多年来，我一直说着，学完这一个，是会上升自己空间了，学完这一个，我又更强大了，基本在这个层面的人都是比较好的，普遍普通类别之上的了。但是还是不够。我来当前公司，其实就是奔着学习而来。其实已经大差不差。比如一些思维开拓，一些产品思维、一些业务逻辑，一些控制管理，把控等，在新的知识储备方面也更加的好了，也更多的接触到底层，能做更好的了。<br>其实好的东西不是说拼命往上赶，拼命往上堆叠，就能好的。<br>好的东西，都是要有好的技术，好的底层。正如我之前思考的，很多的好的，能令人轰动的都是别人能学其表，难成其里的，好在了内在，真正的技术。其实现在我所做的，不过就是真的业务员，能研究的机会都不多，再难一点的东西都是局限于业务、功能块内，不能超脱，比如我们的技术领导“大师”，都把东西做到一半了，其他只不过是堆叠。<br>我自己私下，需要有两个地方开花。第一是面向工资编程的实现，没有金钱入手，什么都是没用的。<br>第二是将我这三十岁之前最后一个，最难的的东西学好：opengl。<br>以前确实都不是我该学习该物的时候，但，现在已经可以。以前的知识储备完全不能理解其中变化，现在已经能够得着了，也就是时候了。<br>是时候了。<br>想想兰姐2年5多部电影。我更努力学习难道不应该乎？</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2017-7-30lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/07/30/2017-7-30lesson/">2017/7/30lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/07/30/2017-7-30lesson/" class="article-date">
	  <time datetime="2017-07-29T16:02:57.000Z" itemprop="datePublished">July 30, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="新App上传"><a href="#新App上传" class="headerlink" title="新App上传"></a>新App上传</h3><p>上传碰见这事：构建的版本上去了，也出现在构建版本里面，不过过没一会就消失了。由于邮箱什么的都不在我这，过了好久才想起来，用的另一个邮箱，于是去看看有没有什么说明：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Dear developer,</span><br><span class="line">We have discovered one or more issues with your recent delivery for &quot;Color Saga - Coloring book&quot;. To process your delivery, the following issues must be corrected:</span><br><span class="line">Non-public API usage:</span><br><span class="line">The app references non-public symbols in XXT: _UICreateCGImageFromIOSurface</span><br><span class="line">If method names in your source code match the private Apple APIs listed above, altering your method names will help prevent this app from being flagged in future submissions. In addition, note that one or more of the above APIs may be located in a static library that was included with your app. If so, they must be removed.</span><br><span class="line">If you think this message was sent in error and that you have only used Apple-published APIs in accordance with the guidelines, send the app&apos;s nine-digit Apple ID, along with detailed information about why you believe the above APIs were incorrectly flagged, to appreview@apple.com. For further information, visit the Technical Support Information page.</span><br><span class="line">Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSCalendarsUsageDescription key with a string value explaining to the user how the app uses this data.</span><br><span class="line">Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.</span><br><span class="line">Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSBluetoothPeripheralUsageDescription key with a string value explaining to the user how the app uses this data.</span><br><span class="line">Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSMicrophoneUsageDescription key with a string value explaining to the user how the app uses this data.</span><br><span class="line">Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSMotionUsageDescription key with a string value explaining to the user how the app uses this data.</span><br><span class="line">Once these issues have been corrected, you can then redeliver the corrected binary.</span><br><span class="line">Regards,</span><br><span class="line">The App Store team</span><br></pre></td></tr></table></figure>
<p>然后就找到这篇文章，唉，，Reavel我按照教程，说不出问题了呀，但还是出这个问题了。</p>
<p><a href="http://www.cnblogs.com/WayneLiu/p/5251565.html" target="_blank" rel="noopener">http://www.cnblogs.com/WayneLiu/p/5251565.html</a></p>
<h3 id="YTKNetWork-在cacheData-时出错"><a href="#YTKNetWork-在cacheData-时出错" class="headerlink" title="YTKNetWork 在cacheData 时出错"></a>YTKNetWork 在cacheData 时出错</h3><p>缘由是cacheData数据没有在拿到缓存之后继续跟服务器获取，查到<a href="https://github.com/yuantiku/YTKNetwork/issues/106" target="_blank" rel="noopener">https://github.com/yuantiku/YTKNetwork/issues/106</a><br>处理为下例:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">XXHomeCateListApi *cateListApi = [[XXHomeCateListApi alloc]initWithData:@&#123;@&quot;category_id&quot;:self.cateModel.id,@&quot;start&quot;:input,@&quot;category_name&quot;:self.cateModel.name&#125;];</span><br><span class="line">if ([cateListApi loadCacheWithError:nil]) &#123;</span><br><span class="line">[self requestSuccessWithapi:cateListApi subscriber:subscriber];</span><br><span class="line">&#125;</span><br><span class="line">cateListApi = [[XXHomeCateListApi alloc]initWithData:@&#123;@&quot;category_id&quot;:self.cateModel.id,@&quot;start&quot;:input,@&quot;category_name&quot;:self.cateModel.name&#125;];</span><br><span class="line">[cateListApi startWithoutCache];</span><br><span class="line">[cateListApi startWithCompletionBlockWithSuccess:^(__kindof YTKBaseRequest * _Nonnull request) &#123;</span><br><span class="line">&#125; failure:^(__kindof YTKBaseRequest * _Nonnull request) &#123;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure>
<h3 id="InAPPPurchase"><a href="#InAPPPurchase" class="headerlink" title="InAPPPurchase"></a>InAPPPurchase</h3><p>这几天有做内购遇到的问题</p>
<ul>
<li>首先是刚进入先确认一次内购金额和手机当前货币的对比，保存该数据（如果没有获取到则显示默认的美金金额）如</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">+(void)queryProductMoney&#123;</span><br><span class="line">dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;</span><br><span class="line">NSArray *googsArray = @[@&quot;0&quot;,@&quot;1&quot;,@&quot;12&quot;];</span><br><span class="line">NSSet *products = [NSSet setWithArray:googsArray];</span><br><span class="line">[[RMStore defaultStore] requestProducts:products success:^(NSArray *products, NSArray *invalidProductIdentifiers) &#123;</span><br><span class="line">NSLog(@&quot;Products loaded&quot;);</span><br><span class="line">NSMutableDictionary *priceDic = [@&#123;&#125; mutableCopy];</span><br><span class="line">[products enumerateObjectsUsingBlock:^(SKProduct*  _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;</span><br><span class="line">LxDBAnyVar(obj);</span><br><span class="line">NSString *str = [XXPurchaseRequest currencyPriceWithProduct:obj];</span><br><span class="line">[priceDic setObject:str forKey:obj.productIdentifier];</span><br><span class="line">&#125;];</span><br><span class="line">[USERDEFAULT setObject:priceDic forKey:kAPPProduct];</span><br><span class="line">&#125; failure:^(NSError *error) &#123;</span><br><span class="line">&#125;];</span><br><span class="line">&#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样便能显示出你当前要展示的加个信息了。</p>
<ul>
<li>关于内购时省查最严的就是More Info这个关键词。More Info 填写在有持续性扣费，会更加严格，我们当时在“Mine APP” 备注加上<br><code>we have the purchase info at setting page ,click the &quot;Subscription FAQ&quot;&amp;&quot;About&quot; which user purchase info is display there. when user is about to pay, there have a button name &quot;more info&quot; , user can get enough help with that.</code> </li>
</ul>
<p>然后在相应位置提供more info。特么注明要有如以下词汇：改词汇来自“ColorSaga”</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ColorSaga Premium</span><br><span class="line">- With ColorSaga Premium you can subscribe for daily new picture updates and unlimited access to the full picture catalog</span><br><span class="line">- You&apos;ll be able to access all available pictures</span><br><span class="line">- The subscriptions are $2.99 USD weekly, $7.99 USD monthly and $39.99 USD annually or equal to the same price tier that &quot;Apple&apos;s App Store Matrix&quot; determines in other currencies.</span><br><span class="line">- You may cancel a subscription or free-trial anytime via the subscription setting through your iTunes account. This must be done 24 hours before the end of the free-trial or subscription period to avoid being charged. </span><br><span class="line">- Subscription automatically renews unless auto-renew is turned off at least 24-hours before the end of the current period. No cancellation of the current subscription is allowed during active subscription period. Any unused portion of a free-trial period, will be forfeited when the user purchases a ColorSaga Premium</span><br><span class="line"></span><br><span class="line">Terms of use: http://d.fenfenriji.com/colorx/html/termsOfService.html</span><br><span class="line">Privacy policy: http://d.fenfenriji.com/colorx/html/privacyPolicy.html</span><br></pre></td></tr></table></figure>
<ul>
<li>技术支持URL</li>
</ul>
<p>可以使用github 网址或者博客网址，但是一定要有两个因素：1，该为为xxx提供技术支持 2，该含有联系电话或联系邮箱</p>
<ul>
<li>在上线一两天之后开始做一次应用购买以提升曝光率。小技巧</li>
</ul>
<p>应用如果有付费情况，然后过几天之后就解开，那么会有一些网站给该应用写报道，称限免应用，这样会出现一波高增长。</p>
<h3 id="CaLayer-drawInContext-绘图方法，出现-lt-Error-gt-CGContextSetFlatness-invalid-context-0x0-If-you-want-to-see-the-backtrace-please-set-CG-CONTEXT-SHOW-BACKTRACE-environmental-variable"><a href="#CaLayer-drawInContext-绘图方法，出现-lt-Error-gt-CGContextSetFlatness-invalid-context-0x0-If-you-want-to-see-the-backtrace-please-set-CG-CONTEXT-SHOW-BACKTRACE-environmental-variable" class="headerlink" title="CaLayer drawInContext 绘图方法，出现&lt;Error&gt;: CGContextSetFlatness: invalid context 0x0. If you want to see the backtrace, please set CG_CONTEXT_SHOW_BACKTRACE environmental variable."></a>CaLayer drawInContext 绘图方法，出现<code>&lt;Error&gt;: CGContextSetFlatness: invalid context 0x0. If you want to see the backtrace, please set CG_CONTEXT_SHOW_BACKTRACE environmental variable.</code></h3><p>在<code>-(void)drawInContext:(CGContextRef)ctx</code>方法开始第一句加上<code>UIGraphicsPushContext(ctx);</code>，因为当前绘图上下文在上层</p>
<h3 id="UIColor-colorWithPattern-gt-提供一个图"><a href="#UIColor-colorWithPattern-gt-提供一个图" class="headerlink" title="UIColor colorWithPattern-&gt;提供一个图"></a>UIColor colorWithPattern-&gt;提供一个图</h3><p>最近在做绘图工具，思考要一个东西。即要画一个有texture layer的图，没法输入。一开始有想法说在layer的contents，将图片叠加之后的image填为contents，后来重新看到这个方法即想到了，我可以使用color 的其中一个方法colorWithPattern的方法得到texture 图了。</p>
<h3 id="上海办理公积金"><a href="#上海办理公积金" class="headerlink" title="上海办理公积金"></a>上海办理公积金</h3><p>由于公积金可以付房租，对于待上海人来说能缓解很大很大的压力。这里给出前几天去办理大概过程。<br>地点：##汉中路120号##。地铁下来之后找到#汉中路#出口，走上楼梯之后往右走。大概100米有个不是门的小入口有一个向上的logo，写着上二楼。<br>上二楼之后填写两张表格，记得人多先取等号机。<br>需要的材料：<br>(结婚)结婚证、两人一起去(看情况，那次老婆先去也办成功，尽量一起去吧)、身份证、银行卡(上海银行卡、办理支行,作用是到时办理人员要刷一下)、手机；<br>未结婚的话，除去结婚证其他同样；<br>金额：每人（每户）最多2000，按季度发放，家庭办理一个之后，扣完款没有余额了才能办理另一个人的；<br>办理成功大概需要半个月；<br>上班时间：上午9点到11点40左右 下午一点半到4点半左右；</p>
<h3 id="通过越狱机iFile-导出手机数据"><a href="#通过越狱机iFile-导出手机数据" class="headerlink" title="通过越狱机iFile 导出手机数据"></a>通过越狱机iFile 导出手机数据</h3><p>由于手机不是完美越狱，很久没更新，导入导出数据都巨麻烦。这里提供一个思路。由于iFunbox提供导入导出路径在Home 的Media文件目录。<br>首先，app 路径在/var/containers/Bundle/Application 里面找到自己要的数据，右上角Edit，右下角Copy。然后点击中间的Home键，翻到Media目录，Paste。<br>在电脑使用iFunbox 到Media目录，然后导出改文件。导入文件也同理反操作。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2017-0709lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/07/09/2017-0709lesson/">2017/0709lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/07/09/2017-0709lesson/" class="article-date">
	  <time datetime="2017-07-09T15:22:09.000Z" itemprop="datePublished">July 9, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="2017-05-31"><a href="#2017-05-31" class="headerlink" title="2017/05/31"></a>2017/05/31</h3><p>使用UIEffectView 的一个坑：UIEffectView的实现方式是将底部的着色吸附到当前View中。我喜欢使用帧动画，pop更加爱，于是出现一个情况，该effectView在上下滑动时，吸附的图片会出现在之前的位置，很不稳定，估计是使用局部变量编写，然后没有着色在之前的rect上面，出现有刷新当前区域指令的时候，就会清楚这块不稳定内容。<br>这个问题重点在动画上。pop帧动画，采用逐步转移，而不是我现在解决使用的UIView动画。UIView动画是点到终点的动画，而pop是过程可逆的过程动画。</p>
<h3 id="这里记录一次ASDK中滑动卡顿一愣一愣，以及push卡顿。"><a href="#这里记录一次ASDK中滑动卡顿一愣一愣，以及push卡顿。" class="headerlink" title="这里记录一次ASDK中滑动卡顿一愣一愣，以及push卡顿。"></a>这里记录一次ASDK中滑动卡顿一愣一愣，以及push卡顿。</h3><p>ASDK滑动卡顿解决过程，使用将其他因素全部关掉方法。心里解决难，是因为其还有其他可能卡顿因素，所以不觉得是因为在ASDK内容物问题，因为试图由好几个层级嵌套合成。真正卡顿在ASCellNode里面，由于设计图要有cornerRadius ，单元格要有shadow，于是我加在didLoad方法里面。但是每次滑动过程，可能走到了shadow 过程，于是试图又尝试算了一遍。<br>push卡顿问题，首先要理解试图从创建过程，到压栈完成的流程。首先走init方法、接着走pushViewcontroller、viewDidLoad方法、然后走push压栈动画、最后viewwillappear。由于压栈动画是要有主线程的，当然viewDidLoad中也是有主线程卡主，那么也会有进入很慢的过程。<br>这次是因为我加了一个小方法-&gt;使用SVGKit 加载一个svg 然后转成image过程。在其中一个UIView的子UIButton使用了该转换的Image，于是我一次次打log，计算时间消耗，该处消耗0.6s，而且是在主线程，于是该处出现了卡顿。</p>
<h3 id="锤子和钉子，工具和需求"><a href="#锤子和钉子，工具和需求" class="headerlink" title="锤子和钉子，工具和需求"></a>锤子和钉子，工具和需求</h3><p>前两天在看数据库Realm，后半段功能。然不尽了解内里，所以想问公司其他人了解我所不了解的需求完成过程。但是和他们说的过程中，博士一句话点醒了我：钉子是先存在的，然后找到了锤子解决；而不是拿着锤子寻找钉子。给我的醒悟是，如果我一开始还没有钉子（后半段功能产生的需求），却急于找到锤子，那么没有钉子的需求，很快我也将忘了锤子；所以我慢了下来：在目前碰到的钉子，使用一个个不同的锤子解决。</p>
<h3 id="记录一次碰到僵尸代码以及解决过程"><a href="#记录一次碰到僵尸代码以及解决过程" class="headerlink" title="记录一次碰到僵尸代码以及解决过程"></a>记录一次碰到僵尸代码以及解决过程</h3><p>当前页面是这样：push到的DetailVC 有navigationDelegate，作为转场代理，DetailVC操作完进入“完成、分享页面”，然后有这一份代码：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">self.tabBarController.selectedIndex = 1;</span><br><span class="line">[self.navigationController popToRootViewControllerAnimated:NO];</span><br></pre></td></tr></table></figure></p>
<p>让其转向tabbar为1（之前tabbarindex=0），然后popToRootVC；这里引导出了一个问题，我再点击Tabbar=0时，此时的navigationDelegate还是detailVC，但是却早已经被dealloc了，于是就崩溃。解决是viewwillDisappear处将navigationDelegate置空。<br>OK，代码解决为之上处理，但是一开始碰到这个crash的时候，程序什么提示都没有，直接进入AppDelegate的“Bad Access XXXX”。查阅资料：<a href="http://www.cocoachina.com/bbs/read.php?tid-257873.html" target="_blank" rel="noopener"></a> :你得先知道哪报错，按下面设一下，结合日志，先找到错误的代码,<br>设置NSZombieEnabled、MallocStackLogging、NSAutoreleaseFreedObjectCheckEnabled、NSDebugEnabled：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">1. Product-&gt;Edit Scheme...-&gt;Run...-&gt;EnvironmentVariables. </span><br><span class="line">2. add NSZombieEnabled，set the value with YES</span><br><span class="line">3. add MallocStackLogging, set the value with YES.</span><br><span class="line">4. add NSAutoreleaseFreedObjectCheckEnabled, set the value with YES.</span><br><span class="line">5. add NSDebugEnabled, set the value with YES.</span><br></pre></td></tr></table></figure></p>
<p>这时程序console才会打出说<code>*** -[XXXXXViewC respondsToSelector:]: message sent to deallocated instance 0x134ed5900</code><br>这时又借鉴这两篇文章:<a href="http://www.cnblogs.com/myblog-12368/p/4367034.html" target="_blank" rel="noopener"></a><br><a href="http://blog.csdn.net/smking/article/details/43775523" target="_blank" rel="noopener"></a><br>后一篇跟我的很类似，都是根据VC 和 delegate 之间的关系。然后得以解决</p>
<h3 id="library-not-found-for-lcrt"><a href="#library-not-found-for-lcrt" class="headerlink" title="library not found for -lcrt"></a>library not found for -lcrt</h3><p>出现这个错误，是因为你的测试版本号太高了，以前Demo的版本低于你能运行的版本，解决：Targets-&gt;General-&gt;Deployment Info-&gt;Deployment Target改为当前Xcode能运行的最低版本</p>
<h3 id="viewModel-xxxCommand-execute-在其返回executionSignals之前调用，不会走executionSignal方法"><a href="#viewModel-xxxCommand-execute-在其返回executionSignals之前调用，不会走executionSignal方法" class="headerlink" title="[viewModel.xxxCommand execute]在其返回executionSignals之前调用，不会走executionSignal方法"></a>[viewModel.xxxCommand execute]在其返回executionSignals之前调用，不会走executionSignal方法</h3><p>今天调试一个网络，由于试试写法execute方法，这次将其写在executionSignals之前，怎么都不会走，我怎么看写法都不可能错，在将挂起方法：execute写到后面才走。在此记录一个，有机会再看是什么缘由。</p>
<h3 id="iOS跳转到具体某个应用的设置"><a href="#iOS跳转到具体某个应用的设置" class="headerlink" title="iOS跳转到具体某个应用的设置"></a>iOS跳转到具体某个应用的设置</h3><p><a href="http://blog.csdn.net/jsjxiaobing/article/details/51260753" target="_blank" rel="noopener">http://blog.csdn.net/jsjxiaobing/article/details/51260753</a><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">NSString * UIApplicationOpenSettingsURLString = @&quot;prefs:root=WIFI&quot;;  </span><br><span class="line">NSURL * url = [NSURL URLWithString:UIApplicationOpenSettingsURLString];  </span><br><span class="line">if([[UIApplication sharedApplication] canOpenURL:url]) &#123;  </span><br><span class="line">    [[UIApplication sharedApplication] openURL:url];  </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">About — prefs:root=General&amp;path=About  </span><br><span class="line"> Accessibility — prefs:root=General&amp;path=ACCESSIBILITY  </span><br><span class="line"> AirplaneModeOn— prefs:root=AIRPLANE_MODE  </span><br><span class="line"> Auto-Lock — prefs:root=General&amp;path=AUTOLOCK  </span><br><span class="line"> Brightness — prefs:root=Brightness  </span><br><span class="line"> Bluetooth — prefs:root=General&amp;path=Bluetooth  </span><br><span class="line"> Date&amp; Time — prefs:root=General&amp;path=DATE_AND_TIME  </span><br><span class="line"> FaceTime — prefs:root=FACETIME  </span><br><span class="line"> General— prefs:root=General  </span><br><span class="line"> Keyboard — prefs:root=General&amp;path=Keyboard  </span><br><span class="line"> iCloud — prefs:root=CASTLE  iCloud  </span><br><span class="line"> Storage &amp; Backup — prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP  </span><br><span class="line"> International — prefs:root=General&amp;path=INTERNATIONAL  </span><br><span class="line"> Location Services — prefs:root=LOCATION_SERVICES  </span><br><span class="line"> Music — prefs:root=MUSIC  </span><br><span class="line"> Music Equalizer — prefs:root=MUSIC&amp;path=EQ  </span><br><span class="line"> Music VolumeLimit— prefs:root=MUSIC&amp;path=VolumeLimit  </span><br><span class="line"> Network — prefs:root=General&amp;path=Network  </span><br><span class="line"> Nike + iPod — prefs:root=NIKE_PLUS_IPOD  </span><br><span class="line"> Notes — prefs:root=NOTES  </span><br><span class="line"> Notification — prefs:root=NOTIFICATIONS_ID  </span><br><span class="line"> Phone — prefs:root=Phone  </span><br><span class="line"> Photos — prefs:root=Photos  </span><br><span class="line"> Profile — prefs:root=General&amp;path=ManagedConfigurationList  </span><br><span class="line"> Reset — prefs:root=General&amp;path=Reset  </span><br><span class="line"> Safari — prefs:root=Safari  Siri — prefs:root=General&amp;path=Assistant  </span><br><span class="line"> Sounds — prefs:root=Sounds  </span><br><span class="line"> SoftwareUpdate— prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK  </span><br><span class="line"> Store — prefs:root=STORE  </span><br><span class="line"> Twitter — prefs:root=TWITTER  </span><br><span class="line"> Usage — prefs:root=General&amp;path=USAGE  </span><br><span class="line"> VPN — prefs:root=General&amp;path=Network/VPN  </span><br><span class="line"> Wallpaper — prefs:root=Wallpaper  </span><br><span class="line"> Wi-Fi — prefs:root=WIFI  </span><br><span class="line"> Setting—prefs:root=INTERNET_TETHERING</span><br></pre></td></tr></table></figure></p>
<h3 id="记一次Instrument-Time-Profile-过程"><a href="#记一次Instrument-Time-Profile-过程" class="headerlink" title="记一次Instrument - Time Profile 过程"></a>记一次Instrument - Time Profile 过程</h3><p>xcode 8.+在使用Time Profile中，会出现信息不完整，没法指示更多有用的信息。<br>首先由这篇文章：<a href="http://www.cnblogs.com/ym123/p/4324335.html能明白大概操作内容。在xcode" target="_blank" rel="noopener">http://www.cnblogs.com/ym123/p/4324335.html能明白大概操作内容。在xcode</a> 8.+中，CallTree被移动到最下方而不是右下角处。然后跟着走的时候，并没有显示文章中说的<code>图标为黑色头像的就是Time Profiler给我们的提示，有可能存在性能瓶颈的地方，可以逐渐向下展开，找到产生的根本原因。</code>这个；<br>我又找了找这篇文章：<a href="http://www.jianshu.com/p/179d69f636b0" target="_blank" rel="noopener">http://www.jianshu.com/p/179d69f636b0</a><br>原来是需要在Target-Build Settings-Debug Information Format-Debug 选择dwarf-with-dsym，如果没有该选项，需要手动打入。<br>同时开启TimeProfile就可以看到黑色头像，同时各个方法调用栈就出来。<br>我的操作是：先点击你需要debug的附近区域，然后CPU Usage会有很多波动，然后你可以暂停（stop，不是shut down）同时选中该波动区域附近，形成一个区间。然后下方的调用栈即为该时间区域的调用信息。即得到所需要信息。</p>
<h3 id="记一次硬磕UI、转场遇到的问题"><a href="#记一次硬磕UI、转场遇到的问题" class="headerlink" title="记一次硬磕UI、转场遇到的问题"></a>记一次硬磕UI、转场遇到的问题</h3><p>1：转场的时候alpha很重要，比如pushTransitino的时候，toVC的alpha一开始就要设好，如果animate组，半途还有转变动画，那么会带来感觉像是掉帧的bug。fromVC也一样，多调试这一块，结合Time Profile看这中间有没有其他重操作，提前做，或者之后做。<br>2：pop的时候，与push很像。这里提一点，动作与控制要同步，比如转场里面某一元素，如果动画场景不一致，会带来断层，中间的东西没了，然后又有了。比如我后退，立马把该元素隐藏，但是等到要做动画其实还要几毫秒，于是就会出现断层。这时候最好的就是先在contextView中添好该元素试图覆盖，然后再隐藏。<br>多用动画稿，尽量不要埋头苦调试，没有数值真的很麻烦。</p>
<h3 id="昨晚看到一个帖子列出好的一些iOS片段，我继续删减，留下适合我，我可能会遇到的"><a href="#昨晚看到一个帖子列出好的一些iOS片段，我继续删减，留下适合我，我可能会遇到的" class="headerlink" title="昨晚看到一个帖子列出好的一些iOS片段，我继续删减，留下适合我，我可能会遇到的"></a>昨晚看到一个帖子列出好的一些iOS片段，我继续删减，留下适合我，我可能会遇到的</h3><h5 id="去除数组中重复的对象"><a href="#去除数组中重复的对象" class="headerlink" title="去除数组中重复的对象"></a>去除数组中重复的对象</h5><p><code>NSArray *newArr = [oldArr valueForKeyPath:@“@distinctUnionOfObjects.self&quot;];</code></p>
<h5 id="动画切换window的根控制器"><a href="#动画切换window的根控制器" class="headerlink" title="动画切换window的根控制器"></a>动画切换window的根控制器</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// options是动画选项</span><br><span class="line">[UIView transitionWithView:[UIApplication sharedApplication].keyWindow duration:0.5f options:UIViewAnimationOptionTransitionCrossDissolve animations:^&#123;</span><br><span class="line">        BOOL oldState = [UIView areAnimationsEnabled];</span><br><span class="line">        [UIView setAnimationsEnabled:NO];</span><br><span class="line">        [UIApplication sharedApplication].keyWindow.rootViewController = [RootViewController new];</span><br><span class="line">        [UIView setAnimationsEnabled:oldState];</span><br><span class="line">    &#125; completion:^(BOOL finished) &#123;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h5 id="由角度转换弧度"><a href="#由角度转换弧度" class="headerlink" title="由角度转换弧度"></a>由角度转换弧度</h5><p>`</p>
<p>#define DegreesToRadian(x) (M_PI * (x) / 180.0)<br>`</p>
<h5 id="控制屏幕旋转，在控制器中写"><a href="#控制屏幕旋转，在控制器中写" class="headerlink" title="控制屏幕旋转，在控制器中写"></a>控制屏幕旋转，在控制器中写</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/** 是否支持自动转屏 */</span><br><span class="line">- (BOOL)shouldAutorotate &#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">/** 支持哪些屏幕方向 */</span><br><span class="line">- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123;</span><br><span class="line">    return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">/** 默认的屏幕方向（当前ViewController必须是通过模态出来的UIViewController（模态带导航的无效）方式展现出来的，才会调用这个方法） */</span><br><span class="line">- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation &#123;</span><br><span class="line">    return UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="几个常用权限判断"><a href="#几个常用权限判断" class="headerlink" title="几个常用权限判断"></a>几个常用权限判断</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">    if ([CLLocationManager authorizationStatus] ==kCLAuthorizationStatusDenied) &#123;</span><br><span class="line">        NSLog(@&quot;没有定位权限&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    AVAuthorizationStatus statusVideo = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo];</span><br><span class="line">    if (statusVideo == AVAuthorizationStatusDenied) &#123;</span><br><span class="line">        NSLog(@&quot;没有摄像头权限&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    //是否有麦克风权限</span><br><span class="line">    AVAuthorizationStatus statusAudio = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeAudio];</span><br><span class="line">    if (statusAudio == AVAuthorizationStatusDenied) &#123;</span><br><span class="line">        NSLog(@&quot;没有录音权限&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">    [PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) &#123;</span><br><span class="line">        if (status == PHAuthorizationStatusDenied) &#123;</span><br><span class="line">            NSLog(@&quot;没有相册权限&quot;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br></pre></td></tr></table></figure>
<h5 id="判断图片类型"><a href="#判断图片类型" class="headerlink" title="判断图片类型"></a>判断图片类型</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">//通过图片Data数据第一个字节 来获取图片扩展名</span><br><span class="line">- (NSString *)contentTypeForImageData:(NSData *)data</span><br><span class="line">&#123;</span><br><span class="line">    uint8_t c;</span><br><span class="line">    [data getBytes:&amp;c length:1];</span><br><span class="line">    switch (c)</span><br><span class="line">    &#123;</span><br><span class="line">        case 0xFF:</span><br><span class="line">            return @&quot;jpeg&quot;;</span><br><span class="line"> </span><br><span class="line">        case 0x89:</span><br><span class="line">            return @&quot;png&quot;;</span><br><span class="line"> </span><br><span class="line">        case 0x47:</span><br><span class="line">            return @&quot;gif&quot;;</span><br><span class="line"> </span><br><span class="line">        case 0x49:</span><br><span class="line">        case 0x4D:</span><br><span class="line">            return @&quot;tiff&quot;;</span><br><span class="line"> </span><br><span class="line">        case 0x52:</span><br><span class="line">        if ([data length] &lt; 12) &#123;</span><br><span class="line">            return nil;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        NSString *testString = [[NSString alloc] initWithData:[data subdataWithRange:NSMakeRange(0, 12)] encoding:NSASCIIStringEncoding];</span><br><span class="line">        if ([testString hasPrefix:@&quot;RIFF&quot;]</span><br><span class="line">            &amp;&amp; [testString hasSuffix:@&quot;WEBP&quot;])</span><br><span class="line">        &#123;</span><br><span class="line">            return @&quot;webp&quot;;</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="获取手机和app信息"><a href="#获取手机和app信息" class="headerlink" title="获取手机和app信息"></a>获取手机和app信息</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">NSDictionary *infoDictionary = [[NSBundle mainBundle] infoDictionary];  </span><br><span class="line"> CFShow(infoDictionary);  </span><br><span class="line">// app名称  </span><br><span class="line"> NSString *app_Name = [infoDictionary objectForKey:@&quot;CFBundleDisplayName&quot;];  </span><br><span class="line"> // app版本  </span><br><span class="line"> NSString *app_Version = [infoDictionary objectForKey:@&quot;CFBundleShortVersionString&quot;];  </span><br><span class="line"> // app build版本  </span><br><span class="line"> NSString *app_build = [infoDictionary objectForKey:@&quot;CFBundleVersion&quot;];  </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line">    //手机序列号  </span><br><span class="line">    NSString* identifierNumber = [[UIDevice currentDevice] uniqueIdentifier];  </span><br><span class="line">    NSLog(@&quot;手机序列号: %@&quot;,identifierNumber);  </span><br><span class="line">    //手机别名： 用户定义的名称  </span><br><span class="line">    NSString* userPhoneName = [[UIDevice currentDevice] name];  </span><br><span class="line">    NSLog(@&quot;手机别名: %@&quot;, userPhoneName);  </span><br><span class="line">    //设备名称  </span><br><span class="line">    NSString* deviceName = [[UIDevice currentDevice] systemName];  </span><br><span class="line">    NSLog(@&quot;设备名称: %@&quot;,deviceName );  </span><br><span class="line">    //手机系统版本  </span><br><span class="line">    NSString* phoneVersion = [[UIDevice currentDevice] systemVersion];  </span><br><span class="line">    NSLog(@&quot;手机系统版本: %@&quot;, phoneVersion);  </span><br><span class="line">    //手机型号  </span><br><span class="line">    NSString* phoneModel = [[UIDevice currentDevice] model];  </span><br><span class="line">    NSLog(@&quot;手机型号: %@&quot;,phoneModel );  </span><br><span class="line">    //地方型号  （国际化区域名称）  </span><br><span class="line">    NSString* localPhoneModel = [[UIDevice currentDevice] localizedModel];  </span><br><span class="line">    NSLog(@&quot;国际化区域名称: %@&quot;,localPhoneModel );  </span><br><span class="line"> </span><br><span class="line">    NSDictionary *infoDictionary = [[NSBundle mainBundle] infoDictionary];  </span><br><span class="line">    // 当前应用名称  </span><br><span class="line">    NSString *appCurName = [infoDictionary objectForKey:@&quot;CFBundleDisplayName&quot;];  </span><br><span class="line">    NSLog(@&quot;当前应用名称：%@&quot;,appCurName);  </span><br><span class="line">    // 当前应用软件版本  比如：1.0.1  </span><br><span class="line">    NSString *appCurVersion = [infoDictionary objectForKey:@&quot;CFBundleShortVersionString&quot;];  </span><br><span class="line">    NSLog(@&quot;当前应用软件版本:%@&quot;,appCurVersion);  </span><br><span class="line">    // 当前应用版本号码   int类型  </span><br><span class="line">    NSString *appCurVersionNum = [infoDictionary objectForKey:@&quot;CFBundleVersion&quot;];  </span><br><span class="line">    NSLog(@&quot;当前应用版本号码：%@&quot;,appCurVersionNum);</span><br></pre></td></tr></table></figure>
<h5 id="获取设备mac地址"><a href="#获取设备mac地址" class="headerlink" title="获取设备mac地址"></a>获取设备mac地址</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">+ (NSString *)macAddress &#123;</span><br><span class="line">    int                 mib[6];</span><br><span class="line">    size_t              len;</span><br><span class="line">    char                *buf;</span><br><span class="line">    unsigned char       *ptr;</span><br><span class="line">    struct if_msghdr    *ifm;</span><br><span class="line">    struct sockaddr_dl  *sdl;</span><br><span class="line"> </span><br><span class="line">    mib[0] = CTL_NET;</span><br><span class="line">    mib[1] = AF_ROUTE;</span><br><span class="line">    mib[2] = 0;</span><br><span class="line">    mib[3] = AF_LINK;</span><br><span class="line">    mib[4] = NET_RT_IFLIST;</span><br><span class="line"> </span><br><span class="line">    if((mib[5] = if_nametoindex(&quot;en0&quot;)) == 0) &#123;</span><br><span class="line">        printf(&quot;Error: if_nametoindex error\n&quot;);</span><br><span class="line">        return NULL;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    if(sysctl(mib, 6, NULL, &amp;len, NULL, 0) &lt; 0) &#123;</span><br><span class="line">        printf(&quot;Error: sysctl, take 1\n&quot;);</span><br><span class="line">        return NULL;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    if((buf = malloc(len)) == NULL) &#123;</span><br><span class="line">        printf(&quot;Could not allocate memory. Rrror!\n&quot;);</span><br><span class="line">        return NULL;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    if(sysctl(mib, 6, buf, &amp;len, NULL, 0) &lt; 0) &#123;</span><br><span class="line">        printf(&quot;Error: sysctl, take 2&quot;);</span><br><span class="line">        return NULL;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    ifm = (struct if_msghdr *)buf;</span><br><span class="line">    sdl = (struct sockaddr_dl *)(ifm + 1);</span><br><span class="line">    ptr = (unsigned char *)LLADDR(sdl);</span><br><span class="line">    NSString *outstring = [NSString stringWithFormat:@&quot;X:X:X:X:X:X&quot;,</span><br><span class="line">                           *ptr, *(ptr+1), *(ptr+2), *(ptr+3), *(ptr+4), *(ptr+5)];</span><br><span class="line">    free(buf);</span><br><span class="line"> </span><br><span class="line">    return outstring;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="拿到当前正在显示的控制器，不管是push进去的，还是present进去的都能拿到"><a href="#拿到当前正在显示的控制器，不管是push进去的，还是present进去的都能拿到" class="headerlink" title="拿到当前正在显示的控制器，不管是push进去的，还是present进去的都能拿到"></a>拿到当前正在显示的控制器，不管是push进去的，还是present进去的都能拿到</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">- (UIViewController *)getVisibleViewControllerFrom:(UIViewController*)vc &#123;</span><br><span class="line">    if ([vc isKindOfClass:[UINavigationController class]]) &#123;</span><br><span class="line">        return [self getVisibleViewControllerFrom:[((UINavigationController*) vc) visibleViewController]];</span><br><span class="line">    &#125;else if ([vc isKindOfClass:[UITabBarController class]])&#123;</span><br><span class="line">        return [self getVisibleViewControllerFrom:[((UITabBarController*) vc) selectedViewController]];</span><br><span class="line">    &#125; else &#123;</span><br><span class="line">        if (vc.presentedViewController) &#123;</span><br><span class="line">            return [self getVisibleViewControllerFrom:vc.presentedViewController];</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return vc;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="AFNetworking监听网络状态"><a href="#AFNetworking监听网络状态" class="headerlink" title="AFNetworking监听网络状态"></a>AFNetworking监听网络状态</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// 监听网络状况</span><br><span class="line">    AFNetworkReachabilityManager *mgr = [AFNetworkReachabilityManager sharedManager];</span><br><span class="line">    [mgr setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) &#123;</span><br><span class="line">        switch (status) &#123;</span><br><span class="line">            case AFNetworkReachabilityStatusUnknown:</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusNotReachable: &#123;</span><br><span class="line">                [SVProgressHUD showInfoWithStatus:@&quot;当前设备无网络&quot;];</span><br><span class="line">            &#125;</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusReachableViaWiFi:</span><br><span class="line">                [SVProgressHUD showInfoWithStatus:@&quot;当前Wi-Fi网络&quot;];</span><br><span class="line">                break;</span><br><span class="line">            case AFNetworkReachabilityStatusReachableViaWWAN:</span><br><span class="line">                [SVProgressHUD showInfoWithStatus:@&quot;当前蜂窝移动网络&quot;];</span><br><span class="line">                break;</span><br><span class="line">            default:</span><br><span class="line">                break;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    [mgr startMonitoring];</span><br></pre></td></tr></table></figure>
<h5 id="判断该图片是否有透明度通道"><a href="#判断该图片是否有透明度通道" class="headerlink" title="判断该图片是否有透明度通道"></a>判断该图片是否有透明度通道</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">  - (BOOL)hasAlphaChannel</span><br><span class="line">&#123;</span><br><span class="line">    CGImageAlphaInfo alpha = CGImageGetAlphaInfo(self.CGImage);</span><br><span class="line">    return (alpha == kCGImageAlphaFirst ||</span><br><span class="line">            alpha == kCGImageAlphaLast ||</span><br><span class="line">            alpha == kCGImageAlphaPremultipliedFirst ||</span><br><span class="line">            alpha == kCGImageAlphaPremultipliedLast);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="获得灰度图"><a href="#获得灰度图" class="headerlink" title="获得灰度图"></a>获得灰度图</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">+ (UIImage*)covertToGrayImageFromImage:(UIImage*)sourceImage</span><br><span class="line">&#123;</span><br><span class="line">    int width = sourceImage.size.width;</span><br><span class="line">    int height = sourceImage.size.height;</span><br><span class="line"> </span><br><span class="line">    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();</span><br><span class="line">    CGContextRef context = CGBitmapContextCreate (nil,width,height,8,0,colorSpace,kCGImageAlphaNone);</span><br><span class="line">    CGColorSpaceRelease(colorSpace);</span><br><span class="line"> </span><br><span class="line">    if (context == NULL) &#123;</span><br><span class="line">        return nil;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    CGContextDrawImage(context,CGRectMake(0, 0, width, height), sourceImage.CGImage);</span><br><span class="line">    CGImageRef contextRef = CGBitmapContextCreateImage(context);</span><br><span class="line">    UIImage *grayImage = [UIImage imageWithCGImage:contextRef];</span><br><span class="line">    CGContextRelease(context);</span><br><span class="line">    CGImageRelease(contextRef);</span><br><span class="line"> </span><br><span class="line">    return grayImage;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="UILabel设置内边距"><a href="#UILabel设置内边距" class="headerlink" title="UILabel设置内边距"></a>UILabel设置内边距</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">子类化UILabel，重写drawTextInRect方法</span><br><span class="line">- (void)drawTextInRect:(CGRect)rect &#123;</span><br><span class="line">    // 边距，上左下右</span><br><span class="line">    UIEdgeInsets insets = &#123;0, 5, 0, 5&#125;;</span><br><span class="line">    [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h5 id="让手机震动一下"><a href="#让手机震动一下" class="headerlink" title="让手机震动一下"></a>让手机震动一下</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">倒入框架</span><br><span class="line">#import</span><br><span class="line">AudioServicesPlayAlertSound(kSystemSoundID_Vibrate);</span><br><span class="line">或者</span><br><span class="line">AudioServicesPlaySystemSound(kSystemSoundID_Vibrate);</span><br></pre></td></tr></table></figure>
<h5 id="摇一摇功能"><a href="#摇一摇功能" class="headerlink" title="摇一摇功能"></a>摇一摇功能</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">1、打开摇一摇功能</span><br><span class="line">    [UIApplication sharedApplication].applicationSupportsShakeToEdit = YES;</span><br><span class="line">2、让需要摇动的控制器成为第一响应者</span><br><span class="line">[self becomeFirstResponder];</span><br><span class="line">3、实现以下方法</span><br><span class="line"> </span><br><span class="line">// 开始摇动</span><br><span class="line">- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event</span><br><span class="line">// 取消摇动</span><br><span class="line">- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event</span><br><span class="line">// 摇动结束</span><br><span class="line">- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event</span><br></pre></td></tr></table></figure>
<h5 id="UITextView中打开或禁用复制，剪切，选择，全选等功能"><a href="#UITextView中打开或禁用复制，剪切，选择，全选等功能" class="headerlink" title="UITextView中打开或禁用复制，剪切，选择，全选等功能"></a>UITextView中打开或禁用复制，剪切，选择，全选等功能</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">// 继承UITextView重写这个方法</span><br><span class="line">- (BOOL)canPerformAction:(SEL)action withSender:(id)sender</span><br><span class="line">&#123;</span><br><span class="line">// 返回NO为禁用，YES为开启</span><br><span class="line">    // 粘贴</span><br><span class="line">    if (action == @selector(paste:)) return NO;</span><br><span class="line">    // 剪切</span><br><span class="line">    if (action == @selector(cut:)) return NO;</span><br><span class="line">    // 复制</span><br><span class="line">    if (action == @selector(copy:)) return NO;</span><br><span class="line">    // 选择</span><br><span class="line">    if (action == @selector(select:)) return NO;</span><br><span class="line">    // 选中全部</span><br><span class="line">    if (action == @selector(selectAll:)) return NO;</span><br><span class="line">    // 删除</span><br><span class="line">    if (action == @selector(delete:)) return NO;</span><br><span class="line">    // 分享</span><br><span class="line">    if (action == @selector(share)) return NO;</span><br><span class="line">    return [super canPerformAction:action withSender:sender];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="记录一个“POP”引擎动画后调用了superView的layoutSubViews方法"><a href="#记录一个“POP”引擎动画后调用了superView的layoutSubViews方法" class="headerlink" title="记录一个“POP”引擎动画后调用了superView的layoutSubViews方法"></a>记录一个“POP”引擎动画后调用了superView的layoutSubViews方法</h3><p>今天在做一个动画的时候，使用‘pop’时候，发现动作做完了，然后一个按钮使其回归原位，但是再做动作的时候，就只动了一下。难以查看过程，当我打断点到layoutSubviews的时候，果然进去了。然后不知道是谁调用的，于是我去使用time profile看了那一段时间干了什么事。于是看到了layoutSubviews被调用了，是‘pop’某一块调用了，使view又跑回原位。这时候，要么将布局代码写到其他地方，要么使用UIView的动画，我选择了后者。</p>
<h3 id="POPSpringAnimation-‘scaleXY’-会出现rotate-情况"><a href="#POPSpringAnimation-‘scaleXY’-会出现rotate-情况" class="headerlink" title="POPSpringAnimation ‘scaleXY’ 会出现rotate 情况"></a>POPSpringAnimation ‘scaleXY’ 会出现rotate 情况</h3><p>在一个回馈动效中使用POPSpringAnimation，但是由于滑块可以快速多次滑动，所以在弹性高过预定值，会产生negative值，即负值，这时3D transform中，scaleXY会出现rotate情况，<code>https://github.com/facebook/pop/issues/76</code>，这里采用clamp，在结束时，不超过回弹值。可以使用下面给出的两端中其一都可：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">-(void)popupMensionNode&#123;</span><br><span class="line">    POPBasicAnimation *nodeAnim = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];</span><br><span class="line">    nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    nodeAnim.autoreverses = YES;</span><br><span class="line">    nodeAnim.duration = 0.25;</span><br><span class="line">    [_textNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">-(void)popupMensionNode&#123;</span><br><span class="line">    POPSpringAnimation *imageNodeAnim = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    imageNodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];</span><br><span class="line">    imageNodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    imageNodeAnim.autoreverses = YES;</span><br><span class="line">    imageNodeAnim.clampMode = kPOPAnimationClampEnd;</span><br><span class="line">    imageNodeAnim.springBounciness = 8;</span><br><span class="line">//    imageNodeAnim.springSpeed = 20;</span><br><span class="line">    [_textNode.layer pop_addAnimation:imageNodeAnim forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>上面两个带来的效果还是不尽完美，这时可以更进一步，又要同时有Spring动画效果，又要有回弹，那么只能使用自主操作：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">-(POPSpringAnimation *)popupMensionNode&#123;</span><br><span class="line">    [_popNode.layer pop_removeAllAnimations];</span><br><span class="line">    </span><br><span class="line">    POPSpringAnimation *nodeAnim = self.popNodeAnima;</span><br><span class="line">    nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];</span><br><span class="line">//    nodeAnim.autoreverses = YES;</span><br><span class="line">    nodeAnim.springBounciness = 6;</span><br><span class="line">    [_popNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)];</span><br><span class="line">    </span><br><span class="line">    POPBasicAnimation *minScaleXYAnimate = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    minScaleXYAnimate.duration = .2;</span><br><span class="line">    minScaleXYAnimate.toValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)];</span><br><span class="line">    </span><br><span class="line">    [nodeAnim setCompletionBlock:^(POPAnimation *animation,BOOL complete)&#123;</span><br><span class="line">        if (complete) &#123;</span><br><span class="line">            [_popNode.layer pop_addAnimation:minScaleXYAnimate forKey:@&quot;kminScaleAnimate&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;];</span><br><span class="line">    </span><br><span class="line">    return nodeAnim;</span><br><span class="line">&#125;</span><br><span class="line">-(POPSpringAnimation *)popNodeAnima&#123;</span><br><span class="line">    if (!_popNodeAnima) &#123;</span><br><span class="line">        _popNodeAnima = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY];</span><br><span class="line">    &#125;</span><br><span class="line">    return _popNodeAnima;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>这样子便不会出现negative值，不会发生rotate，同时还保留有spring动画的停顿效果，多次快速点击也能相应，不会出问题。</p>
<h3 id="更换PinRemoteImage已经保存的图片"><a href="#更换PinRemoteImage已经保存的图片" class="headerlink" title="更换PinRemoteImage已经保存的图片"></a>更换PinRemoteImage已经保存的图片</h3><p>这种做法比较少，但是还是会有此需求，比如我现在做的。<br>要更换就要更换两处，memory cache 和disk cache。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">PINRemoteImageManager *imageManager = [PINRemoteImageManager sharedImageManager];</span><br><span class="line">[imageManager.cache removeObjectForKeyFromMemory:model.img_url];</span><br><span class="line">NSData *data = UIImagePNGRepresentation(para1.contentImg);</span><br><span class="line">[imageManager.defaultImageCache setObjectInMemory:data forKey:model.img_url withCost:data.length];</span><br><span class="line">[imageManager.cache setObjectOnDisk:data forKey:model.img_url];</span><br></pre></td></tr></table></figure></p>
<p>model.img_url 是其地址，在disk-&gt;library-&gt;cache-&gt;pincache-&gt;com.pinterest.pinremoteImage目录下，记不清其目录地址，大概是这样的。<br>data是我们要保存的图片的NSData 。</p>
<h3 id="记一次Apple-Develop-center-加多个device-id经历"><a href="#记一次Apple-Develop-center-加多个device-id经历" class="headerlink" title="记一次Apple Develop center 加多个device id经历"></a>记一次Apple Develop center 加多个device id经历</h3><p>1：首先先下载上面一段话的特殊字，写着实例文件。<br>2：然后我跟着写了其格式：<br>1）第一行为无效文字，苹果不填写，仅做log实例。<br>2）第二行开始，左边填写”devices id+’tab’+名称(名称全部用英文写，不要有中文符号，不要有空格，不要奇奇怪怪东西)”<br>3：然后上传基本就可以了</p>
<p>如果中间有出问题，尽量分段上传，这样就可以测试时什么个情况了</p>
<h3 id="iOS解决bug几个方法"><a href="#iOS解决bug几个方法" class="headerlink" title="iOS解决bug几个方法"></a>iOS解决bug几个方法</h3><p>1：用代码管理，每天记录。如果有解决不了的bug，看看几天改了什么，站起来思考（不要坐着）有没有关联；<br>2：如果是在一个文件class 内，可以试试将无关联代码去掉，单方面测试要定位的问题；解决了再回退，最好保存一份文件；<br>3：在断点出左下角+号，有个Exceptions BreakPoint…，直接点击添加，然后运行时自动大部分会自动定位到目标代码；<br>4：如果有崩溃现象，会进入到调用栈，IDE的左上角的小页签会跑到第六个，调用栈里边，这里可以看到你最近的几个方法是怎么跳转的，比如你是哪个线程，调用了哪个栈方法，连续调了哪些方法等等，这个方法很能反应问题实质，你还可以点击到相应的方法，同时打出相应的属性，lldb是可用状态；其他线程的lldb，只能看，不能再记录那些线程的方法属性了；<br>5：看性能损耗，主要还是要看Time Profile;同时僵尸代码的崩溃监控；这个记录由上边的Instrument 记录有记录。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2017-05-20travel" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2017/05/21/2017-05-20travel/">2017/05/20travel</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/05/21/2017-05-20travel/" class="article-date">
	  <time datetime="2017-05-21T05:04:19.000Z" itemprop="datePublished">May 21, 2017</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天,晚春公司组织的一次团建活动。用时三天，公司员工基本都前去。</p>
<p>第一天集合，大家一起坐大巴出发，从楼下直接开到景区，花费三个半小时。刚上车不久，由于是跑着过来，全身都是汗，过没一会我就感觉到很想吐的感觉，幸得带了晕车药。以前都觉得晕车药没用，以后能信任晕车药的药效了。</p>
<p>中午先在东钱湖边用了午餐（菜肴丰富），然后车子继续开。<br>在东钱湖大家拍了合影后都散开玩。<br>由于一个人无聊，就周围农舍转了转，最后到了湖边休憩。<br>没一会，周围聚拢了一堆伙伴（c哥、鲁强等），在湖边聊聊天，吹吹牛，说说话，感觉在大城市里的紧实放松了下来。<br>集合后前往宁波市中心办理入住。<br>有意思的是我最后一个上车，所以选择坐最后一排，可萌测试“小哥”坐我边上。他1.9m个的腿好长啊，没地放，只能斜着。人高也是有坏处的，我也深有体会，哈哈。小哥一直很关注运动步数，下车时看了下，惊呆了：最后一排，车子震动严重，计数以为真在走动，于是一直在计数，所以他的排行居然是第一。</p>
<p>入住时我和雨哥cto一间房间，在大堂大家取得房卡便先上楼安顿。我的原则，多和大伙增进友情，毕竟难得有这么多伙伴一起加油。休息了会，大家伙一起约了先去吃饭，再去网吧。去网吧有个好处，只要打上游戏，那么人和人之间的感情就是战友，一起共荣辱，团结、互助、牺牲、胜任等都能体现。</p>
<p>晚上大家伙一起回去，一路畅聊。晚上洗澡的时候，由于没用过此等喷头，喊上cto帮忙。这里写是因为有几点想说。首先，友情是互助的，你不让人帮忙，聊上话都么得。再者，我看了会喷头图标，不大体会到底怎么开；雨哥一进来，捣鼓了下就好了：雨哥脑袋真的很能理解那些晦涩难解的题：就跟我以前在搞视频遇到的一个难题一般，我当时用了不那么友好的方法，而雨哥却在很短时间内快速定位到最佳方案。这里真的值得我推敲推敲，思考方法方式有待提高。遇到解决方法时间长的情况，我都会变得浮躁些，估计这也是我在学识、经验上的欠缺。</p>
<p>第二天雪窦山行。刚下车，便下起了小雨。但是我的兴致还是很高，这里绿树环抱的野外，简直是天堂一般。累是累，但是也从中领悟到了些东西。首先是组织纪律性，安全性，我们一行都是很好；其中有各种互动，都是好伙伴；再者是我在走到一个有名的桥边时领悟到一个思想：这个桥是挺有名-&gt;险峻，难行，过桥都在晃动，各种属性叠加使得该桥有一定意义。但是这个景区总不能叫该桥的名字吧？或者说，我遇到的很高的著名瀑布，水花都能打到岸边游客的脸，总不能叫该瀑布的名字吧？是的，一个地方会被大家称颂，一个产品会被大家提及，她是因为内在各个惊喜，各个容易体会的完美才被记录。大家不会因为你叫雪窦山，不会因为其中某个著名桥、瀑布等而欣然前往；但是他们是一个集合，一个一个聚合勾画的场景，就使得大家有迫切欣然前往的动力。</p>
<p>我也为这次出行，怦然心动中写了两首诗，其中一首很对味雪窦山的壮丽景色，希望能对他添一笔：</p>
<blockquote>
<p>雪窦山行<br>倒挂青葱绿，平波卷碧漾。移山别有影，呼啸震癫狂。</p>
</blockquote>
<p>妙高台处，很让我感叹，这类小屋才是别墅，其他的只能称之为别屋吧。场临崖壁，居高雾缭。进堂，三阶，步步高升。内有小池鱼戏，边有松树环抱。这就是顶级奢华的低调。也幸得这成为景区，我们才有幸得以观看。</p>
<p>雪窦寺占地也是挺大的，看到这么好的景色，屋宇，感慨也是蛮多的：和尚庙、总统府总是能占据最好的地段，最好的景色，最好的资源配比。从此得出一个结论，思想拉拢在中国（封建制国家）是最能起到思想禁锢的手段。这种官场、职场中的管控能力不是他人能比。人民们也不得更好的发展。仅仅是寺庙，用的最好的木材（整木），香火、连佛像资金都不需思考，思想管控中的子民们自己主动交出善款。成功不要靠外在的，而是用内在的东西一次次更改其思想，”花钱吧，花钱对自己才是最好的，才是最忠诚的体现“；</p>
<p>第二天的行程都在溪口古镇，那天在一个饭店吃饭，伙食确实是相当丰富，好吃，赞不绝口。<br>第二天其实大家都走的很累了，去吃饭的时候，去网吧的哥们都扎堆，今天去一个“北疆”饭店，羊肉串一吃，我就知道不是新疆好味道，不过吃饱就行。吃完在楼下等等,看他们说的音乐喷泉。音乐喷泉这玩意我觉得是一个消耗品，在引进来的时候大家都觉得蛮赞的，但是基本1个月过去，周围人理都不理；再过一个月，音乐喷泉估计会老化，要修理什么的，这时又没有钱投进去了；得，就废弃了，这东西就是一个浪费；不过讨好一下，这个设备比如50万，采购的说60万，嘿嘿，棒棒哒；</p>
<p>晚上去打游戏没昨天那么多人，凑够5人就开打；那个网吧着实贵，最便宜的会员1小时要5块，不是会员10块。我的天，简直是抢。算了，就充个30玩了两天，心里还是心疼。晚上几个人一起回去，说说笑笑，谈谈刚才的操作、意识，回味回味（好像我打的adc 小炮最后把他们坑了，其实内心很对不住）。</p>
<p>第三天要回去了，每个人的腿都是大考验，这不，过去了三天，我写这的时候在周六了，腿还是酸软无力；<br>早上启程出发，转转1个多小时来到“浙东小九寨”。我在进景区的路上（停车场到景区还有很长一段路）就觉得没聊，应该不会是很给力的地方吧？</p>
<p>刚进去就看到的溪流，溪流里鹅卵石大大小小。没一会，我们做安卓的“君哥”手里拿着根木棍就去挑战沿水路走鹅卵石之旅了。过一会，一个设计大哥“聪哥”、一个运营大哥“鲁强大哥”也在那走。有意思，我也拿着拾得的竹棍下去走走。走着走着，两位大佬不一会就“下水”了，踏空下去。过没一会，又加入两个女生，都玩得很开，有意思。路上照应，遇到险阻一起互助；有一段路，水不大，但是中间石子很少，我们一起办了好几块大石头建立起了一个能踩踏过去的路。之前鞋子湿了的，想都没想，就过去。我们几个没湿的小心翼翼想着点子终于过去了。<br>在后面一段路，都没办法想出“无伤”过河的法子，全员鞋子都湿了。我算幸运的，只鞋子前跟湿了。大家在一堆大石那里休憩，等着去终点的人们回来。我们在那里泡脚、晒鞋子、晒袜子。刚才玩的忘我，在水路石子上面周转腾挪都还能拼尽全力，现在休憩之后，浑身乏力ing…大家终于使完最后的力，挪动身子往山下去。</p>
<p>中午吃个饭便启程回上海了。老实说，宁波那边小桥蛮多的，为什么我这么记得住？因为每过一个桥，车子都蹦跶起来，刚迷迷糊糊难受的想睡着，就蹦跶一次，小心脏都给吓跳出来了。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/2/">Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/12/">12</a><a class="extend next" rel="next" href="/page/4/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/shaohung001" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Pinterest"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Flickr"><i class="fa fa-flickr" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/09/13/2019-6-10lesson/">2019-6-10lesson</a></h6>
              <span>September 13, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/05/10/2019-5-10lesson/">2019-5-10lesson</a></h6>
              <span>May 10, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/04/25/2019-3-25lesson/">2019-3-25lesson</a></h6>
              <span>April 25, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/04/25/2019-4-22lesson/">2019-4-22lesson</a></h6>
              <span>April 25, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/04/25/2019-3-27lesson/">2019-3-27lesson</a></h6>
              <span>April 25, 2019</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2019/02/19/2019-2-19lesson/">2019-2-19lesson</a></h6>
              <span>February 19, 2019</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Charles-https-iTunes-下载历史版本/">Charles https iTunes 下载历史版本</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPUimage/">GPUimage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IT/">IT</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAC/">RAC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitbucket-ios/">bitbucket  ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios-it-dylib-nosuchfileordirectory/">ios it dylib(nosuchfileordirectory)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios7/">ios7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactivecocoa/">reactivecocoa</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Charles-https-iTunes-下载历史版本/" style="font-size: 10px;">Charles https iTunes 下载历史版本</a> <a href="/tags/GPUimage/" style="font-size: 10px;">GPUimage</a> <a href="/tags/IT/" style="font-size: 20px;">IT</a> <a href="/tags/RAC/" style="font-size: 10px;">RAC</a> <a href="/tags/bitbucket-ios/" style="font-size: 10px;">bitbucket  ios</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/ios-it-dylib-nosuchfileordirectory/" style="font-size: 10px;">ios it dylib(nosuchfileordirectory)</a> <a href="/tags/ios7/" style="font-size: 10px;">ios7</a> <a href="/tags/reactivecocoa/" style="font-size: 10px;">reactivecocoa</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">68</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 aKer All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1278024876&web_id=1278024876" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/click.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
