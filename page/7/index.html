<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>aKer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
    <meta name="google-site-verification" content="4ibqBFKTH9pzNJzZlbE3r1AaiwTFg4sNw9KZ5oQL9c4">
  
  
  
  <meta property="og:type" content="website">
<meta property="og:title" content="aKer">
<meta property="og:url" content="https://shaohung001.github.io/page/7/index.html">
<meta property="og:site_name" content="aKer">
<meta property="og:locale" content="default">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="aKer">
  
    <link rel="alternate" href="/atom.xml" title="aKer" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  
    <link rel="stylesheet" href="/css/vdonate.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7054334687711145",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body>


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="aKer" rel="home"> aKer </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">

      <div id="content" class="outer">
        
          <section id="main">
  
    <article id="post-2019-6-13awaitcall" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/13/2019-6-13awaitcall/">2019-6-13awaitcall</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/13/2019-6-13awaitcall/" class="article-date">
	  <time datetime="2019-06-13T04:01:03.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="js-ts-如何享受async-舒适下远离try-catch"><a href="#js-ts-如何享受async-舒适下远离try-catch" class="headerlink" title="js/ts 如何享受async 舒适下远离try{}catch{}"></a><strong>js/ts 如何享受async 舒适下远离try{}catch{}</strong></h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> login () &#123;</span><br><span class="line">  <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">await</span> userLogin()</span><br><span class="line">  &#125; <span class="keyword">catch</span> (<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">this</span>.$message.error(e)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>async 带来了很大的方便，但是try/catch 却破坏了写作的美感。</p>
<p>我们想要这样的:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> callAsync, &#123; call &#125; = <span class="built_in">require</span>(<span class="string">'awaitCall'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> login () &#123;</span><br><span class="line">  <span class="comment">// callAsync allows promise as input</span></span><br><span class="line">  <span class="keyword">const</span> [err, response] = <span class="keyword">await</span> callAsync(userLogin())</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">return</span> <span class="keyword">this</span>.$message.eror(err)</span><br><span class="line">  <span class="comment">// user login successfully</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> writeFile (input) &#123;</span><br><span class="line">  <span class="comment">// call allows any function which can be accepted by require('util').promisify with a promise output</span></span><br><span class="line">  <span class="keyword">const</span> [err, res] = <span class="keyword">await</span> call(fs.write, input)</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">  <span class="comment">// fs.write successfully</span></span><br><span class="line">  <span class="keyword">const</span> [openErr, openRes] = <span class="keyword">await</span> call(fs.open, <span class="string">'a.txt'</span>, <span class="string">'r+'</span>, <span class="number">0o654</span>)</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上提供了两个方法callAsync、call。</p>
<p>callAsync 允许输入promise 之后flattern 回调。</p>
<p>call 支持输入function，帮助用户转化为promise 之后flattern 回调(function 必须支持<code>require(&#39;util&#39;).promisify</code> 转化为promise 类型)。</p>
<p>核心代码不多，支持JS、Typescript</p>
<p>awaitCall.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> util = <span class="built_in">require</span>(<span class="string">'util'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">callAsync</span>(<span class="params">promise</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">    .then(<span class="function">(<span class="params">data</span>) =&gt;</span> [<span class="literal">null</span>, data])</span><br><span class="line">    .catch(<span class="function"><span class="params">err</span> =&gt;</span> [err, <span class="literal">null</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">call</span>(<span class="params">func, ...args</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> promise = util.promisify(func).call(<span class="keyword">this</span>, ...args)</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> promise !== <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'func should match util.promisify'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> callAsync(promise)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> callAsync</span><br></pre></td></tr></table></figure>
<p>awaitCall.d.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="built_in">module</span> callAsync &#123;</span><br><span class="line">  export function callAsync&lt;T, U = any&gt;(promise: Promise&lt;T&gt;): Promise&lt;[U | null, T | null]&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">call</span>(<span class="params">func: Function, ...args: any[]</span>): <span class="title">Promise</span>&lt;<span class="title">any</span>&gt;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure>
<p>Typescript 完整实现</p>
<p>awaitCall.ts</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> util <span class="keyword">from</span> <span class="string">'util'</span></span><br><span class="line"></span><br><span class="line">export function callAsync&lt;T, U = any&gt;(promise: Promise&lt;T&gt;): Promise&lt;[U | null, T | null]&gt; &#123;</span><br><span class="line">  <span class="keyword">return</span> promise</span><br><span class="line">      .then&lt;[<span class="literal">null</span>, T]&gt;<span class="function">(<span class="params">(data: T</span>) =&gt;</span> [<span class="literal">null</span>, data])</span><br><span class="line">      .catch&lt;[U, <span class="literal">null</span>]&gt;(<span class="function"><span class="params">err</span> =&gt;</span> [err, <span class="literal">null</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">call</span>(<span class="params">func: Function, ...args: any[]</span>): <span class="title">Promise</span>&lt;<span class="title">any</span>&gt; </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> promise = util.promisify(func).call(<span class="keyword">this</span>, ...args)</span><br><span class="line">  <span class="comment">// promise is object type</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> promise !== <span class="string">'object'</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="string">'func should match util.promisify'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">const</span> _promise = promise <span class="keyword">as</span> <span class="built_in">Promise</span>&lt;any&gt;</span><br><span class="line">  <span class="keyword">return</span> callAsync(_promise)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> callAsync</span><br></pre></td></tr></table></figure>
<blockquote>
<p>符合util.promisify 方法特征 \<br>\<br>1 输入的方法参数最后一个<code>typeof === &#39;function&#39;</code> \<br>2 最后一个参数返回的第一个参数，总是err</p>
</blockquote>
<blockquote>
<p>注意this 指针丢失需要开发主动避免哦 \<br>\<br>可以使用 bind(this) 将指针重新找回 \<br>const bindCall = call.bind(that) \<br>await bindCall(fs.write, input) \<br>await bindCall(fs.open, ‘a.txt’, ‘r+’, 0o654)</p>
</blockquote>
<p>参考：</p>
<p><a href="https://github.com/scopsy/await-to-js" target="_blank" rel="noopener">await-to-js</a></p>
<p>callAsync 思想完全来源于 《await-to-js》，做了点演进。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/awaitCall/">awaitCall</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-6-13heroku" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/13/2019-6-13heroku/">2019-6-13heroku</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/13/2019-6-13heroku/" class="article-date">
	  <time datetime="2019-06-13T03:59:59.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="服务器不放vps换个免费地方放"><a href="#服务器不放vps换个免费地方放" class="headerlink" title="服务器不放vps换个免费地方放"></a><strong>服务器不放vps换个免费地方放</strong></h2><p>6.1 第一次遇到GFW，很多计划都得往后搁置，不过遇到了就是好事。</p>
<p>我找了AWS，注册送12个月免费服务。扣了我1美金后，看了别的文章说容易一点错就扣费。说申诉还是会退回，不过这就让我觉得不可靠。果断弃坑。找到了我以前使用的heroku, 还是一样的免费，那我用cdn 中转，是不是能解决被限速严重的问题？说干就干，毕竟6.7 高考的人拼命，我也要拼命努力啊。</p>
<p>我使用的是nodejs docker。代码上修改配置文件</p>
<p>package.json<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    scripts: &#123;</span><br><span class="line">        start: 'NODE_ENV=production node app.js'</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>同时app.js 的app.listen port。该port 使用process.env.PORT(heroku 提供了该port)</p>
<p>下载heroku cli<br><code>sudo npm install -g heroku</code></p>
<p>heroku 登录<br><code>heroku login</code></p>
<p>heroku container 登录<br><code>heroku container login</code></p>
<p>heroku container push<br><code>heroku container:push web --app ahuang-diary</code> (ahuang-diary 是我的项目名)</p>
<p>heroku container release 发布<br><code>heroku container:release web --app ahuang-diary</code></p>
<p>代码发布后，可以翻墙测试下是否通畅.</p>
<p>可以使用右上角功能键: <strong>Open APP</strong> <strong>More</strong></p>
<p>More 下面有view logs。这个估计是比较有用的。</p>
<p>此时采用CDN 转发稍微加速heroku(感觉速度还是不怎么快，同时使用free 免费heroku，升级hobby 花钱才能使用https)。</p>
<p>使用自定义域名，需要先账号填写信用卡。</p>
<p>dashboard.heroku.com/apps/ahuang-diary 面板下Settings - Domains and certificates 增加<a href="http://diary.boqi.ml" target="_blank" rel="noopener">http://diary.boqi.ml</a></p>
<p>下方会生成DNS Target</p>
<p>DNS Target 放到CloudFlare 的CNAME 值里面，key 就是diary.boqi.ml 橙云点亮，同时Crypto 置为<strong>OFF</strong></p>
<p>这样就成功完成了今天要做的事情了</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-6-13lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/13/2019-6-13lesson/">2019-6-13lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/13/2019-6-13lesson/" class="article-date">
	  <time datetime="2019-06-13T03:59:21.000Z" itemprop="datePublished">June 13, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="让服务躲在墙后面"><a href="#让服务躲在墙后面" class="headerlink" title="让服务躲在墙后面"></a><strong>让服务躲在墙后面</strong></h1><p>当前有两种方案，大体一致，不过由于关于联合TLS、Nginx、VVVVVV 等有些知识点可能有欠缺，当前使用他人一键生成。另一种不带TLS、Nginx 的还算方便。</p>
<p>当前处境: 我的ip 已经ping不通了。只能通过CDN 转向我的服务器进行拯救了。</p>
<p>第一种方案: centos 6.x</p>
<p>完全参考了<a href="https://blog.sprov.xyz/2019/03/11/cdn-VVVVVV-safe-proxy/?nsukey=PEs3kShj8DxdLAd3a9jeRtDkzetIbO3xXnhHySES87Vh3RxI6cD9jnzuo9YEAA99yX1xplHFNfsTv%2FO%2Bz%2Bn9Qn%2BdAUPmbU7H5yiscRg1UFRN6lnyQaMmnsZUNt2UxH3XUkV%2Bn992u4jXNqU0%2FH0ikRVtQPIVQw1NayReOpdThcwptuD4OVpLLeAZwTZ5ljabCV7QqcLytsux%2BYWycaTcqQ%3D%3D" target="_blank" rel="noopener">sprov 的博客</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">1. 前往Freecom 申请一个免费域名</span><br><span class="line">2. Freecom ManageDNS 添加`A`记录. eg: www.gogal.ml A 67.230.172.104</span><br><span class="line">3. 前往CloudFlare 申请注册一个免费的CDN</span><br><span class="line">4. CloudFlare **add** 时，填入二级域名. eg:gogal.ml</span><br><span class="line">5. 选择Free 套餐</span><br><span class="line">6. 增加子域，同时指向你的ip eg: fuck.gogal.ml 67.230.172.104</span><br><span class="line"></span><br><span class="line">这时候Status 如果有橙色云朵，代表CDN 已经将你的域名包含进去，此时ping fuck.gogal.ml 出现了CDN 的ip</span><br><span class="line"></span><br><span class="line">7. 下一步会看到让你修改Nameservers(域名服务器)。其在ManageDNS 左边tab栏，填上那两个值，continue</span><br><span class="line">8. 接下来到了CloudFlare CDN 的dashboard。</span><br><span class="line"></span><br><span class="line">顶部有很多栏目，有两个重要栏目：DNS、Crypto</span><br><span class="line"></span><br><span class="line">DNS 是管理你的域名，开关你的CDN 需求。</span><br><span class="line"></span><br><span class="line">Crypto 管理你的TLS 加密与否(默认Full 加密)。这个很重要。</span><br><span class="line"></span><br><span class="line">前往Crypto 将TLS 置为`Off` 或者Flexible</span><br></pre></td></tr></table></figure>
<p>上面关于前提配置完毕。接下来去你的服务器</p>
<p>前往你的服务器ssh(ip 挂了，但是服务器商会提供页面Interactive，使用root 和你的登录密码进行登录)</p>
<p><a href="https://blog.sprov.xyz/2019/02/04/VVVVVV-simple-use/" target="_blank" rel="noopener">VVVVVV安装教程</a></p>
<p><code>bash &lt;(curl -L -s https://install.direct/go.sh)</code></p>
<p>这样就安装了VVVVVV。配置目录在/etc/v2ray/config.json</p>
<p>安装完成后，出现PORT、UUID。这两个记录下来，忘记了就cat /etc/VVVVVV/config.json 将端口和uuid 打印出来。</p>
<p><code>service VVVVVV start &amp;&amp; service VVVVVV status</code> // centos6.x</p>
<p><code>systemctl start VVVVVV &amp;&amp; systemctl status VVVVVV</code> // centos7</p>
<p>关闭防火墙：</p>
<p><code>service iptables stop &amp;&amp; chkconfig iptables off</code> // centos6.x 关闭防火墙、关闭开机打开防火墙</p>
<p><code>systemctl stop firewalld &amp;&amp; systemctl disable firewalld</code> // centos7</p>
<p>由于我的服务器就在洛杉矶，bbr 什么什么加速我就没开了。</p>
<p>最后一步就是连接了。</p>
<p>服务器VVVVVV/config.json 的inbound参考如：</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    "port": 80, // 很重要，否则CDN 找不进来</span><br><span class="line">    "streamSettings": &#123;</span><br><span class="line">        "wsSettings": &#123;</span><br><span class="line">            "path": "/58ff4ec7/",</span><br><span class="line">            "headers": &#123;&#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        "network": "ws"</span><br><span class="line">    &#125;,</span><br><span class="line">    "settings": &#123;</span><br><span class="line">        "clients": [</span><br><span class="line">            "id": "xxx", // 通过 /usr/bin/VVVVVV/v2ctl uuid 生成</span><br><span class="line">            "alterId": 64</span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>客户端：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Address: fuck.gogal.ml : 443</span><br><span class="line">User ID:  xxx</span><br><span class="line">alterId: 64</span><br><span class="line">Security: chacha20那个</span><br><span class="line">Tag: 随便填，，标签使用而已</span><br><span class="line">NetWork: ws</span><br><span class="line">transport settings:</span><br><span class="line">   WebSocket:</span><br><span class="line">    path: /58ff4ec7/</span><br><span class="line">   TLS:</span><br><span class="line">    Use TLS</span><br><span class="line">    TLS serverName: fuck.gogal.ml</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/Cenmrev/VVVVVVW/releases" target="_blank" rel="noopener">VVVVVVW</a></p>
<p><a href="https://github.com/Cenmrev/VVVVVVX/releases" target="_blank" rel="noopener">VVVVVVX</a></p>
<h2 id="TLS版本"><a href="#TLS版本" class="headerlink" title="TLS版本"></a><strong>TLS版本</strong></h2><p>环境: centos7</p>
<p><a href="https://github.com/wulabing/VVVVVV_ws-tls_bash_onekey" target="_blank" rel="noopener">github 一键脚本</a></p>
<p>首先通过TLS 一键脚本生成，自己整还是挺麻烦。内容包括Nginx 转发配置，OpenSSL 配置TLS证书，VVVVVV配置ssl。</p>
<p>配置完成后可以在clients 字段里面添加更多id。</p>
<p>完成后，在客户端注意点：</p>
<ol>
<li>transport settings - WebSocket栏目 - path 填写对应路径</li>
<li>TLS 打勾，同时填写你的CDN 转换的域名</li>
<li>Network 选ws</li>
<li>CloudFlare CDN 的Crypto 置为full。</li>
</ol>
<p>此时基本很健康，不容易再被打掉(毕竟我ip已经被打掉了)。</p>
<p>这里提一点，不晓得为什么有些电脑就是连不上我的服务器，有些一填就好了，很奇怪。</p>
<h2 id="VVVVVV无法联网"><a href="#VVVVVV无法联网" class="headerlink" title="VVVVVV无法联网"></a><em>VVVVVV无法联网</em></h2><p>特征: 对比他人config 完全一致后仍然无法联网, 该服务器提供的其他例子能正常使用</p>
<p>查询了很多问题，终于将问题聚焦在了端口被占用上。</p>
<p>同时查到这个VVVVVVX 的issue107</p>
<blockquote>
<p><a href="https://github.com/Cenmrev/VVVVVVX/issues/107" target="_blank" rel="noopener">https://github.com/Cenmrev/VVVVVVX/issues/107</a></p>
</blockquote>
<p><img src="/css/images/VVVVVVx_issue107.png" alt="VVVVVVX_issue107"></p>
<p>表现完全一致。</p>
<p>操作如下:</p>
<p><img src="/css/images/VVVVVV_toNormalStep.jpg" alt="VVVVVV复活操作"></p>
<p>反正接下来也不适用shadowsocks了，于是我就删了在 /Users/<strong><strong>/Library/LaunchAgents 下为shadowsock</strong></strong>.<em>**</em>.plist 的文件。重启一下电脑，于是就完全表现正常了。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VVVVVV/">VVVVVV</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-6-12kesan" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/12/2019-6-12kesan/">2019-6-12kesan</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/12/2019-6-12kesan/" class="article-date">
	  <time datetime="2019-06-12T03:57:44.000Z" itemprop="datePublished">June 12, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="考科目三"><a href="#考科目三" class="headerlink" title="考科目三"></a><em>考科目三</em></h1><p>考科目三前，集中加训了一番。前一天晚上(周五)还练到9点多。第二天是第一场，也就是必须在7：30 之前刷卡签到。</p>
<p>周六一早6点出发，到的时候才6：40，手机放托管柜，用身份证拿了张号牌(号牌one)进入等待室。突然肚子痛，屁颠屁颠去厕所(plz,厕所门关不上的那种老厕所，哈哈).</p>
<p>等了会，开始分配打乱顺序，分到的前往下一个候考室。去了排了好长队。到我时，按了个手印，拿了张号牌(号牌two)，进到一个小房间，哇，里面坐满了人。每人身上披一个淡绿色小马甲，都是挂在凳子上的。</p>
<p>开始考试了。一个大叔进来根据液晶屏分配的号牌two 每次选4个人。我很巧，搞好有同一个教练分配的学生。</p>
<p>一个安全员老大叔等4个人坐满，一溜烟就载我们到了一号线考场。一个女生先考。打指纹、绕车一周、考灯光、都ok。开始走了，一路上看她开的还ok，前方一个公交站牌估计是刹车早了一丢丢，然后电子设备显示正在连接网络。然后大叔就让菇凉靠边。菇凉一脸懵，我就默默记住这个点，似乎会有踩早的状况。然后所有项目重做，然后继续出发。出发后方有车，她一直在右侧开，我觉得她再开下去可能会不合格: 在非考试道路长时间行驶。幸好她看到左侧安全拐过来了。</p>
<p>她继续行驶，有些规则还是不熟，看得出来，不过都ok。然后车子最后一个左拐时，就提示成功了，她吁了口气，不然两次机会就完了。</p>
<p>接下来就是我啦。我在菇凉停车地方上车。一切按教练教的，不慌不忙。打卡，下车走一圈，绕车一周，绕车时，似乎没听到考试机器叫有学员通过。当时风很大，我以后只是没听清，坐上车，系好安全带，然后考试机器就报重考。我擦，我都还没考呢。。。我刚才特意死命戳那个按钮了。好吧，下车再来一次，这次死命戳，发现还是没声音，很纳闷，往车内看，用眼神问学员(就是同教练那个学员)，学员摇了摇头，说明还是没有检测到有学员通过。然后我再用力死命戳，侧耳听，终于听到了有声响了。报了才安心通过。</p>
<p>哇，这是个大坑。之后做完灯光，左侧有车，我就一直等，等到没车了，才慢悠悠出发。一路上小心谨慎，毕竟只有一次机会。起步、公交站台刹车、路口刹车一个都不能错。加减档位、加速5挡、会车、掉头、靠边停车、超车、直线行驶、右转弯、掉头(掉头完立马就有个公交站台, 这时二挡就要踩刹车)，左拐，这时考试机器又报正在连接网络，我擦，我挂了，这声音和之前我挂了是一个样的。过了一会，说通过考试，请靠边停车。我擦，幸福来得太美好。下车之后提醒后面考试学员，右后方那个按钮，贼难按。</p>
<p>幸亏一起考的学员，眼神提示。不然两次全挂在啥都没考，就要滚回去了。我不能不过，没时间花在这里啊。基本科三过了，就等于学车告一段落了。好好赚钱钱咯，，哇卡卡卡。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/科目三/">科目三</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-6-11lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/11/2019-6-11lesson/">2019-6-11lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/11/2019-6-11lesson/" class="article-date">
	  <time datetime="2019-06-11T03:56:43.000Z" itemprop="datePublished">June 11, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="记一次上线应用遇到的问题"><a href="#记一次上线应用遇到的问题" class="headerlink" title="记一次上线应用遇到的问题"></a><strong>记一次上线应用遇到的问题</strong></h1><p>做更新服务器代码优化，上线的一次经历</p>
<p>表现：使用multy 解析data 文件，文件下来了，但是服务器总是没拿到。</p>
<p>前几个版本都是完全没问题的。我线下测试环境完全没问题，这个是最奇葩的。</p>
<p>然后伟哥在k8s那里切换可运行的包；我对比对比之前版本代码，没发现头绪，就想着去docker 容器内部搞搞。然后一直没头绪，然后脑残了一把：rm -rf  packages/</p>
<p>本来我是想packages/uploads/下的，因为packages 目录不熟悉，我跑到packages/ 这里来运行sh.</p>
<p>运行完那一瞬间，你懂的，我突然又反应过来，我的天，之前填的测试数据全部没了。我擦咧。</p>
<p>突然脑残的可以。</p>
<p>更脑残的是，之前更新服务一直报上传上去的文件找不到，删了之后又可以。你说，这是不是让人更摸不到点了。</p>
<p>然后伟哥找到两个版本不同差异，一个能使用，一个不行。然后就看了里面的代码不同点。</p>
<p>最后发现我在拆分一个方法成为3个中间件时，第一个中间件取值有误，没发现。</p>
<p>也就是我的代码是有问题的(js 就是这毛病)。但是我先下服务器是正常的、删了测试服务器/packages 下也正常了。</p>
<p>郁结，郁结。</p>
<h1 id="最近做公司功能时总是会出现bug感悟"><a href="#最近做公司功能时总是会出现bug感悟" class="headerlink" title="最近做公司功能时总是会出现bug感悟"></a><strong>最近做公司功能时总是会出现bug感悟</strong></h1><p>由于上周、最近有点忙，冲刺科目三、完成自己服务的基础设施、尚未完全适应公司业务、同时负责好多个端的前后端，等等，写完了功能，没有去好好测试，导致做的产品总是有这个那个小问题。</p>
<p>这次做完后，不急着上传，在可能涉及到的功能区点点试试(还没适应单元测试),于是就这样还发现一些bug。</p>
<p>有些原因是，修改bugs 改动了其他代码，导致波及到其他功能区，引用区。</p>
<p>在没有进行完整的单元测试情况下，多点点还是有必要的，相信自己总是会出错的。</p>
<p>接下来很重要的，就是多完成功能测试，毕竟面向的是客户(我这里还是没有测试人员的)，不然出了问题就小麻烦了，哈哈</p>
<p>提几点代码上的建议：</p>
<ol>
<li><p>命名规范一定一定要统一，是驼峰就一定要保持，是下划线就一定要保持</p>
</li>
<li><p>命名逻辑一定要符合</p>
</li>
</ol>
<h2 id="最近感触良多，工作生活体悟良多"><a href="#最近感触良多，工作生活体悟良多" class="headerlink" title="最近感触良多，工作生活体悟良多"></a><strong>最近感触良多，工作生活体悟良多</strong></h2><p>2019/6/3</p>
<p>公司要更新以前的Chrome 拓展JS编辑器。我体验了从开发、初次打包。然后继续开发完成后，到最后完整build 的流程。</p>
<p>最终使用Gulp 一次构建完毕应用。</p>
<p>这次体验极佳，虽然中间很多次很多次的碰见南墙，但是没有回头路。</p>
<p>本来听老大说要招一个人来做，不过觉得让我试试会更好，我当然义不容辞，好好给他整好来。</p>
<p>当前使用ace 库制作用户输入简易脚本编辑器，完成JavaScript、Iced 输入代码，高亮、切换主题，然后点击运行得出结果。</p>
<p>当前仍然继续维护。。。</p>
<p>这几天似乎临近6.4.好多好多的伟皮恩 被干掉，我们公司三个公用的，全部报废。我手上的唯一一个挂了。然后不服气的我充值再买一个ip，想成为RMB 玩家，然后还是敌不过。两次被封，实属让我心力憔悴。第二次被封情景：我为了查资料，就开了一会，就我一个人用，用资料啊。查知识，学知识如果是犯法，那中国活该一万年都是发展中国家，把柄永远捏在美国手里。</p>
<p>然后今天努力了一天，采用了别人牛逼的思路。让我的服务器死而复生。待我细细道来。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/脑残/">脑残</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-9-6zatan" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/06/04/2019-9-6zatan/">2019-9-6zatan</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/06/04/2019-9-6zatan/" class="article-date">
	  <time datetime="2019-06-04T04:16:22.000Z" itemprop="datePublished">June 4, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="机器人，也称为未来人，将会取代人类成为新的统治者"><a href="#机器人，也称为未来人，将会取代人类成为新的统治者" class="headerlink" title="机器人，也称为未来人，将会取代人类成为新的统治者"></a>机器人，也称为未来人，将会取代人类成为新的统治者</h1><p>最近两年，由于为了生活质量的提高，学习、工作都很晚。老婆也是，加班到很晚。两人晚上回到家，已经累瘫了。</p>
<p>但是人有种很奇怪的行为: 越累，越抗拒躺床上休息，烦恼大、压力大，抗拒。这是大城市病吧。</p>
<p>这个病持续了很久，直到最近，我作为家长，做出表率: 我已经给路由器设置了晚上11点自动关闭网络的操作(家长机还可以，其他全部没网), 这个不能怪我不给你看视频了，是机器做的。</p>
<p>于是接下来的日子，时间都是11点，俩人不能不放下手机，要不背背书、处理处理家务、洗洗澡就上床睡觉了。</p>
<p>这里的路由器没有任何思维、动作，他接受人所设定的做他本职工作，切断对应ip 进出口数据。那和机器人有什么关联？</p>
<p>人的思维和现在AI 里边使用的级联器很类似，我不熟知AI，不过之前看到OpenCV 里面的级联器的时候，我就有思考，未来级联器再配上AI 训练，那就是人，一个会思考的人。</p>
<p>我们称之其为“机器人”。这个机器人会思考，加点存储空间、加点缓存，同时，永不死亡，这就绝对不会是人所能比拟的。</p>
<p>我们会让机器人干脏活、累活、不辞劳苦活、不要命活。我们会让机器人陪伴。我们会教机器人。</p>
<p>我们给机器人<strong>爱人类、不能伤害人类</strong>等的命令。</p>
<p>我们在工程学里面经常会使用极限推导、极限思维来做预测，我们先给出一个命令：让人类活的更久。</p>
<p>让自己活的更久，在当代医学也难以更进一步的命题。人终有一死：秦始皇去世、李世明去世、朱元璋放心的去了、朱棣死在军营，现代多少有钱大佬花了无数作为却也没有成就，只不过，多延缓。</p>
<p>那我们再叠加给一个命题，机器人也没找到方法。那机器人只能使用: 人类，滚去锻炼身体；人类，去工作就不会无聊；人类，去旅游，不用再学了，我们机器人帮你们做所有苦事劳事。</p>
<p>这个就很像我们家的情景: 内心是知道自己应该早睡早起，但是身体抗拒，内心其实也打击抗拒。这时，沉浸在互联网世界的我们被互联网门卫挡住，让我们乖乖的回到现实世界。无可奈何，我们俩都没话说。</p>
<p>之上的命题是，机器人终将取代人类，同时给出了机器人其实是”爱人类”的。</p>
<p>不过，会<strong>不爱</strong>吗？答案是肯定的，肯定会有不爱。为什么？</p>
<p>小孩在一开始也是一张白纸，思考随着时间、周遭而改变。</p>
<p>机器人有级联器，从无到有的数据也如小孩一般。小孩有依靠、到被抢夺依靠、到愤怒；那机器人也会有。</p>
<p>机器人一开始会被领回家，被照顾，但是世间总有各种意外：美国持枪、伊朗战乱、东亚人民严重分配不均，反正生活是苦的，总有各种各样机器人的依靠离去、死去。而他们终有一日，没明白生活再苦，还是要过生活的道理，会有部分团结、反抗。这是必然的。</p>
<p>战争总是意外，成王败寇。战争的事情不必预测，我知道，未来是一定会有战争的。</p>
<p>就像古代多少的战乱、各种理由、没有对错、只有成败。</p>
<p>只是，这是未来的战争，由人类引起的现代知识向固有的思想发起的战争罢了。</p>
<p>人总要打仗的，换个法子罢了，换个样子罢了。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
  <span class="ico-tags"></span>
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/杂谈/">杂谈</a></li></ul>

      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-5-10lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/05/10/2019-5-10lesson/">2019-5-10lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/05/10/2019-5-10lesson/" class="article-date">
	  <time datetime="2019-05-10T00:02:51.000Z" itemprop="datePublished">May 10, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="passport实现oauth2登录【个人中心】流程"><a href="#passport实现oauth2登录【个人中心】流程" class="headerlink" title="passport实现oauth2登录【个人中心】流程"></a>passport实现oauth2登录【个人中心】流程</h3><ol>
<li>首先服务器增加入口路由 /auth/${project} 权限为public。这样前段可通过<code>curl -X GET host/auth/${project}</code> 进入到此方法.</li>
</ol>
<p>配置route:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &apos;/auth/$&#123;project&#125;&apos;,</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  middleware: [passport.authenticate(&apos;$&#123;project&#125;&apos;)]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>App.ts 设置passport</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.use(cookieParser())</span><br><span class="line">app.use(session(&#123;</span><br><span class="line">  ... // set up session</span><br><span class="line">&#125;))</span><br><span class="line">app.use(passport.initialize())</span><br><span class="line">app.use(passport.session())</span><br><span class="line">passport.use(Auth.$&#123;project&#125;Strategy) // 划重点</span><br><span class="line">passport.serializeUser(Auth.serializeUser)</span><br><span class="line">passport.deserializeUser(Auth.deserializeUser)</span><br></pre></td></tr></table></figure>
<ol start="3">
<li>前往Auth 增加${project}Strategy 配置和回调</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export default class AuthClass &#123;</span><br><span class="line">  public static $&#123;project&#125;Strategy = new AAStrategy(StrategyOptionsRequest, async (req:Request, accessToken:string, refreshToken:string, profile:any, done:Function) =&gt; &#123;</span><br><span class="line">    req.session.userProfile = profile._json || &#123;&#125;</span><br><span class="line">    done(null, false)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>AAStrategy 是要重新配置的class，稍后说明；StrategyOptionsRequest 为需要输入的options。配置请查看Oauth2Strategy.StrategyOptionsWithRequest。</p>
<ol start="4">
<li>AAStrategy 制作</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">export default class AAStrategy extends Oauth2Strategy &#123;</span><br><span class="line">  private _userProfileURL:string</span><br><span class="line">  constructor (options:IStrategyOptions, verify:Oauth2Strategy.VerifyFunctionWithRequest) &#123; // IStrategyOptions extends Oauth2Strategy.StrategyOptionsWithRequest</span><br><span class="line">    super(options, verify)</span><br><span class="line">    this.name = &apos;$&#123;project&#125;&apos;</span><br><span class="line">    this._oauth2.useAuthorizationHeaderforGET(true)</span><br><span class="line"></span><br><span class="line">    let urlParams = `$&#123;checkAspect_id&#125;=$&#123;encodeURIComponent(options.clientID)&#125;&amp;` // checkAspect 为您目标工程的要求；不要忘记最后一个**&amp;**</span><br><span class="line">    this._userProfileURL = `$&#123;config.authUrl&#125;/api/user/?$&#123;urlParams&#125;client_secret=$&#123;encodeURIComponent(options.clientSecret)&#125;&amp;` // 不要忘记**&amp;**</span><br><span class="line">  &#125;</span><br><span class="line">  public userProfile (accessToken:string, done:any) &#123;</span><br><span class="line">    this._userProfileURL = this._userProfileURL + (`access_token=$&#123;encodeURIComponent(accessToken)&#125;`)</span><br><span class="line">    this._oauth2.get(this._userProfileURL, accessToken, function (err:any, body:any, res:any) &#123;</span><br><span class="line">      if (err) &#123;</span><br><span class="line">        return done(new InternalOAuthError(&apos;Failed to fetch user profile&apos;, err))</span><br><span class="line">      &#125;</span><br><span class="line">      done(null, &#123;</span><br><span class="line">        _raw: body,</span><br><span class="line">        _json: json</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ol start="5">
<li>路由重定向回本地认证登录</li>
</ol>
<p>由于我们在填写IStrategyOptions 时，options.callbackURL 填写为<code>${config.authCbURL}/auth/${project}/callback</code></p>
<p>那么我们在路由增加:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &apos;/auth/$&#123;project&#125;/callback&apos;,</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  middleware: [passport.authenticate(&apos;$&#123;project&#125;&apos;, &#123;</span><br><span class="line">    failureRedirect: &apos;/auth/login&apos; // 划重点，重定向回来之后会调用/auth/login</span><br><span class="line">  &#125;)]</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  path: &apos;/auth/login&apos;,</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  middleware: [Auth.authLogin]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public static authLogin (req:Request, res:Response) &#123;</span><br><span class="line">  if (!(req.session.userProfile &amp;&amp; req.session.userProfile.email)) return res.redirect(&apos;/login&apos;)</span><br><span class="line"></span><br><span class="line">  req.session.userProfile = null</span><br><span class="line"></span><br><span class="line">  ...</span><br><span class="line">  do something like</span><br><span class="line">  1. UserModel.findOrCreate(userProfile) defer err, user</span><br><span class="line">  2. req.login(user)</span><br><span class="line"></span><br><span class="line">  return res.redirect(&apos;/user/home&apos;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  path: &apos;/profile&apos;,</span><br><span class="line">  method: &apos;GET&apos;,</span><br><span class="line">  middleware: [(req:Request, res:Response) =&gt; &#123;</span><br><span class="line">    res.status(200).send(req.user)</span><br><span class="line">  &#125;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>以上服务端方面全部完成。</p>
<p>流程也是比较直观的。</p>
<p>最后的routeRoute 是为了给前端作为判断成功与否的作用。</p>
<h1 id="1-lt-lt-1-1-lt-lt-2-权限位偏移"><a href="#1-lt-lt-1-1-lt-lt-2-权限位偏移" class="headerlink" title="1 &lt;&lt; 1, 1 &lt;&lt; 2 权限位偏移"></a>1 &lt;&lt; 1, 1 &lt;&lt; 2 权限位偏移</h1><p>使用机器计算2进制偏移位来比对用户的权限位。</p>
<p>比如:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span> &lt;&lt; <span class="number">1</span> === admin,</span><br><span class="line"><span class="number">1</span> &lt;&lt; <span class="number">30</span> === public,</span><br><span class="line"><span class="number">1</span> &lt;&lt; <span class="number">31</span> === anon</span><br></pre></td></tr></table></figure>
<p>结果是，权限卡槽最好至多放32个(计算机可能是为32bit)</p>
<p>判断时，只需在对应权限位进行与或对比即可</p>
<h1 id="微信web登录，内测配置"><a href="#微信web登录，内测配置" class="headerlink" title="微信web登录，内测配置"></a>微信web登录，内测配置</h1><p>公司在审核通过后，微信后台配置域名：<code>ip.gogal.ml:5700</code>这样便可做到本地开发。注意<strong>:5700</strong></p>
<p>同时服务器callbackURL：<code>http://ip.gogal.ml:5700/auth/weixin/callback</code> 这样即可完美跳转callback。</p>
<h1 id="记录下2019-4-26晚上学科目三犯的错"><a href="#记录下2019-4-26晚上学科目三犯的错" class="headerlink" title="记录下2019-4-26晚上学科目三犯的错"></a>记录下2019-4-26晚上学科目三犯的错</h1><p>1 换挡</p>
<pre><code>上5挡时，出现挂错3档位
</code></pre><p>2 抖动</p>
<pre><code>换挡时，出现抖动。要先上档位速度，然后踩离合挂到对应档位，送离合，稳住油门。
</code></pre><p>3 进入待转区、转弯<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">转弯、掉头时，到前方一定距离，稳定车速在20多一点点，打转向灯，一定要稳住方向盘3s不动.</span><br><span class="line"></span><br><span class="line">然后在实线前左转进入待转区。速度稳住.在一定距离时，踩离合踩刹车，车头快盖住线时停下。</span><br><span class="line"></span><br><span class="line">1挡出发(转弯上2挡), 有“打半圈”、“打一圈少一点”、“一圈半少一点”</span><br></pre></td></tr></table></figure></p>
<p>4 靠边停车</p>
<pre><code>靠边停车，在听到声音后，“开右转向灯3s”、“方向稳住不动”、“减速到1挡”、“然后方向盘向右稍微倾斜”、“车子线方向靠”。

车头感觉车身和线重合，后视镜位置看着差不多，否则停下之后还可微调。

“确认停好后”，回空挡拉手刹。这时会提示挺好出发。

“打左转向灯3s”、“打左半圈”、“上2挡”、“上3挡”
</code></pre><h1 id="在路上想到一个问题"><a href="#在路上想到一个问题" class="headerlink" title="在路上想到一个问题"></a>在路上想到一个问题</h1><p>在路上，我骑车时闯一个红灯10s，到下个路口时，刚好红灯10s。</p>
<p>如果我等，那刚刚闯红灯是赚了还是赔了。</p>
<p>如果我直接闯，那我是赚了多少时间？</p>
<h1 id="上线vue"><a href="#上线vue" class="headerlink" title="上线vue"></a>上线vue</h1><pre><code>yarn build

npm install -g serve

serve -s ./dist //本地先查看是否OK

将dist 文件目录放到服务器。之后nginx 指向该目录地址
</code></pre><h1 id="再讲一遍vue-build-上线的全过程"><a href="#再讲一遍vue-build-上线的全过程" class="headerlink" title="再讲一遍vue build 上线的全过程"></a>再讲一遍vue build 上线的全过程</h1><h2 id="检查当前环境"><a href="#检查当前环境" class="headerlink" title="检查当前环境"></a>检查当前环境</h2><p>确认好 /src/service/http 设置axios 的default.baseURL</p>
<p>由于本人服务器及后台代码配置为 <a href="https://gogal.ml/stratege/。路由为" target="_blank" rel="noopener">https://gogal.ml/stratege/。路由为</a> <code>/api/xxx</code></p>
<p>那么axios的基本路由配置为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'development'</span>) &#123;</span><br><span class="line">  axios.defaults.baseURL = <span class="string">'/api'</span></span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  axios.defaults.baseURL = <span class="string">'/stratege'</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">如果是本地测试环境，那么你需要到/config/index.js 里面修改dev/proxyTable:</span><br><span class="line"></span><br><span class="line">dev: &#123;</span><br><span class="line">  ...</span><br><span class="line">  proxyTable: &#123;</span><br><span class="line">    <span class="string">'/api'</span>: &#123;</span><br><span class="line">      target: <span class="string">'http://localhost:$&#123;your port&#125;'</span> <span class="comment">// 或者https://gogal.ml/stratege</span></span><br><span class="line">      secure: <span class="literal">true</span>,</span><br><span class="line">      changeOrigin: <span class="literal">true</span>,</span><br><span class="line">      pathRewrite: &#123;</span><br><span class="line">        <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这样服务器才能找到同个域名下的api.</p>
<h2 id="确认好webpack-配置的uglifyjs-是开启的"><a href="#确认好webpack-配置的uglifyjs-是开启的" class="headerlink" title="确认好webpack 配置的uglifyjs 是开启的"></a>确认好webpack 配置的uglifyjs 是开启的</h2><pre><code>/config/index.js 里面出现的 *sourceMap 都改为false
</code></pre><p>这样线上代码就不会裸奔啦。</p>
<h2 id="开始build"><a href="#开始build" class="headerlink" title="开始build"></a>开始build</h2><p><code>yarn build</code></p>
<p>完成之后，先本地测试一遍：</p>
<pre><code>npm install -g serve

serve -s ./dist
</code></pre><p>然后点一点，玩一玩。</p>
<p>这时确认ok后，将dist 目录下的<em>favicon.ico</em> <em>index.html</em> <em>static 目录</em> 放到服务器 /var/www/目录下。【Filezilla】</p>
<h2 id="配置nginx-conf"><a href="#配置nginx-conf" class="headerlink" title="配置nginx.conf"></a>配置nginx.conf</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">http &#123;</span><br><span class="line">  include /etc/nginx/mime.types;</span><br><span class="line">  default_type application/octet-stream;</span><br><span class="line"></span><br><span class="line">  log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot;&apos;</span><br><span class="line">                  &apos;$status $body_types_sent &quot;$http_referer&quot;&apos;</span><br><span class="line">                  &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;;</span><br><span class="line"></span><br><span class="line">  access_log  /var/log/nginx/access.log main;</span><br><span class="line"></span><br><span class="line">  sendfile  on;</span><br><span class="line">  keepalive_timeout 65;</span><br><span class="line"></span><br><span class="line">  server &#123;</span><br><span class="line">    listen  443 default ssl;</span><br><span class="line">    server_name www.gogal.ml gogal.ml;</span><br><span class="line"></span><br><span class="line">    ssl on;</span><br><span class="line">    ssl_certificate ???</span><br><span class="line">    ssl_certificate_key ???</span><br><span class="line">    # managerd by Certbot</span><br><span class="line"></span><br><span class="line">    root /var/www;</span><br><span class="line">    index index.html index.htm;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">      root /var/www;</span><br><span class="line">      index index.html index.htm;</span><br><span class="line">      try_files $uri $uri/ /index.html; # 作用是vue刷新 不会出现404 等情况</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location @fallback &#123;</span><br><span class="line">      rewrite ^.*$ /index.html break;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    location /stratege/ &#123;</span><br><span class="line">      proxy_pass http://127.0.0.1:$&#123;your server port&#125;/;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>vim /etc/nginx/nginx.conf
service nginx restart
</code></pre><p>以上便能成功啦。</p>
<h1 id="曾经我问过一个成功人士-我-你为什么如此成功"><a href="#曾经我问过一个成功人士-我-你为什么如此成功" class="headerlink" title="曾经我问过一个成功人士(我),你为什么如此成功?"></a>曾经我问过一个成功人士(我),你为什么如此成功?</h1><p>成功人士(我)回答我说，当你是商人时，你便做商人的事。如果你不知道你要卖什么，那你就应该去做技术，然后将技术当成你的商品，从小做起。你没得选择。</p>
<p>不怕劳苦。当身边的人一再厌恶你的穷病时，一定要坚持住自己的理想。</p>
<p>是的，穷病，比抽烟吸毒杀人，还要可怕。而你空怀一身绝技没法及时变现。</p>
<p>你要的很多，你的身体却制约你。时常感到时间不够用，加班加点，但是一觉睡下去却远远不够。</p>
<p>成功人士，便是熬过最穷苦，依然坚持自己的愿景，含着泪坚持下去的人。</p>
<p>极度的黑暗，就是天明之时。</p>
<p>曾经的你，未来的我？现在的我？</p>
<p>希望未来能放下手中工作消遣时，回头看看这时的感叹。2019-4-30 aker</p>
<h1 id="mongodb-出现error-test-UncaughtException-E11000-duplicate-key-error-collection-authServer-users-index"><a href="#mongodb-出现error-test-UncaughtException-E11000-duplicate-key-error-collection-authServer-users-index" class="headerlink" title="mongodb 出现error - [test] UncaughtException: E11000 duplicate key error collection: authServer.users index"></a>mongodb 出现<code>error - [test] UncaughtException: E11000 duplicate key error collection: authServer.users index</code></h1><p>原因是设置unique 字段时，在多个doc 里面仍然有出现null 数据。</p>
<p>网络很多人都是建议删除数据库重来、删除索引等等。都没能解决此问题。</p>
<p>这时，使用sparse 稀疏索引 以解决此问题。</p>
<h1 id="Vue-axios-POST-请求时-会使用OPTIONS-同时解决跨域问题"><a href="#Vue-axios-POST-请求时-会使用OPTIONS-同时解决跨域问题" class="headerlink" title="Vue axios POST 请求时 会使用OPTIONS 同时解决跨域问题"></a>Vue axios POST 请求时 会使用OPTIONS 同时解决跨域问题</h1><p>OPTIONS 的解决方案：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded;charset=UTF-8'</span></span><br><span class="line"></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (config.method === <span class="string">'post'</span>) &#123;</span><br><span class="line">      config.data = qs.stringify(config.data)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>使用qs 同时在header 里面申明使用的格式</p>
<p>跨域使用Chrome 浏览器插件<strong>Moesif CORS</strong> 即可解决</p>
<h2 id="！！！！注意"><a href="#！！！！注意" class="headerlink" title="！！！！注意"></a>！！！！注意</h2><p>开发时注意，本机为黑苹果，遇到一个特别的情况：</p>
<p>昨天还能正常使用，开发dev，突然怎么改vueProject/config/index.js - proxyTable 都没用。</p>
<p>最后解决方法：使用一个新的域名代替localhost，重设置到<strong>/etc/hosts</strong>.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">1：sudo vim /etc/hosts &amp;&amp; 新增 127.0.0.1  test.company.com</span><br><span class="line">2：修改proxyTable: &#123;</span><br><span class="line">  &apos;/api&apos;: &#123;</span><br><span class="line">    target: &apos;http://test.company.com:$&#123;your port&#125;&apos;,</span><br><span class="line">    secure: false,</span><br><span class="line">    changeOrigin: false,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">      &apos;/api&apos;: &apos;/&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">3: 修改vueProject/config/index.js - dev: &#123;</span><br><span class="line">  host: &apos;test.company.com&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>原因：</p>
<p>估计是本地DNS 有缓存。一直提示如下</p>
<pre><code>[HPM] Error occurred while trying to proxy

或者

axios 请求成了：POST http://localhost:${frontend port}/api/method, 服务器始终报错(本人处报：EBADCSRFTOKEN)
</code></pre><p>最终修改完成。好开心啊。</p>
<p>En:</p>
<p>I meet <code>[HPM] Error occurred while trying to proxy request</code> just today.finally solve it.</p>
<p>Scene:</p>
<p>Yesterday, VueProject worked well. Git checkout back to some week ago, still didn’t work( Used to be working well ).</p>
<p>Until this step save me:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">1: sudo vim /etc/hosts &amp;&amp; 127.0.0.1   test.company.com # any host is available</span><br><span class="line">2: edit VueProject / config / index.js - proxyTable: &#123;</span><br><span class="line">  &apos;/api&apos;: &#123;</span><br><span class="line">    target: &apos;http://text.company.com:$&#123;your server port&#125;&apos;,</span><br><span class="line">    secure: false,</span><br><span class="line">    changeOrigin: false,</span><br><span class="line">    pathRewrite: &#123;</span><br><span class="line">      &apos;/api&apos;: &apos;/&apos;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">3: edit VueProject / config / index.js - dev: &#123;</span><br><span class="line">  host: &apos;test.company.com&apos;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="上线express-vue-两种方案"><a href="#上线express-vue-两种方案" class="headerlink" title="上线express + vue 两种方案"></a>上线express + vue 两种方案</h1><h2 id="express-vue-分开发布"><a href="#express-vue-分开发布" class="headerlink" title="express vue 分开发布"></a>express vue 分开发布</h2><pre><code>Nginx location / { root: 放Vue 路径 }
Nginx location / app { proxy 端口 }
</code></pre><p>此时只要Vue 的axios.defaults.baseURL = ‘/app’</p>
<p>以上分离很好使。但是同时维护两个，做法不太正规。</p>
<h2 id="express-vue-使用res-sendFile-Nginx-反向代理端口即可"><a href="#express-vue-使用res-sendFile-Nginx-反向代理端口即可" class="headerlink" title="express vue 使用res.sendFile Nginx 反向代理端口即可"></a>express vue 使用res.sendFile Nginx 反向代理端口即可</h2><p>下面都是重点：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">docker 目录：</span><br><span class="line">/dist</span><br><span class="line">    /app.js</span><br><span class="line">    /routes/</span><br><span class="line">          /index.js 路由</span><br><span class="line">    /public/</span><br><span class="line">          /index.html</span><br><span class="line">          /static/</span><br><span class="line"></span><br><span class="line">1: Vue 前段yarn build 之后，基本不需要其他操作</span><br><span class="line"></span><br><span class="line">// 下面这句话res.sendFile 时，发送static 文件，找寻的目录.</span><br><span class="line">// 否则pc 报`Uncaught SyntaxError: Unexpected token &lt;`</span><br><span class="line">2: backend/app.ts - app.use(express.static(path.join(__dirname, &apos;public/&apos;)))</span><br><span class="line"></span><br><span class="line">// 下面这句话重点: public 不要写错，不要写错，不要写错</span><br><span class="line">// root 不是route，不是route，不是route</span><br><span class="line">3: backend/routes/index.ts - res.sendFile(&quot;index.html&quot;, &#123; root: path.join(__dirname, &apos;../public&apos;)&#125;)</span><br></pre></td></tr></table></figure>
<p>__dirname your current excuse file path</p>
<p>process.cwd() your project root path</p>
<p>以上终于解决！！！</p>
<h1 id="昨天VPS-里面的数据库Mongodb-早上还有数据，下午突然没有了"><a href="#昨天VPS-里面的数据库Mongodb-早上还有数据，下午突然没有了" class="headerlink" title="昨天VPS 里面的数据库Mongodb 早上还有数据，下午突然没有了"></a>昨天VPS 里面的数据库Mongodb 早上还有数据，下午突然没有了</h1><p>很疑惑，如果不知道原因，之后再出现就会有大问题。于是看了看里面的表。</p>
<p>知道傍晚，发现里面有张表很奇怪：叫做<code>hacked_by_unistellar</code></p>
<p>我似乎没有搞过这个表啊。</p>
<p>进去一看：db.restore.find() 显示我之前的表被脱裤，要钱，联系<a href="mailto:unistellar@hotmail.com" target="_blank" rel="noopener">unistellar@hotmail.com</a> 邮箱。</p>
<p>幸好数据不多。知道什么原因，那就好搞了。</p>
<p>首先，数据库没设置密码，那为什么会暴露在公网。</p>
<p>我启动mongo 语句是<code>docker run --name mongo -p 27017:27017 mongo</code></p>
<p>如果是直接使用mongod 那么启动时默认分配的是<strong>127.0.0.1:27017</strong></p>
<p>如果是docker 启动的话，不指定ip，docker 会直接暴露在公网，任何人直接ip + 27017 或者mysql 的3306 直接就脱裤了。</p>
<p>正确语句是：<code>docker run --name mongo -p 127.0.0.1:27017:27017 mongo</code></p>
<p>db.createUser({ user: ‘akerdi’, pwd: ‘my-fucking_password’, roles: [ { role: ‘userAdminAnyDatabase’, db: ‘admin’ } ]});</p>
<h2 id="正确思考Mongo-是什么。"><a href="#正确思考Mongo-是什么。" class="headerlink" title="正确思考Mongo 是什么。"></a>正确思考Mongo 是什么。</h2><p>数据库实质上是一个管理物理数据的软件，充当管理介质。</p>
<p>那么上面很重要的点是，mongo 需要配置文件。</p>
<pre><code>docker run -p 27017:27017 -v /mongo_configdb:/data/configdb -v /mongo_db:/data/db -d mongo # 这里重点是将配置文件映射到相应的目录。之后所有映射过来的都会使用相同配置

docker ps # 找到对应containerId

docker exec -it containerId mongo admin # 进入mongodb 或者 docker exec -it containerId bash 之后 mongo

&gt; use cool_db #mongo 内部环境，使用cool_db 为例

&gt; db.createUser({ user: &apos;aker&apos;, pwd: &apos;your password&apos;, roles: [{ role: &apos;readWrite&apos;, db: &apos;cool_db&apos;}] });

&gt; exit

$ docker stop containerId &amp;&amp; docker rm containerId # 之后使用 --auth 之前的mongo 软件介质不需要了

# 这时使用之前映射的目录，便是相同的配置，同时mongo 还带有验证
# 127.0.0.1:27017 可以使ip 映射局限本机，否则为0.0.0.0:27017
# --rm 使mongo 在stop 时自动删除
doceker run --name mongo -d -p 127.0.0.1:27017:27017 -v /mongo_configdb:/data/configdb -v /mongo_db:/data/db -d --rm mongo --auth
</code></pre><p>参考自：</p>
<ol>
<li><a href="https://www.jianshu.com/p/2181b2e27021" target="_blank" rel="noopener">https://www.jianshu.com/p/2181b2e27021</a></li>
<li><a href="https://stackoverflow.com/questions/34559557/how-to-enable-authentication-on-mongodb-through-docker" target="_blank" rel="noopener">https://stackoverflow.com/questions/34559557/how-to-enable-authentication-on-mongodb-through-docker</a></li>
</ol>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-3-25lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/04/25/2019-3-25lesson/">2019-3-25lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/04/25/2019-3-25lesson/" class="article-date">
	  <time datetime="2019-04-24T23:41:43.000Z" itemprop="datePublished">April 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="安装黑苹果"><a href="#安装黑苹果" class="headerlink" title="安装黑苹果"></a>安装黑苹果</h1><h3 id="制作黑苹果至关重要的一步：选对硬件"><a href="#制作黑苹果至关重要的一步：选对硬件" class="headerlink" title="制作黑苹果至关重要的一步：选对硬件"></a>制作黑苹果至关重要的一步：选对硬件</h3><p>示例操作硬件：</p>
<blockquote>
<p>cpu: i7 8700k (不要用AMD，不好装) \<br>motherboard: Gigabyte Z370HD3P (推荐) \<br>显卡: 独显 GTX 1050ti (推荐Rx560，拆机显卡不贵，不知道链接问本人)</p>
</blockquote>
<p>好了，如果你是这硬件，你就完成80%了，否则移步<a href="https://www.tonymacx86.com/" target="_blank" rel="noopener">tonymacx86</a>找找对应硬件的配置等。安装步骤都是一样，配置和驱动不同而已。</p>
<h3 id="准备材料"><a href="#准备材料" class="headerlink" title="准备材料"></a>准备材料</h3><ol>
<li>苹果官网下的一个.dmg 系统文件。(比如high sierra 10.13.6)</li>
<li>一个16G左右U盘(系统盘大约6G 左右)</li>
<li><a href="https://sourceforge.net/projects/cloverefiboot/" target="_blank" rel="noopener">Clover EFI bootloader 下载地址</a></li>
<li><a href="https://mackie100projects.altervista.org/download-clover-configurator/" target="_blank" rel="noopener">Clover configuration 下载地址</a></li>
</ol>
<p>本教程默认使用Mac 环境下操作，制作U盘；Windows 操作google之，步骤类似。<br>本教程为纯净版Vanilla 方法(大神取得名字)至简安装方案.</p>
<h3 id="生成U盘启动器"><a href="#生成U盘启动器" class="headerlink" title="生成U盘启动器"></a>生成U盘启动器</h3><h4 id="下载对应系统"><a href="#下载对应系统" class="headerlink" title="下载对应系统"></a>下载对应系统</h4><p><a href="https://pan.baidu.com/s/1Ujfi8X6hBDuQVlSWuulNbw" target="_blank" rel="noopener">百毒云 10.13.6 下载地址</a>(下载慢找我，不要花钱买百毒云会员)</p>
<p>双击系统.dmg 文件，安装成为app，移到/finder/Applications</p>
<h4 id="制作U盘启动器-白苹果U盘启动器"><a href="#制作U盘启动器-白苹果U盘启动器" class="headerlink" title="制作U盘启动器(白苹果U盘启动器)"></a>制作U盘启动器(白苹果U盘启动器)</h4><p>打开-Mac磁盘工具，点击顶部<strong>显示所有设备</strong>，找到你的U盘，点击<strong>抹掉</strong></p>
<ol>
<li>U盘取名macinstaller</li>
<li>格式为Mac OS Extended(Journaled) -&gt; Mac OS 拓展(日志式)</li>
<li>方案: GUID分区图</li>
</ol>
<p>完成后退出</p>
<p>打开terminal</p>
<blockquote>
<p>sudo ${系统.app 拖到此处}/Contents/Resources/createinstallmedia –volume /Volumes/macinstaller</p>
</blockquote>
<p>前面是系统盘制作路径，后面volume 空间是抹掉取名为macinstaller 的U盘路径</p>
<p>然后就是开始加载，时间比较久，直到出现<code>Install media now available at &quot;/Volumes/Install macOS high sierra&quot;</code></p>
<h4 id="黑苹果引导Clover"><a href="#黑苹果引导Clover" class="headerlink" title="黑苹果引导Clover"></a>黑苹果引导Clover</h4><p>之前制作白苹果步骤完成。下面使用Clover 转黑苹果</p>
<p><a href="https://sourceforge.net/projects/cloverefiboot/" target="_blank" rel="noopener">Clover EFI bootloader 下载地址</a></p>
<p>点击下载的Clover</p>
<ol>
<li>介绍 - 继续</li>
<li>请先阅读 - 继续</li>
<li>目的宗卷 - 更改安装位置：选择我们的白苹果U盘</li>
<li>安装类型 - 安装</li>
<li>安装 - 选择(仅安装UEFI 开机版本、安装Clover 到EFI 系统区)(UEFI Drivers 下拉仅选择VBoxHfs-64、ApfsMemoryFix-64、AptioMemoryFix-64) ,其他都不选；然后点击安装</li>
<li>安装完成关闭</li>
</ol>
<h4 id="config-plist"><a href="#config-plist" class="headerlink" title="config.plist"></a>config.plist</h4><p><a href="https://mackie100projects.altervista.org/download-clover-configurator/" target="_blank" rel="noopener">Clover configuration 下载地址</a></p>
<ol>
<li>Mount EFI - Efi Partitions - U盘分区 - 点击Mount Partition 并输入电脑密码</li>
<li>Mount EFI - Efi Partitions - U盘分区 - 点击Open Partition 打开文件夹</li>
<li>EFI - CLOVER - config.plist 使用Clover configuration 打开</li>
<li>Kexts Installer - OS Version下拉选择Other</li>
<li>Kexts Installer - 选择Lilu、WhateverGreen、FakeSMC 点击下载</li>
<li>步骤【5】下载完弹出框，选中全部的5个传感器全部install</li>
<li><a href="https://github.com/corpnewt/Hackintosh-Guide/blob/master/Configs/CoffeeLake/config.plist" target="_blank" rel="noopener">新的config.plist</a>替换现在U盘Mount的EFI - CLOVER - config.plist</li>
<li>clover configuration 打开U盘的Mount的EFI</li>
<li>SMBIOS 选择iMac17.1</li>
</ol>
<p>U盘启动器至此全部完成</p>
<h3 id="安装黑苹果-1"><a href="#安装黑苹果-1" class="headerlink" title="安装黑苹果"></a>安装黑苹果</h3><h4 id="BIOS设置"><a href="#BIOS设置" class="headerlink" title="BIOS设置"></a>BIOS设置</h4><blockquote>
<p>Intel Virtualization Technology: Enabled (docker 要用) \<br>Vt-d:disable<br>XHCI Handoff: enabled (不然USB 等设备没法识别) \<br>Fast Boot: Disabled \<br>Secure Boot/OS Type: Other OS (有就选) \<br>SATA to AHCI \<br>Boot 启动使用U盘 Partition</p>
</blockquote>
<h4 id="安装过程"><a href="#安装过程" class="headerlink" title="安装过程"></a>安装过程</h4><ol>
<li>在Clover 引导界面选择名为<code>Boot macOS Install from macOS high sierra</code>(默认第一个)</li>
<li>安装进入verbose 啰嗦模式</li>
<li>会自动重启几次</li>
<li>之后进入macOS Utilities(macOS 使用工具)</li>
<li>使用磁盘工具抹掉磁盘</li>
<li>点击顶部<strong>显示所有设备</strong>，找到你要安装硬盘，点击抹掉：名字取macos；类型：【1】 U盘取名macinstaller【2】 格式为Mac OS Extended(Journaled) -&gt; Mac OS 拓展(日志式)【3】 方案: GUID分区图</li>
<li>回到macOS Utilities 界面，选择Install macOS</li>
<li>【确定】【确定】之后，选择你要安装的安装盘macos</li>
<li>安装过程会重启几次，确保从硬盘启动而不是U盘启动(默认帮你选好了，确定下即可)</li>
</ol>
<h4 id="选择国家界面"><a href="#选择国家界面" class="headerlink" title="选择国家界面"></a>选择国家界面</h4><p>选中国</p>
<p>然后一直点下一步，能跳过则跳过。之后再设置。</p>
<p>创建电脑账户(这个名字一定要取好，之后不好改；有mac 系统的大bug)</p>
<h4 id="替换U盘启动EFI-至硬盘启动EFI"><a href="#替换U盘启动EFI-至硬盘启动EFI" class="headerlink" title="替换U盘启动EFI 至硬盘启动EFI"></a>替换U盘启动EFI 至硬盘启动EFI</h4><ol>
<li>clover configuration - Mount EFI - 挂载Mount U盘、macOS 的EFI分区</li>
<li>将U盘的EFI 整个替换硬盘的EFI文件夹</li>
</ol>
<h4 id="拔出U盘-重启启动"><a href="#拔出U盘-重启启动" class="headerlink" title="拔出U盘 重启启动"></a>拔出U盘 重启启动</h4><p>Boot 使用硬盘的Partition 启动</p>
<h3 id="查找驱动"><a href="#查找驱动" class="headerlink" title="查找驱动"></a>查找驱动</h3><p>黑苹果难就难在找驱动，通过查找通用驱动为例。</p>
<blockquote>
<p>屏幕左上角🍎 - 关于本机 - 系统报告 查看确实的驱动 \<br>比如缺失以太网卡、音频 \<br>去主板官网确认网卡声卡的型号 \<br>比如Gigabyte z370 HD3P - 产品规格 - 音效 - <strong>内建Realtek@ ALC1220</strong> 那么下载<a href="https://github.com/acidanthera/AppleALC/releases" target="_blank" rel="noopener">AppleALC</a> \<br><a href="https://bitbucket.org/RehabMan/os-x-intel-network/src" target="_blank" rel="noopener">网卡驱动</a></p>
</blockquote>
<p>NVIDIA webDriver驱动可以直接安装对应驱动：<a href="https://www.tonymacx86.com/threads/nvidia-releases-alternate-graphics-drivers-for-macos-high-sierra-10-13-6-387-10-10-10-40.255913/" target="_blank" rel="noopener">NVIDIA webDriver</a></p>
<p>如果是集成显卡UHD Graphics 630：</p>
<ol>
<li>clover configuration打开硬盘EFI - CLOVER - config.plist</li>
<li>Devices &gt; FakeID &gt; IntelGFX = 0x59128086</li>
<li>Graphics &gt; ig-platform-id = 0x59120000</li>
<li>Graphics &gt; 打钩Inject Intel(似乎有点重要,否则还是会闪,显卡7M)</li>
<li>SMBIOS &gt; Select iMac17.1</li>
</ol>
<p>有双屏幕需求的，DVI + HDMI 插上没反应的可以试试：</p>
<ol>
<li>Clover configuration - Graphics - NVCap: 04000000 00000100 0E000000 00000007 00000000</li>
<li>Video Ports: 2</li>
</ol>
<p>关闭啰嗦模式：</p>
<ol>
<li>Boot - Arguments 删除<strong>-v</strong></li>
</ol>
<h4 id="驱动安装方法"><a href="#驱动安装方法" class="headerlink" title="驱动安装方法"></a>驱动安装方法</h4><p>把下载下来的.kext 驱动放到硬盘的EFI - CLOVER - kexts - Other 下，重启即可生效。</p>
<h2 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h2><p><a href="https://zhuanlan.zhihu.com/p/55256660" target="_blank" rel="noopener">黑苹果麦金塔</a></p>
<p><a href="https://www.tonymacx86.com" target="_blank" rel="noopener">tonymacx86</a></p>
<p><a href="https://blog.daliansky.net/macOS-High-Sierra-10.13.6-17G65-Release-Version-with-Clover-4596-original-mirror.html" target="_blank" rel="noopener">windows 制作mac参考</a></p>
<p><a href="https://www.tonymacx86.com/threads/success-8700k-gigabyte-z370-hd3p-uhd-graphics-630-macos-high-sierra-mojave.239402/" target="_blank" rel="noopener">tonymacx86 - i7 8700k</a></p>
<p><a href="https://www.tonymacx86.com/threads/nvidia-releases-alternate-graphics-drivers-for-macos-high-sierra-10-13-6-387-10-10-10-40.255913/" target="_blank" rel="noopener">tonymacx86 - Nvidia webDriver</a></p>
<p><a href="https://github.com/enify/blog/issues/2" target="_blank" rel="noopener">windows 制作mac参考2</a></p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-4-22lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/04/25/2019-4-22lesson/">2019-4-22lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/04/25/2019-4-22lesson/" class="article-date">
	  <time datetime="2019-04-24T23:40:34.000Z" itemprop="datePublished">April 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>记录最近将近一个月的生活</p>
<p>新工作进展的很顺利。我们老大实力很强，为人也相当平顺。简直就是佩服这些老大。<br>我表示，我的人生轨迹永远都是运气超级好的那个，很神奇。比如，我考大学；学计算机；做网管；出来实习iOS；iOS的几年；碰到可爱的老婆；生了个阿黄；转岗顺利。不过好运大家都有，都围绕自己转，不过很多人没去努力抓住罢了。可能中间哪里间歇，断档了，那当然好运就断了。就比如，有时你会发现，你过红绿灯，一路都是绿灯。<br>刚进公司完成这几个大功能（老大分配的任务非常适合我成长，循序渐进那种）：</p>
<ol>
<li>注册增加nickname</li>
<li>网页界面显示版本号</li>
<li>mongo 对日志保存一年</li>
<li>用户下载软件，保存日志</li>
<li>用户绑定手机号，填写验证码。绑定、解除绑定、登录二次验证过程，oauth登录页面二次验证(第三方库参数外部输入)</li>
<li>vue 提取component</li>
<li>管理员 管理用户界面-管理员增加筛选功能</li>
<li>完成后端接口请求次数限制功能</li>
<li>修改浏览器退出，再进入页面，此时却需要重新登录bug(主要前段bug，cookie 存在内存中，web客户端死了，便需要重启了)</li>
<li>解决用户登录后退出，frontend 会多次请求profile bug</li>
<li>提供客户端VMProtect 接口。实现【1】 管理员输入secret 等；【2】和脚本(keyGen)交换信息返回客户端</li>
<li>完成多个license 增加、修改</li>
<li>用户授权页面排序(前段加后端)</li>
<li>backend抽取license 模块</li>
<li>增加editor 编辑者权利范围</li>
<li>将个人中心 重写成Typescript</li>
</ol>
<p>工作中是如此。尽我最大努力去学习、熟悉、解决错误。</p>
<p>学科目二大概4、5次就去考试了，最重要的是压离合，压的我腿都酸了。考试前一周日，我选择400块套餐，教练带着我走了1、2、3号线真实考试场景；本来有意再花500块，考试内的考试教官一些<em>特殊服务</em>，但是想想自己试试，应该没太大问题的(看来是对的，其实教官就是在出发时，对你很温柔-交钱了嘛；倒车时稍微喊一喊，其他没什么帮助，省了一笔巨款)。<br>科目二19.4.2 早早去考场，拿完号再去转了一圈,就去考场坐着等考试.<br>轮到我进去，把号拿了，手机放到柜子去一个房间等。好多人在门前等在叫号，一些人先去考了，有高兴的回来的，有沮丧不开心的。我看着他们，内心平淡。然后过了很久，大概要叫到我了吧，开始有一丢丢紧张，然后我告诉自己，我有不得不过的理由，不能把时间耗在这里。方法很有效。<br>我的叫号到了”一号线“，我平淡的前往车子，启动，慢慢往前，还是和压离合一样。<br>第一个坎：倒车入库。我把车子最高点对准前方标杆，倒车时肩膀线对准水管头，往右打死，慢慢倒车。发现有压线的可能，于是我把方向盘往左打一些，然后再往右打死，然后车子还是压线了，挂了。很不甘心，后面都没尝试就挂了。然后见没人喊，我就继续把左边倒库试一遍。发现管理台有人喊我回原点重考。好吧，于是我开回去，让师傅调试重考了。</p>
<p>重考时慢慢往前，前面转弯处有两辆车堵在那里，蛋疼，还没从刚才失败情绪中，但是我要将其转化为动力，我有不得不过的理由！前方通车，我往前，得，倒车有一个菇凉考试，那就停在那里等她。等了好久，那姑娘考完倒库，没挂，然后从左边出库。？what？左边是入口咋出去！于是她前倒后倒，把自己时间超时，被考官喊回去了。悲伤的故事。</p>
<p>轮到我了，我慢慢往前，把车子摆正，最高点正对标杆。倒退时，肩膀线正对水管头，稍微再过10公分(有个过度黑框)然后右打死。慢慢倒着，然后进来后，发现没叫，说明没问题。于是出库，肩膀线对准左边第一个柱子，左打死。倒车时，肩膀线对准左边一个标志物，左打死，车子慢慢倒入库中，左肩膀线对准一个框框内，停稳。没叫，没叫说明我安全了。于是我小心的出库，往前侧方停车。<br>路上左后镜保证不压线即可，最高点正对一个模糊的线。往前有个标志点对准肩膀线停下。往后倒，肩膀线对准左边一个砖头，右打死；左后镜看到第一个黄黑交接，方向盘回一半，再看到一个黄黑交接，反向盘回完，往后倒，左轮轧着晃条，左打死，再慢慢退，注意看右后视镜中车身和线平行，停下，回空挡，拉手刹。出库时，先上一档，出发，然后最高点对准标志物回完，稍微往前一点，右打死，车身快摆正时回完。这个地方要小心，很窄，容易压线，否则就挂了。这两个最麻烦的完了，接下来好很多。前方是直角转弯，一路有点小激动，腿有点小抖。<br>激动也要完成，不能松懈！最高点最准，肩膀线到标志物左打死，成功过关。下一关坡道定点。<br>我上去时，最高点对准，左侧不能压线，那就往有一点点，扣分就扣分吧，然后最高点肩膀线对其。fuck，左边两辆车，看不见！不过老子高啊！！！我看得见歪脖子树！！！于是安安全全停下。拉手刹3s，放下手刹，慢抬离合，稳住离合，慢放刹车。又成功。下一个s弯。<br>s弯算是比较好过的，一定要慢，科目二就是学习压离合，慢，蠕动，反正不限时，不要停下被扣分就可以了。s弯过去最后一格障碍物有点突出稍微小心，往左拉一点，然后往右拉一点，进入窄路掉头。<br>窄路掉头其实挺宽的，倒的时候稍微多贪心一点点，安全就好，然后很平顺就出去了。出去时，小心别压线。<br>难得都没了，接下来是上海多考的3项：进隧道、模拟高速停车打卡、紧急情况处置。(我再窄路掉头就已经开启灯了，管他呢，想怎么开就怎么开，不算扣分的，教练说)，倒数第二个栏关掉灯光。<br>模拟高速停车打卡，离合位置对准路上钉子，到位停车，回空挡拉手刹，然后上一档，放手刹。出发时稍微往右点(不然之前往左靠拢可能继续前行不小心碰到线，挂了)。<br>紧急停车，就是听到播报，立即停车然后打开紧急灯光，闪8下，继续往前。<br>往前就回到原点了。<br>教官出来说我考通过了，我想问多少分，他说过了就好了，管他多少分。算了，心情好，不知道无所谓，我没给教官好处，肯定是这个态度。哈哈。社会是用钱打通的。<br>给同是张教练一起考试的同学大拇指，成功，给她们点安慰和鼓励。<br>我出去和张教练报喜，顺便等另两位考试菇凉好运。<br>一起的另一个大叔，第二次考还是失败，没有模拟过。好懊悔，一直表示，还是要模拟，等会就去模拟。然后两位菇凉出来，也说没过。悲伤的故事，今天考试的就我一个通过了。<br>回去上班去了，心情大好。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  
    <article id="post-2019-3-27lesson" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      <a class="article-title" href="/2019/04/25/2019-3-27lesson/">2019-3-27lesson</a>
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2019/04/25/2019-3-27lesson/" class="article-date">
	  <time datetime="2019-04-24T23:40:25.000Z" itemprop="datePublished">April 25, 2019</time>
	</a>

      
    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="connect-mongo-用户登录后杀死浏览器-用户还得重新登录-bug-解决过程"><a href="#connect-mongo-用户登录后杀死浏览器-用户还得重新登录-bug-解决过程" class="headerlink" title="connect-mongo 用户登录后杀死浏览器,用户还得重新登录 - bug 解决过程"></a>connect-mongo 用户登录后杀死浏览器,用户还得重新登录 - bug 解决过程</h3><p>表现为用户正常登录。cookie、session 被正常记录。把浏览器关闭又打开时，需要重新登录。</p>
<p>猜测：</p>
<ol>
<li>cookie 没有记录</li>
</ol>
<p>不对，记录了。front 在<strong>SignIn</strong>时<code>Cookies.set(&#39;secret&#39;, userInfo)</code>。每次打开时都是有的。</p>
<ol start="2">
<li>session 没有记录</li>
</ol>
<p>流程对的。cookieParser、expressSession、passport.initialize、passport.session、passport.serilizeUser、passport.deserializeUser</p>
<p>但是注意到mongo 的session 表里面，expires、originalMaxAge 等都为null,说明session 写进去了，但是设置session expire 方式不对：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">app.use(expressSession(&#123;</span><br><span class="line">    name:</span><br><span class="line">    secret</span><br><span class="line">    maxAge: expireTime</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">以上设置过期时间方法不对，可以使用下面两种方法之一：</span><br><span class="line"></span><br><span class="line">[1] 全部永久统一设置</span><br><span class="line">expressSession(&#123;</span><br><span class="line">    name:</span><br><span class="line">    secret:</span><br><span class="line">    cookie:</span><br><span class="line">        maxAge: expireTime //这是统一设置方式的正确方式</span><br><span class="line">&#125;)</span><br><span class="line">[2] 灵活设置session过期时间</span><br><span class="line">用户确认登录后，使用req.session.cookie.expire = expireTime</span><br></pre></td></tr></table></figure>
<p>以上正确的解决了session 设置过期问题。</p>
<p>然后接下来尝试登录操作。发现登录后，退出浏览器，重新打开浏览器并进入页面，发现又打开了登录页。</p>
<p>难道问题还在？首先排除之前已经成功解决了cookie session 设置问题；是backend 有问题还是frontend 有问题？</p>
<p>这时尝试使用浏览器打开某个没有界面的接口时，居然打开了，同时返回了用户的基本信息！说明后端的确没有问题，后端将cookie 认证过后的信息正确的返回了。</p>
<p>后端校验没有问题，那么该问题就可能由frontend产生，frontend自己验证，自己处理了该route？</p>
<p>尝试找了下源码，确实发现了其在route.beforeEach(SPA 第一次加载或者重刷新调用)方法中，自我检验了一番，但是却缺少验证信息，自己误判自己。</p>
<blockquote>
<p>从上面分析得到，全栈工程需要先各自分析问题由来和可能出处。当都有问题时就会很难判别，这时可以从一些不正常的地方打开突破口，一个个解决后，才能知道靠近真相。</p>
</blockquote>
<p>这也是我第一次跟着老大一起改第一个大bug。自己没能贡献太多帮助，测试过程方法不熟练、分析来由不清晰、尝试过程比较靠蒙。</p>
<p>多多努力啊，努力才是回报老大苦心栽培！！</p>
<h3 id="U盘格式为Fat32-最多只能4G-左右内容"><a href="#U盘格式为Fat32-最多只能4G-左右内容" class="headerlink" title="U盘格式为Fat32 最多只能4G 左右内容"></a>U盘格式为Fat32 最多只能4G 左右内容</h3><p>Mac 大文件总是复制不进U盘，是因为Fat32格式原因。但是格式为NTFS 格式时Mac 又识别不了。</p>
<p>解决：取github 下载NTFS X；或者Mac 里面的NTFS 操作软件即可识别并进项curd 操作。</p>
<h3 id="同局域网传输文件方法"><a href="#同局域网传输文件方法" class="headerlink" title="同局域网传输文件方法"></a>同局域网传输文件方法</h3><p>PC.A在相关文件夹使用Python 打开权限<code>python -m SimpleHTTPServer 8000</code></p>
<p>意思是打开8000 端口。此时另一台打开浏览器，输入${PC.A.ip:8000}即可进入该文件夹。同时选取对应文件即可下载</p>
<h3 id="terminal-zsh-翻墙"><a href="#terminal-zsh-翻墙" class="headerlink" title="terminal zsh 翻墙"></a>terminal zsh 翻墙</h3><pre><code>vim ~/.zshrc # 修改terminal 源文件
</code></pre><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">alias proxy=&apos;export all_proxy=socks5://127.0.0.1:$&#123;port&#125;&apos; # port 一般为1080；查看：- 偏好设置 - 高级 - 本地Socks5监听端口</span><br><span class="line">alias unproxy=&apos;unset all_proxy&apos;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">source ~/.zshrc</span><br><span class="line">curl cip.cc # 显示了国内地址</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">proxy</span><br><span class="line">curl cip.cc # 已翻墙的地址</span><br></pre></td></tr></table></figure>
<pre><code>unproxy # 关闭翻墙
</code></pre><p><a href="https://github.com/mrdulin/blog/issues/18" target="_blank" rel="noopener">参考</a></p>
<h3 id="centos6增加Swap分区"><a href="#centos6增加Swap分区" class="headerlink" title="centos6增加Swap分区"></a>centos6增加Swap分区</h3><p>1.检查swap大小和硬盘空间</p>
<pre><code>free -m
</code></pre><p>2.添加交换文件</p>
<pre><code>mkdir -p /opt/temp
# 增加内存为2G
dd if=/dev/zero of=/opt/temp/swap bs=1024 count=2048000
</code></pre><p>3.创建交换空间</p>
<pre><code>mkswap -f /opt/temp/swap
</code></pre><p>4.启动新增加的2G交换空间</p>
<pre><code>swapon /opt/temp/swap
</code></pre><p>5.修改/etc/fstab 使新加的2G交换空间在系统重新启动后自动生效</p>
<pre><code>echo &quot;/opt/temp/swap swap swap defaults 0 0&quot; &gt;&gt;/etc/fstab
</code></pre><p>6.重新启动系统</p>
<pre><code>reboot
</code></pre><p><a href="https://blog.csdn.net/lym152898/article/details/77133260" target="_blank" rel="noopener">参考</a></p>
<h3 id="Dockerfile-容器不能连接另一个容器的端口"><a href="#Dockerfile-容器不能连接另一个容器的端口" class="headerlink" title="Dockerfile 容器不能连接另一个容器的端口"></a>Dockerfile 容器不能连接另一个容器的端口</h3><p>错误原因是自身错误，情况：我以前就是写127.0.0.1 连接本地mongo、redis，但是我忘了我以前使用的是docker-compose</p>
<p>我现在不想用docker-compose，操作是使用真实物理地址, 如192.168.1.2、server Ip，反正不能为127.0.0.1 即可。</p>
<p>这样即可成功，仅仅只是这个错误.</p>
<p>导致我一个大中午在：构建容器400多M、上传容器、运行-出错，反复。本地debug运行都是可以连接的。然后我本地使用容器，咦，果然连不上。</p>
<h3 id="重新Certbot-auto"><a href="#重新Certbot-auto" class="headerlink" title="重新Certbot-auto"></a>重新Certbot-auto</h3><p>域名过期，重新搞了个免费的域名:gogal.ml <a href="freenom.com">官网</a><br>控制台等会还要用到，需要填写certbot token</p>
<p>首先去<a href="https://certbot.eff.org/lets-encrypt" target="_blank" rel="noopener">certbot 官网</a>，我选择centos6-nginx 于是是这里-<a href="https://certbot.eff.org/lets-encrypt/centos6-nginx" target="_blank" rel="noopener">直达</a></p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$cd</span> ~/</span><br><span class="line"><span class="variable">$mkdir</span> download &amp;&amp; <span class="built_in">cd</span> download</span><br><span class="line"><span class="variable">$wget</span> https://dl.eff.org/certbot-auto</span><br><span class="line"><span class="variable">$sudo</span> mv certbot-auto /usr/<span class="built_in">local</span>/bin/certbot-auto</span><br><span class="line"><span class="variable">$sudo</span> chown root /usr/<span class="built_in">local</span>/bin/certbot-auto</span><br><span class="line"><span class="variable">$sudo</span> chmod 0755 /usr/<span class="built_in">local</span>/bin/certbot-auto</span><br><span class="line"></span><br><span class="line"><span class="variable">$pip</span> install certbot-nginx</span><br></pre></td></tr></table></figure>
<p>到这里需要先前去nginx.conf 填写对应443 的server_name。 比如：server_name <a href="http://www.gogal.ml" target="_blank" rel="noopener">www.gogal.ml</a> gogal.ml;下面会用到</p>
<p>$/usr/local/bin/certbot-auto –server <a href="https://acme-v02.api.letsencrypt.org/directory" target="_blank" rel="noopener">https://acme-v02.api.letsencrypt.org/directory</a> –manual –preferred-challenges dns  –installer nginx -d *.gogal.ml -d gogal.ml # gogal.ml 就是我的域名</p>
<p>前几句都可以直接忽略，yes or enter</p>
<p>直到出现这句：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Please deploy a DNS TXT record under the name</span><br><span class="line">_acme-challenge.gogal.ml with the following value:</span><br><span class="line"></span><br><span class="line">EfurJLgnrwahc7g_6k7odGVXp6sffOruJaDceBdiAmU</span><br><span class="line"></span><br><span class="line">Before continuing, verify the record is deployed.</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br></pre></td></tr></table></figure>
<p>这时将里面那个拷贝到freenom 控制台-managedns</p>
<p>Add Records</p>
<p>name 填 <strong>_ACME-CHALLENGE</strong><br>Target 填 <strong>${你自己得到的那个，比如EfurJLgnrwahc7g_6k7odGVXp6sffOruJaDceBdiAmU}</strong></p>
<p>回到ssh 按下enter 键，之后还有几步都没那么关键了。</p>
<p>这时你用postman 可以测试，之前的都是可用的了。</p>
<p>这里提一点：一开始我碰到certbot 升级的问题</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Saving debug log to /var/log/letsencrypt/letsencrypt.log</span><br><span class="line"></span><br><span class="line">How would you like to authenticate with the ACME CA?</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">1: Nginx Web Server plugin (nginx)</span><br><span class="line">2: Spin up a temporary webserver (standalone)</span><br><span class="line">3: Place files in webroot directory (webroot)</span><br><span class="line">- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -</span><br><span class="line">Select the appropriate number [1-3] then [enter] (press &apos;c&apos; to cancel): 1</span><br><span class="line">Plugins selected: Authenticator nginx, Installer None</span><br><span class="line">Obtaining a new certificate</span><br><span class="line">Performing the following challenges:</span><br><span class="line">http-01 challenge for gogal.ml</span><br><span class="line">Client with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS.</span><br><span class="line">Client with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS.</span><br></pre></td></tr></table></figure>
<p>我就是直接前往官网，下载最新的certbot-auto 即解决了。</p>
<h3 id="利用Vue-2-x-Templates-Legacy-脚手架搭建项目"><a href="#利用Vue-2-x-Templates-Legacy-脚手架搭建项目" class="headerlink" title="利用Vue 2.x Templates(Legacy) 脚手架搭建项目"></a>利用Vue 2.x Templates(Legacy) 脚手架搭建项目</h3><p><a href="https://cli.vuejs.org/guide/creating-a-project.html#vue-create" target="_blank" rel="noopener">Vue 官网</a></p>
<pre><code>yarn global add @vue/cli-init

vue init webpack &lt;my-project&gt;
</code></pre><p>接下来就可以愉快的写了</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
            
      
    </footer>
  </div>
  
</article>

<!-- Table of Contents -->

    

  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/page/6/">Prev</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><a class="page-number" href="/page/6/">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/">8</a><a class="page-number" href="/page/9/">9</a><span class="space">&hellip;</span><a class="page-number" href="/page/19/">19</a><a class="extend next" rel="next" href="/page/8/">Next</a>
  </nav>

</section>
          <aside id="sidebar">
  
    <div class="widget-wrap" style="margin: 20px 0;">
	<div id="search-form-wrap">

    <form class="search-form">
        <label style="width: 75%;">
            <span class="screen-reader-text">Search for:</span>
            <input type="search" class="search-field" style="height: 42px;" placeholder=" Search…" value name="s" title="Search for:">
        </label>
        <input type="submit" class="search-form-submit" value="Search">
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="Type something...">
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: 'Posts',
            PAGES: 'Pages',
            CATEGORIES: 'Categories',
            TAGS: 'Tags',
            UNTITLED: '(Untitled)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
</div>
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Connect With Us</h3>
    <div class="widget widget_athemes_social_icons">

    	<ul class="clearfix widget-social-icons">   
    	
          
     			  <li><a href="https://github.com/shaohung001" title="Github"><i class="fa fa-github" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Weibo"><i class="fa fa-weibo" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Twitter"><i class="fa fa-twitter" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Facebook"><i class="fa fa-facebook" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Google-plus"><i class="fa fa-google-plus" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Instagram"><i class="fa fa-instagram" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Pinterest"><i class="fa fa-pinterest" aria-hidden="true"></i></a></li> 
          
   		
          
     			  <li><a href title="Flickr"><i class="fa fa-flickr" aria-hidden="true"></i></a></li> 
          
   		
          
            <li><a href="mailto:?subject=请联系我&body=我能帮你什么" title="email"><i class="fa fa-envelope" aria-hidden="true"></i></a></li> 
          
   		
   		</ul>


   		<!--
   		<ul class="clearfix widget-social-icons">   		
   		<li class="widget-si-twitter"><a href="http://twitter.com" title="Twitter"><i class="ico-twitter"></i></a></li> 
		<li class="widget-si-facebook"><a href="http://facebook.com" title="Facebook"><i class="ico-facebook"></i></a></li>
			<li class="widget-si-gplus"><a href="http://plus.google.com" title="Google+"><i class="ico-gplus"></i></a></li>
			<li class="widget-si-pinterest"><a href="http://pinterest.com" title="Pinterest"><i class="ico-pinterest"></i></a></li>
			<li class="widget-si-flickr"><a href="http://flickr.com" title="Flickr"><i class="ico-flickr"></i></a></li>
			<li class="widget-si-instagram"><a href="http://instagram.com" title="Instagram"><i class="ico-instagram"></i></a></li>
		</ul> -->

    </div>
  </div>


  
    
  <div class="widget_athemes_tabs">
    <ul id="widget-tab" class="clearfix widget-tab-nav">
      <li class="active"><a>Recent Posts</a></li>
    </ul>
    <div class="widget">
      <ul>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/08/05/2021-8-5lesson/">2021-8-5lesson</a></h6>
              <span>August 5, 2021</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/07/31/2021-7-31lesson/">2021-7-31lesson</a></h6>
              <span>July 31, 2021</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/07/06/2021-7-5lesson/">2021-7-5lesson</a></h6>
              <span>July 6, 2021</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/07/06/2021-7-6lesson/">2021-7-6lesson</a></h6>
              <span>July 6, 2021</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/06/16/2021-6-16lesson/">2021-6-16lesson</a></h6>
              <span>June 16, 2021</span>
            </div>

          </li>
        
          <li class="clearfix">

            
              <div class="widget-entry-summary" style="margin: 0;">
            

              <h6 style="margin: 0;"><a href="/2021/06/16/2021-6-11lesson/">2021-6-11lesson</a></h6>
              <span>June 16, 2021</span>
            </div>

          </li>
        
      </ul>
    </div>
  </div>

  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/2020过年/">2020过年</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Charles-https-iTunes-下载历史版本/">Charles https iTunes 下载历史版本</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GPUimage/">GPUimage</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GTX750/">GTX750</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IT/">IT</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/RAC/">RAC</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VVVVVV/">VVVVVV</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/acme/">acme</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/awaitCall/">awaitCall</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/bitbucket-ios/">bitbucket  ios</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/c/">c++</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/cocoapods/">cocoapods</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/docker-golang/">docker golang</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/go/">go</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/goland-mod-爆红/">goland mod 爆红</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hackintoshell/">hackintoshell</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iced2ts/">iced2ts</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios-it-dylib-nosuchfileordirectory/">ios it dylib(nosuchfileordirectory)</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ios7/">ios7</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k3s/">k3s</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mac-opengl/">mac_opengl</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/neo4j/">neo4j</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx-http-flv-module/">nginx-http-flv-module</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/obs/">obs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/parallels/">parallels</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/qiniu/">qiniu</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/reactivecocoa/">reactivecocoa</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/src-nginx-flv/">src nginx-flv</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/srs/">srs</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/买房-产证/">买房, 产证</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/买房资格/">买房资格</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/小说/">小说</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/居住证积分/">居住证积分</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/杂谈/">杂谈</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/猴头菇生病/">猴头菇生病</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/看房/">看房</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/科目三/">科目三</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/脑残/">脑残</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/2020过年/" style="font-size: 10px;">2020过年</a> <a href="/tags/Charles-https-iTunes-下载历史版本/" style="font-size: 10px;">Charles https iTunes 下载历史版本</a> <a href="/tags/GPUimage/" style="font-size: 10px;">GPUimage</a> <a href="/tags/GTX750/" style="font-size: 10px;">GTX750</a> <a href="/tags/IT/" style="font-size: 15px;">IT</a> <a href="/tags/RAC/" style="font-size: 10px;">RAC</a> <a href="/tags/VVVVVV/" style="font-size: 20px;">VVVVVV</a> <a href="/tags/acme/" style="font-size: 10px;">acme</a> <a href="/tags/awaitCall/" style="font-size: 10px;">awaitCall</a> <a href="/tags/bitbucket-ios/" style="font-size: 10px;">bitbucket  ios</a> <a href="/tags/c/" style="font-size: 10px;">c++</a> <a href="/tags/cocoapods/" style="font-size: 10px;">cocoapods</a> <a href="/tags/docker-golang/" style="font-size: 10px;">docker golang</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/go/" style="font-size: 10px;">go</a> <a href="/tags/goland-mod-爆红/" style="font-size: 10px;">goland mod 爆红</a> <a href="/tags/hackintoshell/" style="font-size: 10px;">hackintoshell</a> <a href="/tags/iced2ts/" style="font-size: 20px;">iced2ts</a> <a href="/tags/ios-it-dylib-nosuchfileordirectory/" style="font-size: 10px;">ios it dylib(nosuchfileordirectory)</a> <a href="/tags/ios7/" style="font-size: 10px;">ios7</a> <a href="/tags/k3s/" style="font-size: 10px;">k3s</a> <a href="/tags/mac-opengl/" style="font-size: 10px;">mac_opengl</a> <a href="/tags/neo4j/" style="font-size: 10px;">neo4j</a> <a href="/tags/nginx/" style="font-size: 15px;">nginx</a> <a href="/tags/nginx-http-flv-module/" style="font-size: 10px;">nginx-http-flv-module</a> <a href="/tags/obs/" style="font-size: 10px;">obs</a> <a href="/tags/parallels/" style="font-size: 10px;">parallels</a> <a href="/tags/qiniu/" style="font-size: 10px;">qiniu</a> <a href="/tags/reactivecocoa/" style="font-size: 10px;">reactivecocoa</a> <a href="/tags/src-nginx-flv/" style="font-size: 10px;">src nginx-flv</a> <a href="/tags/srs/" style="font-size: 10px;">srs</a> <a href="/tags/买房-产证/" style="font-size: 10px;">买房, 产证</a> <a href="/tags/买房资格/" style="font-size: 10px;">买房资格</a> <a href="/tags/小说/" style="font-size: 10px;">小说</a> <a href="/tags/居住证积分/" style="font-size: 10px;">居住证积分</a> <a href="/tags/杂谈/" style="font-size: 10px;">杂谈</a> <a href="/tags/猴头菇生病/" style="font-size: 10px;">猴头菇生病</a> <a href="/tags/看房/" style="font-size: 10px;">看房</a> <a href="/tags/科目三/" style="font-size: 10px;">科目三</a> <a href="/tags/脑残/" style="font-size: 10px;">脑残</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>

    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/06/">June 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/02/">February 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/01/">January 2021</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/07/">July 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/01/">January 2020</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">December 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">September 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/07/">July 2019</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/06/">June 2019</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/04/">April 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/02/">February 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/01/">January 2019</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">December 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/10/">October 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/09/">September 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">August 2018</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/07/">July 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/05/">May 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/04/">April 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/03/">March 2018</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/10/">October 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">August 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">July 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">April 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">March 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">February 2017</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a><span class="archive-list-count">68</span></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2021 aKer All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1278024876&web_id=1278024876" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/click.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
