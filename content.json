{"meta":{"title":"aKer","subtitle":null,"description":null,"author":"aKer","url":"https://shaohung001.github.io","root":"/"},"pages":[{"title":"about","date":"2019-09-14T06:28:08.000Z","updated":"2019-09-14T06:28:08.734Z","comments":true,"path":"about/index.html","permalink":"https://shaohung001.github.io/about/index.html","excerpt":"","text":""},{"title":"categories","date":"2019-09-14T06:24:25.000Z","updated":"2019-09-14T06:24:25.750Z","comments":true,"path":"categories/index.html","permalink":"https://shaohung001.github.io/categories/index.html","excerpt":"","text":""}],"posts":[{"title":"2020-8-21lesson","slug":"2020-8-21lesson","date":"2020-08-25T12:56:52.000Z","updated":"2020-08-25T12:56:52.666Z","comments":true,"path":"2020/08/25/2020-8-21lesson/","link":"","permalink":"https://shaohung001.github.io/2020/08/25/2020-8-21lesson/","excerpt":"","text":"","categories":[],"tags":[]},{"title":"2020-7-13lesson","slug":"2020-7-13lesson","date":"2020-08-25T12:56:22.000Z","updated":"2020-08-25T12:57:11.221Z","comments":true,"path":"2020/08/25/2020-7-13lesson/","link":"","permalink":"https://shaohung001.github.io/2020/08/25/2020-7-13lesson/","excerpt":"","text":"未来人类体型预测看了很多科幻片说未来是聪明人占主导比例。 当前社会一直在演进，那当然是必然现象。每次的战争、争夺，都是新社会体制对旧社会的冲击。之前看有个视频，大清体制是集农业文明大成，也是非常庞大的体制。 新社会体系联合起来慢慢才蚕食殆尽，所以体制的进步是必然。在现代，人才才是资源，而且在新社会体系贡献会越来越大。 看到说未来的人聪明，脑袋大，我说不对。 个体体能好，就要锻炼，身体就会健壮；个体脑力好，就要专研，于是有两种分项：1）肚子大大的，发量少少的，因为要思考，坐着，大脑用脑多，让肚子多保留更多的脂肪，保护大脑；另一种就是肚子没有或者有一点点，然后发量差不多； 嘎嘎。哪有可能脑袋超级大，特别大，躯干很小那种。大脑聪明又不是越大越好。 记录下SSH 使用ssh-key 使用秘钥登录创建秘钥对 123456ssh-keygencd .sshcat id_rsa.pub &gt;&gt; authorized_keyschmod 600 authorized_keyschmod 700 ~/.ssh 修改sshd_config: 123456vim /etc/ssh/sshd_configRSAAuthentication yesPubkeyAuthentication yesPermitRootLogin yes 重启ssh: systemctl restart sshd 拷贝好服务器端的id_rsa 文件内容到本地机器: cat ~/.ssh/id_rsa 将id_rsa 文本放到本地文件，如 ~/.ssh/66id_rsa 此时本地直接使用该秘钥文件会报权限过大，不允许使用, 控制台: chmod 0600 66id_rsa 登录时语句: ssh root@ip -p port -i ~/.ssh/66id_rsa 即可正确登录","categories":[],"tags":[]},{"title":"2020-6-15lesson","slug":"2020-6-15lesson","date":"2020-06-15T04:29:17.000Z","updated":"2020-06-15T04:33:07.183Z","comments":true,"path":"2020/06/15/2020-6-15lesson/","link":"","permalink":"https://shaohung001.github.io/2020/06/15/2020-6-15lesson/","excerpt":"","text":"gitlab-ci frontend 打包 出错原因是frontend 安装: npm install --production 仅安装了dependence 库，需要去掉 –production 本地打包没问题，gitlab-ci 出现该情况，基本能断定就是安装库缺少打包库的问题 记录本次安装VVVVVV 遇到的问题使用 Nginx + acme.sh 制作证书首先cloudflare 取消橘色云朵，采用直连方式(这样letsencrypt 才能请求过来) Nginx 采用原生模块(不要使用docker 的nginx，有各种坑点，下面会描述此次遇到的坑) Nginx 遇到坑，安装参考了: 123456789101112131415161718# 设置系统时间为上海时间ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtimehwclock# 添加源sudo rpm -ivh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm# 展开源sudo yum repolistsudo yum install nginxsudo systemctl enable nginxsudo systemctl start nginx# 打开防火墙端口# 默认 CentOS7 使用的防火墙 firewalld 是关闭 http 服务的（打开 80 端口）sudo firewall-cmd --zone=public --permanent --add-service=httpsudo firewall-cmd --reload# 查看防火墙打开的所有服务sudo firewall-cmd --list-service # ssh dhcpv6-client http# 需要指出的是 CentOS 7 的 SELinux，使用反向代理需要打开网络访问权限sudo setsebool -P httpd_can_network_connect on 123456conf.d/VVVVVV.confserver &#123; listen 80; server_name wpn.example.com; root /home/wwwroot/sCalc;&#125; 12345678ssl.shalias acme.sh=/.acme.sh/acme.sh# 链接letsencrypted 识别域名和生成证书acme.sh --issue -d wpn.example.com -w /home/wwwroot/sCalc --nginx# 生成nginx 使用的key 和crtacme.sh --install-cert -d wpn.example.com --key-file /VVVVVV.key --fullchain-file /VVVVVV.crt# 拷贝目标文件cp /VVVVVV* /etc/VVVVVV/ 此时 systemctl restart VVVVVV, 在点击cloudflare 橙云代理CDN 即可正确链接了。 复盘遇到的问题上周搞的时候用的docker-nginx，当时用的ipv6，然后一直报404 letsencrypt 链接不进来，于是上周将服务器重新建立了。 这周还是遇到这个问题，于是想了好久，哦，原来nginx 的容器，我只映射了本地的conf.d 目录，没有把 /home/wwwroot/sCalc 目录映射进去(-v /home/wwwroot/sCalc:/home/wwwroot/sCalc, 替换进去后，又发现没有把 /etc/VVVVVV/.crt .key 映射进去)，难怪一直404. docker-nginx一直没有使用这个版本，一时没想过来。","categories":[],"tags":[]},{"title":"2020-5-29lesson","slug":"2020-5-29lesson","date":"2020-05-29T02:17:46.000Z","updated":"2020-05-29T03:47:36.965Z","comments":true,"path":"2020/05/29/2020-5-29lesson/","link":"","permalink":"https://shaohung001.github.io/2020/05/29/2020-5-29lesson/","excerpt":"","text":"使用docker/golang 执行本地golang 服务cd $工作目录 docker run --rm -it --name go-http-demo -v $PWD:/go/src/example.com/go-http-demo -p 14500:8080 golang 弄懂 Nginx location我遇到的问题之前服务器已使用有a.ahuang.ml 域名的A服务，仅提供后台api 接口；然后再做B服务时，由于理念很接近，还得使用a.ahuang.ml 的子域名，所以规划好location 就很重要。 我的本地解决测试方案当前给出我改好的location 样式： 首先设定好本地的test 域名 DNS 转向本地: 123sudo vim /etc/host输入 127.0.0.1 test.ahuang.mlvim ~/conf/ahuang.conf 书写~/conf/ahuang.conf 12345678910111213~/conf/ahuang.confserver &#123; listen 80; server_name test.ahuang.ml; client_max_body_size 500M; location / &#123; return 800; &#125; location ~ ^/(api|evidence/) &#123; return 900; &#125;&#125; 执行启动nginx docker run --rm -p 127.0.0.1:8888:80 --name mynginx -v $PWD/conf:/etc/nginx/conf.d nginx 测试 curl http://test.ahuang.ml:8888/api # 返回900 curl http://test.ahuang.ml:8888/evidence/xx # 返回900 curl http://test.ahuang.ml:888/abc # 返回800 读参考文章注意点完全参考掘金文章 推荐直接参考原文章 location修饰符类型location 支持的语法 location [=|~|~*|^~|@] pattern { ... } 「=」 修饰符: 要求路径完全匹配1234server &#123; server_name website.com; location = /abcd &#123;&#125;&#125; http://website.com/abcd 匹配 http://website.com/ABCD 可能会匹配，也可能不匹配，取决于操作系统的文件系统是否大小写敏感(case-sensitive)。ps: MAC 默认是大小写不敏感的。 http://website.com/abcd?param1*param2 匹配 http://website.com/abcd/ 不匹配 http://website.com/abcde 不匹配 「~」 修饰符: 区分大小写的正则匹配1234server &#123; server_name website.com; location ~ ^/abcd$ &#123;&#125;&#125; ^/abcd$ 这个正则表达式标识字符串必须以 /开始，以$结束，中介必须是abcd http://website.com/abcd 匹配 http://website.com/ABCD 不匹配 http://website.com/abcd?param1&amp;param2 匹配 http://website.com/abcd/ 不匹配 http://website.com/abcde 不匹配 「~*」 修饰符: 不区分大小写的正则匹配1234server &#123; server_name website.com; location ~* ^/abcd$ &#123;&#125;&#125; http://website.com/abcd 匹配 http://website.com/ABCD 匹配 http://website.com/abcd?param1&amp;param2 匹配 http://website.com/abcd/ 不匹配 http://website.com/abcde 不匹配 「^~」 修饰符: 前缀匹配如果该location 是最佳的匹配，那么对于匹配这个location 的字符串，该修饰符不再进行正则表达式的检测。注意，这不是一个正则表达式匹配，他的目的是优先于正则表达式的匹配 路径查找顺序及优先级当有多条location 规则时，nginx 有一套比较复杂的规则，优先级如下: 精确匹配 = 前缀匹配 ^~ 立刻停止后续的正则搜索 按文件中顺序的正则匹配 ~ 或 ~* 匹配不带任何修饰的前缀匹配 案例分析原文章的案例分析非常的给人容易学习 案例11234567891011server &#123; server_name website.com; location /doc &#123; return 701; # 用这样的方式，可以方便的知道请求到了哪里 &#125; location ~* ^/document$ &#123; return 702; # 用这样的方式，可以方便的知道请求到了哪里 &#125;&#125;curl -I website.com:8080/documentHTTP/1.1 702 按照上述的规则，第二个会有更高的优先级 案例212345678910server &#123; server_name website.com; location /document &#123; return 701; &#125; location ~* ^/document$ &#123; return 702; &#125;&#125;curl -I website.com:8080/document 第二个匹配了正则表达式，优先级高于第一个普通前缀匹配 案例31234567891011server &#123; server_name website.com; location ^~ /doc &#123; return 701; &#125; location ~* ^/document$ &#123; return 702; &#125;&#125;curl http://website.com/documentHTTP/1.1 701 第一个前缀匹配^~命中以后不会再搜寻正则匹配，所以会第一个命中 案例412345678910server &#123; server_name website.com; location /docu &#123; return 701; &#125; location /doc &#123; return 702; &#125;&#125;curl -I website.com:8080/document 返回 HTTP/1.1 701， 12345678910server &#123; server_name website.com; location /doc &#123; return 702; &#125; location /docu &#123; return 701; &#125;&#125;curl -I website.com:8080/document 依然返回 HTTP/1.1 701 前缀匹配下，返回最长匹配的 location，与 location 所在位置顺序无关 案例51234567891011server &#123; listen 8080; server_name website.com; location ~ ^/doc[a-z]+ &#123; return 701; &#125; location ~ ^/docu[a-z]+ &#123; return 702; &#125;&#125;curl -I website.com:8080/document 返回 HTTP/1.1 701 把顺序换一下 1234567891011server &#123; listen 8080; server_name website.com; location ~ ^/docu[a-z]+ &#123; return 702; &#125; location ~ ^/doc[a-z]+ &#123; return 701; &#125;&#125;curl -I website.com:8080/document 返回 HTTP/1.1 702 正则匹配是使用文件中的顺序，找到返回","categories":[],"tags":[{"name":"nginx","slug":"nginx","permalink":"https://shaohung001.github.io/tags/nginx/"},{"name":"docker golang","slug":"docker-golang","permalink":"https://shaohung001.github.io/tags/docker-golang/"}]},{"title":"2020-5-23kanfang","slug":"2020-5-23kanfang","date":"2020-05-26T06:28:40.000Z","updated":"2020-05-26T06:29:00.955Z","comments":true,"path":"2020/05/26/2020-5-23kanfang/","link":"","permalink":"https://shaohung001.github.io/2020/05/26/2020-5-23kanfang/","excerpt":"","text":"2020/5/23 中介约看房经历之前办理积分时，和人事与一个财务同事去社保办事，财务同事帮我推荐了一个炒房团的。说我们公司之前有个同事前两年从他手上交易过一个房子。我觉得这样有个参考性，就像我之前学车，有参考就会顺利很多。加了那个人微信后，本来约定周五去同他学习点知识，没想到周三丫头住院去不了了。老婆出院后，晚上回到家，看龙柏那附近的房子，有几个感觉还不错的，右上角有个按钮说线上带看房子，哦，居然联通链家的房产经纪人。于是就跟他聊了聊，也说自己社保还未满。不过倒是可以多转转多学学。 同时约定周末都是可以去看看房子的。 周六早上起床玩了会游戏，然后和老妈联通视频，说了说自己的一些打算，老妈也帮我问了问她的姐妹，打算明年买房的时候不够跟她们借点，提前打声招呼。然后时间也快到2:30，赶紧出门去龙柏附近那个中介那。这一下午，就是两辆电驴在一直奔走。 先是去看了往上看到的两房改三房的六楼，其实还不错，不过，我自己掂量着的一楼六楼都不考虑，不过来了就看看。中介帮我找了十款二手房，价格都在300w左右，龙柏那好多动迁房，300w都是很宽敞58、59、60平这样。 先看了龙柏七村。有六楼的，太高；二楼的，专做来买，加个挺高的；四楼(之前网上就有看到户型什么的都不错)，一梯四户，最靠小区里面；一楼，户型很奇葩，但是挺大，反正一楼不会要就对了。 再看了龙柏四村，路就很宽敞、干净。看了六楼一个老大爷，进去刺鼻尿骚味，一直博美在房间很安静。装修好也没事，但是户型是前面一个大房间，后面一个小房间，采光估计会差一点。还有就是六楼不好；另一个六楼是一个大哥，俩女儿在睡觉。他们打算置换，中间厅很大，俩房间朝南，房子还是挺干净的，一梯四户的楼梯口那一户；还有一个一楼的，完全空关多年，很黑暗，老久。反正买来必须装修把。卖点是一个大院子。 再看了龙柏三村，紫藤路。六楼的，正在出租，妹子加班回来开门，我们进去转了转，都是多年装修，但是都很干净，整洁，等于是拎包入住都很舒适的装修。 以上看了都是有各种奇葩、厅超级大、或者房子位置不那么靠中、顶天立地、房型采光、集体产权其他人也有比例、满二、满五、唯不唯一等。 这几个小区都是围绕之前我租的小区（《龙柏龙兴苑》）附近，都是动迁房。感觉一个天一个地呀，哈哈。 和中介聊了聊，毕竟价格在那摆着，人家面价比较大嘛。然后我心里觉得有没有那种不那么面积大、然后两房的（一年前还想着一房一个大厅，大厅可以隔出来睡人即可那种，飘了飘了低配要两房了）。我之前就想问能不能看看龙柏附近小区叫做《虹梅花苑》的，中介就拿出手机帮我看了看，说这款279的不错，原价320，房东说想腾房票，挂了44天降了几次。可以可以，中介能看到更多信息，然后联系那边中介(跨区域了)，然后出发前往。 那个小区在虹桥路上，10多分钟到那附近，找了一圈原来入口是一个大拱门-王子公寓-虹桥路2222弄，是一个多合一统一入口。进来很干净，清幽，附近是长宁区别墅群，很多有钱人、明星等；一路上都是老外。龙柏那边欧美面孔有一些，更多的是台湾、韩国等面孔；虹桥路这里更多的是欧美面孔。欧美一家子、欧美大姑凉、欧美小子。找这个过程多绕了一圈，还看到一个家庭人在那烧烤，可以，我也憧憬着。 进来这，是一个帅小伙中介，他说这个房子是顶楼，不过总高是五楼，不过楼顶是有三角隔热层，防热、防水。当前房子空关一年了，都有一些灰层，这都不是事。一楼向上，是一梯两户。最后一层时，由于这间空关，楼道就都是另一个房子堆放的物资，不过如果新房有人入住，他们肯定收起来的。五楼也不高，再高一层，不行，绝对不行。然后进去一看。 哇，真是我理想的。价格合适，房间也合适，没有厅没关系，别的都一应俱全。小区靠近高架，但是前面隔了一排，灰层不会那么多，声音也不大。门一关很安静。进门左侧是厨房，还挺大，比我现在租的整洁。正对面是次卧，有一个大窗，面积也合适。之前我看的龙柏那都床头床尾直接就满了，多余离门不到一米，太窄，不小心的话会着火的，而且只能睡觉。这个厅就很合适。没有厅，吃饭就围着厨房吃，那个冰箱比较占位置，买个大的冰箱当桌子？？进门左转就是过道，然后过道比较窄，而且房东还放着一个大木柜，去了过道就正常了。过道中间是洗浴厕所，这还有个小窗子呢，厕所里面有窗子，不要太好哦，厕所空间也大，合理。过道大概2、3米就到主卧了。主卧有个大衣柜，奶白色，这直接就省了一笔钱。没有阳台，主卧显得比较大，装修整套都是间接，干净，难用。主卧向南正对高架。前面也说了，不吵，这还是很好的，反正高架11点，我都是12点才睡。 这真的是当前我心中很中意的。毕竟自己也才第一天看嘛。楼下就和中介在这个小区转了转，简直就是把之前中介那个按在地板摩擦，狠狠摩擦那种，不对，是死死摩擦，毫不留情死死摩擦。小区中间是运动员，很多人在这聊聊天。 然后出来大门，小区入口大拱门这，我和中介聊了聊。中介估计之前也不好卖，感觉有点伤感，没过来这里看，真不知道手上房源差的感觉，难怪不好卖。我这里也问了问自己之后有哪些买房前准备工作。也说了刚刚那套房超级中意。聊了好一会，就先回来了，离住处很近。 回到住处就问中介，能否帮我问问房东能否能8个月我社保到期来买呢？我可以押金4、50，同时房价不讲价。 然后晚上喝老妈也说了说自己今天看房，还挺中意。 夜晚也看了看相关注意点。该房、该小区属于售后公房，好好的看看各种小心点。反正随缘吧，中介那不能急。不过房类型、小区估计比较中意《虹梅花苑》，明年基本能定在那个小区。 好了，今天又过完了，爬楼梯爬爬爬。","categories":[],"tags":[{"name":"看房","slug":"看房","permalink":"https://shaohung001.github.io/tags/看房/"}]},{"title":"2020-5-13","slug":"2020-5-13","date":"2020-05-26T06:28:22.000Z","updated":"2020-06-01T03:29:57.989Z","comments":true,"path":"2020/05/26/2020-5-13/","link":"","permalink":"https://shaohung001.github.io/2020/05/26/2020-5-13/","excerpt":"","text":"2020/5/13 猴头菇说肚子痛要去医院2020/5/13 中午接近两点，正忙着，猴头菇发微信说要去医院，肚子很痛。我一听，她都这么提了，说明肯定就是不舒服，赶紧让她打车离她很近的八院，我赶紧过来。她说中午吃完饭，肚子就有点不舒服，躺在公司的一个沙发，到现在还是很痛，等我过去带她。我说，痛就赶紧打车去医院，她说等我过来，她不懂路。那行，我赶快过去。 我发个请假邮件，跟伟哥说声老婆生病去医院，赶紧就跑过去，半路想起来忘带丫头身份证(办居住证积分时，留在公司)，跟丫头说自己打车过去医院，我回去拿她身份证。一来一回，真担心车子跑没电不走了。 赶到医院，丫头肚子痛，伴有一点发烧，先在新冠病毒检查点(这时间点必须检查)。来回检查，猴头菇肚子大大的，鼓鼓的。我过去陪她，她连坐着都很痛，还得来回检查。新冠检查还得500多，丫头没医保，全部自己出钱。发烧检查完毕说可以去妇科看。这时间点，最好别生病。 这时候去妇科看，妇科医生阿姨帮忙赶紧的在4:30 检查完(超过就不检查了)，然后去办理住院手续。办理住院手续的时候，丫头站也不是坐也不是，反正就是痛的不行了。期间要办理好了，我拿错我的医保，拖了点时间，然后换成丫头的，丫头的不能用，又得转账押金5000，这中间，丫头肚子更痛了，付费窗口蹲下都痛，嘴唇都白了。 赶紧到住院部，丫头都快走不动了。上来后，丫头在29床躺了会，然后被叫到一个小屋子穿刺看到血很多。我在屋外一直听到猴头菇的惨叫。然后医生用针筒吸出了血，得知卵巢破裂，出血没有愈合。得，刚才还走来走去，更特么病重。 然后我被叫去签家属委托做手术的风险书。心里担心啊。然后下午7点左右，丫头被推上车子，担心她一直没吃东西，会不会血糖低，又测了下说行。她去了五楼做手术了。 三个多小时一直待病房等，心里焦急啊。旁边是一个老奶奶，还没做手术，她的小儿子来服侍。她的小儿子-大叔，就跟我说，别担心，一会就好了。我说，嗯，是的，一会就好了，低头看知乎，其实担心死了，但是我毫无办法，只能转移注意力。 中间我还吃了大叔给的几块饼干，喝了杯水，然后晚上10点，丫头才终于做好手术，我都又饿咯，别说猴头仔了。手术车推上来的时候，我把丫头抱下床，她冷的发抖，嘴唇毫无血色，冷的两条腿一直抖。就像活鱼跳到岸上那样，抖得蹦跶那样。放到床上赶紧盖上被子、我把好几件衣服盖上，好让猴子暖和点。过了会她才好些。这时候她还禁食禁水，挂着吊瓶，尿袋。我就喊吊瓶没水了、给她倒尿。忙里忙外。给她楼下去买了个小碗，等醒了可以喝水。吊瓶挂到凌晨2点，我都大黑眼圈了。那个大叔也一直玩手机麻将到2点才睡。他带了个躺椅，我啥都没有，但如果躺椅也是睡不着的，我就趴着床下边，大约5点起来喂水。然后说喂她喝无糖葛粉。今天又是挂吊瓶，早上挂到下午2点多，去附近买了混沌，和丫头一人一碗混沌，吃完赶紧去公司了。晚上赶紧去医院，路上刚好买了白稀饭。今天晚上比较好的是，我去住的地方拿了丫头的瑜伽垫，哇，休息好了，第二天果然精神多了。第二天一早，赶紧去转转，有去附近买到个白稀饭，美滋滋，丫头的改善早饭有着落了，路是远了点，不敢用自己的电瓶车，别到时没电，骑的哈罗单车，真特么难骑。中午一直挂瓶到下午2点多，给她买了个午餐、准备好水，丫头吃了后，赶紧的去公司写点东西。自己也没吃啥，路上买了个黄山鸭腿菜饭（不用等，现成的，快，等红灯时买，绿灯还没灭就又可以过）。到了公司，大家都在干活，饿的不行，把饭吃了，鸭腿来不及吃，晚上去医院。我把公司的晚餐也带来，鸭腿也带来，公司晚餐吃了，鸭腿放那没吃。晚上睡到一半，说隔壁床来人，我瑜伽垫没地方，于是半夜就跑到走道上的床位躺了会，那灯光亮的呀，闪瞎我的狗眼，于是又睡得不是很好。隔天早上隔壁床来了一菇凉，子宫外孕做手术。她照看的人一个都木有，我给她抱床上，菇凉都是可怜的娃呀。她也是冷，没猴头菇抖的那么厉害。给她穿上自己带的一个袜子，脚暖和了，就不那么冷了，把身上外套也给她盖上。她男朋友来了，我的使命也就到了。当天中午猴头挂完吊瓶，我跑回住所休息了会，打了个游戏，美滋滋，不过肯定是睡不着，躺着看了看手机视频，差不多了就赶紧去医院。今天晚上有个好处，就是我又整了个位置放瑜伽垫睡，而且还看到有一个闲置的医院被子，刚好垫着，美滋滋。 一连好多天照看猴子，工作日下午就去上班，非工作日下午就会跑回住所休息休息，，嘎嘎。 终于到丫头出院那天中午，中午跟伟哥说了声，赶紧去给丫头结账出院，带回家。由于丫头心疼打车钱、一个人坐车一个人骑车麻烦，就坚持做我的电驴。心疼啊。路上中午还有交警，还得让丫头下来走一段路。回到家，稍微收拾收拾，赶紧就去公司了。 啊，好累。啊，老婆还在，真好。","categories":[],"tags":[{"name":"猴头菇生病","slug":"猴头菇生病","permalink":"https://shaohung001.github.io/tags/猴头菇生病/"}]},{"title":"2020-5-12shebao","slug":"2020-5-12shebao","date":"2020-05-24T10:13:19.000Z","updated":"2020-06-01T03:02:51.253Z","comments":true,"path":"2020/05/24/2020-5-12shebao/","link":"","permalink":"https://shaohung001.github.io/2020/05/24/2020-5-12shebao/","excerpt":"","text":"上海社保断缴引发的经历刚来上海，外地来的多少都会有公司倒闭、部门人员压缩(狼狈被裁)等等因素导致换工作。换工作时，前公司没整好、后公司没法填补，自己不懂，没有社保补上，于是出现社保断缴补缴回去、断缴但没有补缴回去的情况。 我就有2次这个经历: 第一份工作被裁(2014年经融危机)，断了之后待在出租屋3个月努力做进一步学习，导致断了3个月(那时真不懂这件事)；第二次是老板没钱，过完年解散，但是最后两个月居然没交(全公司都没交)。 明年可能有机会买房，现在看看我明年能真正有房票。 前一天去人才服务中心办理居住证积分，进展顺利，心情格外的好。然后隔天周日来公司，看了看房知识，看到一些网络的文章，各种断章取义的错误知识分享给你，然而当时我一头雾水，心里担心受怕，看到了说，必须连续5年，中间一点断缴都不行，如果你断了却没有补回去，是不能买房的。 那一刻感觉我懵了。我刚来上海努力等待2年，至少有房票有盼头吧，然而17年上海新政变成要等待5年，然后现在说我白忙活。明年2021年春天将要到5年的，却得从16年开始算起(第二次断缴时间)，也就是2022年春天才有房票。这一颗真的毫无斗志。 我东问问、西问问，公司人事也不是很清楚；网络有说连续5年，有说累计5年；众说风云，就是不见房产交易所有什么公告。那几天一直在网络查，知乎问。各种各样信息。我自己也在知乎问了一个，强调必须近期有实操人回答，没想到来了个知识普及的回答，逗比。 那几日天天都是想着这事，睡都睡不好觉。谁特么知道我再等两年，上海是什么样？刚需再等两年我也就应该滚回家了。真的受够租房了。 第二次去人才服务中心时(前几天就想着这事，觉没睡好，黑眼圈前去办理业务)，我们先去社保中心，同去办理居住证积分的伙伴他老公也是有断缴社保，但是他补缴回去了，已经可以买房了。，跟我不一样，我的是断缴，但是没有补缴回去。人事就说，要不你直接社保办理查询。我拿号后，社保工作人员也不知道，对了一遍我的社保缴纳情况。我又晕头转向的出来了。她们问如何，工作人员有说什么不？我回答很迷糊，得不到我想知道的切确信息。 她们说，要不你直接去房产交易中心问，问哪里都不如直接问交易中心。 我一听，那行，反正等会也去那附近办事，地址就是拉取个人所得税完税证明的水清路159号二楼位置。我骑着哈喽单车10几分钟就到了。 先是在一楼问了一个大哥，他再三强调可以买，我这个是正常的。后来他有人询问事情，他上了楼上。我觉得既然来了，顺便再次再次再次一次性询问交易中心咨询人员，于是就到了二楼拿咨询单问真实工作人员。 在外边等了会，然后暂停服务窗口的工作人员来了，问“你来咨询吗”，然后俺就很客气的说来询问相关的东西。我顺便开着手机录音，怕我自己听错了。一再强调我的特殊情况，是断缴，她说63个月内有60个月正常缴交，就能交易。这也就是说，社保是按累计63个月满60个月正常缴纳社保而不是连续63个月满60个月。断缴补缴、断缴没补缴是一样的，都可能买房。 政策的东西就是这样，公告没有，全靠猜。语言说的又迷糊，累计和连续两个字，是相差十万八千里的。 从交易中心走到人才服务中心路上，感觉完全不一样。感觉之前努力不是白费，也痛恨那些无良信息发布者。之前大中午，迷迷糊糊的，路上却走得越来越有劲。把相关信息发给老婆，告诉她，我们还是有机会的。给老妈打电话，告诉她，我没有努力白费，之前看到网络上的信息都是无良信息发布者，到房产交易中心咨询正确信息是，我有资格买房的。 啊，那天太阳很大，不过天真的很蓝。","categories":[],"tags":[{"name":"买房资格","slug":"买房资格","permalink":"https://shaohung001.github.io/tags/买房资格/"}]},{"title":"2020-5-12jifen","slug":"2020-5-12jifen","date":"2020-05-24T08:51:10.000Z","updated":"2020-05-29T03:49:00.714Z","comments":true,"path":"2020/05/24/2020-5-12jifen/","link":"","permalink":"https://shaohung001.github.io/2020/05/24/2020-5-12jifen/","excerpt":"","text":"上海申请居住证积分经历这次去办理居住证积分，总结下历程（当前材料已提交，正在等待审核，审核期是2个月） 为什么要办理居住证积分刚来上海，一直都是租房时，能住就好了。租房的价格也不便宜，租房的权益，包括孩子上学权、办理居住证、各种证权都是难以享受到的。没办法，寄人篱下，房东绝对不会理你这个没钱的外地租客。 我前两年遇到一个很好的房东，当时我要办理居住证，通过中介，她也是帮我跑动。当时为孩子和老婆办理时，来回跑，让房东等待，过意不去。不过幸好房东的帮助，办理好了。上海政策是，只要是本科以上，一年内缴纳6个月正常社保，其会自动续签(居住证都是一年一签)。 有了居住证后，买电瓶车，自己就可以上牌，当时还给哥们电瓶车也上牌。后来2019年我又买一辆电瓶车时，这时政策不用居住证，拿身份证就可以办理时，人多的呀，排了两条街。我是早上6点去排队，硬是等到快下午，饿了个半死。 居住证好处，不止这点，上面是举个例子，这是特权吧。不过现在拿身份证就可以办理。 居住证另一个好处，就是孩子可以在上海上学。但是不能中考、不能高考。我查阅或者询问周围人，得到的答案是，其实学校不会招纳这些人，因为你都不能中考、不能高考，你来这里上学干嘛，占用教育资源？当然，如果要上学，那就送到郊区一些称为”菜小”的学校去。 这时候，居住证积分的作用就是，虽然你不是上海户口，但是你能享受上海户口的相关权益：孩子能在上海中高考等(我列举不来)。当然了，能把上海户口办理下来，简直就是最好的了。 办理历程之前一直犹豫是不是现在去办理相关的事情，因为来公司到现在差不多刚好一年，恩，应该问起来时机刚刚好。 2020/4/20 早上10:00 直接大胆的问人事。人事回的很及时，先让我网上核对下分数，我在模拟积分 模拟出来是够的。然后人事让我准备好材料 : 1234567891. 单位人事专员介绍信、身份证、公司相关材料 // 人事会携带好的2. 持证人有效期内&lt;上海市居住证&gt; // 记得去街道办公室刷新一下，前后页打印好3. 持证人有效身份证件 // 前后页打印好4. 孩子要享受积分政策(这不必须的嘛，管上), 出生医学证明原件、复印件5. 妻子要享受积分政策(这不是很好嘛，管上)，(1). 妻子身份证原件、复印件 (2). 结婚证原件、复印件 (3). 户口本页面原件、复印件 // 三个都要带齐6. 户口本原件、复印件，每个人都复印，*每个人都复印*，**每个人都复印** // 人才管理窗口会给你整理好的，全都打印7. 一年期及以上有效合同，快到期的话，需要续签，同时给他每页复印8. 个人所得税完税证明 // 我去的上海市闵行区水清路159号3层打印9. 社保缴交证明 公司部分材料公司会准备好，我这里就不赘述； 同时人事在公司开好账户，我登上积分网站登上个人账户，填写相关信息。 填写信息注意点: 1234567891011121314151617181920第一页:政治面貌: 其他居住证有效日期: 你的居住证有效日期户籍所在地地址: 填写户口本上一致的在沪居住地址: 你的居住证写着的毕业时间: 你的毕业证书一致聘用(劳动)合同签订日期、起始日期、终止日期: 合同里一致在沪缴纳社会保险期限(月): 你的社保单一致-------------------------------------------------第二页:个人简历，从什么时候上大学、大学终止，一直到现在-------------------------------------------------第三页:境内人员--填写家庭情况:填写妻子的信息:是否需享受积分相关待遇: 填是户籍地: 户口本一致填写子女情况:是否需享受积分相关待遇: 填是户籍地: 户口本一致 上述材料准备妥当后，等了两周人事忙完事，就和另一个同事一起去水清路388号的上海市闵行区人才服务中心。 到该处后，我们去附近准备好相关材料准备(个税完税证明、打印相关文件)，然后返回人才服务中心。 当前就是确认相关材料是否齐全、填写材料是否有误，有误的话及时改正，旁边就有两台联网机器。 那个是假期补班，人比较少。我们那个窗口一个可爱的妹子(戴着口罩，肯定也可爱)超级有耐心，我的材料有错，错了立马改，改了又帮我再重新检查，重复三次。我要是有钱，我肯定经常跑来和她聊天，小姑凉，你有男朋友不啊，可以和我阿黄认识下呗，我阿黄和可爱的。 当前无法办理有另一个原因是，当前学籍学历不是在这里进行办理的。而是准备好材料，发送到一个邮箱，工作人员会人工帮你审核。材料：毕业证书扫描件、学士学位证书扫描件、学历学位证书、学信网电子注册备案表、学信网在线验证报告、学位网认证报告、身份证复印件正反面全都要发过来。教育背景核实邮件发送格式: 某某公司-某某人（教育背景合适）-共几人 当前完成回来后，晚上我便去重新整理缺失的申请材料、扫描相关证书等。然后发送邮件到指定邮箱。材料缺失的话，对方会告知，然后赶紧补上。学位网认证报告这个比较慢，会需要等待好多天，你可以提交加急，并告知你加急是为什么。我当时加急后，第二天对方就帮我办好了。 然后2020/5/12 那天又前往办理好相关材料递交。 以上基本等通知就好了，反正我正在等通知ing…","categories":[],"tags":[{"name":"居住证积分","slug":"居住证积分","permalink":"https://shaohung001.github.io/tags/居住证积分/"}]},{"title":"2020-5-12lesson","slug":"2020-5-12lesson","date":"2020-05-11T12:30:43.000Z","updated":"2020-06-01T03:02:51.277Z","comments":true,"path":"2020/05/11/2020-5-12lesson/","link":"","permalink":"https://shaohung001.github.io/2020/05/11/2020-5-12lesson/","excerpt":"","text":"使用github + travis 自动化打包使用gitlab + gitlab-ci 自动化测试、覆盖、打包","categories":[],"tags":[]},{"title":"2020-5-11lesson","slug":"2020-5-11lesson","date":"2020-05-11T12:25:36.000Z","updated":"2020-06-01T02:56:41.966Z","comments":true,"path":"2020/05/11/2020-5-11lesson/","link":"","permalink":"https://shaohung001.github.io/2020/05/11/2020-5-11lesson/","excerpt":"","text":"Use github package publish dockergitlab.com 网络特别慢，经常 docker push 各种失败. 考虑到github.com 全部免费了，故接下来都转战github 了。(自建是不可能自建的，没有机器) 使用github token 登录(密码登录即将被废弃, 且push、pull 等操作都没有权限) Go to your GitHub account -&gt; Settings -&gt; Developer Settings -&gt; Personal access tokens -&gt; generate new token Note 选项写上一个标签 勾选 write:packages/read:packages, 然后保存 复制得到的token docker login docker.pkg.github.com User: 你的用户名(比如shaohung001) Password: 第4步得到的token node 升级package 的库版本12npm install -g npm-check-updatesncu -u Mac 删除node, 使用nvm 管理node123456sudo npm uninstall npm -gsudo rm -rf /usr/local/lib/node /usr/local/lib/node_modules /var/db/receipts/org.nodejs.*sudo rm -rf /usr/local/include/node /Users/$USER/.npmsudo rm /usr/local/bin/nodesudo rm /usr/local/share/man/man1/node.1sudo rm /usr/local/lib/dtrace/node.d 下载nvm 123curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash或者wget -qO- https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh | bash 然后在 ~/.bash_profile ~/.zshrc 中加入如下: 123export NVM_DIR=&quot;$HOME/.nvm&quot;[ -s &quot;$NVM_DIR/nvm.sh&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/nvm.sh&quot; # This loads nvm[ -s &quot;$NVM_DIR/bash_completion&quot; ] &amp;&amp; \\. &quot;$NVM_DIR/bash_completion&quot; # This loads nvm bash_completion source ~/.bash_profile &amp;&amp; source ~/.zshrc 重开一个terminal 就可以用看到 nvm 命令了 简单探索nodejs 不同第三方库dependence 相同库不同版本今天使用puppeteer 和express 时发现，这两个dependence 包含有同一个库: mime。但是express 依赖mime 1.6.4 版本；puppeteer 依赖 2.x 版本； 我们到node_modules 子目录看到第三方库规划: node_modules/mime 是1.6.4，也就是express 依赖的；我们找到puppeteer 下，其提前依赖库本地的mime 2.x 的。 这样，puppeteer 在内部中，require 的是其自身node_modules/mime；express 自身没有node_modules 于是就往上找，也找到对应mime； 以上各自依赖相同库，不同版本，便不会冲突了 mocha test 时不通过使用mocha test不通过，报错信息: 12&quot;before all&quot; hook for &quot;GET /VERSION&quot;:Error: Timeout of 8000ms exceeded. For async tests and hooks, ensure &quot;done()&quot; is called; if returning a Promise, ensure it resolves. (/builds/xxxxxx/xxxxxx/backend/test/api.test.ts) 说明报错报错信息来源于 beforeAll 方法，且说没有使用done 告知. 原方法： 123456this.beforeAll(function(done) &#123; app.startup(&#123;testing: true&#125;, (_server: Express.Application) =&gt; &#123; server = _server done() &#125;)&#125;) 明显是有done 这个操作的，难道throw error 导致没有进入done 了？？那我加个try catch 吧: 12345678910this.beforeAll(function(done) &#123; try &#123; app.startup(&#123;testing: true&#125;, (_server: Express.Application) =&gt; &#123; server = _server done() &#125;) &#125; catch (error) &#123; done(error) &#125;&#125;) 然后gitlab-ci 看到编译正常通过了, 但是没有进catch, 因为进了catch 我接下来拿不到server， 但之后又正常，说明只是说，要有try catch 确保有done 回馈即可! 以上. node -v : v10.20.1 这里更新下： 上面有时可以有时失败，说明不是最终原因. 以下是最终原因 最终的原因是gitlab-ci cpu、memory 太低，运行太慢，导致获取到server 太慢，无法得到done，做法是mocha -t 240000 设置4分钟. 这个原因也是没有预料到，没想到是机器配置比较低的原因。","categories":[],"tags":[]},{"title":"2020-4-16lesson","slug":"2020-4-16lesson","date":"2020-04-16T12:38:16.000Z","updated":"2020-04-16T12:42:20.600Z","comments":true,"path":"2020/04/16/2020-4-16lesson/","link":"","permalink":"https://shaohung001.github.io/2020/04/16/2020-4-16lesson/","excerpt":"","text":"It seems like I lose my fate some time ago , I dreamed a lot in the period , losing in a big dark hole where I count’t open my eyes. I dreamed of age grow up , and I worried about that ! I never ever thinking about the troublesome before this period ! Last five year, I fight for gain more power from technology , dreaming of arriving to the top, money or any other comes to me. But, I didn’t had a rest last five year, nothing got but age and bit of knowledge of IT. It really disappointed ! I made a determination last year , skills which I handled is much enough to made something I ever determined to do. Last two months, I made out a website “阿黄小说”, reading novel site. Attending to try a test of earning money or even little acknowledge of setting up a big site , but I lost my mind again. I made a discussion with little shuai, I talked about my confuse of my career. Company didn’t raise salary since I entered last year. Am I not worth of raising by my work ? I had grow much more I had done . I continue of leaning deeply of my work , or I have a test to make some games ? I survey the game area no long ago, situation is serious recently , new come will very difficult to make effort . During discussion , I realized that the company I stay , I always treat myself a passenger . I join the car, car drive me some years distance , I get off when Company contract arrived. I never become a partner with any organization before . Am I make mistake ? I realized that I made a wrong plan all life before . Money I lack of it , because I will buy a house the close two year , but after that ? I employed by some one else again ? Not my career grow , but only stare at the salary I should get just now ? I made a determination of a more energy pay for myself career. Have a try to something different from before . Another plan is to have a plan of learning deep in my IT field , and if possible to examine some useful certificates !!! It’s never too late to do your decision ! When learning deep arrived some stage , I will have a try to make some games 😁… Finally , I remember my fate again , I know where to go , and I will not confuse again . I am always young !!! My heart will goes on !","categories":[],"tags":[]},{"title":"2020-4-13lesson","slug":"2020-4-13lesson","date":"2020-04-16T12:37:06.000Z","updated":"2020-04-16T12:42:08.516Z","comments":true,"path":"2020/04/16/2020-4-13lesson/","link":"","permalink":"https://shaohung001.github.io/2020/04/16/2020-4-13lesson/","excerpt":"","text":"vue cli 3.0package.json 中的script:dev 命令: vue-cli-service serve 其实类似于npx vue-cli-service serve === node ./node_modules/.bin/vue-cli-service serve unzip.exe 在某一客户机报错程序里使用到zip.exe unzip.exe bin 程序，正常使用很久了。 然而今天出现Archive: xxx error: zipfile probably corrupt (segmentation violation) 关于windows 使用unzip.exe bin 程序，当前版本: UnZip 5.52 of 28 February 2005, by Info-ZIP. Maintained by C. Spieler. 从搜索列表中, 发现很多都指向网址: ftp://ftp.info-zip.org/pub/infozip/win32/ 从里面可以直接下到5.52 bin 执行文件(其和当前程序使用版本相同，于是继续找). 继续找到下载: https://astuteinternet.dl.sourceforge.net/project/gnuwin32/unzip/5.51-1/unzip-5.51-1.exe 下载下来是个安装程序。 安装到windows 上后，找到: 直接替换，当前确实解决该问题。","categories":[],"tags":[]},{"title":"2020-3-20lesson","slug":"2020-3-20lesson","date":"2020-03-20T07:00:34.000Z","updated":"2020-03-23T03:37:01.571Z","comments":true,"path":"2020/03/20/2020-3-20lesson/","link":"","permalink":"https://shaohung001.github.io/2020/03/20/2020-3-20lesson/","excerpt":"","text":"gorm 参考使用https://segmentfault.com/a/1190000013216540 启动mysql docker run --name mysql -e MYSQL_ROOT_PASSWORD=123456 -p 3306:3306 mysql:5.7 如果Sequel Pro 连接报错Authentication plugin &#39;caching_sha2_password&#39; cannot be loaded: dlopen(/usr/local/lib/plugin/caching_sha2_password.so, 2): image not found, 则 docker exec -it mysql bash $mysql -uroot -p $ALTER USER &#39;root&#39;@&#39;%&#39; IDENTIFIED WITH mysql_native_password BY &#39;123456&#39;; goland 无法解析go.mod 的包开始建立一个go 项目， 使用go mod。一直都是OK的。然而在另一个机子导入、或者本机挪了个位置，就出现goland 无法识别第三方包的情况。 当前goland 第三方包或者go mod init xxx，使用 xxx/config 之类的也都全部无法识别。 找了半天看到帖子中跟我描述一致，最后一个回复中，给出另一个链接segmentfault提到、而且截图和我情况一致。 下面回复点醒了我: 如果是导入已有项目，记得启用下 Go Module，进入 Preference -&gt; Go -&gt; Go Modules，启用下就好。 也就是说，导入、或者挪了位置，要启用。 可是当前我的已经启用了呀Go - Go Modules(vgo) - Enable Go Modules (vgo)integration 这个checkbox 本来就是加载的。 此时我关闭他，然后apply; 再然后checkbox 打开他，再apply，这时就全部正常了。 家里的mac 又出现这种情况。解决方法是: 删除本地的.idea 文件夹; File-invalidate caches and restart; 然后重启电脑; 然后vgo 关闭再打开; 基本OK了吧。记得查看下GOPATH 设置","categories":[],"tags":[{"name":"goland mod 爆红","slug":"goland-mod-爆红","permalink":"https://shaohung001.github.io/tags/goland-mod-爆红/"}]},{"title":"2020-3-12lesson","slug":"2020-3-12lesson","date":"2020-03-20T06:59:33.000Z","updated":"2020-05-29T03:53:31.649Z","comments":true,"path":"2020/03/20/2020-3-12lesson/","link":"","permalink":"https://shaohung001.github.io/2020/03/20/2020-3-12lesson/","excerpt":"","text":"华硕 GTX750/ti NVIDIA web driver 黑屏问题这几天给丫头买了个显卡GTX750 觉得和以前一样很容易就整好了，没想到花了两个晚上加两个早晨找解决方案。 首先根据我以前的记录 配置 得到我要的web driver 是17G65 对应那个包, 下载地址 然后跟以前一样EFI/clover/config配置，然后NVIDIA 选择NVIDIA Web Driver 时，系统在clover 引导后，进入了系统，但是HDMI 没有信号，屏幕黑的。 系统确实进了，但是屏幕黑。我反复想和以前一样的做法，但是总是失败。直到: 在远景论坛一个帖子中看到，相同的显卡(华硕 GTX750 web driver 黑屏)，我敢肯定我有救了。 我直接从HDMI换成VGA 接口，同时NVIDIA Web Driver 选择对应选项。重启后，立马就好了。鸥买嘎，开心了。 还是要多看中文版的tonymac : 远景论坛 同时的，这里也有提到: 黑苹果社区","categories":[],"tags":[{"name":"GTX750","slug":"GTX750","permalink":"https://shaohung001.github.io/tags/GTX750/"},{"name":"hackintoshell","slug":"hackintoshell","permalink":"https://shaohung001.github.io/tags/hackintoshell/"}]},{"title":"2020-3-11lesson","slug":"2020-3-11lesson","date":"2020-03-11T08:55:19.000Z","updated":"2020-06-15T04:33:07.196Z","comments":true,"path":"2020/03/11/2020-3-11lesson/","link":"","permalink":"https://shaohung001.github.io/2020/03/11/2020-3-11lesson/","excerpt":"","text":"最近VVVVVV 突然发现连不上突然发现连不上VVVVVV，正巧是丫头面试时间，可能要用到，赶紧找时间修下。 这几天又正巧给丫头买了个显卡，GTX750，老是无法识别该显卡，新下的NVIDIA web driver 不小心点了上面个按钮，得,系统进不去了。 想了下，给他系统全部重装好了，半夜搞到凌晨40分，好累，还没好。第二天起床赶紧搞起来。重新装了后，又不小心点了web driver 上面那个按钮，然后发现clover 界面时候到后面的option 按钮，进去后，在Graphic 取消选中 使用web driver就回去了。 中午最后还是木有识别成功GTX750，先来公司吧，开电驴最快速度来到公司。 解决了几个问题，在编排build 进程时，顺便搞下我的服务器吧。 首先nginx 无法启动问题: lsof -i :80 发现caddy 这个程序占了？我都没发现这玩意，，算了，kill 之后就正常了。 然后试了下VVVVVV 还是无法连接，说明确定是证书问题，毕竟都正常运行着嘛，过年过来3个月了，估计也要renew acme 了。 不想整auto new acme，自己动手丰衣足食: 先给nginx 加个server: 12345server &#123; listen 80; server_name wpn.domain.com; root /home/wwwroot/sCalc;&#125; 为了保证acme 能连接到该处得到认证的文件。 然后 123456789alias acme.sh=~/.acme.sh/acme.sh # 给acme.sh 做个别名acme.sh --issue -d wpn.domain.com -w /home/wwwroot/sCalccd ~/.acme.sh/mkdir -p /sslCertacme.sh --install-cert -d wpn.iahuang.com --key-file /sslCert/VVVVVV.key --fullchain-file /sslCert/VVVVVV.crt 以上得到key 和crt 文件，在/sslCert 目录下。 mv /sslCert/* /etc/VVVVVV/ 将2个文件放到VVVVVV 目录下，然后重启nginx 即可。","categories":[],"tags":[{"name":"VVVVVV","slug":"VVVVVV","permalink":"https://shaohung001.github.io/tags/VVVVVV/"},{"name":"acme","slug":"acme","permalink":"https://shaohung001.github.io/tags/acme/"},{"name":"nginx","slug":"nginx","permalink":"https://shaohung001.github.io/tags/nginx/"}]},{"title":"2020-3-10lesson","slug":"2020-3-10lesson","date":"2020-03-10T03:53:59.000Z","updated":"2020-05-29T03:53:31.649Z","comments":true,"path":"2020/03/10/2020-3-10lesson/","link":"","permalink":"https://shaohung001.github.io/2020/03/10/2020-3-10lesson/","excerpt":"","text":"过年，最近一个月我一直看小说过年回家那天还下着小雨，又是一年回家。当时以为疫情不严重。丫头买了俩布口罩，还是一层那种。我很少戴口罩，米西米西把。俩人起早待在路口，老半天了都，就是打不到车，年年如此。 心里想着，可能来年都不愿意回去了，除非自己有车。因为，有可能，真的打不到车，高铁钱浪费掉不说，还回不去。加把劲把。老半天没车，心里急，真不知道路上来来回回那些司机都是怎么预约的，贵点也行啊。然后和丫头决定去前面大路试试，走到半路，一个大叔开着很小那种三轮。 我跟你说，当时我们都觉得，能出发就不错了，而且是运气超级好，刚刚十字路口也很多人等，司机大叔就把这机会留给俺们，哈哈。50走起。三轮一路冲啊，大叔冲红灯的时候那个左右观望的眼神，无情，冲啊。 安全到家。 这个年过得很长很长。从大年29到家，到元宵后才回上海。和阿黄玩了一个月了都。在家最大的事，就是逼着阿黄自己吃饭，不用一直追着喂，吃饭还看视频，最后饭都冷了还吃。 家里啥21世纪的工具都没有，只有手机一个。为了不落下功课，顺便把socks5 协议看了，然后用纸抄写一个翻墙的源码。嗯，回到公司给他整一下。 由于我把高铁车票凭证取了，之前买的回程(年年都买不到回程，就今年抢了1.31号回程，还取了凭证—还逗比的取出来了，你说是不是傻)得退票重新买之后的时间。查到永定可以退票，就骑着老爸的摩托车上了永定。 中午永定吃饭的时候，因为我没有摩托车驾照，怕过年有查车，我就走一段路，看没人查车，车子就骑一小段；然后走一路看没人再骑一段，然后才来到小饭店。 毕竟人不能被抓，车不能被扣，不能丢嘛，嘎嘎 过年前我写了个GO 的软件: novel_terminal 你懂的，写什么类型的东西就可能会被吸引进去。于是过年在家一直看爽文: 《斗罗大陆》，但是看到一半，失去了2刷刷完的劲头，看到一半感觉从书中获取不到灵感、感想，遂放弃。 因为2.1号开始，公司都开始远程上班了，家里一无所有，所有现代化工具都没有。我去了村子电脑维修店看看能不能配出来一个，配件不齐全, 又想着配起来家里又没人用；去找认识的人借电脑？他说被什么妹夫借走了；找找家里电脑，全是灰，开了机肯定用不了。 唉，算了算了，多呆了一星期，下周再不远程办公，说不定要扣工资咯，本来就低。 2.7、8号时，说有个同村的也做IT 的也工作在上海，说一起同行。我说可以呀，他家人开车到龙岩，那就太好了，然后2.8号又说他们公司推迟3.10号，这次不去了。那没办法了，只能又联系蛮舅了。 之前联系蛮舅知道他还没回深圳，说有那个一起去上海就跟蛮舅说不用麻烦蛮舅了。毕竟这个特殊时期。但是，然后现在还是得麻烦亲人，不然班车都不开了，请人载上龙岩，肯定500软妹币才出发。 2.9号那天早上，为了响应上级号召，封锁更严厉。之前我们省道还没有检查站设立，今天开始了出乡就隔离14天。蛮舅就说去他自己娘家，我和丫头拉着行李出发去村头和蛮舅碰头。 村头的桥都用大石头堵着。 老妈领着阿黄送我们，还是得离开。不离开，不赚钱，怎么完成心中的理想。一路上还算顺利，直达龙岩火车站。蛮舅也回去了，还算顺利。 我和丫头在车站外呆了好一会，然后拿出老妈早上做的蛋炒饭，很好吃，就是有点咸。车站外没坐的，和丫头一口一口吃着。然后站着酸，丫头又内急，进站后，两人躲在偏远的角落，怕被传染。 车子临近时，做到了候车位置。还别说，配备的按摩凳，丫头那个时不时会动一动，免费享受，还挺舒服。上车时，车子座位基本是隔着坐，人不多。 到了虹桥，就是扫手机短信看行程。然后各种扫二维码。到小区，登记。 第二天用昨天用的口罩，下楼买一堆的吃的，还有饮用水，然后进行了长达好久好久的宅家。 由于想重启小说，改了几个bug后，哎，不小心，看起来我高一时候看的一本小说：《神墓》，直到今天3.9 才看完。我是看的比较仔细的，而且一直执念般的看完了。 点评下《神墓》: 神墓的构造前后贯通是比较好的，全书都围绕由墓而生的主角，全书贯穿各种墓，中间主人公发展，然后到之后小六道、回到历史中时，才知道【天】这一虚拟口头被描述成实体的形象，这点厉害。然后又提到了混沌，才慢慢知道作者设定的多个天灭众生的多次灭杀行动。最后各人战上九天。前期都是写的蛮好，主人公菜逼的时候，来来回回搞，而且思路也不死，任务都有自己特色，不会死板。比如梦可儿为了结果主人公，都是绞尽奶汁付诸行动，没结果无所谓，真的绞尽x汁了。我都为她感动。 该书在刻画人物方面也有独到之处，比如”欧米头发”、”一百遍啊一百遍”这样的。当然，这同时也是该书不够的地方，全书唯有这两个刻画出生动效果，但是作者没有深入使用，比如”欧米头发”，人物刻画出来了，没有了，看完之后，没有了。”只有一百遍啊一百遍”能够再次回想，内心淫荡一笑。 红楼梦是我喜欢的名著，人物刻画、贯通方面是神墓要着重要点，可以借鉴借鉴。当然我作为刚读完神墓，要求不能太高。什么神墓早期写的，什么你非要拿震古烁今的四大名著来和爽文比。 这不是在刚读完后，为这小说遗憾嘛。 就当是爽文，有时闹书荒的时候，也想找更好更好的书不。 神墓全书有不连贯的地方，我猜作者有让他人代笔，或者，当时作者构思出问题，出现了主角瞬间性格大变、思想大变的过度。比如早期主角还是努力奋斗的勤劳小伙子，在早期出现和对手突然就整起了搞笑痞子风格。那个篇章很生硬。 还有就是各种大关系都和主角有关，不过这确实是爽文的特点(红楼梦也有这特点，谁人不想做宝玉啊，但红楼梦主旨、思想背景和爽文不同)，然后突然大战，突然就升级，这小子升级也忒快了吧；各种道具，还只能主角用；升级完基本就能跟对头干，不行就再加个宠物加个道具对着干，实在不行，再加个血脉、加个远古道具保命。 这，爽文，理解理解。 总的来说，神墓在场景(全书各种场地、场景刻画)、道具、和漂亮女人们的摩擦、打斗转换、各种绝境描绘、各种探险、前后埋疑点、主角衰及盛盛及衰、文笔、脉络都能通，值得一看，你看，2刷的我看完还推荐，very ok。 plus，还是定义为爽文，不要太在意为啥主角每次都能装逼，爽完就过。","categories":[],"tags":[{"name":"2020过年","slug":"2020过年","permalink":"https://shaohung001.github.io/tags/2020过年/"},{"name":"小说","slug":"小说","permalink":"https://shaohung001.github.io/tags/小说/"}]},{"title":"2020-3-2lesson","slug":"2020-3-2lesson","date":"2020-03-02T06:20:14.000Z","updated":"2020-03-02T06:46:12.993Z","comments":true,"path":"2020/03/02/2020-3-2lesson/","link":"","permalink":"https://shaohung001.github.io/2020/03/02/2020-3-2lesson/","excerpt":"","text":"Go、Go、Gonodejs child_process 出现Stdout buffer issue using node child_process使用child_process exec unzip.exe 出现解压缩包失败，全部文件错误字符打印了出来。 由于child_process 默认maxBuffer 是200KB，出现直接报Stdout buffer issue using node child_process。 可以使用exec(command, {maxBuffer: 1024 * 500}) go build1、Mac下编译Linux, Windows平台的64位可执行程序： $ CGO_ENABLED=0 GOOS=linux GOARCH=amd64 go build test.go $ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build test.go 2、Linux下编译Mac, Windows平台的64位可执行程序： $ CGO_ENABLED=0 GOOS=darwin GOARCH=amd64 go build test.go $ CGO_ENABLED=0 GOOS=windows GOARCH=amd64 go build test.go 3、Windows下编译Mac, Linux平台的64位可执行程序： $ SET CGO_ENABLED=0 SET GOOS=darwin3 SET GOARCH=amd64 go build test.go $ SET CGO_ENABLED=0 SET GOOS=linux SET GOARCH=amd64 go build test.go 或者: 12345678910export GOOS=&quot;windows&quot;go build -o phoneix-windows.exeexport GOOS=&quot;linux&quot;go build -o phoneix-linuxexport GOOS=&quot;darwin&quot;go build -o phoneix-darwinecho &quot;done!&quot; golang 交叉斌编译CGO当前使用go-sqlite3 库，无法直接Mac 打包成windows，报错: Binary was compiled with &#39;CGO_ENABLED=0&#39;, go-sqlite3 requires cgo to work. This is a stub 当前看到两篇文章使用两种方案: 使用docker 打包 docker run --rm -v $GOPATH:/go golang:1.13 bash -c &apos;cd $GOPATH/src/ahuang.com/src/cobra/novel &amp;&amp; CGO_ENABLE=1 GOOS=linux GOARCH=amd64 go build -o novel-linux&apos; 链接 brew 安装cross gcc 来打包 12345678910Windows平台(mingw-w64)$ brew install mingw-w64$ CGO_ENABLED=1 GOOS=windows GOARCH=amd64 CC=x86_64-w64-mingw32-gcc go build -vLinux平台(x86_64-linux-musl-gcc)$ brew install FiloSottile/musl-cross/musl-cross$ CGO_ENABLED=1 GOOS=linux GOARCH=amd64 CC=x86_64-linux-musl-gcc CGO_LDFLAGS=&quot;-static&quot; go build -a -v-a: 重新编译-static 标识静态链接，没有这个选项，linux上运行报: -bash: ./xxx: /lib/ld-musl-x86_64.so.1:bad ELF interpreter: No such file or directory 参考链接 开源 novel_terminal开源了novel_terminal","categories":[],"tags":[{"name":"go","slug":"go","permalink":"https://shaohung001.github.io/tags/go/"}]},{"title":"2020-1-2lesson","slug":"2020-1-3lesson","date":"2020-01-03T06:20:14.000Z","updated":"2020-05-29T03:53:31.666Z","comments":true,"path":"2020/01/03/2020-1-3lesson/","link":"","permalink":"https://shaohung001.github.io/2020/01/03/2020-1-3lesson/","excerpt":"","text":"Mac环境变量设置VSCode 使用gopls 更好的代码补全打开 VS Code 的设置, 搜索 go.useLanguageServe, 并勾选上.默认情况下, Go 扩展会提示你安装 gopls. 卸载k3s/usr/local/bin/k3s-uninstall.sh https://github.com/GcsSloop/MacDeveloper/blob/master/Skill/Path.md 2020年来了 2020/1/32019年的规划 上半年加油找后台的工作，在6月、7月前熟悉完； 工作之余 9月、10月之前写一款游戏； 工作之余 学习完openGL 我去19年新年前, 面试过一家，当时还是太不熟悉，机试时没做好。不过我却熟悉了nodejs 面试流程。在开年，2月份多去《弘连》专做软件及知识产权的公司面试。1面是人事，我的简历难看就是其中有个公司3个月就跳槽，而且这几年变动有点大。是的，没得办法，总要生存，社保不能断。2面是伟哥，也就是现在的老大。我们进行了友好的会晤，哈哈，基本都是聊聊自己的职业规划，工资方面。 因为是转职能，几乎等于重新开始，所以我要价很低，打过折之后一开始简直非常低。过两个月，老板把我喊过去，主动加工资，幸好。 离开《冠脉弹》前, 他们想着我要走，加班让我做多点。其实我都知道，那点东西，做出来又是垃圾，没经过思考的产品，没思想没深度。不过我是打工的，加班拿工资吧。当时我想把丫头拉到这公司，虽说种种不好，不过想着工资照发、也不太加班加点(因为他们整不出什么好思想)，所以给老板推荐。最后加班3.5 号之前都是和丫头一起加的。3.6号入职《弘连》。 上半年熟悉web 开发，到5月份时，经常加班学习，总算把web 开发整体流程都走通。公司的后台使用coffeeScript+vue，我学习使用typescript+vue 写了几个对应服务(saas 微服务)。中旬时，把驾照也考过，但是没车，还是挺蛋疼，鸡肋的。 上半年还挺顺利，学习进度很快，于是顺手写一个游戏吧。但是搞了搞，没有好思路，算了，再等等，缓一缓。 年中时，老大想把公司主力产品&lt;网镜&gt; 从以前全套C艹 版本更新新的架构，使用nodejs 做中间转换。当时老大和老板应该是一起协商过的，再招一个熟练的?我专做web后台? 老大想着web 也不是天天开发，然后我就负责网镜拓展后台，做的流程控制服务，从无到有做两个拓展，包括直接打包，而且是Chrome 扩展类，市面没有好的参考、库等。 做这个, 打算是在9月、10月做完。但是我太菜，模子做出来，功能也有，不够好用，继续改。而且中间和同事配合还不够默契，有时等待他的api、调api、重写等。事无巨细，把大功能完成，已经到了19年12月。网镜5.0 终于终于对外发布了。刚发布的5.0 还有很多bug，赶紧准备5.0.1 的发布，加班加点。 当前测试用例也是比较难增加，所以全靠测试人员：有时改动一个功能了，却影响了另一个；有时完成一个功能了，感觉和V4 的不一样；轮训任务，出现任务不走了；内存、CPU、暴涨；文件夹创建不对(路径解析不对)；数据库索引、调优；代码规范；等等等等 将5.0 发布出来的时候，瞬间就理解了一个新高度，瞬间圆满了。以前没走通的思路都理解作用及原理。 老大作为架构者，确实思想是我目前不能比拟的，太强了。 不过我从老大这学了很多很多，这一波经验涨的厉害。 下半年几乎都是在搞网镜。周末有时搞搞网镜，有时学学golang，我觉得这个还是不错的，goroutine将现成队列给你，相当于最底层调度给到你。而不是nodejs async await，虽然好用，却是迷迷糊糊。而且golang 和OC 很相似，有内存、指针，我感觉这个是我要的，于是顺便用go 转义了我之前一个挺好的服务作为学习的实例。 说说丫头吧。去年丫头心情低落，今年上半年到5月，也就进去《冠脉弹》两月就被辞职了。算了，无所谓了，他们也就那样了，不是咱宝宝不好。然后我说，要不学学nodejs 做web。丫头说，再等等。我说行，给3个月让她学习和我后台做了一个理财的iOS app。原理类似于《可萌记账》，主要是作为学习用，同时让丫头接触数据库，这样即使之后她要进入后台，也很有感悟。接着她去一家创业公司，得，还是不给力。不过别人工资经常不发的情况下，丫头的还是照常发，然后，最后我还是让丫头辞职了。 我指出了这些问题背后的原因：iOS 工作机会进入凛冬了。要不就特别好的iOS 工作，要不就巨差的，中间这种基本都没了。丫头就是这种上不去下不来那种，毕竟不是超级专业，尚在学习进阶的。于是我鼓励她，来吧，做我的儿子吧！不对不对，，咳咳。来吧，跟我一起web 开发吧，有问题我罩着你。 10月份，老丈人去医院，丫头基本是11月开始学web开发。先让她搞爬虫，知道js能干嘛。然后做一个Typescript纯后台，知道js 和Typescript关系。该后台包括了fs、mongo、oss上传文件。然后再让她做一个我之前留下的video 前后台项目，知道前端和后端的关系。这些都是练手。然后最后让她做一个blog。 blog 是一个好东西，能练习很多东西，基本是她一个人在搞，有遇到特殊问题、发布之类我稍稍做点辅助。呐，现在服务器登录都是她在弄，我都不用动手了。这几天她刚好完成测试，就要发布了。 这两年用铁通宽带太坑，两年800，网络慢的跟金坷垃一样。由于经常丫头在家，这几天网络换成联通的，720两年+100上门调试费，命都更长久了。之前下的种子从来都不动一下的, 现在, chua chua chua下好了。我看来又可以在家里写东西了。哇卡卡卡卡 2019 很苦，不过2020 我还在努力。","categories":[],"tags":[]},{"title":"2019-12-26lesson.md","slug":"2019-12-26lesson","date":"2019-12-26T02:13:40.000Z","updated":"2020-06-15T04:33:07.209Z","comments":true,"path":"2019/12/26/2019-12-26lesson/","link":"","permalink":"https://shaohung001.github.io/2019/12/26/2019-12-26lesson/","excerpt":"","text":"curl简单post参考 curl -d &quot;key=value&amp;key=value&quot; http://localhost:3000 如果登录后网页被重定向, 而我们想追踪这个重定向可以加上-L curl -L -d &quot;key=value&quot; http://localhost:3000 登录时保存cookie、请求时发送cookie 登录得到cookie 同时保存cookie 至一个文本中: -c savepath curl -c cookie.txt -d “key=value” url 携带信息请求: -b savepath curl -b cookie.txt url 模拟表单上传curl -F &quot;media=@hellocurl.zip&quot; &quot;media=@hellocurl1.zip&quot; &quot;file=@hellocurl2.zip&quot; http://localhost:3000 如果还携带参数: curl -F &quot;media=@hellocurl.zip&quot; -F &quot;key=value&quot; curl -X PUT -F &quot;url=www.baidu.com10&quot; -F &quot;time=1212&quot; -F &quot;content=dfdfdf&quot; -F &quot;title=oooooo&quot; -F &quot;username=aker&quot; -F &quot;html=@/Users/aker/Desktop/22.html&quot; http://localhost:3000 其他参数-v: 查看请求的整个完整过程 -i: 查看请求头信息 -o: 保存相应结果到指定路径的文件中.e.g. curl -o tmp.txt http://www.csdn.net ts-node 断点调试参考 launch.json 1234567891011121314&#123; \"version\": \"0.2.0\", \"configurations\": [ &#123; \"type\": \"node\", \"request\": \"launch\", \"name\": \"启动程序\", \"args\": [\"$&#123;workspaceFolder&#125;/src/index.ts\"], \"runtimeArgs\": [\"-r\", \"ts-node/register\"], \"internalConsoleOptions\": \"openOnSessionStart\", \"protocol\": \"inspector\" &#125; ]&#125; 国庆的需求爬github 的 关键字(如 go)搜索数据 根据sort 条件BestMatch == 0/MostStars == 1/RecentlyUpdated == 2 排序 拉取前10页数据 爬下来之后，将文件写入本地文件:/src/package/关键字+” “ + “2” + “ “ + “第x页.csv”。(如：go 2 第1页.csv， 2就是你使用的排序规则) 每个条目格式: 123title,url,content,starNum,category,timegolang/go,https://github.com/golang/go,The Go programming language,63.9k,Go,Updated 1 hour agodatasciencemasters/go,https://github.com/datasciencemasters/go,The Open Source Data Science Masters,13.3k,null,Updated on 25 Jun csv 第一行是每个column，中间用”,”分开. 下一行开始就是各个数据，依次填写。无的话填”null”. 学习golanggolang 刚开始学习和node 舒服程度不一样, go 还需要配置环境。 我先记录一些，而且可能还有不正确的地方，往后有机会回头修正。 首先下载golang 这里下载特别慢。 我是去golang.cn.dl 下载，同时使用wget 下，特别快！ wget https://dl.google.cn/go/go1.13.1.darwin-amd64.tar.gz tar -C /usr/local -zxvf go1.13.1.darwin-amd64.tar.gz vim ~/.profile 添加以下到~/.profile 12345678export GOROOT=/usr/local/go # 代表go程序环境位置export PATH=$PATH:$GOROOT/bin # 将go 执行文件加入到PATH 中export GOPATH=$HOME/gowork # 指定go 开发目录export PATH=$PATH:$GOPATH/bin# go proxyexport GO111MODULE=onexport GOPROXY=https://goproxy.io source ~/.profile // iTerm2 环境也一起有了 go mod init demo &amp;&amp; echo $GOPATH &amp;&amp; cd $GOPATH renew ssl manuallyacme.sh --issue -d wpn.iahuang.com -w /home/wwwroot/sCalc cd ~/.acme.sh/ mkdir -p /sslCert acme.sh --install-cert -d wpn.iahuang.com --key-file /sslCert/VVVVVV.key --fullchain-file /sslCert/VVVVVV.crt --reloadcmd &quot;systemctl restart nginx&quot; 然后完成了. github 的静态网页 添加adsense 总是失败之前使用亲人账号adsense 放了广告，嫌麻烦想使用自己的账号。但是老是报有价值的广告资源:没有内容. 不会啊，网页、手机端都是显示的。 之后查了下，有篇内容说到: 如果之前有账号绑定,需要先注销才能使用新的。 然后登陆亲人账号，把对应的id 填写进去后，就正常了。 go vscode debughttps://segmentfault.com/a/1190000018671207 123456789101112&#123; &quot;version&quot;: &quot;0.2.0&quot;, &quot;configurations&quot;: [&#123; &quot;name&quot;: &quot;Launch&quot;, &quot;type&quot;: &quot;go&quot;, &quot;request&quot;: &quot;launch&quot;, &quot;mode&quot;: &quot;auto&quot;, &quot;program&quot;: &quot;$&#123;fileDirname&#125;&quot;, &quot;env&quot;: &#123;&#125;, &quot;args&quot;: [] &#125;]&#125; 新的需求我有个朋友系列。 他很喜欢漫画，但是看腾讯漫画的时候，要一层层的点击，最后才知道最新的漫画出来没有。 现在你要做: /comic/comicInfo/:cId/:page 采用尸兄漫画地址: https://ac.qq.com/Comic/ComicInfo/id/17114 为他展示所有的章节 比如他调用了 http://localhost:9999/comic/comicInfo/17114/page (page=[01234567890]{1,3}||page = null) 你即去查本地数据库是否有数据； 没有的话:腾讯漫画 将尸兄的所有章节拿下来，存数据库，返回他对应要的章节的20个块 (比如总章节478，用户调用了 http://localhost:9999/comic/comicInfo/17114/4 ,那请返回尸兄的第60~80章节)。 /comic/comicDetail/:cId/:cdId 用户调用了 http://localhost:9999/comic/comicDetail/17114/84 说明用户想看某章节漫画了 你即去查本地数据库是否有数据； 没有的话:那就查询那章节对应的网页地址，使用axios 将其下载下来。同时使用cheerio 将里面[核心观看的html] 拿下来保存到本地，组装成新的网页，发送给用户该新的页面；同时下载里面所有的图片为本地图片（替换[核心观看的html]），然后上传本地资源到OSS(替换[核心观看的html]) 记录修改coffeeScript await is not defined 报错代码中使用官网推荐的await 语法。但是打包的时候总是失败await is not defined 查看其他同样项目使用的coffeeScript 都没有使用await 语法，所以当前对比不出来。 同时相同的结构，本地运行没有问题，打包有dist 目录代码由问题；同时打包的之后，本地的代码又有问题了。 这时查看了下转义的代码: await 语法糖 变成了方法调用其他对象了: await(xxxx)。 怎么会这样，查找coffee 仓库之前不理解的现在理解了：肯定是转义的库本地太低的原因。 然后找到gulp-coffee，其版本升为3.0.0 之后果然就解决了这个问题了~ 白白浪费我3个小时。 js setInterval 的坑如果setInterval 调用方法 是一个异步，多个io 操作的方法，可能出现CPU 被大量占用的情况下，导致调用方法会进入多次。 比如【网镜】在轮训任务时，做了一系列的操作，好多次io，可能已经过了1s。这时又进入interval，导致有些轮训操作同时进行了(当时的反应是CPU、内存升高，毕竟页面多load 一次，且没有去释放) 解决方案： setInterval 调用方法完成时设置一个Boolean 变量标识。如果要进入调用方法，Boolean 标识不对，return 使用setTimeout， 调用方法完成时，才开始下一个调用方法 新的修改要求首页增加一个总入口: 【学习】 学习类目下，分为【博客】、【编程】、【论坛】section分类。 博客 section 分类点击展开【美团技术团队】、【LaTeX】 编程 section 分类点击展示【掘金】、【开发者头条】、【技术头条】 论坛 section 分类点击展开 【V2EX】、【Dcard】、【看雪】 以及点击进去的内页 记2019/11/16 团建活动上周已经确定，在16号大家一起约一下去搞个团建。节点刚好是我们组的4个产品都完成，刚好火眼组也是节点，就一起去玩。选的不远不近，大部分同学都刚好，有几个哥们实在太远或者有事，便没有一起。 我手上的产品，本也应这周做完，然而上周增加几个需求、修改之前的几个完成思路不对的功能、完成某个麻烦的功能，时间到了周五却还是没能及时，不过我真的尽力了，哈哈。我的习惯是，尽量争取时间学习，不管如果都要学各种各样的玩意。为了手上的产品，这几个月全力冲刺，心里完全想着给他整的尽善尽美。 周五那天紧赶慢赶还是未能完成，心里急忙，但尽力也无遗憾。然后那天开OKR 会时，喝了杯咖啡奶茶，然后整个人都懵了。开会内容大家讨论进度，我的进度也是OK，只能下周好好完成来。开完会，我点了公司晚饭，然后饭没了(去晚了有时饭就被拿了，因为有时有同学让别人帮忙点，有时忘勾选，晚上却还是拿饭吃了，没事没事，下次去早点好了)，那就早点回家吃吧。回去顺便送学弟回家，他说迷迷糊糊，身体不舒服。 当晚回家吃饭，然而整个人开始极度萎靡，草草吃了兰州拉面就回房间。立马开全家集体视频，因为整个人极度不好，呼吸不过来，我感觉我要死了，赶紧想看看我的家人们。坐在凳子上好久，才缓过来一丢丢精神，打个一局游戏缓解下。一局下来就是12点了，赶紧睡觉，第二天，还是要去团建。 晚上睡的时候，整个人很冷，手在发抖，脑子一直滞胀，很难入睡。能偶尔感受到突然来得困意，赶紧抓住那种感觉，浅浅眯上一会。一晚就这么过去了，一会浅睡一会醒转，睡得很浅，起身还是满身疲惫。 上午吃了个早点，11点出发。从古美路到上海辰山植物园，骑着电驴！ 满电的电驴骑了30+x 公里终于到达目的地，这时已经是12点45了，1点集合。想到晚上还要走30公里，电驴受不了，听得3号门有充电，赶紧屁颠屁颠骑过去。发现居然是免费充电，美滋滋，然后当天大太阳走回了1号门，大概800多米。 集合时，伟哥几人拎着个大箱子，里面是之前准备的零食和活动器具。大家入园，我都是一路帮忙扛箱子，进去出来。路上大家帮忙拿箱子的东西，只剩空箱子，他们准备丢掉，我说别丢，等会说不定有用处。果然，用来集纳物品太好用了。 我们一群18人在入口往左走，来到一个湖旁边空地。开始进行此次的活动啦。 首先大家都是很多也都是不太熟悉的，于是先有个叫破冰行动。大家围成一圈，各自介绍自己的名字。然后小橙子掏出几个毛绒玩偶，让大家投掷玩偶到对方能叫名字的。我最难的事就是记人名。我忙朝着认识的几个同伴将刚丢过来的玩偶反丢回去。接着，小橙子将二组的最新进来的同学，叫所有同伴的名字，输了就抽签，做任务；接着一组也有几人进行一一识别，输了少喊几人名字就做多几个任务。我幸好躲过啊，我记名字简直是噩梦，即使我很努力记了。可能人比较蠢吧。 接下来我们分好队，有红队、蓝队、黄队，穿上小马甲区分，我是红队。同时起好队名，我们叫”随便队”。 首先第一场是 “我爱你，不要脸”。 规则是可以对左边说我爱你，对右边说不要脸，但是对话最多只能三次。然后一大帮男生，最后只剩下唯三个女生(小橙子做裁判没参与)。女生感情方面果然是天生的。最后剩下的两位使用猜拳头方式决出胜负。最后我们对胜出，得到重量级选手”春哥一位”(他最后才赶到)。 第二场是 传面粉，看最后杯里的面粉谁最多获胜 红队最先，首先春哥把面粉传给我，大家嘴上叼着一个卡片，我再把面粉传给下一位，然后下一个再放到杯子里。传两轮。然后别的队伍居然有游戏黑洞，笑场了，少了很多面粉，就这样赢了、、、奖品是一份零食大礼包 第三场是屏幕露脸 大家在倒数时间在镜头露脸。镜头会左右，上下，可以遮挡对方的脸。最后露脸的多，几场下来赢得获胜。比较逗的时，伟哥被挤到最后面去了，居然跳的老高，隔了4排还露脸了。我作为中锋，在最前排卡位，然后收效甚微。这场黄队第一，获得零食大礼包一份。 第四场 是组合游戏: 第一人原地转10圈，然后跑到对面取得跳绳回来，第二名队员跳绳20下，第三名队员拉着袋鼠跳袋子跳到对面取得气球回来，第四名队员赶紧吹气球，然后跟第三名用肚子压破，然后第五名队员腰间绑着装着球的盒子，让球全都从一个孔里面出来，就完成了。 讲解的时候，小橙子把绳子放到对面不远处，我说我去看着。然后讲解的时候，我想，我可能等会也会参与，于是拎着个跳绳就过来了聚精会神听着。然后听完转头回去，咦原来地上其他两根跳绳不见了。估计被扫地阿姨拿走了，这真的是拿！算是偷。当时我正要过去听讲时，确实身边有俩扫地阿姨。大家稍微附近问了问，找了找，没得。算了，活动还在进行，幸好我手上还有一根，算是庆幸。由于活动需要5人，有俩队人数有6人，我被分派管理随身物品，另一人管理跳绳和气球。 红队已经巨快的完成了，没想到还有更快的蓝队。蓝队中间拿到跳绳时，跳绳打结，花了4、5s。但是看绳子、气球的是他们队友，在前往对面获取物品时，别的队伍都是弯腰，他们是抬高高拿着就走，哈哈。多争取了几秒，不过他们确实快了写，特别是最后喜顺在将盒子的球抖出来的速度取得了巨大优势。（黄队由于上一局第一，在抖出球时，速度太慢，他们队友把抖球队友的腿抓起来帮忙，抖球队友是俯卧撑姿势，这就很像推车了，然后收效还是甚微，输了） 接下来是自由时间，同时还有一个任务，就是撕名牌。以个人为单位。我们先把物品搬回到入口处附近，那里刚好有很大个草坪。小橙子在那里看着物品，等大家回来。大家自由活动，我们队大家结队去玩，往右走。这一队里，大家都放心把背后留给队友。 大家往右边走去(其实是反方向旅游)，看了看周围植物景观，走了好远的路，还经过石头镇，绕回来经过小树林来到上观景台山脚。大家一起说说生活，讨论讨论未来。伟哥说他老婆是不太鼓励他在上海，太贵了，他们已经在老家(济南)全款一套；春哥在老家(武汉)一套，租的话也不是特别理想(毕竟新房给人住，上海租房还得垫钱，比如武汉2000租金，上海随便租也得2500左右了)。我说老房子其实也是还是可以的，稍微小点，可以稳当点留下来。女生说，不如郊区点，位置大点，如果有家人、孩子，厅还可以做做运动。伟哥说，老房子，价格不那么高的，基本都是很早年建的，基本没有停车位，车子停哪都不是，绝对不考虑，难道车子停马路边啊(非常同意，不过相对于米不够的情况，估计车子都没有，哈哈)；另一方面前期能咬牙买2室的，一定尽可能蹭一蹭，不然到时置换就很难了，毕竟70%首付。 也聊了聊老婆、老婆个数。嘿嘿，，，我想。。。不，你不想，，， 然后大家找了条上山的路，然后很陡，猜是下山路没错了。路上听得一阿姨说，今天怎么了，遇到传蓝马甲的，现在又有红马甲的。喔，我闻到了蓝队的气息，在山顶没错了。 大家上得小山坡顶，就见到4个蓝队，本着和平共处原则，他们也待一会下山了。山顶没啥，就一小塔，小塔关着门。休息了会，咦，来了俩黄队的，不过放过他们了，我们这队6人，他们压力很大呀。观景台能看到的，其实就是矿坑，被挖了好大一个坑，下面的水都是黑色的了。中间有个木桥，不过中心处断了，于是那处也进不去了。 下山的时候也是一下就到了。时间也差不多，就都往入口方向走去了。 回到集合地点，先吃零食，中午就吃个小饼干，饿得很。接着边上有个大草坪，于是就真的开始撕起铭牌来啦。我胖的都跑不动了，指甲忘记剪短，导致还受伤了，最后弃权，嘿嘿。 晚上大家去附近一个地点吃，出发的时候，伟哥带了我一程，我走过去景区另一出口有点远，然后他又反向开去了。 车子充的饱饱的，晚上那么远，骑了好久好久终于回到了熟悉的路段，外边冷，家里暖。 头很晕的回来，早早睡觉，才知道喝的奶茶相当于4杯咖啡提神量，不怎么喝咖啡的人，一口气喝那么多，确实懵逼了。 第二天睡一觉，好很多了，原来我还没有挂，嘎嘎。","categories":[],"tags":[]},{"title":"2019-6-10lesson","slug":"2019-6-10lesson","date":"2019-09-13T15:26:02.000Z","updated":"2020-06-04T04:16:35.987Z","comments":true,"path":"2019/09/13/2019-6-10lesson/","link":"","permalink":"https://shaohung001.github.io/2019/09/13/2019-6-10lesson/","excerpt":"","text":"docker mongo dump restoreDumpdocker run --name newMongo -p 27018:27017 --rm mongo 另开一个terminal docker exec -it newMongo /bin/bash mongodump -h 127.0.0.1 --port 27017 -d ${your db} -o /test/mongodBack exit # 退出docker mongo容器 docker cp newMongo:/test/mongodBack/ /mongodBack/ # 将docker 内文件拷到/mongodBack/ Restore待撸待撸 参考：https://www.cnblogs.com/qiyc/p/10150433.html OAuth2-server 撸saas 微应用化12345678910[Client frontend] GET /auth/honglian to [Client backend][Client backdnd] redirectTo [Server frontend] page : /oauth/authorize?clientId=x&amp;redirectUri=x&amp;response_code=code[Server frontend] POST /oauth/login/authorise to [Server backend] to fetch oauth authorization_code[Server frontend] redirectTo(window.location) redirectUri + code=$&#123;authorization_code&#125;[Client backend] get authorization_code[Client backend] POST /oauth/access_token/?client_id=x -H &apos;authorization=$&#123;authorization_code&#125;&apos; to [Server backend] to fetch access_token[Server backend] return access_token to [Client backend][Client backend] GET /api/user/?client_id=x&amp;client_secret=x&amp;access_token to [Server backend][Server backend] return userProfile to [Client backend][Client backend] redirectTo [/user/home] beyond over! 参考： https://gist.github.com/tabone/d74fb922669e4edc22bfd0833b5ae88b https://www.cnblogs.com/vipzhou/p/8125924.html www-form-urlencoded -d 里面的 空格 被替换成+的问题场景是用户发送一个www-form-urlencoded 内容是一个机器码，比如MH20ew2r9RuTyGcX+rrmxF7X40U= 但是发现传到服务器时，却变成了MH20ew2r9RuTyGcX rrmxF7X40U=. 中间是空格代替。 原因是空格在urlencoded 中就是”+”。于是参数从软件客户端发到web 时都是正确的。但是到了body-parser 时，body-parser 看到一个 +，想都不想，直接就转成空格了。、 临时处理办法：将该文本转回去: string.replace(/\\s/g, ‘+’) 最终解决方案：软件客户端使用urlencoded 刷新string Chrome Extension 使用Vue 遇到的一些问题Vue 使用webpack。但是background.js 属于后台，使用nodejs，于是webpack 找require 函数时可能会找不到比如fs 的库：Module not found. 做的第一种尝试: 在webpack 打包target 默认为的web 替换为node. 12345678910111213module.exports = &#123; target: &apos;web&apos;, node: &#123; console:false, global: true, process: true, fs: true, __filename: &apos;mock&apos;, ___dirname: &quot;mock&quot;, Buffer: true, setImmediate: false &#125;&#125; 但是这样的也导致输出的是node 环境。界面上的css 样式全部都不识别了。于是替换一种思路。 第二种尝试: 前段还是按照前段，后端之所以称之为后端，那么便是另外一个项目了。webpack 打包时，打一个虚拟的，没有任务的background 包。于是yarn watch 阶段background 包打进去之后，手动替换里面background.js。 终于，里面运行的非常正常了。 这种方法不同点是，之前的background 配置是page,现在应为scripts 1234background: &#123; page: &quot;./background.html&quot; scripts: [&quot;./background.js&quot;]&#125; 参考： https://cloud.tencent.com/developer/section/1477428 https://cloud.tencent.com/developer/section/1477500 Typescript + mocha + chai 单元测试12345678yarn add mocha @types/mocha chai @types/chai chai-http @types/chai-http -Dpackage.json scripts test: NODE_ENV=test mocha -t 5000 --require ts-node/register test/**/*.ts/test diary.spec.ts diary.spec.ts: 123456789101112131415161718192021222324252627282930import &#123; app &#125; from '../src/app'import chai, &#123; expect &#125; from 'chai'import chaiHttp from 'chai-http'chai.use(chaiHttp)import 'mocha'const userLoginCookie = '123456' // 由于使用OAuth 服务，那块代码就没有测，直接使用Cookiedescribe('测试diary 接口', function () &#123; this.beforeEach(function (done) &#123; setTimeout(function () &#123; console.log('等待数据库载入完毕') done() &#125;, 1000) // 时间可以加长，这里链接了mlab ，比较慢，可以为4000(有时仍然会出错) &#125;) it('Test getBudgetList', function (done) &#123; chai.request(app) .post('/api/diary/getBudgetList') .set('Cookie', userLoginCookie) .end((err, res) =&gt; &#123; if (res.status === 403) &#123; done(new Error('403 用户需要先登录')) &#125; else &#123; const arr = res.body as any[] expect(arr.length).to.equal(0) done() &#125; &#125;) &#125;)&#125;) fs.read/readFile 在读取中文时乱码需求：文件使用Buffer 读出, 然后一个一个解析里面的中英文环境：文件很大, 所以没办法直接读出、直接写出 注意：这个需求不是编码的问题。比如GBK。GBK使用iconv_lite 解决 英文占一个字节，中文三个字节，所以一个个读出的buffer， 中文时便出现该字找不到，所以nodejs 使用 进行替换。 nodejs 那些常见的读写库其实都导入了string_decoder 的库 使用是： 12345678import &#123; StringDecoder &#125; from 'string_decoder'const decoder = new StringDecoder('utf-8')while (true) &#123; const next = decoder.write(readBuffer) if (next.length) &#123; // 这就是得到的buffer &#125;&#125; decoder 原理是解析出来的，如果是中文三字节找不到，那么就储存起来，等到合并成一个。 附上 oneByOne 读写每个文本 12345678910111213141516171819202122232425262728293031import &#123; StringDecoder &#125; from \"string_decoder\"import * as fs from 'fs'import &#123; call &#125; from './awaitCall'export const one_openFile = async (absolutePath: string, mode='r') =&gt; &#123; const [e, fd] = await call(fs.open ,absolutePath, mode, 0o666) if (e) throw e return fd&#125;export const one_readFile = async (fd: number, offset=0, cb?: Function) =&gt; &#123; const oneByOneSize = 1 const len = oneByOneSize let readIndex = 0 const decoder = new StringDecoder('utf-8') while (true) &#123; const readBuffer = Buffer.alloc(oneByOneSize) const [err, res] = await call(fs.read, fd, readBuffer, offset, len, readIndex) if (err) throw err if (!res.bytesRead) &#123; // 文件读完了 return \"文件读写完毕\" &#125; const next = decoder.write(readBuffer) if (next.length) &#123; if (cb) cb(next) &#125; readIndex ++ &#125;&#125; Run Mocha programmatically在代码中执行mocha。在实际环境中进行单元测试。 mocha 官网示例 stackoverflow express-limiter遇到情况：有一个注册、即立即登录，快速注册快速登录的接口，这里express-limiter 可以多次请求 去redis 上看了下，key 每次都不同 去express-limiter 里看了下, 他的redis key 来自line17: var key = opts.keyFormatter(opts.lookup(req)) Nginx 默认上传文件大小:1Mserver { listen 80; server_name xxx; client_max_body_size 100M;} vue-electron 使用electron-builder 不能打包winissue:https://github.com/SimulatedGREG/electron-vue/issues/487 yarn build:win : “node .electron-vue/build.js &amp;&amp; electron-builder -w” TS 获取自身Class123456class MyClass &#123;&#125;const instance = new MyClass();console.log(instance.constructor.name); // MyClassconsole.log(MyClass.name); // MyClass instance.constructor 就是得到的class 转义后的Class 对象。 Nginx 设置同源策略这里还是使用上面文章说明： 123add_header Access-Control-Allow-Origin *;add_header Access-Control-Allow-Headers X-Requested-With;add_header Access-Control-Allow-Methods GET,POST,OPTIONS; 然后使用自己的域名。 以上完成了本次要搭建直播、理解推流、拉流的动作过程。 人生苦短，我们用go有句话挺有意思的： 12nodejs 可玩性还是蛮高的，可以C艹binding。但是又多学一个，为什么不用golang?","categories":[],"tags":[]},{"title":"2019-9-6lesson","slug":"2019-9-6lesson","date":"2019-09-06T04:15:45.000Z","updated":"2020-06-15T04:33:07.183Z","comments":true,"path":"2019/09/06/2019-9-6lesson/","link":"","permalink":"https://shaohung001.github.io/2019/09/06/2019-9-6lesson/","excerpt":"","text":"记一次VVVVVV 域名被删了，重新安装记录由于freeNom 购买的免费域名，如果二级域 没有指定网页返回，那么就会被回收。有时邮件能看到，及时搞好就OK，有时漏掉，于是，麻烦事来啦。 freeNom 重新购买那个域名，试了试，被Cancel 掉了，买不成功。 好吧，那就折腾下买个域名吧。 首先不喜欢狗爹，没那个经历。看他们说namecheap 还不错，但是最后一步：不能使用支付宝，那我就用我以前的网站namesio 挺不错，买过一次，熟悉的味道。 买成功后，修改nameserver 为cloudFlare 对应的nameserver，同时开启SSL。 但是测试的时候发现客户端的error.log 报错:failed to handler mux client connection &gt; VVVVVV.com/core/proxy/vmess/outbound: failed to find an available destination &gt; VVVVVV.com/core/common/retry: [VVVVVV.com/core/transport/internet/websocket: failed to dial WebSocket &gt; VVVVVV.com/core/transport/internet/websocket: failed to dial to (wss://wpn.iahuang.com/58ff4ec7/): &gt; x509: certificate is valid for fuck.gogal.ml, not wpn.iahuang.com] &gt; VVVVVV.com/core/common/retry: all retry attempts failed 这个错是从服务端发出来的，是说里面的VVVVVV.crt / VVVVVV.key 对应的域名和现在不同。醒悟过来了。 我用的VVVVVV_ws-tls_bash_onekey 一键生成的，找到里面的install.sh 发现他的ssl 使用acme.sh 生成的。美滋滋，我也去整一个。 curl https://get.acme.sh | sh acme.sh --issue -d wpn.ahuang.com -w /home/wwwroot/sCalc --test /home/wwwroot/sCalc 对应Nginx server 的root --test 用于测试使用的。如果不加，最多只能一个月生成5个, 超过会报https://www.dogedoge.com/results?q=Create+new+order+error.+Le_OrderFinalize+not+found., code=429 生成之后，文件在~/.acme.sh/目录下。 我们要用的VVVVVV.crt / VVVVVV.key 需要再处理一次: mkdir -p /sslCert acme.sh --install-cert -d wpn.iahuang.com --key-file /sslCert/VVVVVV.key --fullchain-file /sslCert/VVVVVV.crt --reloadcmd &quot;systemctl restart nginx&quot; 然后就OK。要的文件就在sslCert下。 将两个文件，替换到/etc/VVVVVV/下。重启VVVVVV / 修改server 的server_name 就又复活啦。","categories":[],"tags":[{"name":"VVVVVV","slug":"VVVVVV","permalink":"https://shaohung001.github.io/tags/VVVVVV/"}]},{"title":"2019-9-5lesson","slug":"2019-9-5lesson","date":"2019-09-05T04:15:07.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/09/05/2019-9-5lesson/","link":"","permalink":"https://shaohung001.github.io/2019/09/05/2019-9-5lesson/","excerpt":"","text":"开始做视频网站前的准备123Nginx 做流量转发SRS 做直播流服务Nginx-http-flv-module 作为播放本地视频流服务 自己测试了下SRS 做直播服务单机都感觉非常稳定，所以直播的能力就先交给他了。我找一遍没有找到SRS 能播放本地视频的。使用ffmpeg 倒也能播放，但是却不能拖动前、后播放视频了。 所以果断放弃。使用Nginx-http-flv-module 作为播放本地视频，配置也是超级简单。但是Nginx-http-flv-module 的直播流却不理想，自己感觉不是很好。 也可能是我偷偷搞、学，遗漏了？反正就这么着：SRS 扛起直播大旗、Nginx-http-flv-module 扛起播放视频服务大旗！ SRS 上面也已讲过，商用的话，还缺少一个:鉴权服务。SRS 本身就有鉴权方案，我在之后会多多参考，现在主要还是先搭起播放本地视频的服务。 下面开始Nginx-http-flv-module 的实现流程。 首先说明环境使用昨天搭建的CentOS7 光溜溜版。只有openssh. 装个nodejs 先:参考 cd /tmp curl — silent — location https://rpm.nodesource.com/setup_9.x | sudo bash - yum install -y nodejs 下载Nginx mkdir /root/downloads cd /root/downloads wget http://nginx.org/download/nginx-1.17.3.tar.gz wget https://github.com/winshining/nginx-http-flv-module/archive/v1.2.6.zip tar -zxvf nginx-1.17.3.tar.gz # 得到文件夹nginx-1.17.3 unzip -o v1.2.6.zip -d nginx-http-flv-module # 得到nginx-http-flv-module cd nginx-1.17.3 ./configure --add-module=/root/downloads/nginx-http-flv-module --with-http_ssl_module --with-http_v2_module # 可能会报pcre、openssl 没有找到。 # 上面同时也把nginx-http-flv-module 第三方包加载成功 yum install -y openssl openssl-devel # 安装openssl yum install -y pcre pcre-devel # 安装pcre 上面做好了准备, 下面是编译和启动 make &amp;&amp; make install # 完成之后会在/usr/local/nginx 生成目录，这里就是nginx操作处 cd /usr/local/nginx ./sbin/nginx -s start -c ./conf/nginx.conf # 启动nginx 检查下nginx 是否正确运行。 下面来设置conf/nginx.conf 123456789101112131415161718192021222324252627282930313233343536373839404142434445rtmp &#123; server &#123; listen 1935; chunk_size 4000; application live &#123; live on; record off; hls on; hls_path /opt/video/test; hls_fragment 3s; hls_playlist_length 32s; meta on; gop_cache on; &#125; application vod &#123; play /opt/video/vod; &#125; &#125;&#125;http &#123; server &#123; listen 80; server_name yourdomain.com; index index.html index.htm; location /vod &#123; alias /opt/vod/; &#125; location /hls &#123; types &#123; application/vnd.apple.mpegurl m3u8; video/mp2t ts; &#125; alias /opt/video/; expires -1; add_header Cache-Control no-cache; &#125; location /flv &#123; flv_live on; chunked_transfer_encoding on; &#125; &#125;&#125; 上面看的到支持了hls、flv。实现了两个服务:本地播放流媒体和接受推流、被拉流的功能。 推流: ffmpeg -re -stream_loop -1 -i 222.mp4 -c:v libx264 -c:a aac -f flv rtmp://10.221.55.4/live/test 拉流: rtmp://10.211.55.4/live/test 然后砸门往 /opt/video/vod/1.mp4 放了个mp4. 拉流 rtmp://10.211.55.4/vod/1.mp4 当然域名yourdomain.com 可以写进主机hosts 里面，这样就可以真实环境测试了。 比如拉流: rtmp://yourdomain.com/flv?app=live&amp;stream=test 播放MP4: rtmp://yourdomain.com/vod/1.mp4 最后一个: 权限控制 控制播放权限: on_play http://localhost:9000/onPlay; on_publish http://localhost:9000/onPublish; 上面这两个会调用本地权限验证，如果返回200则开始播放、返回非200 则失败。 以上完成这次的任务。 nginx-http-flv-module 参考","categories":[],"tags":[{"name":"nginx-http-flv-module","slug":"nginx-http-flv-module","permalink":"https://shaohung001.github.io/tags/nginx-http-flv-module/"}]},{"title":"2019-9-4lesson","slug":"2019-9-4lesson","date":"2019-09-04T04:14:26.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/09/04/2019-9-4lesson/","link":"","permalink":"https://shaohung001.github.io/2019/09/04/2019-9-4lesson/","excerpt":"","text":"Mac使用Parallels 增加CentOS7CentOS7 肯定是用OpenSSH 链接的。 yum list installed | grep openssh-server 如果未显示openssh-server 已经安装，那么输入yum install openssh-server 安装。 cd /etc/ssh sudo vim sshd_config 修改以下几项： 1234567Port 22ListenAddress 0.0.0.0ListenAddress ::PermitRootLogin yesPasswordAuthentication yes 保存文件、退出 systemctl restart sshd netstat -lnp | grep 22 # 查看到22 端口已经打开 这时Mac 要链接先要找到Ipv4 地址，两种方法： ip addr 可以看到有localhost/127.0.0.1/某一个ip 地址 去设置的netword 里面看Ipv4 地址 然后Mac 先ping 该ip，如果通畅那就说明ok 啦。 此时有个问题：Parallels帮我们创建的账号，默认名为Parallels, 于是我又屁颠屁颠去【设置】【用户】里面把名字改了。 Mac 下ssh root@ip -p 22 发现一直弹Permission denied, please try again. 不可能啊，就是这个密码。不理解的我试了好多次，只能google 了。 StackExchange前面答案都没帮上忙。我看到改密码：sudo passwd 于是我改了下密码，Mac试着登录，终于可以登入了。估计这是CentOS7 的bug 吧。反正我登上了。我不管了。","categories":[],"tags":[{"name":"parallels","slug":"parallels","permalink":"https://shaohung001.github.io/tags/parallels/"}]},{"title":"2019-9-3obs","slug":"2019-9-3obs","date":"2019-09-03T04:11:58.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/09/03/2019-9-3obs/","link":"","permalink":"https://shaohung001.github.io/2019/09/03/2019-9-3obs/","excerpt":"","text":"OBSOBS 下载 来源处添加【媒体源】-【新建】选择好本地文件时，顺便点选【循环】(方便测试)-【确定】 然后点击OBS 的【设置】-【推流】服务一栏选择【自定义】-【服务器】:rtmp://104.230.236.234/live/live 【串流秘钥】填:111(填111 为test) 这里说一点，【串流秘钥】在那片教程中没有说明，也就是111 在之后rtmp 流或者flv 流的后面的basename 位置，最后一定要加上111，如播放rtmp://104.230.236.234/live/live/111 或者http://104.230.236.234/live/live/111.flv 不然流推上去了，客户端就一直报错，找不到拉不到流啊。 接着OBS 按下【开始推流】，那就是推送到已开启的SRS 流了。 SRSdocker run --name srs -v /dockerVolume/SRS/conf/docker.conf:/srs/conf/docker.conf -p 8808:8080 -p 1985:1985 -p 1935:1935 ossrs/srs:3.0 用容器美滋滋。同时，/dockerVolume/SRS/conf/docker.conf 是本地文件映射到容器的对应文件。该文件拷贝自:srs/trunk/conf/http.flv.live.conf 这时可以在浏览器测试: http://104.230.236.234:8808/live/live.flv 12345678910111213141516listen 1935;max_connections 1000;daemon off;srs_log_tank console;http_server &#123; enabled on; listen 8080; dir ./objs/nginx/html;&#125;vhost __defaultVhost__ &#123; http_remux &#123; enabled on; mount [vhost]/[app]/[stream].flv; hstrs on; &#125;&#125;","categories":[],"tags":[{"name":"srs","slug":"srs","permalink":"https://shaohung001.github.io/tags/srs/"},{"name":"obs","slug":"obs","permalink":"https://shaohung001.github.io/tags/obs/"}]},{"title":"2019-9-2lesson","slug":"2019-9-2lesson","date":"2019-09-02T04:11:25.000Z","updated":"2020-06-15T04:33:07.183Z","comments":true,"path":"2019/09/02/2019-9-2lesson/","link":"","permalink":"https://shaohung001.github.io/2019/09/02/2019-9-2lesson/","excerpt":"","text":"最近连续一个多月的主要工作最近连续一个多月主要分为三个工作： 工作为主，完成公司盈利产品的迭代。这不仅学，还要学好。 这几个月想完成去年未完成的游戏，不过游戏有点大，不可太急躁。 完成视频播放功能。 第一个工作还是努力前行，我的试用期是6个月，这个月过后就满啦。难得接受个这么长的试用期，努力就是了。从一无所知，非常迷迷糊糊，懵懵懂懂的状态跌跌撞撞过来，期间没有太多人帮助(只有伟哥和学弟喜顺)，现在能更准确找到问题、解决问题、顺便优化代码。美滋滋。 最近突然想起，我海贼王追的那么累(更得好慢)，最近我都转而潜心看文章，如三国类解说、明朝时代的解说。(明朝那么热闹，唐朝肯定也是潮起潮落。心之向往那跌宕的岁月。不过对历史的向往，也万没有身体要去感同身受的打算，那不是我这种渣逼能活着的岁月。)突然记得似乎火影忍者我还没看完，最后几集漏了，找不到网站看。 前几天开始了锻炼，想想以前的光辉岁月，不甘心只是蹲在凳子上消磨。翻开看了下bilibili的爆燃视频，夜凯一jio 踢残斑，想起以前课上趴着桌子偷偷看火影。锻炼我要干，看视频我也要干的。 我要做个视频网站！ 我平常用流量看文章等，每个月最多1G不到(测试app 等用掉的)，平常都是500M。但是我觉得5G时代早晚来临，视频、音频、图片等都会大行其道。我不觉得我用得上，但我的客户们肯定万分期待。最近我试了试nginx-rtmp-module，先品尝了下视频播放的操作。接着我用SRS 也能转播直播。 同时我最近刚搞的rancher，想想，是否服务能放进去呢? 这1个多月的周末就在这其中煎熬度过。不过答案也终于找到了。 答案是理解了rancher 的k8s(k3s) 的能力，以目前我的知识、能力范畴，我能很好的使用服务的编排、无限扩容能力、合理调度。 那么答案就在这，SRS、VVVVVV等都是服务功能。VVVVVV 本来就是单个机器代理，还要怎么调度？SRS要调度，其本身已经支持(go-sharp)。也就是说，我之前就是在钻牛角尖。不过钻的作用是，让我深切快速的理解了k8s(k3s) 的作用是什么，不然我要看好久的专业书。 不在当前规划上的知识，先不花太多精力。能动手就不看那么细致了。 周末突然的领悟自己确实在大钻特钻牛角尖。 现在说说我的环境和做法。 大致跟着这篇教程下来的:https://juejin.im/post/5ad7ce3ff265da505e41ff03 1234Server: CentOS7 x86_64SRS: docker run --name srs -v /dockerVolume/SRS/conf/docker.conf:/srs/conf/docker.conf -p 8808:8080 -p 1985:1985 -p 1935:1935 ossrs/srs:3.0客户端-推流端: OBS客户端-播放端: VLC / 教程里面的live demo","categories":[],"tags":[]},{"title":"2019-9-1make_wordTemplate","slug":"2019-9-1make-wordTemplate","date":"2019-09-01T04:08:05.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/09/01/2019-9-1make-wordTemplate/","link":"","permalink":"https://shaohung001.github.io/2019/09/01/2019-9-1make-wordTemplate/","excerpt":"","text":"Microsoft word 的document.xml 模板生成word-template.docx 过程需求：生成一个模板word-template.docx ，在nodejs 中匹配对应的模板code，最终生成需求.docx 工具：office word、code IDE。 首先在word 中修改好我们要的样式。在对应要修改模板文字 的地方，以____代替之。作用是等会生成最终模板的地方，很容易找到。 将word.docx 解压成文件夹template mac/linux$unzip -o word.docx -d template windows$”windows unzip 解决工具路径” -o “word.docx 路径” -d “template 路径” template 目录大致介绍 重要的目录在框中。 [Content_Types.xml] 是用来描述内部使用的格式说明。 word/document.xml 核心文件，修改的描述就在这。 word/_rels/document.xml.rels 是描述资源文件的relationShip word/media/ 用来放图片 接下来就是修改成我们的最终模板 修改word/document.xml 替换模板code 格式我们使用lodash.template —&gt; &lt;%= templateCode %&gt; 如果是插入jpeg 图片(png/jpg 都可以), 我们可以如下: 1234567891011121314151617181920&lt;w:p&gt; &lt;% _.forEach(images, function(item, index) &#123; %&gt; &lt;w:r&gt; &lt;w:rPr&gt; &lt;w:color w:val=\"00FF00\" /&gt; &lt;/w:rPr&gt; &lt;w:pict&gt; &lt;v:shape id=\"_x0000_i1025&lt;%- index %&gt;\" o:spt=\"75\" type=\"#_x0000_t75\" style=\"height:&lt;%- item.height %&gt;pt;width:&lt;%- item.width %&gt;pt;\" filled=\"f\" o:preferrelative=\"t\" stroked=\"f\" coordsize=\"21600, 21600\"&gt; &lt;v:path/&gt; &lt;v:fill on=\"f\" focussize=\"0,0\" /&gt; &lt;v:stroke on=\"f\" joinstyle=\"miter\" /&gt; &lt;v:imagedata r:id=\"&lt;%- item.rid %&gt;\" o:title=\"\" /&gt; &lt;o:lock v:ext=\"edit\" aspectratio=\"f\" /&gt; &lt;w:10:wrap type=\"none\" /&gt; &lt;w:10:anchorlock /&gt; &lt;/v:shape&gt; &lt;/w:pict&gt; &lt;/w:r&gt; &lt;% &#125;);%&gt;&lt;/w:p&gt; 这样便可循环插入多张图片啦。 修改word/_rels/document.xml.rels 这里是用来指定植入的资源(图片)关系。 我们只需在原本存在&lt;Relationships xmls=&quot;...xxx&quot;&gt;一行下增加新增的rId 资源链接： 12345&lt;Relationships xmlns=\"http://schemas.openxmlformats.org/package/2006/relationships\"&gt; &lt;% _.forEach(images, function(item, index) &#123; %&gt; &lt;Relationship Id=\"&lt;%- item.rid %&gt;\" Type=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships/image\" Target=\"media/image&lt;%- index %&gt;.jpeg\" /&gt; &lt;% &#125;); %&gt; &lt;Relationship Id=\"rId8\" ... 同时找到这里最大的Id，如Id=&quot;rId16&quot;, 之后用到。 修改[Content_Types].xml 增加使用资源ext 这里使用jpeg 图片后缀名，增加一行:&lt;Default Extension=&quot;jpeg&quot; ContentType=&quot;image/jpeg&quot;/&gt; 如果没有增加该行(或者上面提到的rId 填错)，出现问题特点是: WPS能正常打开；office word 提示无法打开Open XML xxx 因为内容存在问题或者文件名可能包含无效字符 文件已损坏，无法打开。 点击了“确定”，接着又提示xxx.docx 中发现无法读取的内容。是否要恢复此文档的内容？如果您信任此文档的来源，请单击“是”，点了“是”之后又能正常浏览。 word/media 文件夹 该文件夹是图片移进来后，rId ++。把图片信息保存到word/document.xml 的同时，将资源链接写进word/_rels/document.xml.rels 压缩 成word-template.docx 模板文件 zip ../word-template.docx -r . 将word 文件夹下的所有文件使用zip 压缩。名称指定为word-template.docx 模板即打包完毕。 至此word-template 模板生成完毕。 !!!ATTENTION \\制作最好用Windows 操作系统。如果使用Mac OS 制作，一定要将制作好的文件拖到Windows 虚拟机查看是否多出文件, 如 .DS_Store 文件 上述情况会导致WPS 能正常打开，微软的word 总是提示失败超级bug","categories":[],"tags":[]},{"title":"2019-8-9lesson","slug":"2019-8-9lesson","date":"2019-08-09T04:07:21.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/08/09/2019-8-9lesson/","link":"","permalink":"https://shaohung001.github.io/2019/08/09/2019-8-9lesson/","excerpt":"","text":"git push origin branch 出现errorgit push origin V4 报错: 1234To gitlab.xxx.git! [rejected] branch -&gt; branch (non-fast-forward)error: failed to push some refs to 'gitlab.xxx.git'hint: Updates were rejected because the tip of your current branch is behind 这里表明你的点是behind。 那就 git pull, 但是报错: 1234There is no tracking information for the current branch.Please specify which branch you want to merge with.See git-pull(1) for details. git pull &lt;remote&gt; &lt;branch&gt; git pull === git fetch + git merge 这里的意思是要你指明remote 和branch: git pull origin V4 如果要将合并的点rebase 掉，git pull --rebase origin V4","categories":[],"tags":[{"name":"git","slug":"git","permalink":"https://shaohung001.github.io/tags/git/"}]},{"title":"2019-8-8lesson","slug":"2019-8-8lesson","date":"2019-08-08T04:06:31.000Z","updated":"2020-06-15T04:33:07.183Z","comments":true,"path":"2019/08/08/2019-8-8lesson/","link":"","permalink":"https://shaohung001.github.io/2019/08/08/2019-8-8lesson/","excerpt":"","text":"杂谈如何快速进步，突破学习新的知识、技术。 我的方法，一句话概括：在自己规划的道路上，不怕试错，勇敢试错。出问题了，多方思考，解决问题。 下面是废话：blablabla 大学时期，我和我的几个小伙伴不知道学什么、方向不知道会走向何处。我们都是穷人过来，肯定不会说真的堕落。但是就因为穷人，眼界比他人要小一点，导致有时我们能做的, 能接触的就更局限了。 我和我同学大一大二上课还是会稍微努力，不过课后没有进展，导致挂科无数。下课一起打游戏，当时LOL 还不风靡，玩的CF，下午打篮球。那时候篮球能力是真强，不像现在肚子都是肉。后来大二就更是会翘课进网吧，因为在课上我们都在睡觉，真的在睡觉。 为什么，因为大学里面，老师教你的，都是如果拿着锤子，找钉子。 整天拿着锤子，反复推敲，仔细研磨，整个大学四年，我发现我们还没动手过去找一个真实的钉子。也许你会说，那些题目，那些作业，不就是你的钉子么？我觉得年轻的人们，都会当局者迷。也许我们现在看来，那些都是非常有用，在现在都是必不可少，甚至悔不当初。但是当局者迷，每人境遇都是不同，我当初就觉得，未来我不一定用得上，数学题算来算去，最后你填写答案:1，正确率基本都是70%。为什么我为了70%能填对答案的问题，需要绕来绕去，反复抚摸锤子，恨不得拿舌头狂舔。 四年，老师们一上课就是教研，但是不会告诉今年这堂课在实际场景，比如xxx会碰到。ok，很难想象？那我们来真实模拟这个钉子！也许这次上课导致上课的拖延、甚至为了模拟这个钉子花了4节课、6节课。大家跟着老师一路走来，经验、处事、遇到问题时的攻坚，到最终见到钉子，此时resolve。 我觉得我爱上这种遇到苦难，解决苦难的过程。如现在种种这般。然后学校不同意，老师不愿意，教学任务啊老铁。学生只能学到皮毛，大学生啊！！！ 当然现在不是说以前怎么怎么的，什么我现在这么菜要怪老师，什么要怪体制，没有没有。吐槽下而已。 above，我都想说明，钉子和锤子的关系、的前后顺序。 曾经我学到一个新技术，想找一个地方去实践。我找我前CTO。他告诉这个技术人要理清的步骤：先有钉子，然后找到锤子解决这钉子。 最近我多次使用docker 之后，就觉得好用是好用，但是没有管理，觉得不自在。宕机了？断网了？这个机子断了？企业服务断了？ 如果我未来会要扛起一面大旗，我就需前提做好准备，做好狂风暴雨的突袭！所以我考虑了下docker-swarm，但是感觉那里不对，不是很密西。 我搞了搞k8s, 然后我的两只小鸡都全部瘫了。在翻看相关文档，提到k3s。是针对我的小鸡仔们的。 我搞了k3s，但是遇到问题：我有个非容器服务，通过nginx 转子域名的443 端口。但是k3s 装上去后，nginx 服务端口立马全部失效了。 怎么描述：nginx 的80监听端口被k3s 强行取走。虽然netstat -lnp |grep 80 还是nginx 的，但access.log 没有反应。我不知道怎么应对。 对于这个我想要两种方法： k3s 的服务，我使用编译的nginx 要什么端口，nginx 我转给你，都转给你，但是你别抢80服务； k3s 你把能暴露端口的方法告知我一下，不然我搞不了本机端口啊。 当时我不知道Ingress，毕竟强行学习的嘛。试了好多种方案不行，没来得及看相关文章。当时想问伟哥，不过他太忙，我就问问一个同事，他以前做运维的(他看起来比我岁数小的样子，原来比我大，孩子都6岁啦，哈哈，以后可以多交流)。他给我一些帮助，也让我多看书，把里面的原理整清楚，以后遇到问题、排查也懂。不过我觉得，我当前只是想完成集群的搭建、应该解决集群搭建问题，而不是找一大本书完全明白。 这就像拿一把超级大锤(我看完书了，不就等于超级大锤), 完成我短期要求：搭建起起来，这个小钉子需求。从成本、效率上看都是过犹之。 我昨晚想着，通篇看书这事，先拖后吧。等之后有人懂了，可以乘机偷学。 那么先完成docker-swarm。但是同样出现一些小坑，刚接触，没办法立即查出来，解出来。 于是我今天早上东问问西问问，得知k3s 为了完成内部pod 端口upstream 要求，集成了nginx。同时，开开关关nginx 带来损耗，此时Ingress 作为自动编排规则。我试了下，哎，虽然外部VVVVVV 要导出规则，还没整上(估计还是Ingress 有关操作)，那么先完成其他需求了再说。 至此，钉子(docker 服务集群化需求)一经出现，我找了相应的锤子(最终找到k3s)解决了需求。 钉子的产生，还是源于自身大胆的去尝试。 这次的钉子需要虚拟机或者vps，该vps 还是能尽情折腾，坏了就坏了。 综上，尽情的产生钉子，要不怕难，然后使用身边的资源，多方思考找到锤子解决。 这兴趣产生的难，在解决后确实让我很开怀。 乱七八糟得道者多助，拾到者捐助。 在新的环境怕被人说能力不强，是饭桶，于是我就努力喝水，这样他们最多称我为水桶，而不是饭桶了。","categories":[],"tags":[]},{"title":"2019-8-5lesson","slug":"2019-8-5lesson","date":"2019-08-05T04:06:09.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/08/05/2019-8-5lesson/","link":"","permalink":"https://shaohung001.github.io/2019/08/05/2019-8-5lesson/","excerpt":"","text":"人的一生并不是只有工作，就像我，我的两生、多生 都得用来工作","categories":[],"tags":[]},{"title":"2019-8-1lesson","slug":"2019-8-1lesson","date":"2019-08-01T04:05:37.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/08/01/2019-8-1lesson/","link":"","permalink":"https://shaohung001.github.io/2019/08/01/2019-8-1lesson/","excerpt":"","text":"k3s最近花了点时间做服务器集群工作尝试。原因是，单就docker，如果服务器不尝试集群，那么对于高可用、高并发，都将是梦，永远都有瓶颈。 我认识的运维和他人认知的运维不一样。 我觉得真正的开发、运维，是让你在最有限的工具、环境里面，做出最大可用的效益。 我用rancher k8s 一上来就吃掉了所有cpu、内存，那我们就啥也搞不了了。当时卡的受不了，直接换成k3s。 我的两只小鸡配置： 12367.x.x.xCPU: 1RAM: 256M (你没看错, 于是我加点交换区2G, 但是他是CN2 直连， 搬瓦工) 123104.x.x.xCPU: 1RAM: 1G (加交换区2G，网络稍慢些， hostwind) 以上就是我的两只炮灰小鸡啦。 之后会对k3s 部署进行说明。 当前k3s 部署会将nginx 端口替换。暂时对这个了解不清。解决了之后回来完成这个主题。","categories":[],"tags":[{"name":"k3s","slug":"k3s","permalink":"https://shaohung001.github.io/tags/k3s/"}]},{"title":"2019-7-23lesson","slug":"2019-7-23lesson","date":"2019-07-23T04:04:50.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/07/23/2019-7-23lesson/","link":"","permalink":"https://shaohung001.github.io/2019/07/23/2019-7-23lesson/","excerpt":"","text":"记录设置Centos7 Nginx 制作一个简单的点播服务起因：当前nginx 版本是1.17.1, 想增加nginx-rtmp-module,找不到configure 文件，所以打算降版本。 删除CentOS 上的Nginx systemctl nginx stop 删除Nginx 的自动启动 centos6:语法 chkconfig nginx off centos7:语法 systemctl disable nginx.service 从源头删除nginx rm -rf /usr/sbin/nginx rm -rf /etc/nginx rm -rf /etc/init.d/nginx 在使用yum 清理 yum remove nginx 下载nginx-rtmp-module cd /root/download git clone https://github.com/arut/nginx-rtmp-module.git wget http://nginx.org/download/nginx-1.10.3.tar.gz tar -zxvf nginx-1.10.3.tar.gz cd nginx-1.10.3 设置并install ./configure --add-module=${刚下载的路径}/nginx-rtmp-module --with-http_ssl_module make &amp;&amp; make install 此时nginx 已经在 /usr/local/nginx 设置source: vim /etc/profile.d/nginx.sh 添加一下内容 export NGINX_HOME=/usr/local/nginx export PATH=$NGINX_HOME/sbin:$PATH 保存后使配置生效: source /etc/profile 测试一下：nginx -V 输出了: 12345nginx version: nginx/1.10.3built by gcc 4.8.5 20150623 (Red Hat 4.8.5-36) (GCC)built with OpenSSL 1.0.2k-fips 26 Jan 2017TLS SNI support enabledconfigure arguments: --add-module=/root/download/nginx-rtmp-module/ --with-http_ssl_module 使其在Centos7 systemctl 可以使用 vim /usr/lib/systemd/system/nginx.service 输入文件内容： 123456789101112[Unit]Description=nginx - high performance web serverAfter=network.target remote-fs.target nss-lookup.target[Service]Type=forkingExecStart=/usr/local/nginx/sbin/nginx -c /usr/local/nginx/conf/nginx.confExecReload=/usr/local/nginx/sbin/nginx -s reloadExecStop=/usr/local/nginx/sbin/nginx -s stop[Install]WantedBy=multi-user.target 设置开机自启动: systemctl enable nginx.service 查看所有服务: systemctl list-units --type=service 12345678910111213rtmp &#123; server &#123; listen 1935; chunk_size 4096; application vod &#123; play /opt/video/vod; &#125; &#125;&#125;http &#123; ...&#125; 然后就可以使用: rtmp://ip/vod/1.mp4 点击查看啦 参考1参考2 Nginx-http-flv-module昨天玩了Nginx-rtmp-module，但是指定路径是: rtmp://ip/vod/1.mp4 需要使用ip。这样就很low 了，简直拿不出去手(直接使用ip 还是挺不自由的) 当前我的ip 都是挂在Cloudflare 上。 那是不是可以: rtmp://www.baidu.com:1935/vod/1.mp4 -&gt; rtmp://www.baidu.com:80/vod/1.mp4 这样呢？？ 参考1参考2参考3","categories":[],"tags":[{"name":"src nginx-flv","slug":"src-nginx-flv","permalink":"https://shaohung001.github.io/tags/src-nginx-flv/"}]},{"title":"2019-7-22lesson","slug":"2019-7-22lesson","date":"2019-07-22T04:03:53.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/07/22/2019-7-22lesson/","link":"","permalink":"https://shaohung001.github.io/2019/07/22/2019-7-22lesson/","excerpt":"","text":"tinytiny7.20 号将tinytiny 完成，做成一个节点，接下来就是做游戏赚钱了。 之前的作品我觉得都挺好，应该能赚钱，但是一个人抽不出手，也许真的只能做游戏了吧。 auth.ahuang.mlauth.ahuang.ml 这个是用作用户中心、授权其他产品权限、授权其他产品获得相关用户信息。 diary.ahuang.mldiary.ahuang.ml 基础用户没什么功能、vip1有一些功能、vip2功能比较多，sexy，所以vip2 不能推广。 www.ahuang.mlwww.ahuang.ml 其实也是budget.ahuang.ml 是做《iOS/葩皮记账》 的后台、tinytiny 的后台。 葩皮记账是一款根据git 原理，将用户记账多端登录功能的轻松实现，能保证用户在游客登录、正常登录等使用情景的优化。 tinytinytinytiny 使用的是tinypng 的API，其默认每个邮箱每月500个免费使用额度。当时我的思考是： 如果集合20个邮箱，那就有10000个使用额度，只要保证key 合理调度、任务配置、用户使用额度检查、回滚等配合操作，就能保证任务的合理性。 依靠以上的思路，所以有了这款小产品，当前还不完善。 总结和计划要做的事网页产品 [] 增加埋点 [] 增加google 广告 auth.ahuang.ml [] 用户oauth 进入register 增加callback: 用户register 完返回到oauth 界面 [] 用户进入home 界面时刷新用户资料、或者增加用户资料页刷新用户资料 [] tinytiny 产品的下载页 diary.ahuang.ml [] 增加段子、搞笑 类别 budget.ahuang.ml [] 用户压缩记住上次选择路径 [] 增加选项：用户压缩直接覆盖源资源、同时领指定一个文件夹存放用户的源资源 tinytiny electron-app [] concurentlly start task (current: serially) [] remember user last select path [] user check out whether PROGRAM “cover source (together with a new directory)” or “a new directory name ‘tiny’(COMPLETE)” 如果可以，我想在android 搞一个小小的程序。作用是识别用户的来电，监听电话号码和腾讯手机管家的不良通讯录(或者自己制定一个)，匹配之后，自动播放用户自己的广告，这样便能对那些天天找你“来买房啊”、“来买车啊”、“其他乱七八糟业务” 造成回击。","categories":[],"tags":[]},{"title":"2019-6-13qiniu","slug":"2019-6-13qiniu","date":"2019-06-13T04:02:38.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/06/13/2019-6-13qiniu/","link":"","permalink":"https://shaohung001.github.io/2019/06/13/2019-6-13qiniu/","excerpt":"","text":"找到原因：我去找了下我的lookup 1234567loopup = (req:Request) =&gt; &#123; let ref if (req.user) &#123; ref = req.user._id &#125; return [req.path, ref || req.get(\"X-Real-IP\") || req.get(\"X-Forward-For\") || req.ip]&#125; 原因就在于每次我登进去，key 都不同，与此同时，我不退出，继续使用该api，key 还是不同。 解决方案：由于该route 是public 的， 1234567891011lookup = (req:Request) =&gt; &#123; const key = `$&#123;req.method&#125;:$&#123;req.path&#125;` if (routesMap[key].accessLevel.level === 'public') &#123; return [req.path, req.get(\"X-Real-IP\") || req.get('X-Forwarded-For') || req.ip] &#125; let ref if (req.user) &#123; ref= req.user._id &#125; return [req.path, ref || req.get(\"X-Real-IP\") || req.get('X-Forwarded-For') || req.ip]&#125; 解决qiniu 上传文件&gt;1G code=413qiniu v=6.0.9 根据github issue提到，fixed in v7.0.2 更新之后，接口也相应更新，然后同时需要在new qiniu.rs.PutPolicy(options) 的options 设置fsizeLimit, options = { scope: ${bucket}:key, fsizeLimit: 10*1024*1024*1024 } 这样便成功解决上传文件限制大小的问题。","categories":[],"tags":[{"name":"qiniu","slug":"qiniu","permalink":"https://shaohung001.github.io/tags/qiniu/"}]},{"title":"2019-6-13awaitcall","slug":"2019-6-13awaitcall","date":"2019-06-13T04:01:03.000Z","updated":"2020-06-07T09:04:25.935Z","comments":true,"path":"2019/06/13/2019-6-13awaitcall/","link":"","permalink":"https://shaohung001.github.io/2019/06/13/2019-6-13awaitcall/","excerpt":"","text":"js/ts 如何享受async 舒适下远离try{}catch{}1234567async login () &#123; try &#123; await userLogin() &#125; catch (e =&gt; &#123; this.$message.error(e) &#125;)&#125; async 带来了很大的方便，但是try/catch 却破坏了写作的美感。 我们想要这样的: 1234567891011121314151617const callAsync, &#123; call &#125; = require('awaitCall')async login () &#123; // callAsync allows promise as input const [err, response] = await callAsync(userLogin()) if (err) return this.$message.eror(err) // user login successfully&#125;async writeFile (input) &#123; // call allows any function which can be accepted by require('util').promisify with a promise output const [err, res] = await call(fs.write, input) if (err) throw err // fs.write successfully const [openErr, openRes] = await call(fs.open, 'a.txt', 'r+', 0o654) // ...&#125; 以上提供了两个方法callAsync、call。 callAsync 允许输入promise 之后flattern 回调。 call 支持输入function，帮助用户转化为promise 之后flattern 回调(function 必须支持require(&#39;util&#39;).promisify 转化为promise 类型)。 核心代码不多，支持JS、Typescript awaitCall.js 1234567891011121314151617const util = require('util')export function callAsync(promise) &#123; return promise .then((data) =&gt; [null, data]) .catch(err =&gt; [err, null])&#125;export function call(func, ...args) &#123; const promise = util.promisify(func).call(this, ...args) if (typeof promise !== 'object') &#123; return Promise.reject('func should match util.promisify') &#125; return callAsync(promise)&#125;export default callAsync awaitCall.d.ts 1234export module callAsync &#123; export function callAsync&lt;T, U = any&gt;(promise: Promise&lt;T&gt;): Promise&lt;[U | null, T | null]&gt; export function call(func: Function, ...args: any[]): Promise&lt;any&gt;&#125; Typescript 完整实现 awaitCall.ts 12345678910111213141516171819import util from 'util'export function callAsync&lt;T, U = any&gt;(promise: Promise&lt;T&gt;): Promise&lt;[U | null, T | null]&gt; &#123; return promise .then&lt;[null, T]&gt;((data: T) =&gt; [null, data]) .catch&lt;[U, null]&gt;(err =&gt; [err, null])&#125;export function call(func: Function, ...args: any[]): Promise&lt;any&gt; &#123; const promise = util.promisify(func).call(this, ...args) // promise is object type if (typeof promise !== 'object') &#123; return Promise.reject('func should match util.promisify') &#125; const _promise = promise as Promise&lt;any&gt; return callAsync(_promise)&#125;export default callAsync 符合util.promisify 方法特征 \\\\1 输入的方法参数最后一个typeof === &#39;function&#39; \\2 最后一个参数返回的第一个参数，总是err 注意this 指针丢失需要开发主动避免哦 \\\\可以使用 bind(this) 将指针重新找回 \\const bindCall = call.bind(that) \\await bindCall(fs.write, input) \\await bindCall(fs.open, ‘a.txt’, ‘r+’, 0o654) 参考： await-to-js callAsync 思想完全来源于 《await-to-js》，做了点演进。","categories":[],"tags":[{"name":"awaitCall","slug":"awaitCall","permalink":"https://shaohung001.github.io/tags/awaitCall/"}]},{"title":"2019-6-13heroku","slug":"2019-6-13heroku","date":"2019-06-13T03:59:59.000Z","updated":"2020-06-07T09:04:25.934Z","comments":true,"path":"2019/06/13/2019-6-13heroku/","link":"","permalink":"https://shaohung001.github.io/2019/06/13/2019-6-13heroku/","excerpt":"","text":"服务器不放vps换个免费地方放6.1 第一次遇到GFW，很多计划都得往后搁置，不过遇到了就是好事。 我找了AWS，注册送12个月免费服务。扣了我1美金后，看了别的文章说容易一点错就扣费。说申诉还是会退回，不过这就让我觉得不可靠。果断弃坑。找到了我以前使用的heroku, 还是一样的免费，那我用cdn 中转，是不是能解决被限速严重的问题？说干就干，毕竟6.7 高考的人拼命，我也要拼命努力啊。 我使用的是nodejs docker。代码上修改配置文件 package.json12345&#123; scripts: &#123; start: 'NODE_ENV=production node app.js' &#125;&#125; 同时app.js 的app.listen port。该port 使用process.env.PORT(heroku 提供了该port) 下载heroku clisudo npm install -g heroku heroku 登录heroku login heroku container 登录heroku container login heroku container pushheroku container:push web --app ahuang-diary (ahuang-diary 是我的项目名) heroku container release 发布heroku container:release web --app ahuang-diary 代码发布后，可以翻墙测试下是否通畅. 可以使用右上角功能键: Open APP More More 下面有view logs。这个估计是比较有用的。 此时采用CDN 转发稍微加速heroku(感觉速度还是不怎么快，同时使用free 免费heroku，升级hobby 花钱才能使用https)。 使用自定义域名，需要先账号填写信用卡。 dashboard.heroku.com/apps/ahuang-diary 面板下Settings - Domains and certificates 增加http://diary.boqi.ml 下方会生成DNS Target DNS Target 放到CloudFlare 的CNAME 值里面，key 就是diary.boqi.ml 橙云点亮，同时Crypto 置为OFF 这样就成功完成了今天要做的事情了","categories":[],"tags":[]},{"title":"2019-6-13lesson","slug":"2019-6-13lesson","date":"2019-06-13T03:59:21.000Z","updated":"2020-06-15T04:33:07.183Z","comments":true,"path":"2019/06/13/2019-6-13lesson/","link":"","permalink":"https://shaohung001.github.io/2019/06/13/2019-6-13lesson/","excerpt":"","text":"让服务躲在墙后面当前有两种方案，大体一致，不过由于关于联合TLS、Nginx、VVVVVV 等有些知识点可能有欠缺，当前使用他人一键生成。另一种不带TLS、Nginx 的还算方便。 当前处境: 我的ip 已经ping不通了。只能通过CDN 转向我的服务器进行拯救了。 第一种方案: centos 6.x 完全参考了sprov 的博客 123456789101112131415161718191. 前往Freecom 申请一个免费域名2. Freecom ManageDNS 添加`A`记录. eg: www.gogal.ml A 67.230.172.1043. 前往CloudFlare 申请注册一个免费的CDN4. CloudFlare **add** 时，填入二级域名. eg:gogal.ml5. 选择Free 套餐6. 增加子域，同时指向你的ip eg: fuck.gogal.ml 67.230.172.104这时候Status 如果有橙色云朵，代表CDN 已经将你的域名包含进去，此时ping fuck.gogal.ml 出现了CDN 的ip7. 下一步会看到让你修改Nameservers(域名服务器)。其在ManageDNS 左边tab栏，填上那两个值，continue8. 接下来到了CloudFlare CDN 的dashboard。顶部有很多栏目，有两个重要栏目：DNS、CryptoDNS 是管理你的域名，开关你的CDN 需求。Crypto 管理你的TLS 加密与否(默认Full 加密)。这个很重要。前往Crypto 将TLS 置为`Off` 或者Flexible 上面关于前提配置完毕。接下来去你的服务器 前往你的服务器ssh(ip 挂了，但是服务器商会提供页面Interactive，使用root 和你的登录密码进行登录) VVVVVV安装教程 bash &lt;(curl -L -s https://install.direct/go.sh) 这样就安装了VVVVVV。配置目录在/etc/v2ray/config.json 安装完成后，出现PORT、UUID。这两个记录下来，忘记了就cat /etc/VVVVVV/config.json 将端口和uuid 打印出来。 service VVVVVV start &amp;&amp; service VVVVVV status // centos6.x systemctl start VVVVVV &amp;&amp; systemctl status VVVVVV // centos7 关闭防火墙： service iptables stop &amp;&amp; chkconfig iptables off // centos6.x 关闭防火墙、关闭开机打开防火墙 systemctl stop firewalld &amp;&amp; systemctl disable firewalld // centos7 由于我的服务器就在洛杉矶，bbr 什么什么加速我就没开了。 最后一步就是连接了。 服务器VVVVVV/config.json 的inbound参考如： 12345678910111213141516&#123; \"port\": 80, // 很重要，否则CDN 找不进来 \"streamSettings\": &#123; \"wsSettings\": &#123; \"path\": \"/58ff4ec7/\", \"headers\": &#123;&#125; &#125;, \"network\": \"ws\" &#125;, \"settings\": &#123; \"clients\": [ \"id\": \"xxx\", // 通过 /usr/bin/VVVVVV/v2ctl uuid 生成 \"alterId\": 64 ] &#125;&#125; 客户端： 123456789101112Address: fuck.gogal.ml : 443User ID: xxxalterId: 64Security: chacha20那个Tag: 随便填，，标签使用而已NetWork: wstransport settings: WebSocket: path: /58ff4ec7/ TLS: Use TLS TLS serverName: fuck.gogal.ml VVVVVVW VVVVVVX TLS版本环境: centos7 github 一键脚本 首先通过TLS 一键脚本生成，自己整还是挺麻烦。内容包括Nginx 转发配置，OpenSSL 配置TLS证书，VVVVVV配置ssl。 配置完成后可以在clients 字段里面添加更多id。 完成后，在客户端注意点： transport settings - WebSocket栏目 - path 填写对应路径 TLS 打勾，同时填写你的CDN 转换的域名 Network 选ws CloudFlare CDN 的Crypto 置为full。 此时基本很健康，不容易再被打掉(毕竟我ip已经被打掉了)。 这里提一点，不晓得为什么有些电脑就是连不上我的服务器，有些一填就好了，很奇怪。 VVVVVV无法联网特征: 对比他人config 完全一致后仍然无法联网, 该服务器提供的其他例子能正常使用 查询了很多问题，终于将问题聚焦在了端口被占用上。 同时查到这个VVVVVVX 的issue107 https://github.com/Cenmrev/VVVVVVX/issues/107 表现完全一致。 操作如下: 反正接下来也不适用shadowsocks了，于是我就删了在 /Users//Library/LaunchAgents 下为shadowsock.**.plist 的文件。重启一下电脑，于是就完全表现正常了。","categories":[],"tags":[{"name":"VVVVVV","slug":"VVVVVV","permalink":"https://shaohung001.github.io/tags/VVVVVV/"}]},{"title":"2019-6-12kesan","slug":"2019-6-12kesan","date":"2019-06-12T03:57:44.000Z","updated":"2020-06-07T09:04:26.061Z","comments":true,"path":"2019/06/12/2019-6-12kesan/","link":"","permalink":"https://shaohung001.github.io/2019/06/12/2019-6-12kesan/","excerpt":"","text":"考科目三考科目三前，集中加训了一番。前一天晚上(周五)还练到9点多。第二天是第一场，也就是必须在7：30 之前刷卡签到。 周六一早6点出发，到的时候才6：40，手机放托管柜，用身份证拿了张号牌(号牌one)进入等待室。突然肚子痛，屁颠屁颠去厕所(plz,厕所门关不上的那种老厕所，哈哈). 等了会，开始分配打乱顺序，分到的前往下一个候考室。去了排了好长队。到我时，按了个手印，拿了张号牌(号牌two)，进到一个小房间，哇，里面坐满了人。每人身上披一个淡绿色小马甲，都是挂在凳子上的。 开始考试了。一个大叔进来根据液晶屏分配的号牌two 每次选4个人。我很巧，搞好有同一个教练分配的学生。 一个安全员老大叔等4个人坐满，一溜烟就载我们到了一号线考场。一个女生先考。打指纹、绕车一周、考灯光、都ok。开始走了，一路上看她开的还ok，前方一个公交站牌估计是刹车早了一丢丢，然后电子设备显示正在连接网络。然后大叔就让菇凉靠边。菇凉一脸懵，我就默默记住这个点，似乎会有踩早的状况。然后所有项目重做，然后继续出发。出发后方有车，她一直在右侧开，我觉得她再开下去可能会不合格: 在非考试道路长时间行驶。幸好她看到左侧安全拐过来了。 她继续行驶，有些规则还是不熟，看得出来，不过都ok。然后车子最后一个左拐时，就提示成功了，她吁了口气，不然两次机会就完了。 接下来就是我啦。我在菇凉停车地方上车。一切按教练教的，不慌不忙。打卡，下车走一圈，绕车一周，绕车时，似乎没听到考试机器叫有学员通过。当时风很大，我以后只是没听清，坐上车，系好安全带，然后考试机器就报重考。我擦，我都还没考呢。。。我刚才特意死命戳那个按钮了。好吧，下车再来一次，这次死命戳，发现还是没声音，很纳闷，往车内看，用眼神问学员(就是同教练那个学员)，学员摇了摇头，说明还是没有检测到有学员通过。然后我再用力死命戳，侧耳听，终于听到了有声响了。报了才安心通过。 哇，这是个大坑。之后做完灯光，左侧有车，我就一直等，等到没车了，才慢悠悠出发。一路上小心谨慎，毕竟只有一次机会。起步、公交站台刹车、路口刹车一个都不能错。加减档位、加速5挡、会车、掉头、靠边停车、超车、直线行驶、右转弯、掉头(掉头完立马就有个公交站台, 这时二挡就要踩刹车)，左拐，这时考试机器又报正在连接网络，我擦，我挂了，这声音和之前我挂了是一个样的。过了一会，说通过考试，请靠边停车。我擦，幸福来得太美好。下车之后提醒后面考试学员，右后方那个按钮，贼难按。 幸亏一起考的学员，眼神提示。不然两次全挂在啥都没考，就要滚回去了。我不能不过，没时间花在这里啊。基本科三过了，就等于学车告一段落了。好好赚钱钱咯，，哇卡卡卡。","categories":[],"tags":[{"name":"科目三","slug":"科目三","permalink":"https://shaohung001.github.io/tags/科目三/"}]},{"title":"2019-6-11lesson","slug":"2019-6-11lesson","date":"2019-06-11T03:56:43.000Z","updated":"2020-06-07T09:04:26.070Z","comments":true,"path":"2019/06/11/2019-6-11lesson/","link":"","permalink":"https://shaohung001.github.io/2019/06/11/2019-6-11lesson/","excerpt":"","text":"记一次上线应用遇到的问题做更新服务器代码优化，上线的一次经历 表现：使用multy 解析data 文件，文件下来了，但是服务器总是没拿到。 前几个版本都是完全没问题的。我线下测试环境完全没问题，这个是最奇葩的。 然后伟哥在k8s那里切换可运行的包；我对比对比之前版本代码，没发现头绪，就想着去docker 容器内部搞搞。然后一直没头绪，然后脑残了一把：rm -rf packages/ 本来我是想packages/uploads/下的，因为packages 目录不熟悉，我跑到packages/ 这里来运行sh. 运行完那一瞬间，你懂的，我突然又反应过来，我的天，之前填的测试数据全部没了。我擦咧。 突然脑残的可以。 更脑残的是，之前更新服务一直报上传上去的文件找不到，删了之后又可以。你说，这是不是让人更摸不到点了。 然后伟哥找到两个版本不同差异，一个能使用，一个不行。然后就看了里面的代码不同点。 最后发现我在拆分一个方法成为3个中间件时，第一个中间件取值有误，没发现。 也就是我的代码是有问题的(js 就是这毛病)。但是我先下服务器是正常的、删了测试服务器/packages 下也正常了。 郁结，郁结。 最近做公司功能时总是会出现bug感悟由于上周、最近有点忙，冲刺科目三、完成自己服务的基础设施、尚未完全适应公司业务、同时负责好多个端的前后端，等等，写完了功能，没有去好好测试，导致做的产品总是有这个那个小问题。 这次做完后，不急着上传，在可能涉及到的功能区点点试试(还没适应单元测试),于是就这样还发现一些bug。 有些原因是，修改bugs 改动了其他代码，导致波及到其他功能区，引用区。 在没有进行完整的单元测试情况下，多点点还是有必要的，相信自己总是会出错的。 接下来很重要的，就是多完成功能测试，毕竟面向的是客户(我这里还是没有测试人员的)，不然出了问题就小麻烦了，哈哈 提几点代码上的建议： 命名规范一定一定要统一，是驼峰就一定要保持，是下划线就一定要保持 命名逻辑一定要符合 最近感触良多，工作生活体悟良多2019/6/3 公司要更新以前的Chrome 拓展JS编辑器。我体验了从开发、初次打包。然后继续开发完成后，到最后完整build 的流程。 最终使用Gulp 一次构建完毕应用。 这次体验极佳，虽然中间很多次很多次的碰见南墙，但是没有回头路。 本来听老大说要招一个人来做，不过觉得让我试试会更好，我当然义不容辞，好好给他整好来。 当前使用ace 库制作用户输入简易脚本编辑器，完成JavaScript、Iced 输入代码，高亮、切换主题，然后点击运行得出结果。 当前仍然继续维护。。。 这几天似乎临近6.4.好多好多的伟皮恩 被干掉，我们公司三个公用的，全部报废。我手上的唯一一个挂了。然后不服气的我充值再买一个ip，想成为RMB 玩家，然后还是敌不过。两次被封，实属让我心力憔悴。第二次被封情景：我为了查资料，就开了一会，就我一个人用，用资料啊。查知识，学知识如果是犯法，那中国活该一万年都是发展中国家，把柄永远捏在美国手里。 然后今天努力了一天，采用了别人牛逼的思路。让我的服务器死而复生。待我细细道来。","categories":[],"tags":[{"name":"脑残","slug":"脑残","permalink":"https://shaohung001.github.io/tags/脑残/"}]},{"title":"2019-9-6zatan","slug":"2019-9-6zatan","date":"2019-06-04T04:16:22.000Z","updated":"2020-06-07T09:14:20.397Z","comments":true,"path":"2019/06/04/2019-9-6zatan/","link":"","permalink":"https://shaohung001.github.io/2019/06/04/2019-9-6zatan/","excerpt":"","text":"机器人，也称为未来人，将会取代人类成为新的统治者最近两年，由于为了生活质量的提高，学习、工作都很晚。老婆也是，加班到很晚。两人晚上回到家，已经累瘫了。 但是人有种很奇怪的行为: 越累，越抗拒躺床上休息，烦恼大、压力大，抗拒。这是大城市病吧。 这个病持续了很久，直到最近，我作为家长，做出表率: 我已经给路由器设置了晚上11点自动关闭网络的操作(家长机还可以，其他全部没网), 这个不能怪我不给你看视频了，是机器做的。 于是接下来的日子，时间都是11点，俩人不能不放下手机，要不背背书、处理处理家务、洗洗澡就上床睡觉了。 这里的路由器没有任何思维、动作，他接受人所设定的做他本职工作，切断对应ip 进出口数据。那和机器人有什么关联？ 人的思维和现在AI 里边使用的级联器很类似，我不熟知AI，不过之前看到OpenCV 里面的级联器的时候，我就有思考，未来级联器再配上AI 训练，那就是人，一个会思考的人。 我们称之其为“机器人”。这个机器人会思考，加点存储空间、加点缓存，同时，永不死亡，这就绝对不会是人所能比拟的。 我们会让机器人干脏活、累活、不辞劳苦活、不要命活。我们会让机器人陪伴。我们会教机器人。 我们给机器人爱人类、不能伤害人类等的命令。 我们在工程学里面经常会使用极限推导、极限思维来做预测，我们先给出一个命令：让人类活的更久。 让自己活的更久，在当代医学也难以更进一步的命题。人终有一死：秦始皇去世、李世明去世、朱元璋放心的去了、朱棣死在军营，现代多少有钱大佬花了无数作为却也没有成就，只不过，多延缓。 那我们再叠加给一个命题，机器人也没找到方法。那机器人只能使用: 人类，滚去锻炼身体；人类，去工作就不会无聊；人类，去旅游，不用再学了，我们机器人帮你们做所有苦事劳事。 这个就很像我们家的情景: 内心是知道自己应该早睡早起，但是身体抗拒，内心其实也打击抗拒。这时，沉浸在互联网世界的我们被互联网门卫挡住，让我们乖乖的回到现实世界。无可奈何，我们俩都没话说。 之上的命题是，机器人终将取代人类，同时给出了机器人其实是”爱人类”的。 不过，会不爱吗？答案是肯定的，肯定会有不爱。为什么？ 小孩在一开始也是一张白纸，思考随着时间、周遭而改变。 机器人有级联器，从无到有的数据也如小孩一般。小孩有依靠、到被抢夺依靠、到愤怒；那机器人也会有。 机器人一开始会被领回家，被照顾，但是世间总有各种意外：美国持枪、伊朗战乱、东亚人民严重分配不均，反正生活是苦的，总有各种各样机器人的依靠离去、死去。而他们终有一日，没明白生活再苦，还是要过生活的道理，会有部分团结、反抗。这是必然的。 战争总是意外，成王败寇。战争的事情不必预测，我知道，未来是一定会有战争的。 就像古代多少的战乱、各种理由、没有对错、只有成败。 只是，这是未来的战争，由人类引起的现代知识向固有的思想发起的战争罢了。 人总要打仗的，换个法子罢了，换个样子罢了。","categories":[],"tags":[{"name":"杂谈","slug":"杂谈","permalink":"https://shaohung001.github.io/tags/杂谈/"}]},{"title":"2019-5-10lesson","slug":"2019-5-10lesson","date":"2019-05-10T00:02:51.000Z","updated":"2019-05-10T00:07:46.000Z","comments":true,"path":"2019/05/10/2019-5-10lesson/","link":"","permalink":"https://shaohung001.github.io/2019/05/10/2019-5-10lesson/","excerpt":"","text":"passport实现oauth2登录【个人中心】流程 首先服务器增加入口路由 /auth/${project} 权限为public。这样前段可通过curl -X GET host/auth/${project} 进入到此方法. 配置route: 12345&#123; path: &apos;/auth/$&#123;project&#125;&apos;, method: &apos;GET&apos;, middleware: [passport.authenticate(&apos;$&#123;project&#125;&apos;)]&#125; App.ts 设置passport 123456789app.use(cookieParser())app.use(session(&#123; ... // set up session&#125;))app.use(passport.initialize())app.use(passport.session())passport.use(Auth.$&#123;project&#125;Strategy) // 划重点passport.serializeUser(Auth.serializeUser)passport.deserializeUser(Auth.deserializeUser) 前往Auth 增加${project}Strategy 配置和回调 123456export default class AuthClass &#123; public static $&#123;project&#125;Strategy = new AAStrategy(StrategyOptionsRequest, async (req:Request, accessToken:string, refreshToken:string, profile:any, done:Function) =&gt; &#123; req.session.userProfile = profile._json || &#123;&#125; done(null, false) &#125;)&#125; AAStrategy 是要重新配置的class，稍后说明；StrategyOptionsRequest 为需要输入的options。配置请查看Oauth2Strategy.StrategyOptionsWithRequest。 AAStrategy 制作 1234567891011121314151617181920212223export default class AAStrategy extends Oauth2Strategy &#123; private _userProfileURL:string constructor (options:IStrategyOptions, verify:Oauth2Strategy.VerifyFunctionWithRequest) &#123; // IStrategyOptions extends Oauth2Strategy.StrategyOptionsWithRequest super(options, verify) this.name = &apos;$&#123;project&#125;&apos; this._oauth2.useAuthorizationHeaderforGET(true) let urlParams = `$&#123;checkAspect_id&#125;=$&#123;encodeURIComponent(options.clientID)&#125;&amp;` // checkAspect 为您目标工程的要求；不要忘记最后一个**&amp;** this._userProfileURL = `$&#123;config.authUrl&#125;/api/user/?$&#123;urlParams&#125;client_secret=$&#123;encodeURIComponent(options.clientSecret)&#125;&amp;` // 不要忘记**&amp;** &#125; public userProfile (accessToken:string, done:any) &#123; this._userProfileURL = this._userProfileURL + (`access_token=$&#123;encodeURIComponent(accessToken)&#125;`) this._oauth2.get(this._userProfileURL, accessToken, function (err:any, body:any, res:any) &#123; if (err) &#123; return done(new InternalOAuthError(&apos;Failed to fetch user profile&apos;, err)) &#125; done(null, &#123; _raw: body, _json: json &#125;) &#125;) &#125;&#125; 路由重定向回本地认证登录 由于我们在填写IStrategyOptions 时，options.callbackURL 填写为${config.authCbURL}/auth/${project}/callback 那么我们在路由增加: 123456789101112&#123; path: &apos;/auth/$&#123;project&#125;/callback&apos;, method: &apos;GET&apos;, middleware: [passport.authenticate(&apos;$&#123;project&#125;&apos;, &#123; failureRedirect: &apos;/auth/login&apos; // 划重点，重定向回来之后会调用/auth/login &#125;)]&#125;,&#123; path: &apos;/auth/login&apos;, method: &apos;GET&apos;, middleware: [Auth.authLogin]&#125; 123456789101112public static authLogin (req:Request, res:Response) &#123; if (!(req.session.userProfile &amp;&amp; req.session.userProfile.email)) return res.redirect(&apos;/login&apos;) req.session.userProfile = null ... do something like 1. UserModel.findOrCreate(userProfile) defer err, user 2. req.login(user) return res.redirect(&apos;/user/home&apos;)&#125; 1234567&#123; path: &apos;/profile&apos;, method: &apos;GET&apos;, middleware: [(req:Request, res:Response) =&gt; &#123; res.status(200).send(req.user) &#125;]&#125; 以上服务端方面全部完成。 流程也是比较直观的。 最后的routeRoute 是为了给前端作为判断成功与否的作用。 1 &lt;&lt; 1, 1 &lt;&lt; 2 权限位偏移使用机器计算2进制偏移位来比对用户的权限位。 比如: 1231 &lt;&lt; 1 === admin,1 &lt;&lt; 30 === public,1 &lt;&lt; 31 === anon 结果是，权限卡槽最好至多放32个(计算机可能是为32bit) 判断时，只需在对应权限位进行与或对比即可 微信web登录，内测配置公司在审核通过后，微信后台配置域名：ip.gogal.ml:5700这样便可做到本地开发。注意:5700 同时服务器callbackURL：http://ip.gogal.ml:5700/auth/weixin/callback 这样即可完美跳转callback。 记录下2019-4-26晚上学科目三犯的错1 换挡 上5挡时，出现挂错3档位 2 抖动 换挡时，出现抖动。要先上档位速度，然后踩离合挂到对应档位，送离合，稳住油门。 3 进入待转区、转弯12345转弯、掉头时，到前方一定距离，稳定车速在20多一点点，打转向灯，一定要稳住方向盘3s不动.然后在实线前左转进入待转区。速度稳住.在一定距离时，踩离合踩刹车，车头快盖住线时停下。1挡出发(转弯上2挡), 有“打半圈”、“打一圈少一点”、“一圈半少一点” 4 靠边停车 靠边停车，在听到声音后，“开右转向灯3s”、“方向稳住不动”、“减速到1挡”、“然后方向盘向右稍微倾斜”、“车子线方向靠”。 车头感觉车身和线重合，后视镜位置看着差不多，否则停下之后还可微调。 “确认停好后”，回空挡拉手刹。这时会提示挺好出发。 “打左转向灯3s”、“打左半圈”、“上2挡”、“上3挡” 在路上想到一个问题在路上，我骑车时闯一个红灯10s，到下个路口时，刚好红灯10s。 如果我等，那刚刚闯红灯是赚了还是赔了。 如果我直接闯，那我是赚了多少时间？ 上线vueyarn build npm install -g serve serve -s ./dist //本地先查看是否OK 将dist 文件目录放到服务器。之后nginx 指向该目录地址 再讲一遍vue build 上线的全过程检查当前环境确认好 /src/service/http 设置axios 的default.baseURL 由于本人服务器及后台代码配置为 https://gogal.ml/stratege/。路由为 /api/xxx 那么axios的基本路由配置为： 123456789101112131415161718192021if (process.env.NODE_ENV === 'development') &#123; axios.defaults.baseURL = '/api'&#125; else &#123; axios.defaults.baseURL = '/stratege'&#125;如果是本地测试环境，那么你需要到/config/index.js 里面修改dev/proxyTable:dev: &#123; ... proxyTable: &#123; '/api': &#123; target: 'http://localhost:$&#123;your port&#125;' // 或者https://gogal.ml/stratege secure: true, changeOrigin: true, pathRewrite: &#123; '^/api': '' &#125; &#125; &#125;&#125; 这样服务器才能找到同个域名下的api. 确认好webpack 配置的uglifyjs 是开启的/config/index.js 里面出现的 *sourceMap 都改为false 这样线上代码就不会裸奔啦。 开始buildyarn build 完成之后，先本地测试一遍： npm install -g serve serve -s ./dist 然后点一点，玩一玩。 这时确认ok后，将dist 目录下的favicon.ico index.html static 目录 放到服务器 /var/www/目录下。【Filezilla】 配置nginx.conf1234567891011121314151617181920212223242526272829303132333435363738394041...http &#123; include /etc/nginx/mime.types; default_type application/octet-stream; log_format main &apos;$remote_addr - $remote_user [$time_local] &quot;$request&quot;&apos; &apos;$status $body_types_sent &quot;$http_referer&quot;&apos; &apos;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&apos;; access_log /var/log/nginx/access.log main; sendfile on; keepalive_timeout 65; server &#123; listen 443 default ssl; server_name www.gogal.ml gogal.ml; ssl on; ssl_certificate ??? ssl_certificate_key ??? # managerd by Certbot root /var/www; index index.html index.htm; location / &#123; root /var/www; index index.html index.htm; try_files $uri $uri/ /index.html; # 作用是vue刷新 不会出现404 等情况 &#125; location @fallback &#123; rewrite ^.*$ /index.html break; &#125; location /stratege/ &#123; proxy_pass http://127.0.0.1:$&#123;your server port&#125;/; &#125; &#125;&#125; vim /etc/nginx/nginx.conf service nginx restart 以上便能成功啦。 曾经我问过一个成功人士(我),你为什么如此成功?成功人士(我)回答我说，当你是商人时，你便做商人的事。如果你不知道你要卖什么，那你就应该去做技术，然后将技术当成你的商品，从小做起。你没得选择。 不怕劳苦。当身边的人一再厌恶你的穷病时，一定要坚持住自己的理想。 是的，穷病，比抽烟吸毒杀人，还要可怕。而你空怀一身绝技没法及时变现。 你要的很多，你的身体却制约你。时常感到时间不够用，加班加点，但是一觉睡下去却远远不够。 成功人士，便是熬过最穷苦，依然坚持自己的愿景，含着泪坚持下去的人。 极度的黑暗，就是天明之时。 曾经的你，未来的我？现在的我？ 希望未来能放下手中工作消遣时，回头看看这时的感叹。2019-4-30 aker mongodb 出现error - [test] UncaughtException: E11000 duplicate key error collection: authServer.users index原因是设置unique 字段时，在多个doc 里面仍然有出现null 数据。 网络很多人都是建议删除数据库重来、删除索引等等。都没能解决此问题。 这时，使用sparse 稀疏索引 以解决此问题。 Vue axios POST 请求时 会使用OPTIONS 同时解决跨域问题OPTIONS 的解决方案： 12345678910axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8'axios.interceptors.request.use( config =&gt; &#123; if (config.method === 'post') &#123; config.data = qs.stringify(config.data) &#125; return config &#125;&#125; 使用qs 同时在header 里面申明使用的格式 跨域使用Chrome 浏览器插件Moesif CORS 即可解决 ！！！！注意开发时注意，本机为黑苹果，遇到一个特别的情况： 昨天还能正常使用，开发dev，突然怎么改vueProject/config/index.js - proxyTable 都没用。 最后解决方法：使用一个新的域名代替localhost，重设置到/etc/hosts. 1234567891011121314151：sudo vim /etc/hosts &amp;&amp; 新增 127.0.0.1 test.company.com2：修改proxyTable: &#123; &apos;/api&apos;: &#123; target: &apos;http://test.company.com:$&#123;your port&#125;&apos;, secure: false, changeOrigin: false, pathRewrite: &#123; &apos;/api&apos;: &apos;/&apos; &#125; &#125;&#125;3: 修改vueProject/config/index.js - dev: &#123; host: &apos;test.company.com&apos;&#125; 原因： 估计是本地DNS 有缓存。一直提示如下 [HPM] Error occurred while trying to proxy 或者 axios 请求成了：POST http://localhost:${frontend port}/api/method, 服务器始终报错(本人处报：EBADCSRFTOKEN) 最终修改完成。好开心啊。 En: I meet [HPM] Error occurred while trying to proxy request just today.finally solve it. Scene: Yesterday, VueProject worked well. Git checkout back to some week ago, still didn’t work( Used to be working well ). Until this step save me: 12345678910111213141: sudo vim /etc/hosts &amp;&amp; 127.0.0.1 test.company.com # any host is available2: edit VueProject / config / index.js - proxyTable: &#123; &apos;/api&apos;: &#123; target: &apos;http://text.company.com:$&#123;your server port&#125;&apos;, secure: false, changeOrigin: false, pathRewrite: &#123; &apos;/api&apos;: &apos;/&apos; &#125; &#125;&#125;3: edit VueProject / config / index.js - dev: &#123; host: &apos;test.company.com&apos;&#125; 上线express + vue 两种方案express vue 分开发布Nginx location / { root: 放Vue 路径 } Nginx location / app { proxy 端口 } 此时只要Vue 的axios.defaults.baseURL = ‘/app’ 以上分离很好使。但是同时维护两个，做法不太正规。 express vue 使用res.sendFile Nginx 反向代理端口即可下面都是重点： 123456789101112131415161718docker 目录：/dist /app.js /routes/ /index.js 路由 /public/ /index.html /static/1: Vue 前段yarn build 之后，基本不需要其他操作// 下面这句话res.sendFile 时，发送static 文件，找寻的目录.// 否则pc 报`Uncaught SyntaxError: Unexpected token &lt;`2: backend/app.ts - app.use(express.static(path.join(__dirname, &apos;public/&apos;)))// 下面这句话重点: public 不要写错，不要写错，不要写错// root 不是route，不是route，不是route3: backend/routes/index.ts - res.sendFile(&quot;index.html&quot;, &#123; root: path.join(__dirname, &apos;../public&apos;)&#125;) __dirname your current excuse file path process.cwd() your project root path 以上终于解决！！！ 昨天VPS 里面的数据库Mongodb 早上还有数据，下午突然没有了很疑惑，如果不知道原因，之后再出现就会有大问题。于是看了看里面的表。 知道傍晚，发现里面有张表很奇怪：叫做hacked_by_unistellar 我似乎没有搞过这个表啊。 进去一看：db.restore.find() 显示我之前的表被脱裤，要钱，联系unistellar@hotmail.com 邮箱。 幸好数据不多。知道什么原因，那就好搞了。 首先，数据库没设置密码，那为什么会暴露在公网。 我启动mongo 语句是docker run --name mongo -p 27017:27017 mongo 如果是直接使用mongod 那么启动时默认分配的是127.0.0.1:27017 如果是docker 启动的话，不指定ip，docker 会直接暴露在公网，任何人直接ip + 27017 或者mysql 的3306 直接就脱裤了。 正确语句是：docker run --name mongo -p 127.0.0.1:27017:27017 mongo db.createUser({ user: ‘akerdi’, pwd: ‘my-fucking_password’, roles: [ { role: ‘userAdminAnyDatabase’, db: ‘admin’ } ]}); 正确思考Mongo 是什么。数据库实质上是一个管理物理数据的软件，充当管理介质。 那么上面很重要的点是，mongo 需要配置文件。 docker run -p 27017:27017 -v /mongo_configdb:/data/configdb -v /mongo_db:/data/db -d mongo # 这里重点是将配置文件映射到相应的目录。之后所有映射过来的都会使用相同配置 docker ps # 找到对应containerId docker exec -it containerId mongo admin # 进入mongodb 或者 docker exec -it containerId bash 之后 mongo &gt; use cool_db #mongo 内部环境，使用cool_db 为例 &gt; db.createUser({ user: &apos;aker&apos;, pwd: &apos;your password&apos;, roles: [{ role: &apos;readWrite&apos;, db: &apos;cool_db&apos;}] }); &gt; exit $ docker stop containerId &amp;&amp; docker rm containerId # 之后使用 --auth 之前的mongo 软件介质不需要了 # 这时使用之前映射的目录，便是相同的配置，同时mongo 还带有验证 # 127.0.0.1:27017 可以使ip 映射局限本机，否则为0.0.0.0:27017 # --rm 使mongo 在stop 时自动删除 doceker run --name mongo -d -p 127.0.0.1:27017:27017 -v /mongo_configdb:/data/configdb -v /mongo_db:/data/db -d --rm mongo --auth 参考自： https://www.jianshu.com/p/2181b2e27021 https://stackoverflow.com/questions/34559557/how-to-enable-authentication-on-mongodb-through-docker","categories":[],"tags":[]},{"title":"2019-3-25lesson","slug":"2019-3-25lesson","date":"2019-04-24T23:41:43.000Z","updated":"2019-04-24T23:41:54.000Z","comments":true,"path":"2019/04/25/2019-3-25lesson/","link":"","permalink":"https://shaohung001.github.io/2019/04/25/2019-3-25lesson/","excerpt":"","text":"安装黑苹果制作黑苹果至关重要的一步：选对硬件示例操作硬件： cpu: i7 8700k (不要用AMD，不好装) \\motherboard: Gigabyte Z370HD3P (推荐) \\显卡: 独显 GTX 1050ti (推荐Rx560，拆机显卡不贵，不知道链接问本人) 好了，如果你是这硬件，你就完成80%了，否则移步tonymacx86找找对应硬件的配置等。安装步骤都是一样，配置和驱动不同而已。 准备材料 苹果官网下的一个.dmg 系统文件。(比如high sierra 10.13.6) 一个16G左右U盘(系统盘大约6G 左右) Clover EFI bootloader 下载地址 Clover configuration 下载地址 本教程默认使用Mac 环境下操作，制作U盘；Windows 操作google之，步骤类似。本教程为纯净版Vanilla 方法(大神取得名字)至简安装方案. 生成U盘启动器下载对应系统百毒云 10.13.6 下载地址(下载慢找我，不要花钱买百毒云会员) 双击系统.dmg 文件，安装成为app，移到/finder/Applications 制作U盘启动器(白苹果U盘启动器)打开-Mac磁盘工具，点击顶部显示所有设备，找到你的U盘，点击抹掉 U盘取名macinstaller 格式为Mac OS Extended(Journaled) -&gt; Mac OS 拓展(日志式) 方案: GUID分区图 完成后退出 打开terminal sudo ${系统.app 拖到此处}/Contents/Resources/createinstallmedia –volume /Volumes/macinstaller 前面是系统盘制作路径，后面volume 空间是抹掉取名为macinstaller 的U盘路径 然后就是开始加载，时间比较久，直到出现Install media now available at &quot;/Volumes/Install macOS high sierra&quot; 黑苹果引导Clover之前制作白苹果步骤完成。下面使用Clover 转黑苹果 Clover EFI bootloader 下载地址 点击下载的Clover 介绍 - 继续 请先阅读 - 继续 目的宗卷 - 更改安装位置：选择我们的白苹果U盘 安装类型 - 安装 安装 - 选择(仅安装UEFI 开机版本、安装Clover 到EFI 系统区)(UEFI Drivers 下拉仅选择VBoxHfs-64、ApfsMemoryFix-64、AptioMemoryFix-64) ,其他都不选；然后点击安装 安装完成关闭 config.plistClover configuration 下载地址 Mount EFI - Efi Partitions - U盘分区 - 点击Mount Partition 并输入电脑密码 Mount EFI - Efi Partitions - U盘分区 - 点击Open Partition 打开文件夹 EFI - CLOVER - config.plist 使用Clover configuration 打开 Kexts Installer - OS Version下拉选择Other Kexts Installer - 选择Lilu、WhateverGreen、FakeSMC 点击下载 步骤【5】下载完弹出框，选中全部的5个传感器全部install 新的config.plist替换现在U盘Mount的EFI - CLOVER - config.plist clover configuration 打开U盘的Mount的EFI SMBIOS 选择iMac17.1 U盘启动器至此全部完成 安装黑苹果BIOS设置 Intel Virtualization Technology: Enabled (docker 要用) \\Vt-d:disableXHCI Handoff: enabled (不然USB 等设备没法识别) \\Fast Boot: Disabled \\Secure Boot/OS Type: Other OS (有就选) \\SATA to AHCI \\Boot 启动使用U盘 Partition 安装过程 在Clover 引导界面选择名为Boot macOS Install from macOS high sierra(默认第一个) 安装进入verbose 啰嗦模式 会自动重启几次 之后进入macOS Utilities(macOS 使用工具) 使用磁盘工具抹掉磁盘 点击顶部显示所有设备，找到你要安装硬盘，点击抹掉：名字取macos；类型：【1】 U盘取名macinstaller【2】 格式为Mac OS Extended(Journaled) -&gt; Mac OS 拓展(日志式)【3】 方案: GUID分区图 回到macOS Utilities 界面，选择Install macOS 【确定】【确定】之后，选择你要安装的安装盘macos 安装过程会重启几次，确保从硬盘启动而不是U盘启动(默认帮你选好了，确定下即可) 选择国家界面选中国 然后一直点下一步，能跳过则跳过。之后再设置。 创建电脑账户(这个名字一定要取好，之后不好改；有mac 系统的大bug) 替换U盘启动EFI 至硬盘启动EFI clover configuration - Mount EFI - 挂载Mount U盘、macOS 的EFI分区 将U盘的EFI 整个替换硬盘的EFI文件夹 拔出U盘 重启启动Boot 使用硬盘的Partition 启动 查找驱动黑苹果难就难在找驱动，通过查找通用驱动为例。 屏幕左上角🍎 - 关于本机 - 系统报告 查看确实的驱动 \\比如缺失以太网卡、音频 \\去主板官网确认网卡声卡的型号 \\比如Gigabyte z370 HD3P - 产品规格 - 音效 - 内建Realtek@ ALC1220 那么下载AppleALC \\网卡驱动 NVIDIA webDriver驱动可以直接安装对应驱动：NVIDIA webDriver 如果是集成显卡UHD Graphics 630： clover configuration打开硬盘EFI - CLOVER - config.plist Devices &gt; FakeID &gt; IntelGFX = 0x59128086 Graphics &gt; ig-platform-id = 0x59120000 Graphics &gt; 打钩Inject Intel(似乎有点重要,否则还是会闪,显卡7M) SMBIOS &gt; Select iMac17.1 有双屏幕需求的，DVI + HDMI 插上没反应的可以试试： Clover configuration - Graphics - NVCap: 04000000 00000100 0E000000 00000007 00000000 Video Ports: 2 关闭啰嗦模式： Boot - Arguments 删除-v 驱动安装方法把下载下来的.kext 驱动放到硬盘的EFI - CLOVER - kexts - Other 下，重启即可生效。 参考黑苹果麦金塔 tonymacx86 windows 制作mac参考 tonymacx86 - i7 8700k tonymacx86 - Nvidia webDriver windows 制作mac参考2","categories":[],"tags":[]},{"title":"2019-4-22lesson","slug":"2019-4-22lesson","date":"2019-04-24T23:40:34.000Z","updated":"2019-04-24T23:42:22.000Z","comments":true,"path":"2019/04/25/2019-4-22lesson/","link":"","permalink":"https://shaohung001.github.io/2019/04/25/2019-4-22lesson/","excerpt":"","text":"记录最近将近一个月的生活 新工作进展的很顺利。我们老大实力很强，为人也相当平顺。简直就是佩服这些老大。我表示，我的人生轨迹永远都是运气超级好的那个，很神奇。比如，我考大学；学计算机；做网管；出来实习iOS；iOS的几年；碰到可爱的老婆；生了个阿黄；转岗顺利。不过好运大家都有，都围绕自己转，不过很多人没去努力抓住罢了。可能中间哪里间歇，断档了，那当然好运就断了。就比如，有时你会发现，你过红绿灯，一路都是绿灯。刚进公司完成这几个大功能（老大分配的任务非常适合我成长，循序渐进那种）： 注册增加nickname 网页界面显示版本号 mongo 对日志保存一年 用户下载软件，保存日志 用户绑定手机号，填写验证码。绑定、解除绑定、登录二次验证过程，oauth登录页面二次验证(第三方库参数外部输入) vue 提取component 管理员 管理用户界面-管理员增加筛选功能 完成后端接口请求次数限制功能 修改浏览器退出，再进入页面，此时却需要重新登录bug(主要前段bug，cookie 存在内存中，web客户端死了，便需要重启了) 解决用户登录后退出，frontend 会多次请求profile bug 提供客户端VMProtect 接口。实现【1】 管理员输入secret 等；【2】和脚本(keyGen)交换信息返回客户端 完成多个license 增加、修改 用户授权页面排序(前段加后端) backend抽取license 模块 增加editor 编辑者权利范围 将个人中心 重写成Typescript 工作中是如此。尽我最大努力去学习、熟悉、解决错误。 学科目二大概4、5次就去考试了，最重要的是压离合，压的我腿都酸了。考试前一周日，我选择400块套餐，教练带着我走了1、2、3号线真实考试场景；本来有意再花500块，考试内的考试教官一些特殊服务，但是想想自己试试，应该没太大问题的(看来是对的，其实教官就是在出发时，对你很温柔-交钱了嘛；倒车时稍微喊一喊，其他没什么帮助，省了一笔巨款)。科目二19.4.2 早早去考场，拿完号再去转了一圈,就去考场坐着等考试.轮到我进去，把号拿了，手机放到柜子去一个房间等。好多人在门前等在叫号，一些人先去考了，有高兴的回来的，有沮丧不开心的。我看着他们，内心平淡。然后过了很久，大概要叫到我了吧，开始有一丢丢紧张，然后我告诉自己，我有不得不过的理由，不能把时间耗在这里。方法很有效。我的叫号到了”一号线“，我平淡的前往车子，启动，慢慢往前，还是和压离合一样。第一个坎：倒车入库。我把车子最高点对准前方标杆，倒车时肩膀线对准水管头，往右打死，慢慢倒车。发现有压线的可能，于是我把方向盘往左打一些，然后再往右打死，然后车子还是压线了，挂了。很不甘心，后面都没尝试就挂了。然后见没人喊，我就继续把左边倒库试一遍。发现管理台有人喊我回原点重考。好吧，于是我开回去，让师傅调试重考了。 重考时慢慢往前，前面转弯处有两辆车堵在那里，蛋疼，还没从刚才失败情绪中，但是我要将其转化为动力，我有不得不过的理由！前方通车，我往前，得，倒车有一个菇凉考试，那就停在那里等她。等了好久，那姑娘考完倒库，没挂，然后从左边出库。？what？左边是入口咋出去！于是她前倒后倒，把自己时间超时，被考官喊回去了。悲伤的故事。 轮到我了，我慢慢往前，把车子摆正，最高点正对标杆。倒退时，肩膀线正对水管头，稍微再过10公分(有个过度黑框)然后右打死。慢慢倒着，然后进来后，发现没叫，说明没问题。于是出库，肩膀线对准左边第一个柱子，左打死。倒车时，肩膀线对准左边一个标志物，左打死，车子慢慢倒入库中，左肩膀线对准一个框框内，停稳。没叫，没叫说明我安全了。于是我小心的出库，往前侧方停车。路上左后镜保证不压线即可，最高点正对一个模糊的线。往前有个标志点对准肩膀线停下。往后倒，肩膀线对准左边一个砖头，右打死；左后镜看到第一个黄黑交接，方向盘回一半，再看到一个黄黑交接，反向盘回完，往后倒，左轮轧着晃条，左打死，再慢慢退，注意看右后视镜中车身和线平行，停下，回空挡，拉手刹。出库时，先上一档，出发，然后最高点对准标志物回完，稍微往前一点，右打死，车身快摆正时回完。这个地方要小心，很窄，容易压线，否则就挂了。这两个最麻烦的完了，接下来好很多。前方是直角转弯，一路有点小激动，腿有点小抖。激动也要完成，不能松懈！最高点最准，肩膀线到标志物左打死，成功过关。下一关坡道定点。我上去时，最高点对准，左侧不能压线，那就往有一点点，扣分就扣分吧，然后最高点肩膀线对其。fuck，左边两辆车，看不见！不过老子高啊！！！我看得见歪脖子树！！！于是安安全全停下。拉手刹3s，放下手刹，慢抬离合，稳住离合，慢放刹车。又成功。下一个s弯。s弯算是比较好过的，一定要慢，科目二就是学习压离合，慢，蠕动，反正不限时，不要停下被扣分就可以了。s弯过去最后一格障碍物有点突出稍微小心，往左拉一点，然后往右拉一点，进入窄路掉头。窄路掉头其实挺宽的，倒的时候稍微多贪心一点点，安全就好，然后很平顺就出去了。出去时，小心别压线。难得都没了，接下来是上海多考的3项：进隧道、模拟高速停车打卡、紧急情况处置。(我再窄路掉头就已经开启灯了，管他呢，想怎么开就怎么开，不算扣分的，教练说)，倒数第二个栏关掉灯光。模拟高速停车打卡，离合位置对准路上钉子，到位停车，回空挡拉手刹，然后上一档，放手刹。出发时稍微往右点(不然之前往左靠拢可能继续前行不小心碰到线，挂了)。紧急停车，就是听到播报，立即停车然后打开紧急灯光，闪8下，继续往前。往前就回到原点了。教官出来说我考通过了，我想问多少分，他说过了就好了，管他多少分。算了，心情好，不知道无所谓，我没给教官好处，肯定是这个态度。哈哈。社会是用钱打通的。给同是张教练一起考试的同学大拇指，成功，给她们点安慰和鼓励。我出去和张教练报喜，顺便等另两位考试菇凉好运。一起的另一个大叔，第二次考还是失败，没有模拟过。好懊悔，一直表示，还是要模拟，等会就去模拟。然后两位菇凉出来，也说没过。悲伤的故事，今天考试的就我一个通过了。回去上班去了，心情大好。","categories":[],"tags":[]},{"title":"2019-3-27lesson","slug":"2019-3-27lesson","date":"2019-04-24T23:40:25.000Z","updated":"2019-04-24T23:42:09.000Z","comments":true,"path":"2019/04/25/2019-3-27lesson/","link":"","permalink":"https://shaohung001.github.io/2019/04/25/2019-3-27lesson/","excerpt":"","text":"connect-mongo 用户登录后杀死浏览器,用户还得重新登录 - bug 解决过程表现为用户正常登录。cookie、session 被正常记录。把浏览器关闭又打开时，需要重新登录。 猜测： cookie 没有记录 不对，记录了。front 在SignIn时Cookies.set(&#39;secret&#39;, userInfo)。每次打开时都是有的。 session 没有记录 流程对的。cookieParser、expressSession、passport.initialize、passport.session、passport.serilizeUser、passport.deserializeUser 但是注意到mongo 的session 表里面，expires、originalMaxAge 等都为null,说明session 写进去了，但是设置session expire 方式不对： 1234567891011121314151617app.use(expressSession(&#123; name: secret maxAge: expireTime&#125;)以上设置过期时间方法不对，可以使用下面两种方法之一：[1] 全部永久统一设置expressSession(&#123; name: secret: cookie: maxAge: expireTime //这是统一设置方式的正确方式&#125;)[2] 灵活设置session过期时间用户确认登录后，使用req.session.cookie.expire = expireTime 以上正确的解决了session 设置过期问题。 然后接下来尝试登录操作。发现登录后，退出浏览器，重新打开浏览器并进入页面，发现又打开了登录页。 难道问题还在？首先排除之前已经成功解决了cookie session 设置问题；是backend 有问题还是frontend 有问题？ 这时尝试使用浏览器打开某个没有界面的接口时，居然打开了，同时返回了用户的基本信息！说明后端的确没有问题，后端将cookie 认证过后的信息正确的返回了。 后端校验没有问题，那么该问题就可能由frontend产生，frontend自己验证，自己处理了该route？ 尝试找了下源码，确实发现了其在route.beforeEach(SPA 第一次加载或者重刷新调用)方法中，自我检验了一番，但是却缺少验证信息，自己误判自己。 从上面分析得到，全栈工程需要先各自分析问题由来和可能出处。当都有问题时就会很难判别，这时可以从一些不正常的地方打开突破口，一个个解决后，才能知道靠近真相。 这也是我第一次跟着老大一起改第一个大bug。自己没能贡献太多帮助，测试过程方法不熟练、分析来由不清晰、尝试过程比较靠蒙。 多多努力啊，努力才是回报老大苦心栽培！！ U盘格式为Fat32 最多只能4G 左右内容Mac 大文件总是复制不进U盘，是因为Fat32格式原因。但是格式为NTFS 格式时Mac 又识别不了。 解决：取github 下载NTFS X；或者Mac 里面的NTFS 操作软件即可识别并进项curd 操作。 同局域网传输文件方法PC.A在相关文件夹使用Python 打开权限python -m SimpleHTTPServer 8000 意思是打开8000 端口。此时另一台打开浏览器，输入${PC.A.ip:8000}即可进入该文件夹。同时选取对应文件即可下载 terminal zsh 翻墙vim ~/.zshrc # 修改terminal 源文件 12alias proxy=&apos;export all_proxy=socks5://127.0.0.1:$&#123;port&#125;&apos; # port 一般为1080；查看：- 偏好设置 - 高级 - 本地Socks5监听端口alias unproxy=&apos;unset all_proxy&apos; 12source ~/.zshrccurl cip.cc # 显示了国内地址 12proxycurl cip.cc # 已翻墙的地址 unproxy # 关闭翻墙 参考 centos6增加Swap分区1.检查swap大小和硬盘空间 free -m 2.添加交换文件 mkdir -p /opt/temp # 增加内存为2G dd if=/dev/zero of=/opt/temp/swap bs=1024 count=2048000 3.创建交换空间 mkswap -f /opt/temp/swap 4.启动新增加的2G交换空间 swapon /opt/temp/swap 5.修改/etc/fstab 使新加的2G交换空间在系统重新启动后自动生效 echo &quot;/opt/temp/swap swap swap defaults 0 0&quot; &gt;&gt;/etc/fstab 6.重新启动系统 reboot 参考 Dockerfile 容器不能连接另一个容器的端口错误原因是自身错误，情况：我以前就是写127.0.0.1 连接本地mongo、redis，但是我忘了我以前使用的是docker-compose 我现在不想用docker-compose，操作是使用真实物理地址, 如192.168.1.2、server Ip，反正不能为127.0.0.1 即可。 这样即可成功，仅仅只是这个错误. 导致我一个大中午在：构建容器400多M、上传容器、运行-出错，反复。本地debug运行都是可以连接的。然后我本地使用容器，咦，果然连不上。 重新Certbot-auto域名过期，重新搞了个免费的域名:gogal.ml 官网控制台等会还要用到，需要填写certbot token 首先去certbot 官网，我选择centos6-nginx 于是是这里-直达 12345678$cd ~/$mkdir download &amp;&amp; cd download$wget https://dl.eff.org/certbot-auto$sudo mv certbot-auto /usr/local/bin/certbot-auto$sudo chown root /usr/local/bin/certbot-auto$sudo chmod 0755 /usr/local/bin/certbot-auto$pip install certbot-nginx 到这里需要先前去nginx.conf 填写对应443 的server_name。 比如：server_name www.gogal.ml gogal.ml;下面会用到 $/usr/local/bin/certbot-auto –server https://acme-v02.api.letsencrypt.org/directory –manual –preferred-challenges dns –installer nginx -d *.gogal.ml -d gogal.ml # gogal.ml 就是我的域名 前几句都可以直接忽略，yes or enter 直到出现这句： 12345678- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Please deploy a DNS TXT record under the name_acme-challenge.gogal.ml with the following value:EfurJLgnrwahc7g_6k7odGVXp6sffOruJaDceBdiAmUBefore continuing, verify the record is deployed.- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 这时将里面那个拷贝到freenom 控制台-managedns Add Records name 填 _ACME-CHALLENGETarget 填 ${你自己得到的那个，比如EfurJLgnrwahc7g_6k7odGVXp6sffOruJaDceBdiAmU} 回到ssh 按下enter 键，之后还有几步都没那么关键了。 这时你用postman 可以测试，之前的都是可用的了。 这里提一点：一开始我碰到certbot 升级的问题 123456789101112131415Saving debug log to /var/log/letsencrypt/letsencrypt.logHow would you like to authenticate with the ACME CA?- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -1: Nginx Web Server plugin (nginx)2: Spin up a temporary webserver (standalone)3: Place files in webroot directory (webroot)- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -Select the appropriate number [1-3] then [enter] (press &apos;c&apos; to cancel): 1Plugins selected: Authenticator nginx, Installer NoneObtaining a new certificatePerforming the following challenges:http-01 challenge for gogal.mlClient with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS.Client with the currently selected authenticator does not support any combination of challenges that will satisfy the CA. You may need to use an authenticator plugin that can do challenges over DNS. 我就是直接前往官网，下载最新的certbot-auto 即解决了。 利用Vue 2.x Templates(Legacy) 脚手架搭建项目Vue 官网 yarn global add @vue/cli-init vue init webpack &lt;my-project&gt; 接下来就可以愉快的写了","categories":[],"tags":[]},{"title":"2019-2-19lesson","slug":"2019-2-19lesson","date":"2019-02-18T16:04:38.000Z","updated":"2019-11-12T09:35:48.892Z","comments":true,"path":"2019/02/19/2019-2-19lesson/","link":"","permalink":"https://shaohung001.github.io/2019/02/19/2019-2-19lesson/","excerpt":"","text":"记录最近学习nodejsV8引擎 对类操作的加速V8 引擎是google 邀请巴克为chrome 写的通用js底层引擎。V8 创建类采用aClass = {}，如果有新的属性，则会生成一个隐藏bClass = { this.name = “b” }， 同时将aClass 指向bClass。aClass 会因为js 的GC 技术稍后销毁。这将带来巨大的性能优化。 最佳做法：一次性声明aClass 属性，且尽量不要用 delete 方法。 CommonJS 类如何分割web 全局有window，node 全局有global属性。相当于var a = 0;全局都会有a属性。CommonJS 采用给每个被加载出来的js文件都变成某个函数： 1234(function() &#123; var a = 0; var name = aKer;&#125;)(); 这时就变成一个个模块。 js 定义类的方法：参考自：https://www.cnblogs.com/meteorcn/p/node_mianshiti_interview_question.html pluz，我背诵上面的参考网址就去面试js了。运气爆棚。 123456789101112131415161718192021222324252627282930313233343536373839404142434445构造函数方法定义类function Person() &#123; this.name = \"aKer\"&#125;Person.prototype.sayName = function () &#123; alert(this.name) &#125;var person = new Person();person.sayName()对象创建方法定义类var Person = &#123; name: \"aKer\", sayName: function () &#123; alert(this.name); &#125;&#125;var person = Object.create(Person);person.sayName();极简主义法(参考自 阮一峰博客), 推荐使用var Cat = &#123; createNew: function() &#123; var cat = &#123;&#125;; cat.name = \"aBai\"; cat.makeSound = function () &#123; alert(\"mmm\"); &#125;; return cat; &#125;&#125;var cat1 = Cat.createNew();cat1.makeSound();这时继承就会如：var Animal = &#123; createNew: function() &#123; var animal = &#123;&#125;; animal.sleep = function() &#123; alert(\"sleep\"); &#125;; return animal; &#125;&#125;var Cat = &#123; createNew: function() &#123; var cat = Animal.createNew(); cat.name = \"aHei\"; cat.makeSound = function() &#123; alert(\"mmm\"); &#125;; return cat; &#125;&#125;var cat1 = Cat.createNew();cat1.sleep(); js类继承方法： 原型链法 123456789function Animal() &#123; this.name = \"animal\";&#125;Animal.prototype.sayName = &#123; alert(this.name);&#125;function Person() &#123;&#125;Person.prototype = Animal.prototype;Person.prototype.constructor = new Animal; 属性自制法 123456function Person() &#123;&#125;for (prop in Animal.prototype) &#123; Person.prototype[prop] = Animal.prototype[prop];&#125;Person.prototype.constructor = \"Person\";//or new Person 构造器应用法 123function Person() &#123; Animal.call(this);&#125; js常用设计模式：单例，工厂，代理，装饰，观察者模式 单例 工厂：同样形式参数返回不同实例 12345678910function Factory() &#123;&#125;Factory.prototype.getInstance = function(className) &#123; return eval(\"new\" + className + \"()\");&#125;function Person() &#123; this.name = \"Person1\"; &#125;function Animal() &#123; this.name = \"Animal1\"; &#125;var factory = new Factory();var person1 = factory.getInstance(\"Person\");var animal1 = factory.getInstance(\"Animal\"); 代理 观察者 实现一个简单的http服务器123456var http = require(\"http\");http.createServer(function(req, res) &#123; res.writeHead(200, &#123; \"Content-Type\": \"text/html\" &#125;); res.write(\"aaa\"); res.end();&#125;).listen(3000); child_process spawn 123var cp = require(\"child_process\");var child = cp.spawn(\"echo\", [\"you\", \"hellow\"]);child.stdout.pipe(process.stdout); fork 123456789101112131415fork-parent.jsvar cp = require(\"child_process\");var child = cp.fork(\"./fork-child.js\");child.on(\"message\", function(msg) &#123; console.log(\"parent get message from child\", msg);&#125;)child.send(\"parent send msg to child\");fork-child.jsprocess.on(\"message\", function(msg) &#123; console.log(\"child get msg from parent:\", msg); process.send(\"child send msg to parent to ask for money!\");&#125;) 判断用户密码时要注意什么123456function checkApiKey(apiKeyFromDb, apiKeyReceived) &#123; if (apiKeyFromDb === apiKeyReceived) &#123; return true &#125; return false;&#125; 比较密码时，不能泄露任何信息，因此比较必须在固定时间完成。否则，可以使用timing attacks来攻击你的应用。为什么会这样呢?Node.js使用V8引擎，它会从性能角度优化代码。它会逐个比较字符串的字母，一旦发现不匹配时就停止比较。当攻击者的密码更准确时，比较的时间越长。因此，攻击者可以通过比较的时间长短来判断密码的正确性。使用cryptiles可以解决这个问题:1234function checkApiKey(apiKeyFromDb, apiKeyReceived)&#123; return cryptiles.fixedTimeComparison(apiKeyFromDb, apiKeyReceived)&#125; \bMySql 索引为什么SELECT 速度快\b引自廖雪峰大大 索引的效率取决于索引列的值是否散列，即该列的值如果越互不相同，那么索引效率越高。反过来，如果记录的列存在大量相同的值，例如gender列，大约一半的记录值是M，另一半是F，因此，对该列创建索引就没有意义。\\\\可以对一张表创建多个索引。索引的优点是提高了查询效率，缺点是在插入、更新和删除记录时，需要同时修改索引，因此，索引越多，插入、更新和删除记录的速度就越慢。\\\\对于主键，关系数据库会自动对其创建主键索引。使用主键索引的效率是最高的，因为主键会保证绝对唯一。 随机生成密码方法12345678910111213141516171819202122232425262728function randomString(length)&#123; var charset = &quot;ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789&quot;; var i; var result = &quot;&quot;; var isOpera = Object.prototype.toString.call(window.opera) == &apos;[object Opera]&apos;; if(window.crypto &amp;&amp; window.crypto.getRandomValues) &#123; values = new Uint32Array(length); window.crypto.getRandomValues(values); for(i=0; i&lt;length; i++) &#123; result += charset[values[i] % charset.length]; &#125; return result; &#125; else if(isOpera)//Opera&apos;s Math.random is secure, see http://lists.w3.org/Archives/Public/public-webcrypto/2013Jan/0063.html &#123; for(i=0; i&lt;length; i++) &#123; result += charset[Math.floor(Math.random()*charset.length)]; &#125; return result; &#125; else throw new Error(&quot;Your browser sucks and can&apos;t generate secure random numbers&quot;);&#125;alert(randomString(10)) BDD/TDD 区别\b此为其他处转载，忘记出处，侵权删 BDD是一种敏捷软件开发的技术。它对TDD的理念进行了扩展，在TDD中侧重点偏向开发，通过测试用例来规范约束开发者编写出质量更高、bug更少的代码。而BDD更加侧重设计，其要求在设计测试用例的时候对系统进行定义，倡导使用通用的语言将系统的行为描述出来，将系统设计和测试用例结合起来，从而以此为驱动进行开发工作。 柯里化函数\b此为其他处转载，忘记出处，侵权删 ES 5的 bind()方法。在pomelo的一些demo 里面可能会不理解这么一句话session.on(‘closed’, onUserLeave.bind(null, this.app)); var onUserLeave = function(app, session) { if(!session || !session.uid) { return; } app.rpc.chat.chatRemote.kick(session, session.uid, app.get(‘serverId’), session.get(‘rid’), null);};你可能会有这样的疑问 为什么onUserLeave 会有两个参数? 函数的bind() 第一个参数null 什么什么意思，结合第一个问题，这里就传了一个参数？那么那个session 还是怎么传过来的？ 这个函数 bind() 方法是ES 5 新增的一个特性。用于将函数绑定到某个对象上。那么这里bind()的方法的作用是什么呢？要明白这里的bind()的用法，首先我们需要了解一种函数式编程技术—柯里化（currying）Wiki是这么定义的: 在计算机科学中，柯里化（Currying），是把接受多个参数的函数变换成接受一个单一参数（最初函数的第一个参数）的函数，并且返回接受余下的参数而且返回结果的新函数的技术。为了帮助理解这里写一个小例子(来自于Javascript 权威指南第六版 p191)var sum = function(x, y){ return x+y;}//创建一个类似于sum的新函数，但this的值绑定到null//并且第一个参数绑定到1， 这个新函数的期望只传入一个实参var succ = sum.bind(null, 1); console.log(succ(2)); //输出 3； x 绑定到1，并传入2作为实参 //另外一个做累计计算的函数var sum2 = function(y ,z){ return this.x + y + z;} //绑定this 和 yvar bindSum2 = sum2.bind({x : 1}, 2);console.log(bindSum2(3)); //输出 6； this.x 绑定到1，y绑定到2， z 绑定到3.上面这个例子就是柯里化的应用了，现在我们回到pomelo看下，chatpomelo例子里面怎么使用这个柯里化技术。现在，应该能解决开头的第一个问题了，那么第二个问题，我们需要阅读一下pomelo的源码阅读源码sessionService.js 464-478从这十几行代码和柯里化的知识，我们就能够明白为什么onUserLeave为什么会有两个参数了。var onUserLeave = function(app, session){ }最后的参数是通过柯里化的技术把单参数 session 传到我们多参数函数里面。 CentOS6 Nginx 配置免费sslCertbot12345mkdir /root/download/cd /root/download/wget https://dl.eff.org/certbot-auto#设置权限chmod a+x certbot-auto 这时得到certbot-auto 文件夹 ./certbot-auto –nginx #这里会对nginx 服务器配置，同时会对conf 文件修改(中间出现ImportError: No module named virtualenv, $pip install virtualenv) 1234(certbot-auto renew 刷新)//lsgood.top *.lsgood.top为我的域名，请填写自己的域名certbot-auto certonly -d *.lsgood.top -d lsgood.top 修改nginx.conf：server { listen 443 default ssl; server_name lsgood.top; ssl on; ssl_certificate xxxxxxxxx;#这个会被自动填写,是ssl 的公钥 ssl_certificate_key xxxxx;#同上,是ssl 的私钥 #其他不用设置可以 } 在设置 certbot 的时候需要注意碰到以下单词时，是需要到域名解析后台修改文件： Please deploy a DNS TXT record under the name _acme-challenge.lsgood.com with the following value:\\\\xxxxxxxxxxxxxxx\\\\Before continuing, verify the record is deployed. 这意思是让你在继续下面之前，确保域名解析后台增加了以_acme-challenge 为前缀的子域名，同时将xxxxxxxxxxxxxxx 拷贝至里面的记录值一栏（记录类型为TXT） 参考: https://juejin.im/post/5b07c42c51882538c2203b2f#heading-2 https://segmentfault.com/a/1190000017081357","categories":[],"tags":[]},{"title":"2019-1-20lesson","slug":"2019-1-20lesson","date":"2019-01-20T23:23:42.000Z","updated":"2019-01-20T23:34:04.000Z","comments":true,"path":"2019/01/21/2019-1-20lesson/","link":"","permalink":"https://shaohung001.github.io/2019/01/21/2019-1-20lesson/","excerpt":"","text":"最近记录及经历记录下最近忙的事情： 面试后台 vps 重启导致没进入centos 系统，同时需要重启ssserver 公司组织活动 面试后台2019/1/17 晚上6:15 赶紧从锦江乐园开着那个破小电驴赶去仙霞路。终于在约定7点前3分钟到达亩的地。进入后，笔试+机试。笔试有 module.epxorts 有什么特点 2个Node.js API 有什么区别 Node.js 使用什么库可以创建原生服务器，代码。 Node.js 子程序、子程序生成和沟通 js 什么是回调，如何防止回调地狱 机试 express + pug + vue.js 12345678index.jadetemplate. ...布局scripts. ...scripts输入&quot;[&quot;a&quot;,&quot;1&quot;,&quot;2&quot;,&quot;1&quot;,&quot;b&quot;,&quot;3&quot;,&quot;4&quot;,&quot;a&quot;]&quot; 将输入的文本传到后台，后台进行去重、排序得到[“1”,”2”,”3”,”4”,”a”,”b”]然后传递回前台展示 做这题的时候vue.js 基本都会，但是pug 的混合有点懵。express 没有watch file 更新服务器的便利，我给加了supervisord 库。给的电脑是linux系统，键盘啥的，却都是windows 的操作。好烦，一直用ctrl+s，这啥玩意。一直担心这次修改的代码是未同步的。字又很小很小那种、没有鼠标使用触控板，那个垃圾触控板啊。外面又很吵。 反正最后我只剩下“排序、去重”这俩 面试经理认为去网页找就好了的功能，我自己认为还算完成度高的（我还加了比如responseFormat、util、controller 分出操作）。中间有个卡了点时间的地方：.jade template 里面想import 一个库，不行，最后找到ajax post 方法。 之后面试经理问了些工作经历、一些别的知识点等等。 做完面试，从晚上7点搞到了近晚上10点了都（确实时间长了点，不过跟环境有关吧，我自己环境搭起来，那就会特别特别爽，很快就能好，毕竟能断点嘛）。然后骑着已经一点电都没有的电驴推了好长一段路，幸好幸好没有下雨。推一会，骑一会，终于找到充电点，才终于回到家了。 第一次后台面试，感觉能胜任，没啥。我现在还在做一个资源下载网页、真·聊天软件。这几天给他整好来，我觉得明年年初必定能很OK！！！ vps重启、ssserver 启动首先我vps（搬瓦工CN2 专线）安装两次系统，导致重启之后，先点击左侧“terminal interaction”，然后会有新开一个网页版的操作交互页面，在提示“ESC”时， 需要按ESC 键进入选取系统页面，选取自己的server（我安装centos 6 x86），然后就可以进入centos 操作系统。 ssserver 我这里参考这篇git issue 12ssserver -c /etc/shadowsocks.json -d startssserver -c /etc/shadowsocks.json -d stop 新的公司“哇塞运动”公司组织活动时间：19.1.18 ~ 19.1.19地点：苏州半岛阳澄湖酒店事件：公司组织年会，团建 早上坐了一个半小时的大巴到达。休息半小时后，每个人先在一个大面板签字，留影。接着是茶话会，点评公司优秀员工，主管点评员工，回顾一年来事迹、点滴。 茶话会快结束了，还有剩余时间，我提议“成语接龙”，10s 没接上成语的同学发红包。玩了几圈，已经接近11点半，大家意犹未尽，但是还是抓紧休息时间，12点集合午饭时间。 中午饭简洁实在：吃饱。下午有活动，所以主要还是吃饱，晚上才是重头戏，不能和晚上抢了风头。有些同学还会有嫌弃说简陋，但是见其也吃的不多，这也是我疑惑的地方。人果然都是不同的，我是来则安，而总会有人嫌弃这嫌弃那，而自己却又服务得不多。 我做好自己的角色就好了，更不必理会不同的心声。 吃完饭，回酒店休息了下，那40分钟，终于把我的ssserver 重启回去了。提一点：酒店的网络估计国家有监管，百度搜索很多稍稍敏感东西都被屏蔽了，感觉不到gov 的意图，总觉得很多小丑想在我身边窥视我的一举一动。浑身不自在！ 中午2点集合，集体出发去酒店附近的草地做运动。首先大家分队，做些热身运动。接着分成的两组开始接力跑。我们这组输了，原因有2：我们这组妹纸多一个；开头有个同学返回时没把接力棒传递，延迟数s之久。开心即好。 接下来我们还是2队比拼过跳绳速度。这个在接下来体现在团队合作。比如黑洞同学加油，减少错误率，手感好的同学，多个一起进入，加速进程。我们这队先跳，有几个”黑洞”同学，但不敢置信的是二队的黑洞才是最厉害的！着实拖着队友，哈哈。 这两个游戏之后，还有三个游戏：报数抱团，毒圈丢球，撕名牌。 报数抱团：中间同学报数，然后其他队友围成圈，报数时其他同学报成对应数字。我怎么输的，在第三波时，数字8，我站过去是9，只能牺牲小我牺牲啦。 毒圈丢球：全员分成四个队，中间一个队伍，其他三个队使用软球，将中间队伍砸下。 撕名牌：大家身穿小外衣，两队颜色。背后由正反胶贴着自己的铭牌。大家分成两队，根据时间，慢慢缩小毒圈。大家互相开撕。 这里说几个有意思的：撕的铭牌，那个黏度，三个男的扯都扯不下来。我当时被三个人撕都撕不下，哈哈，活到了最后。我觉得人事部一个小姑凉撕的人可就多，好多人被她撕撕撕。我一直躲躲躲，躲到了比赛最后，\b胜利✌️。这游戏包括了好几波，都快喘不过气了。玩的没心没肺啊，如同回到大学时期。公司强项不愧是做策划执行的，线下的执行简直没话说的。 大家玩完之后回酒店休息了下。没一会去吃晚饭。 晚饭吃的就稍微更好了。这次喝的酒也稍微多了一些，米西米西。好吃的有一个小虾米，很嫩很滑口；苏州必带鸡汤么；烤猪脚很香；期间蒋总、翟总述说自己往事，公司建立来由，张总10年没放弃。2005年创建“点傲”，2014启动哇塞，合并为“冠脉堂”。期间张希亮，张总喝多了，说点傲团队，人员坚持下去，\b十年后还是大家伙，张总自己掏钱给留着的伙伴5w报答。确实，这就是新兴的互联网不能比的。互联网人，自身难保，随时可能被开，还想着自己留在公司？？（耳边有些小伙伴传来问是冠脉堂全员吗？小声嘀咕问。有这想法的人，看来年龄尚浅，未来前路只能在他人鼻息下留存啊） 吃完之后回到酒店休息了下，就已经要晚上的晚会表演了。我们技术部本来要彩排一下的，已经来不及，直接开始了。 我在这也有个小项目，就是唱革命人永远年轻这首歌。这首红歌，是大学红歌比赛时，我作为领唱，身后都是老师、院长、同学们，台下是几千人的同学，当时的我激动、紧张，使得我不经意间，不自觉、无法控制的腿抖。这次我要打破自己，表达自己。 其实我在粉粉的时候就有多次code review、技术分享，在实践，表达，突破。这次很成功的表演（会不会是人比较少的原因，再也没有腿抖，也没有丝许不安？应该不是吧，哈哈）。 翟总为我们深情朗诵，蒋总给我带来一曲古典的梨花颂。这首歌我高二的时候特别喜欢，喜欢不得了，现在老了，在工作场景耕耘，眼前早已不是夜景烟花，桃色满目了。我们技术部有俩节目。有一个”兔子舞”，得了，崩盘。之后我们大合唱明天会更好,只能凭借真诚，最好还好，收了场。边表演节目，边抽奖，反正我是没能拿到什么奖，阳光普照吧。我觉得一等奖倒是挺意外，而且老板们脸都要绿的那种。平时最不干活，干活老喊累，推诿，能力最差的前端同学得到了，哈哈，我觉得老板脸，不是很好看，哈哈。 接下来大家吃东西，唱歌，那玩个游戏。有个人带上眼罩，转三圈，然后在场地抓人，抓到人之后要猜出试谁。这个游戏也挺好玩的，我一直没被抓到过，之后一次请缨，有意思。这期间有个哥们为了猜出另一个哥们是谁，上上下下摸了个遍，都快亲上去了。哈哈 基本这天就这么过去了，第二天回上海，然后那天下午，我们还加了半天班，想猴头菇了。","categories":[],"tags":[]},{"title":"2019-1-5lesson","slug":"2019-1-5lesson","date":"2019-01-05T13:12:41.000Z","updated":"2019-01-10T00:16:54.000Z","comments":true,"path":"2019/01/05/2019-1-5lesson/","link":"","permalink":"https://shaohung001.github.io/2019/01/05/2019-1-5lesson/","excerpt":"","text":"Dockerfile install very slowAccording to this artical, I resolve an issue that i have to load all node_module files very time; This method help with: building the same package.json and and same file path, would never ever to load every file again, but first would still very slow. do step: first add your .dockerignore with: 123456.git.resultsscript*Dockerfile*node_modulespackage-lock.json then: 123456789101112131415161718FROM node:8.12.0-alpineARG NODE_ENV=developmentENV NODE_ENV=$NODE_ENVWORKDIR /watchvideo_serverCOPY package.json yarn.lock ./COPY . /watchvideo_serverRUN yarnUSER nodeEXPOSE 9526CMD [\"yarn\", \"start\"] 123456789101112131415161718192021222324version: &quot;3&quot;services: mysql: build: ./mysql restart: always ports: - &quot;4444:3306&quot; watch: build: . hostname: watch command: yarn debug volumes: - ./dist:/watchvideo_server/dist - ./package.json:/watchvideo_server/package.json - ./yarn.lock:/watchvideo_server/yarn.lock ports: - &quot;9526:9526&quot; - &quot;9222:9222&quot; depends_on: - mysql links: - mysql environment: - DATABASE_HOST=mysql I’m making a media siteWhen 2018.6, I decided to make some games to try earning some money and advertise. But gov said NO: gov suddenly gave a notify, field of game would become more difficult. OK, when 2018.12, I change my mind to make a media site to provide some picture sources and ability of watching video. But gov immediatly gave notify: master of BT video site was caughted and get 3 year of prison with 80w RMB ticket. Ability of IT worker is very difficultlly control by zh gov, so they afraid of any man is out of control. If you feel comfortable with that ease, you will done soon or later. I’m would never be. Man become povertyMan dare to chanllenge for fight, but during recent couple of year, harsh enviroument is expressing more tough to not getting close to the civilization and ability. Man died by kind of poverty. Poverty caused by not treating them as power, but treating tasty word as governance model. So Man deserve poverty by not taking seriously of bazoo? fucking bazooer!!!","categories":[],"tags":[]},{"title":"2018-12-31lesson","slug":"2018-12-31lesson","date":"2018-12-31T23:39:20.000Z","updated":"2019-01-09T21:12:00.000Z","comments":true,"path":"2019/01/01/2018-12-31lesson/","link":"","permalink":"https://shaohung001.github.io/2019/01/01/2018-12-31lesson/","excerpt":"","text":"一年的最后一天,补一个日记。希望明年真正做到盈利。汪汪汪 New VPS Centos6 config//查看系统位数file /bin/lsgetconf LONG_BITuname -a || uname -r service docker start/stop (当前为1.7.1)https://stackoverflow.com/questions/35385853/yum-install-error-dockeryum install http://yum.dockerproject.org/repo/main/centos/6/Packages/docker-engine-1.7.1-1.el6.x86_64.rpm这个包才是存在的 yum install -y wget centos 6 安装Nginxhttps://www.cyberciti.biz/faq/install-nginx-centos-rhel-6-server-rpm-using-yum-command/ 之上一直因为centos6 的epel-release 这个扩展源 老是装不进，所以在安装一堆东西时，总是显示“nothing to do”。我一直以为EPEL 是装进去的，而且是最新的，然而并没有安装进去。https://unix.stackexchange.com/questions/153566/installing-epel-repository-on-centos-fails123rpm -ev epel-release-6-8.noarchyum updaterpm -ivh http://dl.fedoraproject.org/pub/epel/6/$(uname -i)/epel-release-6-8.noarch.rpm 安装入这个后，yum 源就有python-pip 了","categories":[],"tags":[]},{"title":"2018-12-24lesson","slug":"2018-12-24lesson","date":"2018-12-24T12:59:02.000Z","updated":"2019-01-09T21:13:02.000Z","comments":true,"path":"2018/12/24/2018-12-24lesson/","link":"","permalink":"https://shaohung001.github.io/2018/12/24/2018-12-24lesson/","excerpt":"","text":"购买了一个服务器，折腾了一天给相关环境整理了下。123OS: centos 6 x86_64 # docker 一定要64位服务器采用docker + koa + mongodb前端采用Next.js + mobx + antd 组合 服务器配置由于docker 在centos6 下只能采用1.7.1 版本，导致docker-compose 只能采用1.5.2 版本。 环境要求：python2.7.12;.yml file version为1 参考博文 服务器Dockerfile: 123456789FROM node:8.12.0-alpineWORKDIR /serverCOPY . /serverRUN npm installEXPOSE 9527CMD [\"yarn\", \"start\"] 123456789101112131415mongo: image: &quot;mongo:3.6.9-stretch&quot; volumes: - ./data:/data/db ports: - &quot;27017:27017&quot;web: build: . command: npm start volumes: - ./dist:/server/dist ports: - &quot;9527:9527&quot; #我就想用这个端口 links: - mongo package.json/script: 1234567\"scripts\": &#123; \"watch\": \"tsc -w -p ./src\", \"debug\": \"nodemon --watch ./dist --inspect=0.0.0.0:9222 --nolazy ./dist/www.js\", \"docker-debug\": \"docker-compose up\", \"start\": \"node ./dist/www.js\", \"mocha-test\": \"mocha -t 8000 --recursive \"&#125; 运行docker 出现iptables failed - No chain/target/match by that name 12iptables -t filter -N DOCKERservice docker restart mongodb 总是连不上 12345678910111213141. docker-compose.yml 的links 不能缺少2. mongoose.connect(db_url) 的db_url 确认是docker-compose 的image 名。如我的&quot;mongo&quot;3. 失败重连const connectWithRetry = () =&gt; &#123; console.log(&quot;MongoDB connection with retry&quot;); mongoose.connect(db_url, options).then(() =&gt; &#123; console.log(&quot;MongoDB is connected&quot;); &#125;).catch(err =&gt; &#123; console.log(&quot;MongoDB connection unsuccessful, retry after 5 seconds.&quot;); setTimeout(() =&gt; connectWithRetry(), 5000) &#125;)&#125;connectWithRetry(); 服务器在vscode debug 参考vscode 原文我是原文 Nextjs 配置接下来是nextjs 推送记录 nextjs 编译环境有要求：RAM 1G 我服务器就1G，不然编译的时候会报”code 137”,提示内存不足，同时导致服务器mongodb 一直弹提示centos mongodb [ftdc] serverStatus was very slow: { after basic: 163, after asserts:。 解决办法是采用开发机器yarn build 后，将.next 文件夹git commit ，然后同步过来。 nextjs 使用pm2 start: 1234567#https://github.com/zeit/next.js/issues/109# for developmentpm2 start npm --name &quot;next&quot; -- run dev# for productionnpm run buildpm2 start npm --name &quot;next&quot; -- start nextjs 需要在域名根目录运行， 否则出现static 静态路由找不到。其他route 也会找不到的情况。 nginx 配置如: 123456789101112131415161718192021server&#123; listen 80 default_server; server_name www.lsgood.top lsgood.top; root /var/www; index index.html index.htm; location ~^/facicon\\.ico$ &#123; root /var/www; &#125; location / &#123; proxy_pass http://localhost:9005; proxy_http_version 1.1; proxy_set_header Upgrade $http_upgrade; proxy_set_header Connection 'upgrade'; proxy_set_header Host $host; proxy_cache_bypass $http_upgrade; &#125; location /japeneeza/ &#123; proxy_pass http://127.0.0.1:9527/; &#125;&#125; nextjs 没有storage；同时 server side 获取不到cookie 12345678910111213yarn add js-cookie cookieParsercookie set get cookie (自行参考cookie 保存token)eg: jsCookie.set(\"token\", $&#123;token&#125;)server.js(express)const cookieParser = require(\"cookieParser\")server.use(cookieParser())然后在pages 里的pageClass.getInitialProps = async function (&#123;ctx&#125;) =&gt; &#123; cosnt &#123; req &#125; = ctx; console.log(\"token:\", req.cookies.token)&#125; 让你知道技术的力量A: 什么？不相信我的能力？A(咆哮): 我要让你们知道 the ability of super technology!!! 门外, 砰砰砰: 开门，查水表. A: 大家快点收拾东西，藏起来，丢到窗外，快点快点。。。","categories":[],"tags":[]},{"title":"2018-12-9lesson","slug":"2018-12-9lesson","date":"2018-12-09T12:08:50.000Z","updated":"2019-01-09T21:13:36.000Z","comments":true,"path":"2018/12/09/2018-12-9lesson/","link":"","permalink":"https://shaohung001.github.io/2018/12/09/2018-12-9lesson/","excerpt":"","text":"2018-11-20最近有所感悟：你的工资起点、增长点 不在于你的能力大小，而是在于你职位的不同。 先说说我和以前同事（周）对比：他是做nodejs、我是做iOS；他往服务器深度拓展，我往客户端in/out 和多媒体，我觉得能力上互有所长，互有高低，基本持平；但是工资的起点，企业认可点也是不同的。 再比如现在来到这家初创型公司，我从四年努力过来，也成为了当前同事年龄最大那一批人了。能力我觉得应该是最强的，但我仍然还只是iOS 开发，就是苦力劳动者；我旁边是“产品经理”，年龄与我相仿，但交流之中便知是半路出家，可还是丝毫不影响他作为“经理”的角色。很多产品的处理、遇到问题的解决方案、思路都没成形，但是一些团队中遇到问题，却需要他来解答。 当然，小公司，就是这样，我当然也没必要在乎这些点，感想感悟罢了。 小团队里面，当然有点可笑，互联网是科技产业，不是艺术行业。“运营”主导，这种理念，基本都是小公司的思维。觉得有东西可以“运营”了，然后“产品经理”们给产品换换皮，挪挪位置就可以了。 我和周有时也交流，他也非常赞同我的观点：早点换职业-后台。 我来如今的公司，也算巧合：之前公司莫名其妙离职；中秋+国庆导致面试周期变短–&gt; 社保断了被老婆“打系”；附近周围找工作（地域限制）；今年形势也不是很好 等等因素。既来之，则安之。安是为了过度，正好将多余时间实践我学习的网页、后台。跨度的没关系，拼命就好（真不能学太多，消化不过来。最近一直有发现，学一个就忘掉了之前那个，不过还好的就是，当时学习的手感还在）。 定个决心：明年暑假6、7 月份，必然开始找后台开发工作！！！ nextjs 在centos 32bit i386 打包completed, 但是等待很久却失败显示xxx137.原因是centos 内存太低、系统太低。 18-11-24 又一次聚会。 这一次聚会四个人，议题是最近学了哪些东西，可以将其分享（我就是纯旁听的，偷学技术的）。我、周俊、周俊前同事（高级前端）、周俊以前的领路人（php兄弟连“莫楠”，目前在一家公司做项目经理）。聚会地点就是莫楠倾情提供的他们公司会议室。大家先在“闸北”-“大融城” 吃 麻辣香锅 （我又是吃饭最慢的，牙疼）。接着我们前往莫楠提供的会所地点，楼下\b莫楠大哥演示了下他们公司提供的食品柜，就是那种自助购买食品柜机。接着上楼开讲啦。周俊先主要讲ipfs.讲到其中p2p，类似于autossh。接着讲到如何使用pm2 负载均衡。 12345678910111213141516测并发1: ab -c 100 -n 1000 http://localhost:3002(1000个并发数)(mac 默认带个进程并发数1024个)2: wrk现在pm2 并发:pm2 -i(max) app.jsdocker k8s kubernetesmqttawesome nodeelectron shadowsocksxgplyer 接下来是前端哥们讲了他做的一些东西，第三方js库，使用docker 能力，一键开启所有的能力。（这里我注意到docker 能力，回去后整整忙活一个多星期适应了docker 运用）。 我本来是旁听的，不过大家奉献那么多，我就又鼓吹了卡通、动漫、盗版，这一类不与技术有关的变现道路。 \b4点多，我们三个还有空，前往星巴克继续撸，继续问。这里互相交流的就更多了，比如探讨ipfs 可能变现能力和ss 直接变现。 6点多，一起吃火锅去。中间大家一度思路集合说做一个盗版视频网站、软件（后面似乎大家忙，往后推迟）。一直吃到晚上10点，然后3人挤到一辆电动车，周俊开着前往地铁站。 一天吃两顿火锅，第二天就有点生病，持续了2个星期还没好，夜夜带着病战斗完成这次集合所学。不枉此行。","categories":[],"tags":[]},{"title":"2018-12-1lesson","slug":"2018-12-1lesson","date":"2018-12-01T08:03:10.000Z","updated":"2018-12-01T08:03:44.000Z","comments":true,"path":"2018/12/01/2018-12-1lesson/","link":"","permalink":"https://shaohung001.github.io/2018/12/01/2018-12-1lesson/","excerpt":"","text":"最近继续服务修行打造docker 容器守护采用docker-compose 多重容器聚合，一键配置。一开始配置上出问题，mongodb连接不上。当前成功配置： 1234567891011121314151617181920212223version: &quot;3&quot;services:mongo:image: &quot;mongo:3.6.9-stretch&quot;volumes:- ./data:/data/dbports:- &quot;27017:27017&quot;redis:image: &quot;redis:alpine&quot;web:build: .image: nodejapcommand: npm run debugvolumes:- ./dist:/server/distports:- &quot;3000:9527&quot;- &quot;9222:9222&quot;links:- mongodepends_on:- mongo mongo先启动，然后到了web 启动的时候，配置启动采用github issue 123456789101112131415161718const options = &#123;autoIndex: true,reconnectTries: 30,reconnectInterval: 500,poolSize: 10,bufferMaxEntries: 0,useNewUrlParser: true,&#125;const connectWithRetry = () =&gt; &#123;console.log(\"MongoDB connection with retry\");mongoose.connect(db_url, options).then(() =&gt; &#123;console.log(\"MongoDB is connected\");&#125;).catch(err =&gt; &#123;console.log(\"MongoDB connection unsuccessful, retry after 5 seconds.\");setTimeout(connectWithRetry, 5000)&#125;)&#125;connectWithRetry(); 这时，每次启动最后一行就都是web_1_9cf04d6b74a9 | MongoDB is connected 接下来顺顺利利的写不久，遇到两个问题： 首先得知Schema 有_id 和id区分。 _id 是为了分布式而取的对象，根据时间戳生成，当然就具有createdAt 的能力。 id 是字符串，唯一字符串。 再者遇到unique 对象可以重复创建相同键： 123456https://github.com/Automattic/mongoose/issues/7194mongoose.set(&quot;debug&quot;, true);mongoose.set(&apos;useNewUrlParser&apos;, true);mongoose.set(&apos;useFindAndModify&apos;, false);mongoose.set(&apos;useCreateIndex&apos;, true); 原因是mongodb 升级上来，这篇必看的，被我这半路出家的终于花了周六一天才解决掉。 使用vscode 配合docker-compose.yml debug参考这篇vscode 官方原文 使用起来太爽了。 再分享我的Dockerfile 的长相123456789FROM node:8.12.0-alpineWORKDIR /serverCOPY . /serverRUN npm installEXPOSE 9527CMD [\"yarn\", \"debug\"]","categories":[],"tags":[]},{"title":"2018-11-14lesson","slug":"2018-11-14lesson","date":"2018-11-14T13:52:44.000Z","updated":"2018-11-19T12:34:16.000Z","comments":true,"path":"2018/11/14/2018-11-14lesson/","link":"","permalink":"https://shaohung001.github.io/2018/11/14/2018-11-14lesson/","excerpt":"","text":"Reactcreate-react-app 功能有：··· axios 网络获取数据rem 手机距离适配，同时添加less-loaderyarn add less less-loaderyarn add autoprefixer 在/public/index.html 中间插入 12&lt;script&gt;!function(e)&#123;function t(a)&#123;if(i[a])return i[a].exports;var n=i[a]=&#123;exports:&#123;&#125;,id:a,loaded:!1&#125;;return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports&#125;var i=&#123;&#125;;return t.m=e,t.c=i,t.p=\"\",t(0)&#125;([function(e,t)&#123;\"use strict\";Object.defineProperty(t,\"__esModule\",&#123;value:!0&#125;);var i=window;t[\"default\"]=i.flex=function(e,t)&#123;var a=e||100,n=t||1,r=i.document,o=navigator.userAgent,d=o.match(/Android[\\S\\s]+AppleWebkit\\/(\\d&#123;3&#125;)/i),l=o.match(/U3\\/((\\d+|\\.)&#123;5,&#125;)/i),c=l&amp;&amp;parseInt(l[1].split(\".\").join(\"\"),10)&gt;=80,p=navigator.appVersion.match(/(iphone|ipad|ipod)/gi),s=i.devicePixelRatio||1;p||d&amp;&amp;d[1]&gt;534||c||(s=1);var u=1/s,m=r.querySelector('meta[name=\"viewport\"]');m||(m=r.createElement(\"meta\"),m.setAttribute(\"name\",\"viewport\"),r.head.appendChild(m)),m.setAttribute(\"content\",\"width=device-width,user-scalable=no,initial-scale=\"+u+\",maximum-scale=\"+u+\",minimum-scale=\"+u),r.documentElement.style.fontSize=a/2*s*n+\"px\"&#125;,e.exports=t[\"default\"]&#125;]); flex(100, 1);&lt;/script&gt; 然后在/config/webpack.config.dev.js 增加 12345678910111213141516171819202122232425262728293031323334353637383940const pxtorem = require('postcss-pxtorem');module.exports = &#123; module: &#123; rules: [&#123; oneOf: [ &#123; test: /\\.(svg)$/i, loader: 'svg-sprite-loader', include: [ require.resolve('antd-mobile').replace(/warn\\.js$/, ''), // 1. svg files of antd-mobile path.resolve(__dirname, '../src/icons'), // folder of svg files in your project ] &#125;, &#123; test: /\\.less$/, use: [ require.resolve('style-loader'), require.resolve('css-loader'), &#123; loader: require.resolve('postcss-loader'), options: &#123; ident: 'postcss', // https://webpack.js.org/guides/migrating/#complex-options plugins: () =&gt; [ autoprefixer(&#123; browsers: ['last 2 versions', 'Firefox ESR', '&gt; 1%', 'ie &gt;= 8', 'iOS &gt;= 8', 'Android &gt;= 4'], &#125;), pxtorem(&#123; rootValue: 100, propWhiteList: [] &#125;) ], &#125;, &#125;, &#123; loader: require.resolve('less-loader'), options: &#123; modifyVars: &#123; \"@primary-color\": \"#1DA57A\" &#125;, &#125;, &#125;], &#125;] &#125;] &#125;&#125; yarn run eject 和 antd加入由于需要使用mobx 的”@” decorator 功能。yarn run eject 解开webpack 之后yarn add babel-plugin-transform-decorators-legacy --dev,同时/package.json 加上 12345678\"babel\": &#123; \"plugins\": [ \"transform-decorators-legacy\", [ \"import\", &#123; \"libraryName\": \"antd-mobile\", \"style\": \"css\"&#125; ] ]&#125; 同时为了打包yarn build 项目路由能找到静态文件,在/package.json &quot;homepage&quot;: &quot;.&quot;. 重要 项目目录12345678910111213/src /axios /components /constants /icons /pages//各个页面的page /router/index//路由中心 /routes//各级路由和总根路由 /store//各个store和index store /utils index.js index.csspackage.json 解决编译后某个bug/public/index.html 中间加上:&lt;script type=&quot;text/babel&quot; src=&quot;./lander.js&quot;&gt;&lt;/script&gt; buildbuild 的语法同样很重要，否则出现Nginx 配置路由，启动build 后的项目变成阅览文件目录:$ PUBLIC_URL=http://lsgood.top yarn build 原由是/public/index.html 的link 写到： 12&lt;link rel=\"manifest\" href=\"%PUBLIC_URL%/manifest.json\"&gt;&lt;link rel=\"shortcut icon\" href=\"%PUBLIC_URL%/favicon.ico\"&gt; 注意PUBLIC_URL(当时不知道解决方案，花了三天，愁的都长痘痘了). Nginx 配置1234567891011121314151617181920212223242526272829server &#123; listen 80 default_server; server_name www.lsgood.top lsgood.top; root /var/www; index index.html index.htm; # Any route that doesn&apos;t have a file extension (e.g. /devices) location ~ ^/favicon\\.ico$ &#123; root /var/www; &#125; location / &#123; try_files $uri $uri/ /index.html; index index.html; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125; location @fallback &#123; rewrite ^.*$ /index.html break; &#125; location /girlS/ &#123; proxy_pass http://127.0.0.1:8000/girl.v1/; &#125; location /popcircle/ &#123; root /root/Work/game/; &#125; &#125; 这样多个路由就能看到不同点了 Mobx 在上面的使用/src/store/下存储着各个store 具体事务，index 是其中的集合体。 /src/index.js 下导入“mobx-react” 的Provider，引入了所有的store。 这样在使用时，如/store:topics.js, /pages:Default.js inject关联store: 123456@inject((&#123;topics, status&#125;) =&gt; (&#123; data: topics.data&#125;))@observer class DefaultClass extends React.Component &#123; ...this.props.data//就拿出来了&#125; store.js 里面一般会有4个方法:{ observable, action, useStrict }action 的作用是，强制用户在该方法下更改被observable 的属性, 用法： 1234@observable data;@action.bound updateData(val) &#123; this.data = val;&#125; 同时,action.bound 可以正确获得this 指针. 最后export 这个单例对象:export default new Store();，放到/src/store/index.js 的export default {store}下,完成合并store，以便所有节点都可以inject.···","categories":[],"tags":[]},{"title":"2018-11-10lesson","slug":"2018-11-10lesson","date":"2018-11-10T15:13:03.000Z","updated":"2018-11-11T13:18:30.000Z","comments":true,"path":"2018/11/10/2018-11-10lesson/","link":"","permalink":"https://shaohung001.github.io/2018/11/10/2018-11-10lesson/","excerpt":"","text":"双十一 怎么消费只放假一天的周末因为上海国际进口博览会召开，公司周末调休。今天是周六放假，周日上班（调休了）。我之前也有和周俊（粉粉可萌node 后台，我的js 都是他无私教入门的，非常异常感谢他）交流说找时间一起吃个饭。前两天遇到问题找他，刚好他”猫咪死了，女朋友分了，工作丢了，刚好又拿到offer了“。其实遇到这么多事，还是挺伤心的。坏事多磨，哈哈。然后约周六中午一起吃，喊上高祥（粉粉可萌上一任iOS）一起小聚一个。 只有一天的周末，三个光棍齐聚陆家嘴2号口。 先聊了聊各自家常： 周俊拿30k offer，当场给，但是再尝试尝试还有别的面试不，面试了两个月了（两点：30k有点多，有丢丢羡慕哟，不过希望能呆久点，稳定为好；面试了两个月，\b希望他赶紧有个好结果）；他女朋友是因为她家里人不同意他们在一起（艰难）；周俊前几天还约了一个外国回来的硕士妹子\b（给力，不过说后面没后文了，所以吃饭期间我们都调侃他，多补补腰子）；之前公司解散员工还没获得补偿（他的心态就是最近再看看能不能有补偿，有多少算多少，我也觉得是，不然挺好费时间的，得不偿失）；之前的是区块链公司； 高祥如今在浦东一个ezbuy 电子商务的公司，呆一年多（我和周俊就比较惨，一直奔波）；公司采用swift，之前可以内推我的（可惜了，不过当时我\b已经住在闵行，应该不会去浦东，跨度挺大，plus我还没被内推过，下次尝试尝试）；儿子6个月了在身边，老婆和他一起带着（这时候孩子挺不好带，真辛苦了，他们父母有帮助就好了）；他之前也学js，但是没有实践、没继续学下去（实践很重要）；他正要学go（多学一些挺重要，我和他都感悟到，不能被前端单一技能拖死，哈哈）；他大概20k左右（我要的真是太少了，他听到我在粉粉才14k，也觉得我粉粉要的太少了，不过我自己觉得当时自己确实太差，刻苦点吧）； 听讲，我刚去时候的前台菇凉怀孕，伟哥知道想把她辞了，这样就不会有休产假之类的。后来也不愿意给赔偿。最后是仲裁解决的。我觉得伟哥，还好吧，原来还有这一面。看来我确实一心宅，不了解“市事”。 以上不能算八卦的吧，嘎嘎，米西米西，我就记下来吧，反正我当这博文是我的日记本，记录记录身边朋友，哈哈。 我们吃完午餐去附近星巴克找了个位置坐下来，三个人围在一起学习交流起来了。 首先周俊讲了Nuxt.js 可以快速搭一个网站（我选择成熟的React 的框架：Next.js – 纯React.js 用create-react-app 搭起来的挺多麻烦事的，试试新的吧）。说了服务器创建、网页、ElementUI，这些我都懂，vary OK，感谢一年来的拼了狗命的努力。 然后我们探讨了下 数据传输加密。我本来的设想是RSA 传递”AES 的secretKey“ 之后使用AES 加密数据进行传输。后来探讨下来，确实，”服务器怎么存储 IP 和对应的 secretKey” 这种行为是异想天开（我没想通就提出来问，好事）。直接采用：AES 或者JWT，，其实就是直接是客户端和服务器端同时保存相同secretkey这种方法。不要太太太复杂化解决，加上https，基本都是OK 的了。 区块链 nodejs 怎么接触：使用go语言写的以太坊项目，就可以有区块链功能啦，棒棒哒💯。 如何保证网站不会被爬数据，周俊推荐一个开源的拖动图片对位的东西，就能解决机器拖库拉。 接着我来给他们展示我之前写的girl项目服务器，还有girl 网页代码，然后推荐他们可以做做小游戏盈利，给他们看了我之前写的小游戏代码。 之后剩下我和周俊（祥哥先回去了，孩子重要，嘿嘿），我让他考考我js一些问题，我可能打算明年冬天转换服务器工作，突破，嘿嘿😜。 有这么几个问题： es6 let 12345console.log(a);var a = 0;console.log(a);let a = 0;(var a = 0;)console.log(a); bind/call 1234567891011121314let obj = &#123; name: \"zhoujun\"; get: function () &#123; return this.name; &#125;&#125;let obj2 = &#123; name: \"aKer\"&#125;console.log(obj.get());如何输出aKerobj.get.bind(obj2)()obj.get.call(obj2) 如何实现继承 123456789我记得node 有个inherit 的模块，很方便就可以继承，但是忘记怎么搞了。那我们直接解决实际问题：function A () &#123; this.name = \"zhoujun\"&#125;function B () &#123;&#125;B.prototype = new A();//意思是源头采用A 里面的数据、对象、方法，但是导致B 成为了A'B.prototype.constructor = B;//意思是使B 成为的A' 转换回B，B 的this 就正确的为B，而不是A了。 考了个算法 12345678910111213141516171819202122232425262728293031323334353637给定一个包含N个整数的数组A，假设这个数组表示的是一条链条，其中每个元素表示链条上的一环。现在我们想把这条链条断成3小部分。我们需 要做的就是断开不相连的两个环，更确切的说，我们需要断开环P、Q (0&lt;P&lt;Q&lt;N-1, Q-P &gt; 1)，得到三个小链条[0,P-1],[P+1,Q-1],[Q+1,N-1]。 上述操作的成本是A[P]+A[Q]。例如:数组A为 A[0] = 5A[1] = 2A[2] = 4A[3] = 6A[4] = 3A[5] = 7我们可以选择如下方式断开链条 - (1，3):成本是 2+6 = 8 - (1，4):成本是 2+3 = 5 - (2，4):成本是 4+3 = 7写一个函数int breakchain(int A[], int N);对任一个给定的链条，返回断开链条的最低成本，比如上面的例子中， 需要返回最低成本5假设:- N是整数，范围[5,100000]A的元素是范围在[1,1000000000]的整数解法有两个，高祥用了两个小时，我用了5分钟（我的方法比较消耗性能估计，采用空间换时间）1. 读懂题目，那就是头尾去掉的所有数“取其中最小三个数，必然能构成解”（他们两个采用的这个）2. let results = [];let resulti = [];let resultj = [];for (let i = 1; i &lt; arr.length -1; i++) &#123; for (let j = i+1; j &lt; arr.length-1 - i; j++) &#123; let result = arr[i] + arr[j]; results.push(result); resulti.push(i); resultj.push(j); &#125;&#125;j 层for 循环找到最小一堆i 和j；然后i 层得到所有j 层获取的最小值然后比较谁是最小的那一对。啊哈，比较消耗资源。 5分钟我没有解决完“方法2”，只解决完一半（想问题时，想太久怕周俊无聊，哈哈）。 也算幸好找到了一些思路，开心开心。虽然性能差、与最终答案不正对，不过还是开心，哈哈。 晚上回到家，看看阿黄，写完博文，已经是双十一凌晨30分，赶紧入睡，明天要上班的哟，哎呦不错\b哟。","categories":[],"tags":[]},{"title":"2018-11-9lesson","slug":"2018-11-9lesson","date":"2018-11-09T15:35:34.000Z","updated":"2018-11-10T15:12:32.000Z","comments":true,"path":"2018/11/09/2018-11-9lesson/","link":"","permalink":"https://shaohung001.github.io/2018/11/09/2018-11-9lesson/","excerpt":"","text":"\b上线React+Mobx+Antd + build + Nginx 经历首先非常开心，自己找遍解决方案，终于来到终点：http://lsgood.top 我的第一个网页。该网页由爬虫爬了一个二次元图片的网站，然后一个Typescript koa 后台提供数据，再由Reactjs 网页展现。 首先遇到的第一个大山：centos 装mongodb 先使用yum 安装mongodb，然后一直报”no package is avialable. nothing to do”, 我是mongodb 官网教程，建了一个.repo 来整的，然后又学会去redhat 的源找找看看。都在的，可以的呀。 然后找到$ getconf LONG_BIT终于得知我的是32位。那就说明yum 的那些源都是x86 ，查看一番：果然。屁颠屁颠去看了有哪些32位mongodb 的我可以用。 google 找到一个csdn 里面有个2.x 版本的，装上去果然可以启动，把我开心的呀。然后服务器用mongoose 2.x 版本及以下都不可用。一番寻找，找到CSDN centos用yum安装mongodb及 32位linux（centos）下mongoDB的安装 的文章。采用wget 下载相应的版本。前往官网工具下载区 ，一开始也不明白哪个我真的可以用，最后终于找到排到最后一个的3.0x 版本的真的真的是32bit。 快速放到服务器启动起来的时候，真的开心啊。 然而一心以为后面React 网页yarn build 应该很简单，没想到又是一番挫折。 既然数据好了，赶紧打包我的第一个React 应用。yarn build 很快！ 然后配置一下Nginx，把build 出来的文件拖到/root/Work/web/girl 目录下,Nginx 如下配置 123456789server &#123; listen 80 default_server; server_name www.lsgood.top lsgood.top; location /girl/ &#123; root /root/Work/web/; index index.html index.htm; &#125;&#125; 首先出来一个问题：\b由于不是放在Nginx 根目录，是http://lsgood.top/girl 这样的目录，导致内部css 资源、static 资源 找不到根路由，找的是http://lsgood.top/xxxstaticxxx 的目录资源，那就在package.json 加上一个field homepage: &quot;.&quot; 。 这个解决之后出现一个花费我1.5 天寻找是React 内部问题，还是Nginx 没有配置好的问题：Nginx 配置路由\b(不同根目录)要么出现Uncaught SyntaxError: Unexpected token &lt; ；要么整个页面就是空白，同时查看右键 - 检查 - Sources 将我的React 程序目录源代码全部展示出来了。 说明并没有启动我对应的index.html。我不明白为什么会出现这样，期间问了我以前同事，但还是没有答案（毕竟突然给他看，不明白里面所写，也忙，然后没有解出来）。 然后1天过去后，我让现在后台帮忙，放到可以运行的网页那边看看。一开始怕他们麻烦，推荐他说，直接放文件名后面，就不用建立子域名。然后还是失败！ 这样我还是不知道是哪边的问题，我又又又google 找了下，有说不要放在http://host/girl/ 子目录，放到Nginx根目录。我赶紧让后台帮忙再试一波！ 果然！成功，不过index 首页是OK，但是路由却进不去了。首页OK，路由有问题，说明React 应用没问题，Nginx 配置错误了，同时React 里面的路由也出错了。 我又双叒叕google，找到这篇关于react 在打包后：“找不到资源路径”的问题、部署到服务器二级目录 “打开为空白” 的问题 这里说到一个很重点的信息：browserRouter/PUBLIC_URL/NGINX 这么几个重点词语。我还真用到了browserRouter， 问题也确实是访问时页面空白，没有报错 这种情况。 那我就采用他的办法（花了一个下午加加班到晚上8\b点多）： 1234567891011121314151617181920212223242526272829303132331. React 在build 时:$ PUBLIC_URL=http://lsgood.top/ yarn build2. 将build 的子文件全部放到 /var/www/ 下面3. Nginx conf 配置：（参考 https://gkedge.gitbooks.io/react-router-in-the-real/content/nginx.html）server &#123; listen 80 default_server; server_name www.lsgood.top lsgood.top; root /var/www; index index.html index.htm; # Any route that doesn&apos;t have a file extension (e.g. /devices) location ~ ^/favicon\\.ico$ &#123; root /var/www; &#125; location / &#123; try_files $uri $uri/ /index.html; index index.html; proxy_set_header Host $host; proxy_set_header X-Real-IP $remote_addr; proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for; proxy_set_header X-Forwarded-Proto $scheme; &#125; location @fallback &#123; rewrite ^.*$ /index.html break; &#125; location /girlS/ &#123; proxy_pass http://127.0.0.1:8000/girl.v1/; &#125; location /popcircle/ &#123; root /root/Work/game/; &#125;&#125; 完美！ 服务器也能运行、游戏也能运行、网页也成功运行了。 这三天的努力，愁的我都长了个痘痘，至少解决问题都是自己解决的，又get 到一个技能。","categories":[],"tags":[]},{"title":"2018-10-31lesson","slug":"2018-10-31lesson","date":"2018-10-31T13:19:09.000Z","updated":"2018-11-09T16:19:42.000Z","comments":true,"path":"2018/10/31/2018-10-31lesson/","link":"","permalink":"https://shaohung001.github.io/2018/10/31/2018-10-31lesson/","excerpt":"","text":"记录最近干了啥玩意进的公司人事、开发都给我特别的说明：比较有时间做自己的事，不会特别特别的忙。好吧，都这么说，真的真的希望不会特别忙，正和我意了。公司不忙，不代表我会慢下自己的脚步。 进公司\b，前两天，哟，也是用黑苹果开发-&gt;我喜欢。和要离职的开发交接了相关文件，然后他继续用公司电脑，然后我？？？我没电脑，哎我去。。。中午赶忙请假回住所拿自己电脑了。进去后第一件事就是改一个推送消息+应用内消息，读了读里面的代码，写的不是很好，不好不好。。。接下来一直都很闲，就把React 一套生态链学完了：React+Mobx+antd+scss。 React 语法不难，难在于React、整个生态体系。 我抄写了React-Cnode 三遍，终于有所感悟。这个难点在于：1. 版本需要对应，否则里面属性有更改；2. mobx 有decorator 模式；3. scss、svg-sprite-loader 在webpack.config.dev 里面有需要配置的地方；4. antd 需要加装babel-plugin-import 的一个插件。 学完了React 的web 软件开发，我获得的技能点有： OpenGL ESiOS白鹭React爬虫Nodejs Server 技能点满了没有？点满了没有？？？ 学完了React 等于是走完软件前端全部基础技能。内心也没有多大的触动。没有想象中的激动，没有想象中的学完后会刺激、放松之类的，反正很平静。我觉得还缺少一味良药：将技术化为金钱。 粗人！动不动就钱钱钱。。。 氮素，因为真的没有自由支配的资金，所以才张嘴闭嘴谈到钱。哪天我比那些说我庸俗的人更有钱的时候，角色就会对换，体验就不一样了。 接下来的一星期，还是等待下个版本的设计，于是我动手爬了一个二次元网站的数据、图片。看着数据、图片一个一个收入囊中，体验是非常佳的。使用MongoDB 保存也是极度简单。接着写了一个Typescript \bkoa 的server，之后就可以撸一个web 页面展示展示啦。 其中遇到一个大问题：公司过手用着的黑苹果在设置当中被我改了个名字，随后管理员丢失了。管理员就这样丢失了？？What？？悲催的事就是这么来的：不能装软件、不能拿到sudo 权限，反正就只能简单用一用，别的啥都干不了。 这么悲催，硬着头皮买了个U盘，重录入mac osx。 CPU: i7主板: 技嘉(啥型号，不知道)显卡: 英伟达GTX750Ti 要求：mac 开发只要能运行显卡驱动就好了，要求简单。 首先找了很多教程，这个教程看的很直白：https://github.com/enify/blog/issues/2 非常感谢这位大哥 U盘制作挺快的，在windows 上将&gt; 8G的U盘按照上面网址大哥给的工具“DiskGenius” 格式化、转换分区表类型为GUID格式（当时我那显示是另一个条目名称，但是位置还是在那个位置）； 去\b黑苹果论坛找到一个叫做macOS … With Clover 的系统镜像在淘宝“黑苹果论坛代下”，价格5毛，然后百度云盘下载太慢，淘宝买了6.9元一个月百度云盘。 使用另一个软件：“TransMac” 找到U盘 选择“Format Disk for Mac”，然后选择“Restore with Disk Image” 选项，选择macOS … With Clover 系统镜像。然后就是等待将U盘设置为该系统的启动盘。 设置EFI 文件夹里面的config为对应自己配置的config。我这里是i7 就选择其中的6代、7代那个config 在BIOS 中设置U盘启动项，进入后\b第一个苹果标志Enter 进入，会进到写MAC 界面。选择\b磁工具盘，抹掉数据抹掉左上角OS X 的硬盘，然后退出回到之前界面，选择安装 macOS 中间会重启，然后记得选择第二个苹果标志（现在是安装到硬盘，第一个是U盘）。直到进入五国之类的。 进入之后要做的两件事：固化Clover、英伟达显卡驱动 显卡驱动参考简书NVIDIA Web Driver下载下来的找不到GTX750Ti. 然后找到文章在clover 里面找到有加slide=0 dart=0 darkwake=1 nvda_drv=1 kext-dev-mode=1clover 这么几个的打钩，然后重启就有了。第一次安装，顺利。 就这样点亮了黑苹果技能树！","categories":[],"tags":[]},{"title":"2018-10-17lesson","slug":"2018-10-17lesson","date":"2018-10-29T14:50:41.000Z","updated":"2018-11-09T16:23:50.000Z","comments":true,"path":"2018/10/29/2018-10-17lesson/","link":"","permalink":"https://shaohung001.github.io/2018/10/29/2018-10-17lesson/","excerpt":"","text":"2018-10-17之前找工作，赶在了10月15号前入职（10月9号到岗），这样社保没有断，也算解决了尴尬的处境。 国庆节放假，前三天认真学习，打打游戏。后面几天，突然老婆发神经，对，发神经，搞的不愉快，在倒数2天傍晚离开老婆自己一个人去跑步散心。于是那天晚上老婆又爬身上求我原谅。我看重原则，家人什么都是对的，但是原则不能错。后来怎么样，那只能原谅呗，嘎嘎。 10月放假完第一天，有2个面试和傍晚的前往之前的复试（商谈工资）； 早上去离不远一家搞智能硬件互联的公司，直接就给offer，但是离自己心里预期低； 下午一家在七宝名叫xx 的一个婴幼儿教育的公司。约我去面试的女的面容姣好（去的时候刚好上楼遇见），\b保养很好，很美（无他不好的见解）。然后一个\b老头面试（说话结巴），先让我自我简介。我就巴拉巴拉说了自己的简况。然后他就问一个问题“数据结构”。是的，这个是我们系主任教的课，我听的特他妈认真。但是离校那么久，早还给老师了，而且当时也没学好，毕竟光听，没有真正实践的地方，没办法没办法。然后他就抓着这个点，说来面试的太差。哎哟，握草，现在面试iOS不仅要算法，还要数据结构很好？而且工资给的还非常低（8~15k，相对要做的领域，是非常低的，而且公司给的肯定就只有12k）？然后我就开始怼他，反正我又不是找不到工作的人。这种老头子能力肯定也是不咋地，要求却蛮多，脑子又不灵光，话都说不流利。肯定是忽悠公司花高价请自己来，说自己算法多好多好，实际一点产出都没有的人。现在互联网跟他的年龄早已不相仿。我敢断言：这个公司又会像以前我经历过的一些公司一样，不同的是，现在这个公司资金比我以前的要雄厚（毕竟我以前公司都比较穷，这个似乎会大一些），但是这种老古董定然给他败光！ 现在我又要屁颠屁颠灰溜溜滚蛋咯。 回去到家再写了写东西，傍晚去复试。公司之前做线下运动的，线下有一定的资源，转线上。工资没有多高，社保又快到\b了，看老板眼神，跟着干吧，希望能带我脱离苦海吧。 于是，又一次找工作历程经历完了。有苦有乐，苦更多吧。更加让我续满动力实践自己的server！！！","categories":[],"tags":[]},{"title":"2018-9-27lesson","slug":"2018-9-27lesson","date":"2018-09-27T05:14:06.000Z","updated":"2018-10-08T03:46:18.000Z","comments":true,"path":"2018/09/27/2018-9-27lesson/","link":"","permalink":"https://shaohung001.github.io/2018/09/27/2018-9-27lesson/","excerpt":"","text":"最近是面试期么内心一定要淡定记录下最近面试问到的一些问题之前从粉粉离开时，也没想到这是一个多事之秋。去了一家动漫IP 的公司，人没去之前老板已经有意决定停下互联网业务的，结果其中一个合伙人说再试一波，于是我以为其是想做事，就进去当小白鼠了。进去之后改版页面完，没目的没计划了。做了一个egret ”消消乐“的微信小游戏，学了该学的OpenGLES，然后中秋之前跟我说部门解散，，， 大哥，这才三个月啊。 所以说是一个多事之秋吧。 好吧，出来面试吧。 现在是9月份，面试第一个公司：”第一弹“，我个人觉得面试过程还好，然后说不合适。好吧，不合适就不合适吧，可惜了，距离我挺近的，比较看重距离。 面试题里面有个题目：[1, … 100] 内 不等随机大小无序数，求最大的数和第二大的数。 这个我做的时候直接是冒泡排序。但是有两层for 循环，效率不好，下面会给出最佳答案。 第二家说想做一个短视频、即时通讯、webRTC 这一类产品。我不看好，不能跟，而且离得有点远，开发员工才几个人，工资也很低。大哥，做这类的工资不可能才15k 啊，，，做成个半成品，全是SDK 的，我不愿意把青春花在\b简单组合各类SDK上面，做完到时发现不赚钱，老板说解散，到时我又屁颠屁颠要出来找工作，何必。后来，之前面试的小哥打电话过来问意愿，那边那个老板也打电话过来问意愿，只能拒绝。没有投靠的意义，看的出来老板只是想试试水。 第三家在之前我就有去面试的地方：徐汇慧谷创业中心。这家是做 AI提供用户数据给出用户穿衣服方案的公司。在找iOS 开发。先来个小胖哥，上来就说我看了你的博客了，还挺好，直接让技术经理来考你。这小胖哥有意思，人好。然后技术大哥来了就问技术的事，不与iOS 相关的，先问TCP协议（我没看面试题之类的（最近在搞网页）答得不好），然后出了两个题目： 数组array[1~n] 随机大小无序，求从大到小第k个数。解法： 12345678910let nums[n] = [0];for (int i=0;i&lt;array.count;i++) &#123; let element = array[i]; if (nums[element]) &#123;//如果有值 nums[element] = nums[element] ++; &#125; else &#123; nums[element] = 1; &#125;&#125;//这个时候从n 到 1 如果内部是&gt;1 的都是有值的，&gt;2那就是有两个值. 于是第k 个值也能得出。 这正是“第一弹”\b笔试的比较好的答案吧。 有一个圆盘时钟，从00:00:00 ~ 24:00:00 过程有多少次秒针、分针、时针是全部重叠的。 12345678let s = 360°/60 * n; //秒针一圈第n秒时在什么角度let m = 360°/(60*60) * n; //分针一圈第n秒时在什么角度let h = 360°/(12*60*60) * n; //时针一圈第n秒时在什么角度for (int n=0; n&lt;24*60*60; n++) &#123; if (s / 360° == m / 360° == h / 360°) &#123;//除以360° 是让其点化为单位角度 // 这就是相遇的点 &#125;&#125; 这两个挺考智商的。但是我的脑子不好，我的学习都是不断的抄写他人知识，融合这些知识，所以直接回答纯粹的算法题我答的不好。比如第1题我还是使用冒泡排序，嘿嘿。当时甚至于冒泡排序还写错了。比较紧张吧：因为先回答了圆盘时钟的问题，却一直没解出来，导致思绪乱了，后面答第一个问题也更乱了。 下面是借口，借口： 一直学习，没顾上看面试题，没顾上看看算法题。面试完确实对我心里有点打击：我就是做个iOS，现在还需要算法了？iOS没有算法啊，苹果都给你优化过了，你写再好，比得过人家一个api？但是话说来，算法才是程序的灵魂，没有灵魂，写再多api 也不是程序。 我的观点是，面试的时候遇到了什么不清晰的地方，就好好记录下来。平常学必要的，不要全都学，现在那么多知识点，哪里学的完。这没什么好狡辩，尽力无悔即可。 唉，换工作比较麻烦，我早自知。但是我相信，现在困惑、困难，“树挪死，人挪活”，艰难刻苦总会过去的吧（目前还在艰难困苦中）。学到、实践到就是没白费过。 今天2018.9.26 两个面试。上午的面试面着面着，快一小时了，才知道他们要招员工到张江去上班的，唉，我看你是10k~15k过来试着面试面试，没想到你比我还皮，这个比较浪费时间，，算了心平气和滚蛋了，嘎嘎。 下午离得稍微有点远，叫”Ratta” 雷塔的一个公司。我觉得功能方向稍微有点不太合适，也是试试去面试吧。 先笔试：考跟之前算法一样的东西（现在全部公司的笔试题都一样了？）。答题吧。 里面还有一个是跟我的APP“哈皮涂色”很类似的同步数据、展示数据的题目。面试的是写c、c++ 的大哥。这人对基本数据比较了解。说一个数据{x:x,y:y,color:color} 这样一个int 数据元素要占用多少位？我肯定不知道啊，我就说bytes 是4字节，多少位我不知道。他说32位（int 是32位，NSInteger 是64，问这个干嘛哟，\b这个是读取速度，不是储存大小，我感觉这个大哥不是很靠谱，个人感觉）。然后他想问的如何压缩可以将数据不会存储那么大。我一时间哪能那么快想出来啊，能想出来答出来，那我肯定之前做过了，碰到过了，不然我答什么呀。 之后就是问随意的问题。 其中给他看了我的“哈皮涂色”，估计他有点懵逼了：这是他们公司的主营功能。他们有个硬件进行绘画，我直接就是手机上直接画。他们有点想知道核心功能，我才不告诉他们嘞，要知道？得花钱。 然后问了一些技术上的问题，他也做了些功课： 堆和栈的区别(还别说，没看面试题，我也都快忘光了，随便解答) 。 一个由c/C++编译的程序占用的内存分为以下几个部分： 栈区（stack）— 由编译器自动分配释放，存放函数的参数值，局部变量的值等。其操作方式类似于数据结构中的栈。 堆区（heap） — 一般由程序员分配释放， 若程序员不释放，程序结束时可能由OS回收。注意它与数据结构中的堆是两回事，分配方式倒是类似于链表。 全局区（静态区）（static）—，全局变量和静态变量的存储是放在一块的，初始化的全局变量和静态变量在一块区域，未初始化的全局变量和未初始化的静态变量在相邻的另一块区域。程序结束后由系统释放。 文字常量区 —常量字符串就是放在这里的。程序结束后由系统释放。 程序代码区—存放函数体的二进制代码。 反射机制（从没用过~查询得知，其实就是使用字符动态查找创建类、方法，方便网络和客户端交互。反正我没这么用，多不安全啊。） https（我说上家公司没处理过，不过之前公司处理过，iOS 这里只需在网络那里配置下就好了，如果要双向验证，那就在iOS本地增加配置一个公钥，额，他还不信，害我跑回来看教程，没错啊，客户端要处理的真的很少。服务端也不多，nodejs 之前的我看过相关的教程，就增加配置个证书文件嘛） 参考网址 单向验证 1234567891011//在你封装的网络工具类请求前初始化时增加以下代码AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];//设置证书模式，AFSSLPinningModeNone，代表前端包内不验证//在单向认证时，前端不放证书，服务器去验证AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeNone];// 如果是需要服务端验证证书，需要设置为YESsecurityPolicy.allowInvalidCertificates = YES;//validatesDomainName 是否需要验证域名，默认为YES；securityPolicy.validatesDomainName = NO;//设置验证模式manager.securityPolicy = securityPolicy; 双向验证 12345678910111213//在你封装的网络工具类请求前初始化时增加以下代AFHTTPSessionManager *manager = [AFHTTPSessionManager manager];//设置验证证书，该模式下许愿把证书打包进项目里，进行验证AFSecurityPolicy *securityPolicy = [AFSecurityPolicy policyWithPinningMode:AFSSLPinningModeCertificate];//证书的路径NSString *cerPath = [[NSBundle mainBundle] pathForResource:@&quot;xxx&quot; ofType:@&quot;.cer&quot;];NSData *dataSou = [NSData dataWithContentsOfFile:cerPath];NSSet *set = [NSSet setWithObjects:dataSou, nil];securityPolicy.allowInvalidCertificates = YES;securityPolicy.validatesDomainName = YES;[securityPolicy setPinnedCertificates:set];//将验证方式赋值给管理者manager.securityPolicy = securityPolicy; HTTPS 处理过程是在“[应用层] - [SSL/TLS] - [TCP] - [IP]”之间。HTTP 的TCP 握手是三次，但是HTTPS 握手需要更多次，因为这里使用非对称加密、对称加密等加密手段对数据进行保护。 首先先理解加解密数据性能，非对称加密RSA 性能需要CPU 计算，寻找素数，耗时相对大，优点就是公钥可以公布，但是如果仅做一次，互相之间传递secretKey 就是非常好的；对称加密AES 速度快，但是需要互相之间都保存有secretKey。 HTTPS 使用到的加密算法： 123非对称加密算法：RSA，DSA/DSS 对称加密算法：AES，RC4，3DES HASH算法：MD5，SHA1，SHA256 最简单的理解或者说模拟出一个HTTPS 一次传输过程要处理的事（只讲算法之间要干的事，更多请阅读下面参考链接讲解的过程）： 客户端一开始和服务端使用公钥加密这次要使用的secretKey。因为大家都没有私钥，所以也不怕被截取。 服务器保存此次\b对应的人和对应的secretKey，同时可以使用AES 对从客户端收到了secretKey 的回应，加密的密钥就是secretKey。 服务端使用RSA 使用secretKey 私钥加密数据给客户端。 客户端使用该secretKey 来给数据进行AES 加密。 这样就完成加解密的过程了。 上面的过程比较简单化，HTTPS 还做了很多，不过我只理解简单的，然后把他写下来。 可以参考HTTPS加密原理 继续看面试题1:SEL Method SEL 方法编号：SEL methodId = @selector(func1);执行SEL:[self performSelector:methodId withObject:nil];IMP 获得和使用:IMP methodPoint = [self methodForSelctor:methodId];调用：methodPoint();IMP objectMethodPoint = [object methodFor:@selector(message)]调用：theResult = objectMethodPoint(anObject, aSelector); 2:反射机制系统Foundation 下有这几个反射API 123456FOUNDATION_EXPORT NSString *NSSTringFromSelector(SEL aSelector);FOUNDATION_EXPORT SEL NSSelectorFromString(NSString *aSelectorName);FOUNDATION_EXPORT NSString *NSStringFromClass(Class aClass);FOUNDATION_EXPORT Class __nullable NSClassFromString(NSString *aClassName);FOUNDATION_EXPORT NSString *NSStringFromProtocol(Protocol *proto) NS_AVAILABLE(10_5, 2_0);FOUNDATION_EXPORT Protocol * __nullable NSProtocolFromString(NSString *namestr) NSAVAIABLE(10_5, 2_0); 1234- (BOOL)isKindOfClass:(Class)aClass;- (BOOL)isMemberOfClass:(Class)aClass;- (BOOL)conformsToProtocol:(Protocol *)aProtocol;- (BOOL)respondsToSelector:(SEL)aSelector; 3:NSDictionary iOS 的NSDictionary 是使用hash表来实现key value 的键值映射和存储的。于Typescript 一样，键都是转为\bstring 类型查找。根据这篇文章参考 能更深入了解NSDictionary 实现思路。 首先NSArray 是没有hash 表来映射快速查找方法。时间复杂度就是o(n),数据长度。NSDictionary 在setObject 时提前判别对象hash 值是否已经存在。判别分两步：Step1：== 运算符判别对象指针是否相等；Step2:判别是否是同一类型；Step3:判别内在属性是否相等 1234567891011121314151617181920- (BOOL)isEqual:(id)object &#123; if (self == object) &#123; return YES; &#125; if (![object isKinkOfClass:[Person class]]) &#123; return NO; &#125; return [self isEqualToPerson:(Person *)object];&#125;- (BOOL)isEqualToPerson:(Person *)person &#123; if (!person) &#123; return NO; &#125; BOOL haveEqualNames = (!self.name &amp;&amp; !person.name) || (self.name isEqualToString:person.name); BOOL haveEqualbirthday = (!self.birthday &amp;&amp; !person.birthday) || (self.birthday isEqualToDate:person.birthday); return haveEqualNames &amp;&amp; haveEqualBirthdays;&#125; 以上部分可以采用RunTime 寻找属性判别。 Hash Table 查找成员过程：Step1：通过hash值直接找到目标位置；Step2：如果目标位置上有多个相同hash值成员，再按照数组方式查找。 Hash 调用时间：对象被添加至NSSet、设置NSDictionary 的key 时调用。 正确重置Person 的hash 方式实现： 大神Mattt Thompson在Equality中给出的结论就是 In reality, a simple XOR over the hash values of critical properties is sufficient 99% of the time(对关键属性的hash值进行位或运算作为hash值) 正确返回重置hash 123- (NSUInter)hash &#123; return [self.name hash] ^ [self.birthday hash];&#125; 4:Block Block本质就是对象，因为本身就有指针。 1234567int main(int argc, const char * argv) &#123; void (^block)() = ^&#123; printf(&apos;hello world&apos;); &#125; block(); return 0;&#125; 使用clang 指令clang -rewrite-objc main.m 得到一个cpp 文件。定义完block，创建了一个函数，在创建结构体时，同时把函数指针也传进去了。之后就可以拿出来\b使用了。 5：线程间通讯参考网址 1) NSThread 12345678- (void)thread &#123; NSString *imageUrlString; [self performSelectorInBackground:@selector(loadImage:) withObject:imageUrlString];&#125;- (void)loadImage:(NSString *)imageUrlString &#123; NSData *imageData = [NSData dataWithContentURL:[NSUrl urlWithString:imageUrlString]]; [self performSelectorOnMainThread:@selector(updateUI:) withObject:imageData];&#125; 2) GCD 12345678910- (void)gcd &#123; NSString *imageUrlString; __Weak typeof(self) weakSelf = self; dispatch_async(dispatch_get_global_queue(0, 0), ^&#123; NSData *imageData = [NSData dataWithContentURL:[NSUrl urlWithString:imageUrlString]]; dispatch_async(dispatch_get_main_queue, ^&#123; weakSelf.imageView.image = [UIImage imageWithData:imageData]; &#125;); &#125;);&#125; 3) NSOperation 1234567891011121314151617181920212223242526- (void)operation &#123; __weak typeof(self) weakSelf = self; DownLoadOperation *downLoadOp = [DownLoadOperation new]; downLoadOp.imageUrlString = xxx; downLoadOp.finishedBlock = ^(UIImage *image) &#123; [[NSOperationQueue mainQueue] addOperationWithBlock:^&#123; weakSelf.imageView.image = image; &#125;]; &#125;; NSOperationQueue *concurrentQueue = [NSOperationQueue new]; [concurrentQueue addOperation:downLoadOp];&#125;@interface DownloadOperation : NSOperation@property (nonatomic, copy) NSString *imageUrlString;@property (nonatomic, copy) FinishedBlock finishedBlock;@end@implementation DownloadOperation- (void)main &#123; @autoreleasepool &#123; NSData *imageData = [NSData dataWithContentURL:[NSUrl urlWithString:self.imageUrlString]]; if (self.finishedBlock) self.finishedBlock([UIImage imageWithData:imageData]); &#125;&#125;@end 4) 加密算法 廖雪峰-node-crypto MD5和SHA1 12345const crypto = require('crypto');const hash = crypto.createHash('md5');//crypto.createHash('sha1');/sha256/sha512hash.update('Hello, world');hash.update('hello, nodejs');console.log(hash.digest('hex')); Hmac 可以把Hmac理解为用随机数“增强”的哈希算法 12345const crypto = require('crypto');const hmac = crypto.createHmac('sha256', 'your secret-key');hmac.update('Hello, world');hmac.update('Hello, nodejs');hmac.digest('hex'); AES 对称加密算法，加解密都用同一个密钥 123456789101112131415161718const crypto = require('crypto');function aesEncrypt(data, key) &#123; const cipher = crypto.createCipher('aes192', key); let crypted = cipher.update(data, 'utf8', 'hex'); crypted += cipher.final('hex'); return crypted;&#125;function aesDecrypt(encrypted, key) &#123; const decipher = crypto.createDecipher('aes192', key); let decrypted = decipher.update(encrypted, 'hex', 'utf8'); decrypted += decipher.final('utf8'); return decrypted;&#125;let data = 'Hello, this is a secret message!';let key = 'Password';let encrypted = aesEncrypted(data, key);let decrypted = aesDecrypted(encrypted, key); RSA 加解密，非对称加密 首先得到对应的公钥和私钥 12345678910111213141516const fs = require('fs'), crypto = require('crypto');function loadKey(file) &#123; return fs.readFileSync(file, 'utf8');&#125;let prvKey = loadKey('./rsa-prv.pem'), pubKey = loadKey('./rsa-pub.pem'), message = 'Hello, world';let enc_by_prv = crypto.privateEncrypt(prvKey, Buffer.from(message, 'utf8'));//enc_by_prv.toString('hex');let dec_by_pub = crypto.publicDecrypt(pubKey, enc_by_prv);//dec_by_pub.toString('utf8');//然后还可以反过来对称加密 5) category 里添加属性 category 它是在运行期编译的时候加上的，编译完成后对象内存已经确定，不能添加“_”\b的成员变量。 runtime 能添加对象的原因是因为：关联对象由AssociationsManager 管理，AssociationManager 里面是一个静态AssociationsHashMap 来存储所有的关联对象的。所以直接保存新的关联对象kv键值对即能添加成功。 6) autoreleasepool autoreleasepool本质上就是一个指针堆栈 @autoreleasepool{} 其实是实现了 12void *poolToken = objc_autoreleasePoolPush();objc_autoreleasePoolPop(poolToken); 7) KVC KVO深入研究 参考博客 KVC 运用isa-swizzling 类型混合指针机制。 [site setValue:@”sitename” forKey:@”name”]; -&gt; 123SEL sel = sel_get_uid(&quot;setValue:forKey:&quot;);IMP method = objc_msg_lookup(site-&gt;isa, sel);method(site, sel, @&quot;sitename&quot;, @&quot;name&quot;); KVC实现分三步.Step1:根据方法名找到运行方法所需要的环境参数；Step2:从自己isa指针结合参数找到具体方法实现接口；Step3:直接查找得来具体方法实现。 KVO在这篇文章能很好的解释博客 KVO后续。。。 系统默认注册5个Mode: kCFRunLoopDefaultMode:App 默认Mode，主线程。 UITrackingRunLoopMode:界面跟踪Mode，ScrollView 追踪触摸滑动，保证界面滑动时不受其他Mode 影响。 UIInitializationRunLoopMode:在刚启动App时进入的第一个Mode, 启动完成后就不在使用。 GSEventReceiveRunLoopMode:接受系统时间内部Mode,通常用不到。 kCFRunLoopCommonModes – NSTimer 对象以NSDefaultRunLoopMode(kCFRunLoopDefaultMode) 添加到主运行循环后，滑动scrollView NSTimer 却不动了？ NSTimer 是在defaultRunLoop 调用消息的，当我们滑动scrollview 的时候, NSDefaultRunLoopMode 模式自动切换成UITrackingRunLoopMode 下。所以NSTimer 需要在NSRunLoopCommonMode RunTime 添加类、方法、实例变量123456789Class myClass = objc_allocateClassPair([NSObject class], &quot;Person&quot;, 0);class_addMethod 其中types参数为&quot;i@:@“，按顺序分别表示：具体类型可参照[官方文档](https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ObjCRuntimeGuide/Articles/ocrtTypeEncodings.html)i 返回值类型int，若是v则表示void@ 参数id(self): SEL(_cmd)@ id(str) V@:表示返回值是void 带有SEL参数 （An object (whether statically typed or typed id)class_addMethod(myClass, @selector(addMethodForMyClass:), (IMP)addMethodForMyClass, &quot;V@:&quot;);BOOL isSuccess = class_addIvar(myClass, &quot;name&quot;, sizeof(NSString *), 0, &quot;@&quot;); 探讨atomic 一定是线程安全么atomic 是在getter 和setter 存取方法的线程保证原子性，\b并不能保证整个对象的存取动作是线程安全的。 在不同线程中写、读同一个对象，虽然写、读过程是原子性，但是由于等待之后，得到被修改的对象，还是：最终结果\b属于不可预测。 要保证存、读可预测，可使用下面几个\bapi锁住存取动作，保证线程安全、可预测： \bNSLock/NSLockLock/@synchronized(obj){}/pthread_mutex_t/OSSPinLock 其中性能比较: OSSPinLock &gt; pthread_mutex_t &gt; NSLockLock &gt; NSLock &gt; @synchronized 读YY作者提的几点优化TableView 效率对于GPU 等待显示器在一次VSync 时间内，CPU 或者GPU 没有完成内容提交，则那一帧就会被丢弃，等待下一次\bVSync 再显示，\b而这时显示器就保留了之前的内容不变，这就是界面卡顿的原因。 \bCPU 应该优化处理的几个点： 对象创建 对象\b调整：frame、bounds 会对CALayer 绘制、创建动画等有比较大开销 对象销毁，可以用一个小Tip：把对象捕获到block 中，然后扔到后台队列\b去销毁： 12345NSArray *tmp = self.array;self.array = nil;dispatch_async(queue, ^&#123; [tmp class];&#125;) 布局计算 Autolayout（复杂试图尽量使用其他如ComponentKit、AsyncDisplayKit 代替） 文本计算（尽量缓存） 文本渲染 图片解码 图像绘制（CoreGraphic 是线程安全的，可以放到后台进行绘制） 最近在搞React + Mobx 这一套我已经确定使用这套组合了。因为直接使用vue 感觉没有成就感。React 函数式 + 初学Mobx 的便利(redux 实在是太繁琐了，很多例子很被他绕晕了，真的真的放弃，虽然已经有点入门redux 了；) html首先碰到 第一个问题:Warning: A component is changing an uncontrolled input of type checkbox 原因是我的(input:checkbox) 在checkd时出现传递了undefined 进去，需要判别一下:(this.props.todo.finished === null ||this.props.todo.finished === undefined) ? false : this.props.todo.finished 第二个问题:Warning: Each child in an array or iterator should have a unique &quot;key&quot; 原因是在组件内部如： 1&lt;div&gt;&#123;for(...)&#123;&#125;&#125;&lt;/div&gt; 有for循环，那么需要给里面的子控件加上key={aString} 的参数: 12345&lt;ul&gt; &#123;this.props.todolist.todos.map(todo =&gt; ( &lt;TodoView todo=&#123;todo&#125; key=&#123;todo.id.toString()&#125;&gt;&lt;/TodoView&gt; ))&#125;&lt;/ul&gt;","categories":[],"tags":[]},{"title":"2018-9-16lesson.md","slug":"2018-9-16lesson-md","date":"2018-09-16T04:20:03.000Z","updated":"2018-09-17T12:05:04.000Z","comments":true,"path":"2018/09/16/2018-9-16lesson-md/","link":"","permalink":"https://shaohung001.github.io/2018/09/16/2018-9-16lesson-md/","excerpt":"","text":"2018/8/27typedef CF_ENUM(uint32_t, CGImageAlphaInfo) { kCGImageAlphaNone, /* For example, RGB. */ kCGImageAlphaPremultipliedLast, /* For example, premultiplied RGBA */ kCGImageAlphaPremultipliedFirst, /* For example, premultiplied ARGB */ kCGImageAlphaLast, /* For example, non-premultiplied RGBA */ kCGImageAlphaFirst, /* For example, non-premultiplied ARGB */ kCGImageAlphaNoneSkipLast, /* For example, RBGX. */ kCGImageAlphaNoneSkipFirst, /* For example, XRGB. */ kCGImageAlphaOnly /* No color data, alpha data only */ }; 重写OpenGL 纹理篇出错原因 glDrawxx 函数是必要的，把东西呈现上去的 纹理贴上去，很糊（glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);可以解决纹理模糊问题），有颗粒点，不晓得为啥。 纹理的图片索引定点，没有完全弄懂。 ###离开“粉粉”二个月了，来谈谈周身变化。 找了个离得比较近的公司，上下班骑车更快到啦。 早上9点出发上班。路上买包子，一路吃过去，吃饭正常后，精神状态等都好多了，记忆力现在强多了。 晚上相对回住所吃饭就早多了。太舒服了好吧。终于不用吃完饭，一看，哦，10点半了。写东西的么得了，现在吃完饭，楼下逛一圈还能有时间写、学东西。棒！ 空闲时间增加，不会那么那么那么的忙累、紧迫。因为“粉粉”给一个功能都是临界时间，然后拼命写，发现中间有逻辑漏洞，或者涉及其他，于是其实相对的给的时间是一个完整开发时间的70%。根本不够，严重不够！也由于空闲时间多了，我把OpenGL 终于入门了。小公司同时由于没有产品定位等，目前去做游戏去了，iOS 放一旁。不要太好，我就喜欢学新的东西。哈哈 周末都是双休了，学知识、去办事情、不亦乐乎啊。 以前是工作压力大，现在是赚钱压力大，想方法自己赚钱的压力。所以，出了“粉粉”，心里开心。已经没有太多要问的，在里面该学的也拼命学够了。开森！ pod install 失败弹出#-bash: /usr/local/bin/pod: /usr/local/opt/ruby/bin/ruby: bad interpreter: No such file or directory#查到https://www.jianshu.com/p/e4a70c40bfea先尝试$ brew link --overwrite cocoapods我这里提示#Error: No such keg: /usr/local/Cellar/cocoapods# 于是直接执行123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081brew reinstall cocoapodsbrew install rubybrew link --overwrite cocoapods``` 完美解决问题### 价值之前一直在想，什么能保值？什么才是有价值的？RMB？美元？黄金？车子、房子、实物、食物？RMB 会贬值，如果货币超发，政府和人民抢钱，最后就会和津巴布韦币一样；反正RMB 价值话语权不在自己手上，我不认同；中国那么多富二代、官二代，一个个拽得一批，我想，我要比王思聪有钱，我说话能“喷喷喷”他一脸、“滋滋滋”格力一姐一脸。有什么好嘚瑟的，最多不赚你钱，凶个奶子。不跟他们一般见识，百年人生而已，活好自己的，不用比较。他们会斥责下属，说明很看重身份、排名、地位、权力。自己有余粮，活得潇洒，心是红的，眼睛黑的，何必跟这些眼睛变红了，心就变黑了的人计较，继续。美元？同样，美国也想抢其他国家的钱。货币只是一种等值替换，跟RMB 好那么一丢丢，毕竟他相对信誉体系稳定；但是，货币不如实物，毕竟人这一生就只有短短百年，如果是“龙哥”这类就更要珍惜，活在社会只有短短10数年，其他都在监狱度过，然后就躺下了。所以，让自己这一生过的舒坦，那就实物：有车有房、有实物、有食物。我觉得我会那么知足点。但是，有没有更好的，实物等都是会消耗的，没有前景，所以也不是我想探讨的，我这里直接给出答案：女人、技术。就是这两个玩意s，复数。集合多几个女人，多个技术，持续不断赚钱，才是能保值的。人多，力量大，自己女人，还有什么不可信任（不过女人多几个后，信任度肯定会降低，毕竟是女人这种生物，爱的不均与，不患寡而患不均嘛）。技术去学习，各种学习，不必全都创新、研发，只需将他人技术学会，和自己的技能点融合，运用，产出。最近也一直感受到，其实技术赚钱，这事是可以做到的，但是要持续耕耘，不断推陈出新。反正只要你在领域付出、思考，就能有收获（不要钻牛角尖，大家不是傻子）。所以接下来大家懂了吧，什么才是将财富聚集、保存实力的方法了吧：多聚集信任之人（最好是女人，毕竟女人好玩嘛），然后深入技术，去运用，去产出。### Cannot find module &apos;webpack&apos;在安装完webpack 之后，出现标题提示，使用`npm link webpack`## glTexParameteri方法说明设置纹理循环模式、设置纹理过滤模式https://blog.csdn.net/d04421024/article/details/5089641glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLEAMP);GLTEXTURE_2D:操作2D 纹理；GL_TEXTURE_WRAP_S:S方向上的贴图模式;GL_CLAMP:将纹理坐标限制在0.0~1.0范围内，超过作拉伸填充glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP);glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);GL_TEXTURE_MAG_FILTER:放大过滤；GL_LINEAR：线性过滤，使用距离当前渲染像素中心最近的4个像素加权平均值；glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_NEAREST);GL_TEXTURE_MIN_FILTER:缩小过滤；GL_LINEAR_MIPMAP_NEAREST：使用GL_NEAREST 对最接近当前多边形的解析度的两个层级贴图进行采样，然后用这两个值进行线性插值。## glTexImage2D加载图像数据并上传纹理https://blog.csdn.net/jeffasd/article/details/78135588glTexImage2D(GLenum target, GLint level, GLint internalformat, GLsizei width, GLsizei height, GLint border, GLenum format, GLenum type, const GLvoid *pixels)target: 指定活动纹理单元的目标纹理。GL_TEXTURE_2D, GL_TEXTURE_CUBE_MAP_POSITIVE_X, GL_TEXTURE_CUBE_MAP_NEGATIVE_X, GL_TEXTURE_CUBE_MAP_POSITIVE_, GL_TEXTURE_CUBE_MAP_NEGATIVE_Y, GL_TEXTURE_CUBE_MAP_POSITIVE_Z, 或GL_TEXTURE_CUBE_MAP_NEGATIVE_Z。level: 指定详细程度编号。级别0是基本图像级别。级别n是第n个缩略图缩小图像。internalformat: 指定纹理的内部格式。必须是下列符号常量之一：GL_ALPHA, GL_LUMINANCE, GL_LUMINANCE_ALPHA, GL_RGB, GL_RGBA.width, heightborder: 指定边框宽度。必须为0.format: 指定纹理数据格式。必须匹配internalformat。 下面符号被接受: GL_ALPHA, GL_RGB, GL_RGBZ, GL_LUMINANCE, GL_LUMINANCE_ALPHA.type: 指定纹理数据的数据类型。下面的符号值被接受: GL_UNSIGNED_BYTE, GL_UNSIGNED_SHORT_5_6_5, GL_UNSIGNED_SHORT_4_4_4_4, GL_UNSIGNED_SHORT_5_5_5_1.data: 指向内存中图像数据的指针。## glActiveTexture(GLenum texUnit)https://www.douban.com/note/627332677/该函数选择一个纹理单元，线面的纹理函数将作用于该纹理单元上，参数为符号常量GL_TEXTUREi.Active 应该理解为选择(Select)某纹理单元(Texture Unit)，即表示后续的glEnable(GL_TEXTURE_2D) 和glBindTexture(GL_TEXTURE_2D, texture)作用域此所选的纹理单元。 void glActiveTexture(GLenum textureUnit) { currentTextureUnit = textureUnit - GL_TEXTURE0;} void glBindTexture(GLenum textureTarget, GLuint textureObject) { TextureUnit *texUnit = &amp;textureUnits[currentTextureUnit]; switch(textureTarget) { case GL_TEXTURE_1D: texUnit-&gt;targetTexture1D = textureObject; break; case GL_TEXTURE_2D: texUnit-&gt;targetTexture1D = textureObject; break; case GL_TEXTURE_3D: texUnit-&gt;targetTexture1D = textureObject; break; case GL_TEXTURE_CUBEMAP: texUnit-&gt;targetTextureCube = textureObject; break; }}` 回顾最近学习OpenGLES 学习参考路线一个合适自己的学习路线比什么什么讲师什么什么高级书都重要一万倍，如果找到了对应的路，将对带给自己事半功倍的效果。我直接说出根据哪个博客，那些系列，之后再讲这些博客能得到什么。 简书-清墨 知乎-叶孤城的iOS杂货铺 简书-落影 以上是按顺序学习。 清墨的博文教学很简单易懂，这个大哥应该去当老师。很细心，能把他全部学完，就能做个3D 的场景了。他最后一个提问：为什么图片模糊，线段有棱角？解答是: glTexParamiv 的 gl_Texture2D_Mag_Filter、gl_Texture2D_Min_Filter 设置为gl_clamp_to_edge，这样线段就不会有棱角; 将self.view.contentFactor 设置为[UIScreen mainSceen].scale, 同时设置各个要放大的地方为相应倍数，这样图片就不会模糊。 iOS 码农介的\b吴彦祖在知乎开了新的ID：叶孤城。名号多，但是写的也是非常好。同时期待他能写出更多好文章，小弟很受用，非常非常感谢。他的从0打造一个GPUImage\b从(1)~(6.2)学完就能做一个pipeline 滤镜。 \b提醒一点，必须先学完清墨的博文，叶孤城估计太忙，中间一小部分没有完全讲透一些语句的作用，会很疑惑。 落影的文章很全，先学习OpenGLES 文集，不要学太深(目前要用的知识学完就好)，然后看GPUIMage 文集。对落影大哥的文集点评一下，他的\b文集很全，但是注释的\b关键地方都少，代码关键地方注解还不够。有些很迷糊。 可以理解为升级版学习。","categories":[],"tags":[]},{"title":"2018-8-3lesson","slug":"2018-8-3lesson","date":"2018-08-25T06:50:29.000Z","updated":"2018-08-25T06:52:38.000Z","comments":true,"path":"2018/08/25/2018-8-3lesson/","link":"","permalink":"https://shaohung001.github.io/2018/08/25/2018-8-3lesson/","excerpt":"","text":"2018/8/3TS 使用enum 出现[ts] Operator ‘==’ cannot be applied to types[ts] Operator &#39;==&#39; cannot be applied to types &#39;CheckCleanStep.Idle | CheckCleanStep.Input&#39; and &#39;CheckCleanStep.Check&#39;.Typescript 出现和这个issue https://github.com/Microsoft/TypeScript/issues/15835 一样。目前解决方法是，在判别的时候，强制判别类型123if ((checkStep as CheckCleanStep) == CheckCleanStep.Check) &#123; //do stuff&#125; 周末写Typescript 游戏有感 egret TypeScript 游戏在lib 选项，是es5，于是在要用到Map、Set 时，需要给其添加上es6 才能使用。由于在最终打包时，只能打为es5，尴尬的一幕出现了：Map 在’for of’ 语句 提示，在es5 中，不能使用literial，没有这玩意(该为es6 新增对象)一样。使用’for in’ 出现的问题是该loop 不会进入。还有一种备选办法是：Array.from(map.keys()/map.values())这样在每次都需要创建新的Array。最终我的处理是map.forEach((value, key) =&gt; {}) 之前写法是Object =&gt; {} 保存数据格式。简直太js，于是全部改为对象处理。啊，啊，，爽。 需要注意的是Map、Set 在需要正确使用set、add、get、size、delete等。千万千万别map[key] = value;变成使用{} 对象方法了。 egret 中exml 的元件是在this 对象中。 游戏的好不好玩并不是功能。体现在对游戏的难度分级和结果回馈。难度分级就是由简单到复杂，由平缓到陡峭。结果肯定明了：分数不能低的难看啊，怎么的，玩个200多分、300分，心里爽啊。20分就难看啦。 断点修改，好用，for 循环的断点，太好用，简直。 逻辑、玩法多打注释。毕竟游戏跟需求是天生姻缘。 合理的建立对象。合理的摆放对象坐标。 对象初始化。如果知道对象初始化为null，数组初始化个数，则在申明时就给其定义规则。 egret.Sound 这个类，不能被继承！我继承就报错，之后接触多了再看原因。 声音播放有个大坑。初始化完我就播放，老是会播放惜败，似乎要延时播放才可以。其 示例- 声音播放 教程，是初始化完成、界面显示完成后，用户点击播放，那么微信、QQ、网页、模拟器都是播放正常的。但是修改成mp3 加载完成立即播放，就也是QQ、模拟器能播放，其他都不能播放了。 nginx 出现permission delay 原因是控制该nginx 的能力为nobody，权限不够。改为user root;能暂时解决该问题。但是安全性不够。 设置egret 游戏服务器1234567server &#123; listen 80; server_name www.lsgood.top lsgood.top; root /root/Work/web/; index index.html; &#125; web 目录下是popcirle 的文件夹游戏web/popcircle/index.html所以最终游戏目录为：http://lsgood.top/popcircle/index.html egret 打包小游戏的坑 打包显示index.html “data-scale-mode” 的模式”showAll” 错误，改成”fixedWidth” 做小游戏，申请wxAppid，在微信选择面板一定要选择游戏，不然会出现提示”app.json”找不到，因为此时换成了”game.json” VM4477:1 gameThirdScriptError ReferenceError: Boom is not defined出现的问题是:egret - scripts - wxgame - wxgame.ts 里面”async onFile(file: plugins.File) {“ 方法最后一句1234if (filename == &apos;main.js&apos;) &#123; content += &quot;;window.Main = Main;&quot;;&#125;file.contents = new Buffer(content); 改成：12345678if (filename == &apos;main.js&apos;) &#123; content += &quot;;window.Main = Main;&quot;; [&quot;Circle&quot;, &quot;GameData&quot;, &quot;GameOverLayer&quot;, &quot;GameScene&quot;, &quot;Kill&quot;].forEach(v =&gt; &#123; content += `window.$&#123;v&#125;=$&#123;v&#125;;` &#125;); &#125;file.contents = new Buffer(content); 添加的为你要加入的新的类名。空的不要添加！ 玩的时候闪屏:index.html 的”data-frame-rate” 改为60桢(之前的是30) 调用第三方库，小程序找不到，比如particle解决方法：在egret - scripts - wxgame - wxgame.ts 里面”async onFile(file: plugins.File) {“ 方法对应增加一句,如：123if (filename == &quot;libs/modules/particle/particle.js&quot; || filename == &quot;libs/modules/particle/particle.min.js&quot;) &#123; content += &quot;;window.particle = particle;&quot;;&#125; 表示链接新的库 egret 粒子系统内存问题https://xmanyou.com/egretde-li-zi-xi-tong-nei-cun-xie-lou/参考的这篇。先删掉再说，嘿嘿。在要离开页面的地方：this.particleSys.close(true); openDataContext 是公共域，开放权限的地方。其他都为主域。公共域只允许进数据。platform.js 通过12const openDataContext = wx.getOpenDataContext();openDataContext.postMessage(data); 把data 传进去,然后openDataContext.index.js 接受：123456function addOpenDataContextListener () &#123; wx.onMessage((data) =&gt; &#123; if (data.command == &apos;open&apos;) &#123;&#125; else if (data.command == &apos;loadRes&apos;) &#123;&#125; &#125;)&#125; 然后里面去拿数据、展示页面等。openDataContext 只有postMessage、onMessage、shareCanvas 三个可以和外部交互的功能。所以另起一个Promise function 走不通；往postMessage 传入callback 也是不行的：postMessage 只接受基础变量，其他的会被过滤。 这时 wx.getFriendCloudStorage 这个方法只允许在公共域处理拿数据、处理数据、展示数据！同时记住：get 回来的数据最后一层是string 哟。 wx.setUserCloudStorage 可以在各个地方获取。我直接写在platform.js 下另起一个12345678910111213setWxStorage(dataStr) &#123; return new Promise((resolve, reject) =&gt; &#123; wx.setUserCloudStorage(&#123; KVDataList: [&#123; key: &quot;score&quot;, value: dataStr &#125;], success: res =&gt; &#123; resolve(res); &#125;, fail: res =&gt; &#123; reject(res); &#125; &#125;) &#125;);&#125; 注意，value 一定要是str就可以了。 头像没有显示出来。不知道为啥。当你选择下一页的时候居然又出来了。先这样吧。 自己最高分方案是使用本地缓存，然后判别是否有更高分进行setUserCloudStorage。 由于openDataContext权限问题，那么好友分数排序就只能从getFriendCloudStorage 数据之后进行json 对象化，转换数据格式、然后排序。排序使用js 的Array.prototype.sort((n1, n2) =&gt; {}) 高阶函数排序。 当前判别是否是wxgame 还是h5，使用platform.openDataContext == null。 记录微信小游戏打包过程。个人微信账号，只需填写两个资料：1游戏自审自查报告；2计算机软件著作权登记证书。游戏自审自查这里采用一个jpg，申明微信小游戏在一开始添加了“健康安全提示语”，且截图小游戏加载页面；其他包括授权、公司名称等；同时还有公司的对此发行软件责任等。计算机著作权登记证书 是去软件著作权中心申请（plz，去那边申请太慢。如果小游戏还比较小，可以先网上找个著作权ps 凑和，不然要等很久）。 公司账号需要填写4个资料等，很麻烦。这个资料没找齐，没搞。 游戏创作完成后，直接点击顶部的上传，即可上传测试文件。在微信公众号:https://mp.weixin.qq.com 登录之后 - 开发管理 - 开发版本 里面会有最新的开发包。在下拉选项卡中“发布测试” 可以发布一个包含填写的测试人员们内部测试的包。如果点击“提交审核”则直接发布release。接下来就是填写信息然后发布啦。流量主，这个功能有个门槛，需要用户达到1000个以上才可以申请。 看raywenderlich 网站文章英语对高考英语失利有感高考一直有个遗憾，前三科手感超出我的预期。英语是最后一科，而我也是班里英语前三，第一位置偶尔也能轮换位置的人，在最后却发挥失常。有几个原因，其中一个与今天“有感” 有关联。 前三科太轻松，超过了我的预期，特别是我最不熟练的数学、理综。心存侥幸（我的运气一直是爆表的，感觉和住在庵堂旁边有关系），心里稍稍在高考第二天下午放松。 那天中午也由于太高兴，自己内心有估算的，于是玩起2011年火热的iPod 街霸游戏。我确实还是没有长大啊，内心的开心，总得释放，不能与他人语（成绩还要1个月后出来，要低调），那就释放玩游戏；心想“下午正是我最拿手的英语，简单”。 我一直贯彻“李阳英语”理念，一直拼命的读，没事看看文章。特点是平时的交流都能顺利，我觉得基本能和外国人日常交流。虽然脑袋中午放松，成绩也不能低到哪里去，所以出弱势问题，可能：贯彻的“李阳英语”理念也有一个弊端，那就是对高考学术型的英语不一样。高考学术型，听力比模拟考时正式，听得时候平常心里是不翻译，而是直接内心模拟出场景，高考时，心里紧张（外加中午没休息好），硬是内心一句一句翻译却跟不上读速了；笔试部分也由于听力失利（自己感受的出来，蒙的比例比以前多多了），感觉有一点点困顿，不太在状态；心里有点后悔中午没休息好；总的来说，有得有失，到现在内心也已翻不出大波浪，时过境迁。要是我更多分，我还会想现在这样么？或许会有那么点不一样吧，也许吧。 掌握知识点的表现当你能描述出那个知识点，同时将他比喻出来。比如面向过程和面向对象，你就可以这样比喻：同样是煮一杯咖啡，面向过程是讲步骤过程化，每个步骤要干什么，满足什么条件，于是就出来了什么咖啡；面向对象的不同点是，关注的是拆解元素，比如承装的被子，煮咖啡机器，水元素，model 这一很重要的概念。所以我也能大致确认，大部分的知识点，可以使用我们日常一些元素，环境描述，那么你就真正得到了该知识。 微信分享时，背景声音在回来后没有再播放找到wxgame 全局搜索var innerAudioContext = wx.createInnerAudioContext();找到了weapp-adapter.js 下856行，然后下面添加这两句即可：123456wx.onShow(function () &#123; innerAudioContext.play();&#125;);wx.onAudioInterruptionEnd(function () &#123; innerAudioContext.play();&#125;); 这几天终于把微信排行榜的问题搞好啦。非常给力。接下来就是微信分享，别人点击后得到相应礼品、物品值+ 三个可以和外部交互的功能。这两天看OpenGL 遇到的等等数学知识思考大学为什么没学会，或者说没学 盘点下遇到的有欧拉角 四元数、笛卡尔坐标、齐次方程组、万向节；这么些需要建模，知道大概，然后将其映射到目前工业、图形学重要应用的知识，居然在大学只是书里画了个图，黑板上一直写，快考试的时候说会考，仅此而已？为什么不是老师们代码建模，把形状形态，大致描绘出来？中间会出一些问题，带着问题思考，生动形象点？难道还如授课的教授们当年学习般，只有靠“拼命学”才能“突出重围”么？教授年纪都比较大，但是前缘的技术也是需要接触的。让更生动的计算机科学和数学结合，让更多人参与到知识的海洋中，而不是一些死记硬背，目的只是“拼命学”“突出重围”的一小部分人得到知识的一小部分；大部分人都可以参与，可以互相讨论。更多人参与才能带动领域的增强，讨论才能出点子，才能出一些人想不到的思绪。然而并没用。如今离开大学，我又重新看这些晦涩难懂的知识。能稍稍理解，如果要进一步理解呢？那就是直接将他们画出来，运用起来。 小游戏登录解密首先准备小游戏的appid 和appsecret。之后会用到用户wx.login 的时候得到code；用户wx.getUserInfo 的时候得到a = {encryptedData:xxx, iv:xxx, userInfo:xxx};a 里面的userInfo 数据不完善，没有用户ID。其他更多信息。通过去微信服务器得到一个session_key可以解开。在这个目录里面有该资料：code 就是登陆时候返回的code。APPID 为小游戏APPID。SECRET 为小游戏的密钥。https://api.weixin.qq.com/sns/jscode2session?appid=APPID&amp;secret=SECRET&amp;js_code=JSCODE&amp;grant_type=authorization_code会返回 12345//正常返回的JSON数据包&#123; &quot;openid&quot;: &quot;OPENID&quot;, &quot;session_key&quot;: &quot;SESSIONKEY&quot;,&#125; 然后通过hmac_sha256解密得到数据信息1signature = hmac_sha256( post_data, session_key )","categories":[],"tags":[]},{"title":"2018-7-23lesson","slug":"2018-7-23lesson","date":"2018-08-02T13:48:43.000Z","updated":"2018-08-02T13:50:14.000Z","comments":true,"path":"2018/08/02/2018-7-23lesson/","link":"","permalink":"https://shaohung001.github.io/2018/08/02/2018-7-23lesson/","excerpt":"","text":"2018/7/23今天又发布了Colox 的第二版本，感悟到其中一些思想。要做好一个完整，商用的产品，需要经过： 核心功能研发 整体方向，回款（产品售卖、广告营收、产品获利、周边发展等） UI 整体视觉 上线 开发营收 产品推广、改进 这几个阶段我觉得是个人开发很好的流程，而且一经决定一定要坚持下去。我好几次都把产品开发拖的很长。原因有几个： 我在学习后台（当时有这么好的学习资源） 后台差不多了，也使用当时的语言js 学习游戏开发（也是刚好有这资源） 一直的学习，心却是有点累。 所以有时在家里搞着搞着，才搞了一个功能，或者某些小功能就退却，打游戏到了深夜。之前在粉粉，每天下班回来晚，已经是半条命；现在新的公司终于终于能抽出空了呀！而且目前还在开发阶段，也不会特别特别紧，所以整体感觉都好了很多。目前把产品推进，“哈皮涂色” 进入到了开发营收。我觉得可以有这几个点营收： 设置页面给一个二维码，是“鼓励开发哥哥，让他快马加鞭做出更好的产品” 横幅广告、激励性广告营收 内购该产品 CollectionView 里面layer.frame = framehttp://adad184.com/2015/11/10/disable-uicollectionview-implicit-animation/UICollectionView.reloadData 时会做隐式动画。可以使用以下三种：1234567891011121314151617181920//方法一[UIView performWithoutAnimation:^&#123; [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];&#125;];//方法二[UIView animateWithDuration:0 animations:^&#123; [collectionView performBatchUpdates:^&#123; [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]]; &#125; completion:nil];&#125;]; //方法三[UIView setAnimationsEnabled:NO];[self.trackPanel performBatchUpdates:^&#123; [collectionView reloadItemsAtIndexPaths:@[[NSIndexPath indexPathForItem:index inSection:0]]];&#125; completion:^(BOOL finished) &#123; [UIView setAnimationsEnabled:YES];&#125;]; 但是我要做的是一个gradientLayer 的布局(单元格形状不一样，布局是一样的)，不得已。于是这句话拯救了我，不然我就要用一张图片解决我问题了，问题是：1234567如果你的cell中还包含有CALayer的动画 比如这样- (void)layoutSubviews&#123; [super layoutSubviews]; self.frameLayer.frame = self.frameView.bounds;&#125; 解决方法是：1234[CATransaction begin];[CATransaction setDisableActions:YES];self.frameLayer.frame = self.frameView.bounds;[CATransaction commit]; LaunchScreen.storyboard 动态设置版本号https://www.jianshu.com/p/5253f671436b哈哈，连header 都是拿的原作者的。小弟这里记录记录。 选中LaunchScreen.storyboard 的label，为该label 的Show the Identity inspector(XCode 最右边栏从左到右边：文本、问好、xx -&gt; 就是这玩意啦),在Document - Label 填入”APP_VERSION”. 点击Project - Target - Build Phases - “New Run Script Phase” 给新创建的”Run Script” 改名为 “Update Launch Version”, 同时展开它 在Shell 后面输入 /bin/bash，然后在下面输入脚本语句写入:12versionNumber=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleShortVersionString&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;)sed -i bak -e &quot;/userLabel=\\&quot;APP_VERSION\\&quot;/s/text=\\&quot;[^\\&quot;]*\\&quot;/text=\\&quot;v $versionNumber\\&quot;/&quot; $PROJECT_DIR/XXT/resource/Base.lproj/LaunchScreen.storyboard 以上script 注意3个点: $PROJECT_DIR/XXT/resource/Base.lproj/LaunchScreen.storyboardXXT是工程target 名。 /resource/ 是对应LaunchScreen 位置(ps 我改过他的位置了) sed 前面有折行。如果运行正确，效果没出来的，给sed 前面折行 至此以后就不用那么麻烦了。 记录一次iOS 上传release 包出现”ITMS-90037”，debug 正常 debug 非常正常。打包到fir.im 里面OK。 上传testfly 的时候，总是出现ERROR ITMS-90037: &quot;This bundle is invalid. The Info.plist file is missing or could not be parsed. Please check it for embedded control characters.&quot;查google，大部分说 问题描述：这个包是无效的。Info。plist文件丢失或不能被解析。请检查plist的字符。问题解决：info.plist 里面有一个非法字符，用终端打开这个文件查看一下，可能会有中文的字符或其他不能识别的字符。 但是我大眼瞪小眼还是没看出来。从另一个角度：APP 之前可以上传；中间重大改版，里面用到了AliyunvideoPlayer 我觉得有问题。然后我看到这篇文章：https://www.jianshu.com/p/f62c7767e16b里面链接到这篇https://blog.csdn.net/q_littlestone/article/details/51000112 里面的这篇：http://ios.jobbole.com/84323/终于找到了最终问题，并说明了原因：里面有第三方framework。其framework 里面的123Bundle versionBundle identifierBundle versions string, short 没有和项目自己的对应。如果你自己还有bundle，里面取名不要使用Info.plist 或者info.plist处理办法： 改变自己bundle 里面的Info.plist / info.plist 讲第三方的Info.plist 里面的 “Bundle version/Bundle identifier/Bundle versions string, short” 改为和主Info.plist 内容一致。最终终于通过了。我的天，我花了快1天半呀。需要不断尝试，同时看是否能上传成功，同时也要和以前对比。打包、上传。半条命。 记录一次Xcode release 下打包CFBundleVersion +1打包增加CFBundleVersion 需要另外考虑一件事：几个同事之间打包，build 号可能会污染。可以使用时间或者git 上传次数。当前使用的是自动+1 操作。首先 在Build Phases 里面增加一个Run script. 修改下名字，比如：AutoIncreaseBuildVersion 把其拖到第一个下面 增加script 如：123456789101112#!/bin/bash// 判断是哪个configuration// Release Debug 或者只自定义的配置if [ &quot;Release&quot; != &quot;$&#123;CONFIGURATION&#125;&quot; ]// 如果是Release做哪些事情then// 如果不是Release做哪些事情 exit 0 退出 不执行下面的代码fibuildNumber=$(/usr/libexec/PlistBuddy -c &quot;Print CFBundleVersion&quot; &quot;$INFOPLIST_FILE&quot;)buildNumber=$(($buildNumber + 1))/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$INFOPLIST_FILE&quot; 上面的exit 0 可以注释也可以加上。效果就是其他CONFIGURATION 不会执行下面动作 跟随时间变化123#!/bin/bashbuildNumber=$(date +%Y%m%d%H%M%S)/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$INFOPLIST_FILE&quot; 获取info.plist信息 CFBundleVersion 可以更改为想获取的信息的名字1234567buildNumber=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleVersion&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;) shortVersion=$(/usr/libexec/PlistBuddy -c &quot;Print :CFBundleShortVersionString&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot;) buildNumber=`date +&quot;%m%d&quot;` buildNumber=&quot;$shortVersion.$buildNumber&quot; // 设置info.plist/usr/libexec/PlistBuddy -c &quot;Set :CFBundleVersion $buildNumber&quot; &quot;$&#123;PROJECT_DIR&#125;/$&#123;INFOPLIST_FILE&#125;&quot; 修改项目显示名称为版本号（适用于不同版本号装到一个机器里面，便于区分是哪个版本）12345678910111213#/bin/bashif [ &quot;Release&quot; != &quot;$&#123;CONFIGURATION&#125;&quot; ]; thenDisplayName=$(/usr/libexec/PlistBuddy -c &quot;Print CFBundleShortVersionString&quot; &quot;$INFOPLIST_FILE&quot;)DisplayName=&quot;ep$&#123;DisplayName&#125;-I&quot;/usr/libexec/PlistBuddy -c &quot;Set :CFBundleDisplayName $DisplayName&quot; &quot;$INFOPLIST_FILE&quot;elseDisplayName=&quot;真正的项目名称&quot;/usr/libexec/PlistBuddy -c &quot;Set :CFBundleDisplayName $DisplayName&quot; &quot;$INFOPLIST_FILE&quot;fi 记录一次使用Egret wing 调试出现“No such module: atom_renderer_v8_util”崩溃到这一句”return process.binding(atom_${process.type}_${name})” 然后换成debug 用chrome 可以用几次，但是用出错。明明没有代码错误，把代码拷到另一个工程，又能运行。最终解决：把翻墙关了。网上也有一些解决方案，但都没有说到点，心里还嘀咕怎么可能跟我shadowSocks 有关。后来确实没有再出现了。","categories":[],"tags":[]},{"title":"2018/6/28lesson","slug":"2018-6-28lesson","date":"2018-07-21T01:28:37.000Z","updated":"2018-07-21T01:31:08.000Z","comments":true,"path":"2018/07/21/2018-6-28lesson/","link":"","permalink":"https://shaohung001.github.io/2018/07/21/2018-6-28lesson/","excerpt":"","text":"2018/6/28记录一下这几天的事之前从粉粉离职，原因有很多很多方面导致我在这大热天毅然决然的选择离开. 工资从未提升，哪怕变动或者变少都行，表示公司有一定考核.2.周末采取单双休，双休的时候感觉太幸福了；单休的时候，周日等于没有休息，等于连上12天班。饥饿策略。 项目采用快速迭代策略，2周一版本，代码质量要管控、逻辑要管控、需求没有明确特别是需求不明确，做到一定才发现有些有冲突，或者有些和另外东西结合了，或者导致另外东西也要变动，然而时间也是被一并算进迭代版本里面。正如最后要走时，旭哥和我开玩笑的说‘在外面公司好点，因为他们不懂代码，粉粉技术懂，所以就会很紧，以后你就会舒服啦’。是的，他们懂代码他们也为我尽量宽松了些，但是细节可能在做到的时候才会碰到。 公司感受不到我的存在位置，我就是个码农？这不是我想要的。 进粉粉目的如同我刚上大学就知道自己绝不会考研一样：‘我是来学技术的’。学完如果公司还有我存在的意义，那么我会选择留下来，以上总总都没有。 后来和根根（前粉粉安卓组成员）聊天时，他说的也正是我明了的：粉粉 是不是觉得 举步维艰 、陷入泥潭一样？ 所以我预算的最好的时间就是学完，前端学完，后端学完，溜了溜了。期间面试了有十数家公司。 有+我才3个开发的公司，产品基本等于设想的。 有要做区块链 的公司（好多家都想蹭这个热度） 有做广告SDK 的（当时去到该处，我先看他们代码，告诉他们这要做什么，对我来说有什么理解、难处等等） 有做心理学社交的，我当时先让他电话面试，别他们觉得不合适，我就可以不用过去了 也有做公司产品+外包的 我拒绝了几个（3、4个，六月份找工作确实不好找） 我被拒绝了2次一个做医疗社交的，看他开价12 - 19，，又看到他们内部技术，我的天，那就意思意思17左吧，，真没漫天要价。一个做看小说的，似乎有个产品叫“漫画”似乎要很牛逼的，，我特么不写着我自己期望的嘛，你特么喊我过来，问的问题我以为什么鬼。搞得很牛逼的样子，反正不用理这个。继续自己的学习发展，确实很都比的人） 得到4、5个offer。最后来到一个也是做社交的小公司。正好可以把从粉粉学到的运用上去。 老实说，当时看到他们的代码，有种熟悉又不熟悉的味道。代码规范、格式，这里不存在的。创建者是个php 的小哥（即将离开），能力不咋滴（产品逻辑、规范、Wiki、流程都不知道）还拽的250似得。我也懒得和这种性格有缺陷的人多聊一会，问documents 有没有？不存在的，全部是3、4年前写的种使用字典；服务端也别想有documents。反正一团糟。哈哈。反正所有东西都是3、4年前那一套。 那我就慢慢来好了，我不急，急不来，自己好好规划规划就可以了。 来到这个公司，有几个特点。 优点：公司有自己目前主营业务。新来了个小哥php 、规范等和自己有共同语言，产品负责人和c 哥很像。多年产品人，设计，游戏设计。新来的那个小哥也做白鹭游戏，这个是我想要的。之后可能也会分配做些游戏。老板似乎是宁波人，公司方面也有和宁波政府合作。这个和我也有点想去宁波发展发展有点好处。额，还可以还可以。 缺点：确实没有粉粉明面上的热闹，进来之后感觉我有点无足轻重。技术垃圾到极点（目前都走光了，剩下产品大哥-长得有点像‘无所谓’的杨坤，和php 小哥）。老板性格、说话有点像干辉，哈哈。老板一点都不懂技术，但是比较会被技术说的云里雾里，然后似懂非懂。老板管理上不咋滴的。 好吧，吐槽吐槽就到这里了。不多说，溜了溜了。 UICollectionView addSubviews UIView 内部有autolayout CollectionView 视觉出bug错误确定为：CollectionView addSubviews 里面不能存在内部有约束的UIView。否则其直接导致CollectionView 内部结构、内部约束直接紊乱。其上的新增detailInfoview 有两种方法可以处理1：如同当前新建view 处理，内部全部为frame 布局。目前来看似乎还不错2：在CollectionViewLayout 上多流出来一个layoutAttributes，给第一个，然后frame 由代理DataSource 从controller 得到。这样等于得到一个特定cell Xcode 插件还能用curl -fsSL https://raw.github.com/alcatraz/Alcatraz/master/Scripts/install.sh | sh但是提示 xcrun: error: unable to find utility “xcodebuild”, not a developer tool or in PATH https://www.jianshu.com/p/ff1d99fe1d17 opened Xcode.PreferencesLocationsSelected the Command Lin Tools: (选择xcode版本) -&gt; Alcatraz successfully installed!!1!🍻 Please restart your Xcode (9.4). 然后解决Xcode 8 之后不能使用Alcatraz https://www.jianshu.com/p/0b541f145a1a 123$ sudo gem install update_xcode_plugins$ update_xcode_plugins$ update_xcode_plugins --unsign Choose which Xcode you would like to unsign (use arrows): Xcode (9.1) [Signed]: /Applications/Xcode.app$ Y 似乎出现了Xcode 关闭之后，再打开，PackageManager 不见了。解决请参考： https://www.jianshu.com/p/a9448154c09e 之后确实都出来了，不知是否这个原因 iOS 转场动画很久没有做转场动画了。这里把遇到的坑填一填。 如果程序中改变了某个空间的transform 不要使用frame；视觉bug 是其会变成CGRectZerohttps://www.jianshu.com/p/9dfd337e8266应该使用bounds+center iOS 某个VC rotation 还有statusBar 状态//http://www.jianshu.com/p/4196d7cf95f4BaseNavigationViewController:1234567891011/*顶部状态栏 接下来会调用该viewController 的- (BOOL)prefersStatusBarHidden &#123; return YES;&#125;- (UIStatusBarStyle)preferredStatusBarStyle &#123; return UIStatusBarStyleLightContent;&#125;*/-(UIViewController *)childViewControllerForStatusBarStyle&#123; return self.topViewController;&#125; 程序默认为UIInterfaceOrientationMaskPortrait那么在BaseNavigationViewControlelr123-(UIInterfaceOrientationMask)supportedInterfaceOrientations&#123; return UIInterfaceOrientationMaskPortrait;&#125; 在需要的ViewController加入：12345678910111213141516171819202122- (BOOL)shouldAutorotate &#123; return !self.isLocked;&#125;//这个比较重要。这里告诉了system 当前到底支持哪些种旋转方式- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; if (self.isLocked) &#123; return UIInterfaceOrientationMaskPortrait; &#125; else &#123; return UIInterfaceOrientationMaskPortrait| UIInterfaceOrientationMaskLandscapeLeft| UIInterfaceOrientationMaskLandscapeRight; &#125;&#125;- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation&#123; if (self.isLocked) &#123; return toInterfaceOrientation = UIInterfaceOrientationPortrait; &#125;else&#123; return YES; &#125; return (toInterfaceOrientation == UIInterfaceOrientationPortrait);&#125; 以上即可在相关view 里面控制rotate。 最近老婆看电视剧太多又说不看了，我想到的是，又一个新的轮回开始了2018/7/9她说看太多不想看了。那我们来预测一下接下来她会怎么做，然后每天记录她当天的态度。 什么是新的轮回？那就是，难受，不看电视剧，所以连同什么综艺节目（跑男、唱歌的、宝宝剧场）都不会看。当然，对于黄妈肯定是一开始很义正言辞的。于是最近的3天到5天（最长5天，不可能超过5天，这也要考虑进去周末休息日）她一天比一天难受。很想看，但是又还记得刚说过的话。下一个阶段是工作回来太累了，回到家不知道干什么，毕竟工作属于需要静下心来的；于是她就花点时间做菜，做好吃的。这阶段属于过渡期，这几天饭菜之类的都会可口一些吧。当然过渡期不能称为阶段，因为这很短，大约2天~3天。期间还会有不应期，菜饭做好吃好，不想写东西，又睡不着，此时还不能看任何视频，这就难受了。于是就趴在床上看淘宝。腐女嘛，不是看视频就是看淘宝，看淘宝还不买的那种，因为她知道她没钱。我要是店主，我肯定不开淘宝店了。页面统计数据挺好看的，就是没人买-&gt;都是她这种小妮子光看不买系列。下一个阶段就是有些忘记之前说过的话啦，没全忘记那种。在一起吃饭时，她会嘿嘿嘿的偷笑，拿出iPad，怼到我面前，就像是我们一起看，看综艺节目（当前还不敢看电视剧的）。看着看着，然后又趴到床上看淘宝。接下来的2~3天左右就会发现她捧着iPad在床上看看综艺节目演变成偷偷看韩剧，这时回头看她，她是带着耳机的，时不时偷笑；说她的时候，她就会不好意思，然后又继续看，有时也会放下。此时她的睡眠也不会熬夜。其实这阶段还属于偷偷看。不敢光明正大看，也不能不看，估计不看的话，会，会，会坏掉的。再接下来，有两个阶段，可以合并为一个。先是吃饭的时候看韩剧，一起看一起看（说实话，那些逗逼韩剧那么多人看，我都想转行拍片了，没技术没含量没思想）。然后就是，自己一个人在后面，边吃零食、边看电视剧啦。快乐的一个人看电视剧，手边总有吃的。因为没有吃的，她会把吃的扒拉过来放在身边，没吃嗑一点。 实际：第1~3天（7月9号为第1天）：第1天：第1天晚上回去，一菜一汤。然后屁颠屁颠坐下来看看weex。由于立马不看电视剧，接口看了下QQ，点开了QQ空间，里面看了好一会视频。看到我喝酒，怕被我打，赶紧不看了。接着又看了会weex，手机上开发者页面，这么小屏幕，肯定看不下去，于是东搞搞西搞搞，这晚就过去了。比较关键的是，她自己不能看视频，还不让我打游戏，，，这神逻辑。我又没说我不打游戏。我打游戏休闲娱乐，她居然也不让我看。哈哈。第2天：第2天晚上回去，进门就看到她开始看综艺节目啦。看来之前多次轮循，现在比较明目张胆了。我一说之后，马上收起来，屁颠屁颠去拿饭吃了。今天晚上她身体不舒服，搞七搞八，视频又不能看，于是吃完饭差不多9点多了，就自己睡着了。第3天：第3天晚上回去，你懂得，饭也没煮，一开门就看到她在那看电视剧了。嘿，这个转换的快啊。她赶紧收起来，然后不好意思屁颠屁颠去给我热粥。我吃饭时，让她做code review。那个脾气倔的，嘴巴都嘟起来，一直抠脚。我的天，不过是聊聊天而已，说实话，心里有点晦气-&gt;什么鬼。然后她跑上床，又开始看起来了。我说了三次她才停下来，厉害厉害。 第3天之后我就不必再写了，这人没救了。丢阿黄一个人在家，自己整天整夜看电视剧，沉迷的很。最近工作也是不顺，整天还这么沉迷，“还一点点没看完，就快看完了”。整天说，不准再打这么多游戏了；多写东西，别老打游戏；还撇着嘴，埋怨我整天打游戏。我的天，我都很少打游戏好吧。我打游戏有准则，她看视频都是没有限度的。她视电视剧犹如猛兽，所以老是说不看了，然而还是沉迷不止。我觉得游戏是休闲，是比赛，我不觉得打游戏如何堕落。她这简直是找抽。 申明init 入口申明initWithURL:(id)xx 入口有两种方法。1: initWithURL:(id)xx NS_DESIGNATED_INITIALIZER;使用宏提示其为为设计入口。这时会出现：如果用了NS_DESIGNATED_INITIALIZER，那么警告中出现init还是initWithNibName或是其它，取决于你的继承的父类类型： UIViewController Method override for the designated initializer of the superclass ‘-initWithNibName:bundle:’ not foundMethod override for the designated initializer of the superclass ‘-initWithCoder:’ not foundUIView Method override for the designated initializer of the superclass ‘-initWithFrame:’ not foundMethod override for the designated initializer of the superclass ‘-initWithCoder:’ not foundNSObject Method override for the designated initializer of the superclass ‘-init’ not found 那么就实现比如UIView 的12- (instanceType)initWithFrame:(CGRect)frame &#123;return [self initWithURL:nil];&#125;- (instancetype)initWithCoder:(NSCoder *)aDecoder &#123;return [self initWithURL:nil];&#125; 2: 把其他的入口设置为NS_UNAVAILABLE 这几天上传两个APP 收到2.1 拒绝大礼包 首先是我写的一个房产计算器的项目。一开始是因为在标题里面有免费的字样，去掉之后就出来2.1 大礼包了。2.1 礼包说我这可能有隐藏功能、有贷款方面东西。 我回复邮件说，我这绝对没有隐藏功能，也没有贷款方面的东西。因为觉得世面上的不好用、广告太多等，所以做了个这个功能。这个功能也是自主研发的，不是市面上的抄袭品。 还有一个涂色的项目。上来直接就是2.1 大礼包。我猜测原因是我展示页面出现免费字样，引导了用户。还有就是可能有隐藏功能。 目前这两个项目我都做了广告，所以也不具备广告功能。我回复涂色项目的，我们没有隐藏功能，免费是因为素材时设计师们的心血，但是为了分享这份灵感，所以使用免费，但是绝没有付费，更不用说，除苹果外的第三方付费了。免费同时也因为市面上其他APP 都是要付费的，我们就专打免费策略。最后，我们删除了展示页面的那张带有免费字样的图片。 最后再说一句：如果是原数据被拒绝，同时你认为不必要上传新的二进制，你就直接回复该邮件。然后静静等待，不需要点击#提交以供审核#。如果点了，那么相当于重新审核，可能会等待7~8天。相关帖子：http://www.cocoachina.com/bbs/read.php?tid-298671-page-1.html","categories":[],"tags":[]},{"title":"2018-5-9lesson","slug":"2018-5-9lesson","date":"2018-05-20T03:25:52.000Z","updated":"2018-11-14T14:14:06.000Z","comments":true,"path":"2018/05/20/2018-5-9lesson/","link":"","permalink":"https://shaohung001.github.io/2018/05/20/2018-5-9lesson/","excerpt":"","text":"2018/04/23 Clang Attributes 黑魔法小记http://blog.sunnyxx.com/2016/05/14/clang-attributes/#objc_requires_super objc_subclassing_restricted objc_requires_super objc_boxable constructor/desctructor objc_runtime_name Mac 启动服务配置redisstart: redis-server /usr/local/etc/redis.confstop: 12ps axu|grep redis ## 查找redis-server的PIDkill -9 PID mysqlstartmysql-server start 2018/05/07交涉2017年2月来到粉粉，一开始一直学习进阶姿态。当时c哥来了不久，要成立一个海外团队。当时的人选是LPD(我猜的，毕竟我刚来不太久5月，而LPD 刚好在那个时候选择了回家发展)，后来大师、我、c哥去小会议室说明了计划，任务。我在6、7月份的时候开始和c哥合作，为了合作更愉快，c哥甚至于搬到我位置边。那个时候我只想着更好的处理，学习，进阶，发展。是的，那个时候和他合作的一款绘图，简直让我开心不已，我和他不断交谈，不断完善。后来正要开始一款记账软件的时候，老板也已经没有耐心：没有产品思维，没有变现途径，当断则断的砍掉了该业务。当时我iOS、一个安卓、一个实习编辑(他的口头禅：原来是你小子，把皇君给我的好吃都给吃了回扣了)、c哥就此分开。实习编辑直接辞职；c哥也还想挽回一些结果，但还是回天乏力，于是也选择了离开；我和安卓又回到了之前的岗位了(好奇，我们居然不开掉了？虽然工资一年来没有变化，但是实力绝对学够了，幸好当时没离开，学到就是值);c哥离开前给了我份设计稿，一种MetaBall 的设计记账软件。当时我花了九牛二虎之力，万分努力打磨出来。核心物件出来了，我们又继续打磨产品，打磨整个工程。一开始上线是在c哥账号，叫”Drop”， 后改名叫”小池记账”，再后来改名叫”小泉记账”；真正的问题开始在2018年1月左右。c哥打算喊我去他们公司开发。我心里思考是，如果我去了，按照c哥性格，我估计工资高不到哪去，肯定说什么创业啦，不要在意这么多啦，好好完成功能等等等；学的东西肯定也是不够的。于是c哥说，能把源码给到他们。他的承诺是3个月10w 量，给我3w(我和他一人一半，算是6w)；我不看重这个，这个不是买断，也不是完全合作，我源码一给，相当于我没有任何有利地位了。最终做法：我同意3个月给他尝试，源码给他(核心效果代码做静态库处理，就这他还想要源码，说他们员工很轴，估计当时他就像独吞全部成果吧)，2500给我(相当于5000两人，我做事公平)；我们当时有一款矢量图软件，我有“商店”，但是素材商品快速制作在于c哥手，直到2018年5月终于得到该技术，也就是2018年5月5日周六我前往他们公司，然后c哥终于回忆起来制作历程交付与我(其实教程我之前有一份不完整的，要提交给公司的，但是谁也看不懂，做不出来)。同时作为回馈，我给他们公司员工做一下技术指导，指导过程发现，他们公司的其他好几款其他APP，比如“Uki”，还有其他APP的核心代码都从我那份拷贝得来。这是技术流失。然后如标题，2018年5月7号周一，我与c哥交涉“drop”下一步合作事宜，这天离当时已经有4月多之久(当时的考虑就是还没得到制作画画素材技术，不谈论该话题)；当时我问这个话题的时候，他以为我要3w 的承诺；我说我知道没有10w 的量，但是3个月已过，接下来怎么继续合作；他还说接下来10w 日货，还是承诺2w；兄得，如果把所以权，都给你，就跟我没什么事一样了，拿到我所有源码就这么为所欲为么？那要这么说，我来替你运营，日活10个人，我给你1千万；那些没有意义的承诺。我的字典里一直有句话： 不要跟比自己境况差的人，讨价还价更不要跟比自己有钱的人，抢着买单 能让则让，小弟这么拼命给你干活，你就拿到我源码就“你要介意的话，我们下一版代码会重新写”；我的意思很简单，商业利益失败，朋友还要交的，c哥接下来一句“包括涂色的布局ui也不要用我的设计，既然在意就说清楚，大家都有知识产权对吧”，直接挑明了朋友都没得做。那算了，说明我的意义就这么大，就是那个有静态库的源码的价值。行行行，你是项目负责人，全是你的成就。我啥都没有起到作用，毕竟代码书写被你改了嘛。后来的几天，我全力工作，优化那个涂色项目。接下来其实我完全可以就这么卖了“drop”源码，或者开源了，反正对我意义不大，我的能力不是只有drop。得了芝麻“有静态库的源码”丢了西瓜。之前这么崇拜你的我，也算清醒。我觉得我不太吃亏。对我来说，重要的是涂色项目，一个完整生态，商品和商店，而且可以量产。其实回顾来说，我觉得做人真不必如此，你的钱是我10倍多，我连午饭都要去很远很远的食堂，晚饭省钱饿着回家吃的我，都不舍得花钱，有孩子要养，最近又有买房需求，再说，涂色素材技术本应回交公司，我当时还特意解决了c哥公司很多重大崩溃技术，我觉得您真不必如此。最后一次尊重。您高升就好。“drop”我会留下自己开发，不然对你们公司肯定是致命的，毕竟全公司都花时间搞那个了，我公开出去，或者自己搞个差不多的，我的功能肯定比你多，开发比你快、稳定，然后就跟着你的ISO，蹭你们热量，你们会白做的！接下来我继续加油，避开他以前的设计范畴，一些以前我也参与的设计我就不必客气，这不全是你的功劳，不全是你的成就。都是一起探讨出来的，当时我的努力，我身后要保护的人，都提醒我，该客气时客气，该凶时就该认真对待了！之前去他们公司，看他们的代码，确实，一个成功的产品，开发的人还是很重要的。代码规范，模块划分。我猜想，c哥现在公司应该开不久，或者说开不大。前几天开了些文章，他国对中国封锁核弹、氢弹技术，中国克服困难做出来了；他国对中国封锁航天技术，中国又突出重围。我想我也正需要这股拼劲。这几天硬着头皮，老婆小小的学了把一个方便设计的软件，我自己搞了搞ps，把开源的声音、字体、图片等都找全；给自己软件做东西，你会发现，你总是这个做简单点，那个可以省略就省略吧。于是做的总是自己都不满意。回头想想，你给公司做的时候你会这样么？你肯定是硬着头皮也要搞出来，能搞出来的就搞得更好那种。你要的是，把做公司的那种态度用到写自己的上面，同时，规划好时间，集中精力攻破难关。这次学到的东西也很多很多，同时也警醒自己，有些事情一定要思考思考在思考，一定不能出大错。这次错误，算是损失，但是很能忍。毕竟也学了那么多，同时还长进了这么多。应该应该的，小弟就该吃糠，小弟家人就是垃圾，不应该有这么多思想，不应该要求这么多。timestamp: 2018/5/9 田小新","categories":[],"tags":[]},{"title":"2018-04-22lesson","slug":"2018-04-22lesson","date":"2018-04-22T14:51:41.000Z","updated":"2020-05-29T03:53:31.649Z","comments":true,"path":"2018/04/22/2018-04-22lesson/","link":"","permalink":"https://shaohung001.github.io/2018/04/22/2018-04-22lesson/","excerpt":"","text":"2018/03/14 公司引入零食架，却得”破损率”一说听到#破损率#这事情，这种说法，我不能接受。作为企业员工，我不觉得该事件缘由仅因为该无由头的数据，然后单方面说退出，然后就过去了。我坐在公司，我作为公司一份子，和大家相处，我不觉得#破损率# === #物品丢盗#!!!或许#破埙率#没有直接了当说明其 === #物品丢盗#，但是各位同事心中其实已经对其隐喻画上等号。 “破损率”由总量和当前剩余量以及所得量(金额 以下称“所得金”)有关。 总量由该公司清点，当前剩余量也由该公司清点 所得金数据也由该公司清点。 商品购买模式：购买者在商品架直接挑选；微信网页内购买，选中相应商品、数量。付款。 购买操作复杂，且可能多操作和误操作等无法模拟数据对等情况。对于用户而言，如果卖方没能提供舒适操作，而且没有更多措施防止其己身损失，我想这不是用户的错，这是人的错，或者是，该种买卖信用机制是有问题的。这种将一切信任丢给用户，如果该企业勘察数据到一定量就提出“破损率” 超过xxx，然后退出、无其他正确发言。我觉得一开始就应该提出有这种“商业模式”，或者称“全靠用户信用交易模式”。即使“破损率”接受范围为99%，我觉得该破损情况都有可能变为100%。中间有太多的突破和漏洞: 该企业下单，指定数量、种类、时间等到相应公司； 相关商品从仓库到达指定销售架； 商品从开始卖，隔数天就有人抽查； 清点“破损率” 以上的2、3、4点都有可能有问题。“三方”：买方、物品运送过程、清点过程人员以及购买页面的操作方。 对于一个无法真正确定是否购买，购买流程是否是闭环，那么就会出现其他流程可以做手脚的机会。因为即使做手脚也可能说“破损率”。那么多的疑点，却全由“破损率”，也即我所在公司内部员工心中已有的定义#物品丢盗# 承担。我没有说是否引进这种便捷小零食商架带来的更多的便利，但带来的负面影响却对公司内部营造的团结、互助、信任带来损害。 综上所述，我不能接受“破损率”一说。 coreData中integer16,integer32,integer64的区别摘抄自: http://blog.csdn.net/juyufeng_huazhu/article/details/50239699Integer 16 can have minimum value of -32,768 to 32,767Integer 32 can have minimum value of -2,147,483,648 to 2,147,483,647Integer 64 can have minimum value of -very large to very large 在viewDidLoad处理完的200ms 如果获取得到数据 那么用户将会无感空白过程MAC 查看端口占用命令 12lsof -i tcp:port （list open files）KILL port （port替换成端口号，比如6379）可以查看该端口被什么程序占用，并显示PID，方便KILL React CSS 布局父容器的style 需要使用flex 魔盒布局时，是要添加display: flex原因是其默认是display: block最终如 :1234567.row1 &#123; padding: 30px; /* align-content: space-around; */ flex-direction: row; background-color: blue; #display: flex#&#125; 运行麒麟子工程代码server 有个start_all_mac.sh 的python 脚本，直接开三个terminal 运行各个句子, 注意点：启动顺序是: 123node ./hall_server/app.js ../configs_mac.jsnode ./account_server/app.js ../configs_mac.jsnode ./game_server/app.js ../configs_mac.js 先开启hall 然后account, 然后game, 不然报错;client 使用scenes：start.scene; 当前CocoaCreator v：1.8; 在运行时出现loadResource 方法找不到：直接注释，直接进入loadScene；浏览器比如： localhost:5876?account=xxx;置顶不同的account 即可debug 测试 pod 更新出错。重点是brew link libyamlhttps://stackoverflow.com/questions/9434002/how-to-solve-ruby-installation-is-missing-psych-error 12$ brew doctor$ brew link libyaml cocoapod 更新极其缓慢，翻墙还是慢翻墙可以连接外网了，但是还是很慢。按理不会的，但是原因却在于：翻墙时，浏览器proxy 地址改过，但是terminal 却没有改动，相当于没有翻墙。http://lovean.net/?id=185使用#export ALL_PROXY=socks5://127.0.0.1:1080# 将所有proxy 改为该端口，这是翻墙，就非常快了。使用#curl -i http://ip.cn# 可以查看当前外网地址看是否翻墙成功 同源策略、跨域解决方案https://www.cnblogs.com/rockmadman/p/6836834.html 自己的centos 操作查看redis在哪个processIDps -ef |grep redis redis/etc/redis-4.09配置：redis.conf daemonize noprotected-mode yes启动和关闭： /src ./redis-server ../redis.conf 启动redis ./redis-cli shutdown 关闭redis mysql开启service mysqld start git download nvmnvm conf 配置:vim ~/.bashrc123#nvmexport NVM_DIR=&quot;/root/GIT/nvm/&quot;source &quot;$NVM_DIR/nvm.sh&quot; 保存之后source ~/.bashrc（修改也需要重启）PATH 和 source ./nvm use 8.11.1这样就可以使用8.11.1 版本的nodenode -vnpm -v terminal查找某个文件whereis nginx cd nginx配置$vim conf/nginx.conf12# 末尾括号外面加上下面这一行include ./vhost/*.conf; 创建vhost/www.lsgood.top.conf12345678910111213141516http&#123; server &#123; listen 80; //通用80端口 server_name lsgood.top; root /root/Blog; //声明目录 index index.html; //html 目录 location / &#123; //这个很重要 proxy_set_header Host $host; proxy_set_header x-real-ip $remote_addr; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:3000/; &#125; &#125;&#125; 然后./nginx/sbin/nginx -t 启动nginx :[root nginx] $./sbin/nginx[root nginx] $./sbin/nginx -c ./conf/nginx.confreload stop nginx :[root nginx] $./sbin/nginx -s reload/stop 查看启动服务netstat -nltp查看所有进程ps -efps -ef |grep mysql/redis/node/nginx 修改hostvim /etc/hosts1127.0.0.1 lsgood.top 然后ping lsgood.top curl http://lsgood.topcurl 127.0.0.1:3000 腾讯解析域名网站DNSPOD ll == ls -lls -a 填写nginx.conf参照多个域名同时对应多个路径123456789101112131415161718192021222324252627#最下面添加如server&#123; a.lsgood.top location / &#123; 127.0.0.1:3000 &#125; location /other0/ &#123; 127.0.0.1:3001 &#125; location /other1/ &#123; 127.0.0.1:3002 &#125;&#125;server&#123; b.lsgood.top location / &#123; 127.0.0.1:7000 &#125; location /other0/ &#123; 127.0.0.1:7001 &#125; location /other1/ &#123; 127.0.0.1:7002 &#125;&#125; 阿里云域名购买/域名-解析 /添加解析 /主机记录选填 “*” 子域名前缀 /记录值填写自己的主机IP, 如176.122.191.87 我的服务器操作· 后台更换 完成 · 首页每次需要下载素材bug 完成 • tabbar 栏目图片更换 完成 · banner · section 栏目 完成50% 完成 查看redis在哪个processIDps -ef |grep redis redis/etc/redis-4.09配置：redis.conf daemonize noprotected-mode yes启动和关闭： /src ./redis-server ../redis.conf 启动redis ./redis-cli shutdown 关闭redis mysql开启service mysqld start git download nvmnvm conf 配置:vim ./.bashrc123#nvmexport NVM_DIR=&quot;/root/GIT/nvm/&quot;source &quot;$NVM_DIR/nvm.sh&quot; 保存之后source ~/.bashrc（修改也需要重启）PATH 和 source ./nvm use 8.11.1这样就可以使用8.11.1 版本的nodenode -vnpm -v terminal查找某个文件whereis nginx cd nginx配置$vim conf/nginx.conf12# 末尾括号外面加上下面这一行include ./vhost/*.conf; 创建vhost/www.lsgood.top.conf123456789101112131415http&#123;server&#123; listen 80; //通用80端口 server_name lsgood.top; root /root/Blog; //声明目录 index index.html; //html 目录 location / &#123; //这个很重要 proxy_set_header Host $host; proxy_set_header x-real-ip $remote_addr; proxy_set_header x-forwarded-for $proxy_add_x_forwarded_for; proxy_pass http://127.0.0.1:3000/; &#125;&#125;&#125; 然后./nginx/sbin/nginx -t 启动nginx/sbin/nginx","categories":[],"tags":[]},{"title":"2018/3/4Lesson","slug":"2018-3-3lesson","date":"2018-03-04T13:48:44.000Z","updated":"2018-11-14T14:24:50.000Z","comments":true,"path":"2018/03/04/2018-3-3lesson/","link":"","permalink":"https://shaohung001.github.io/2018/03/04/2018-3-3lesson/","excerpt":"","text":"2017/10/12 Xcode 9 beta 3 breaks the new os_log logger #8831234567891011121314151617if (message) &#123; const char *msg = [message UTF8String]; switch (logMessage-&gt;_flag) &#123; case DDLogFlagError : os_log_error(OS_LOG_DEFAULT, &quot;%s&quot;, msg); break; case DDLogFlagWarning : case DDLogFlagInfo : os_log_info(OS_LOG_DEFAULT, &quot;%s&quot;, msg); break; case DDLogFlagDebug : case DDLogFlagVerbose : default : os_log_debug(OS_LOG_DEFAULT, &quot;%s&quot;, msg); break; &#125; &#125; 记一下昨晚2017/10/30 学习拆换苹果手机电池过程1：手机底部螺丝拧开2：用提供的吸盘将屏幕吸起（可以用个牙签什么的顶住，然后一一打开）3：将电池右下角的一个金属盖拧开，有两个螺丝4：此时已经可以拔起该连接线接下来几步是重点：5：刮下电池底部膜，刮到出现白色黏条6：白色黏条最重要！：慢慢把他抽出来。总共左右两条黏条，千万不要抽断，不然要翘起电池，用牙签或其他方便工具卷着给他抽出来。7：然后于是就把电池取出来了。8：装上新电池，测试一下能不能成功开机。9：买电池会送白色黏条。这时留一点在外面，白色黏条箭头在顶部。先把白色黏条黏在电池底部，然后黏在电池仓。10：按着之前方式拧上螺丝，合上盖。完成 git 回退到本地commit的某个SHA-1根据-–soft -–mixed -–hard，会对working tree和index和HEAD进行重置: git reset -–mixed：此为默认方式，不带任何参数的git reset，即时这种方式，它回退到某个版本，只保留源码，回退commit和index信息 git reset -–soft：回退到某个版本，只回退了commit的信息，不会恢复到index file一级。如果还要提交，直接commit即可 git reset -–hard：彻底回退到某个版本，本地的源码也会变为上一个版本的内容 例如：git reset –hard SHA-1 此时的SHA-1 可以使用sourcetree 查看；或者使用git log 也可查看到该SHA-1 iOS 手机震动// 普通短震，3D Touch 中 Peek 震动反馈AudioServicesPlaySystemSound(1519); // 普通短震，3D Touch 中 Pop 震动反馈AudioServicesPlaySystemSound(1520); // 连续三次短震AudioServicesPlaySystemSound(1521); 这里记录一次昨天下午讨论团队职业规划过程及感悟既然是团队职业规划，那当时是要将团队提升作为目标。个人升级是最重要，自己不升级，怎么有话题，如何跟别人谈共享、交流、提升？OK，自己升级，学习完，交流，交流之中补足，这很好。最近任务要稍微好些，比刚从海外团队回来时间要充沛一些。早上从10点开始搞，基本下午进度好，能在8点左右完成，回家。此时基本整个人再也不想看电脑屏幕了，我想吐~~~咦，你不是热爱写代码吗？我去你妈的热爱写代码，去你妈的热爱。热爱是建立的单纯的想写代码，当和职业挂钩，每天重重复复，去你妈的还能每时每刻保有最初的心。接着回到家，嗯，团队升级嘛，但是自己还有挺多的事，比如我自己手上还有3、4个小玩意进度才开启；哦，我还没吃饭，世界最好吃的饭是陪家人，于是等老婆也累的半死回到家，俩人在21点到22：20之间吃完饭。这时心里有点空荡荡的，接下来的时间每天比例，一半休息掉（再嘴里吼着“不能浪费时间，学习工作”的，你把头伸过来，大哥给你看个宝贝），另一半写自己的小东西，探索道路。玩能到12点半，工作也能到12点半。第二天早上来，把公司所为的“两小时一次记录工作了啥”的邮件发了。真不知道这“两小时”记录是什么鬼，写重复的也不是，但是不写，更不是，又是心里一句去他妈的, 当然知道这是上上上层安排的，对大师博士还是一如既往尊敬。周六是单双休，周日是都有休息。周六当时的规定是到公司学习，补足，交流，如果工作有没完成的，可以完成。你懂得，工作太足，就怕你闲着，怕你闲出病到时按工伤就不好了，于是基本周六都是工作木有两样。之前我有过思路：如果早上把PPT 赶好，中午的时候和大家交流最近学习、工作进展。那这挺好。但是从来周六都是工作，嘿嘿，这理由真他妈给力。周六要不就是我单纯学习自己的小知识点，但是能拿来讲的没能汇聚，只能自己独自搞一些小工程进行最佳实践。所以大师那句，“都没见你分享几篇”，给蛋疼的，不是不想不愿，而是无时无力。“时间是挤出来的”谁谁谁，这句话谁说的，把头伸过来，我给他看个宝贝。你有生活，我没有生活的啊？你每天都能跟狗一样学习，不知疲倦？每天还跟大学一般拼了这条狗命的？是的，我工作时候用心，我特么在工作中确实拼了这条狗命。每天下班都是难得休息，难得让脑袋放空。团队提升，团队职业规划。这些都是要建立良好的机制，良好的环境。我特么自己忙的死了，还要陪他们玩团队职业规划的游戏。我曰。每天自己加油了。只能自己Add Oil了。之前也有几次，他们讲一些知识，我去学习听讲。如果有机会，我就只能当做code review 来跟进。这是最好的结果了。当然，一切建立在，周六上午能空闲一下的基础上。 11：由于用到贴图，网上寻觅不得.只说 UIGraphicsBeginImageContext(&lt;#CGSize size#&gt;)-&gt;换成UIGraphicsBeginImageContextWithOptions(&lt;#CGSize size#&gt;,&lt;#Bool opaque#&gt;,&lt;#CGFloat scale#&gt;)上面这句话是重点 scale是缩放因子，使用[UIScreen mainScreen].scale即可；中间的opaque是识别里面有没有alpha通道，如果有通道则填入NO，相反的哦；size则为你的图片的大小，比如上面一张大图，下面一张watermark，这size为大图的大小，毕竟大图在下面，第一个放入的； 这样子图片就会变为高清！！！没错，如果还没有变为高清，是有另一个原因的，那就是你的贴图不是@2x或者@3x的倍率，将其放入图片文件夹或者source，加入后缀，一定使用@3x，@2x也不怎么清晰！！！最后一步才是本文重点.网上没人说，自己尝试出来的 这一段是苹果私密api，用来找出Reveal的各个APP的bundleID，挺好用的// ClassLSApplicationWorkspace_class = objc_getClass(“LSApplicationWorkspace”);//NSObject workspace = [LSApplicationWorkspace_class performSelector:@selector(defaultWorkspace)];//NSArray array = [workspace performSelector:@selector(allApplications)];// id a = array[0];//NSLog(@”apps: %@”, [workspace performSelector:@selector(allApplications)]); ASOverLayoutSpec这里用到ASStackLayoutSpec 布局。之前都是从上往下布局完，样式OK。但是新的需求来了，要求在其上面加上一个蒙版：布局，我使用ASBackgroundLayoutSpec child 是上面的蒙版；back 是之前的背景布局；但是总是出现拉伸；后来试试使用ASOverLayoutSpec 返回来，试图终于如愿了。 最近在学习js看阮一峰的文章ing…从其早期JavaScript 文章往现在的时间线看。边看边敲command+shift+i看廖雪峰JavaScript 文章 scrollView.contentSize如果scrollView 不想上下出现拉动bug，将contentSize.height 设为0；否则contentSize.width 设为0；会默认设置为等大小试图 2018/1/10打包静态库(包含第三方库)https://www.jianshu.com/p/155a3cfb765e?utm_campaign=hugohttps://www.jianshu.com/p/13bf46df93871：此处注意一点：需要输出包含有第三方的静态库，那么直接在拖进控件的时候不要选择”add to target”;2：在Build Phrase 的compile Source 确认需要到处的多少个类3：设置适配所有模拟器架构 project -&gt; buildSeting -&gt; Build Active Architecture Only 设为NO以上两个目录把所有需要打包静态库的步骤和所需操作都罗列了。 创建podSpechttps://www.jianshu.com/p/d7d1942dd3f1此处source 需要把目录改为对应目录。比如里面的文件夹需要/xxx/$.h/m 记录一次粉粉匿名做动画CAAnimation 的keyframe 动画和POP 动画同时存在产生的问题1234567891011121314151617181920212223242526272829303132333435POPAnimatableProperty *property = [POPAnimatableProperty propertyWithName:@&quot;com.ffrj.starMove&quot; initializer:^(POPMutableAnimatableProperty *prop) &#123; prop.writeBlock = ^(CALayer *obj, const CGFloat *values) &#123; CGFloat currentTime = values[0]; obj.timeOffset = currentTime; &#125;; prop.threshold = 0.01; &#125;]; POPBasicAnimation *animation = [POPBasicAnimation animation]; animation.fromValue = @0; animation.duration = 0; animation.property = property; [popArr addObject:animation]; // CGPoint startPoint = YYTextCGRectGetCenter(starBtn.frame); CGPoint endPoint = CGPointMake((i+1)*minScaleWidth+30, 35+kTopStatusBarAndNavHeight); CGPoint controlPoint = CGPointMake((endPoint.x+30), (YYTextCGRectGetCenter(starBtn.frame).y-endPoint.y)/2.0); UIBezierPath *path = [UIBezierPath bezierPath]; [path moveToPoint:startPoint]; [path addQuadCurveToPoint:endPoint controlPoint:controlPoint]; CAKeyframeAnimation *positionAnimation = [CAKeyframeAnimation animation]; positionAnimation.keyPath = @&quot;position&quot;; positionAnimation.path = path.CGPath; CABasicAnimation *scaleAnimation = [CABasicAnimation animationWithKeyPath:@&quot;transform.scale&quot;]; scaleAnimation.fromValue = @1; scaleAnimation.toValue = @0.0; CABasicAnimation *opacityAnimation = [CABasicAnimation animationWithKeyPath:@&quot;opacity&quot;]; opacityAnimation.fromValue = @1.0; opacityAnimation.toValue = @0.0; CAAnimationGroup *animationGroup = [CAAnimationGroup animation]; [animationGroup setAnimations:@[positionAnimation,scaleAnimation, opacityAnimation]]; animationGroup.duration = 1.0; animationGroup.removedOnCompletion=NO; animationGroup.fillMode=kCAFillModeForwards; [starBtn.layer addAnimation:animationGroup forKey:@&quot;animationGroup&quot;]; starBtn.layer.speed = 0.0; 上面是加了CAAnimation 动画， 但是同时还加入了POP 某一个animation 的上下浮动位移动画: 12345678910111213if (!_startedAnimated) &#123; _startedAnimated = YES; [self.starArray enumerateObjectsUsingBlock:^(UIButton * _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123; POPBasicAnimation *basicAnimation = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerPositionY]; basicAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionEaseInEaseOut]; basicAnimation.duration = 1.3; basicAnimation.beginTime = CACurrentMediaTime()+(arc4random()%30*0.033); basicAnimation.toValue = @(obj.centerY-8); basicAnimation.autoreverses = YES; basicAnimation.repeatForever = YES; [obj.layer pop_addAnimation:basicAnimation forKey:NSStringFromSelector(_cmd)]; &#125;]; &#125; 这时出现了浮动POP 动画无法启动情况。这里处理为: 在 prop.writeBlock 里面，使用贝塞尔数值计算进行位移。 这里记录一次js function 和箭头函数不同点 function 里面的this 指针是内部函数，外部需要const 一个。 箭头函数 由于内部将this 置空，他是没有this 的，他的this 属于外部调用的。同时，由于没有this 指针，所以其arguments 也是undefined 的。 module.export = xxx / exports default xxx / export = xxx 区别 写一个比较简洁的iOS 并发获取数据，combine 之后返回123456789101112131415161718192021222324252627282930313233343536373839404142434445- (void)getPlannerRShopBanner&#123; @weakify(self); dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123; @strongify(self); __block NSArray *recommandArray = nil; __block NSArray *plannerNewsArray = nil; __block NSUInteger count = 0; dispatch_semaphore_t semaphore_t = dispatch_semaphore_create(0); [self.apiSession getPlannerShopBannerAndCallback:^(NSArray *model, PCError *error) &#123; if (isValidArray(model) &amp;&amp; model.count &gt; 0) &#123; count ++; recommandArray = model; if (count == 2) &#123; dispatch_semaphore_signal(semaphore_t); &#125; &#125; else &#123; dispatch_semaphore_signal(semaphore_t); &#125; [self autoSavePlannerDataChange]; &#125;]; [self.apiSession getNewPlannerBannerCallback:^(NSArray *model, PCError *error) &#123; if (isValidArray(model) &amp;&amp; model.count &gt; 0) &#123; count ++; plannerNewsArray = model; if (count == 2) &#123; dispatch_semaphore_signal(semaphore_t); &#125; &#125; else &#123; dispatch_semaphore_signal(semaphore_t); &#125; &#125;]; dispatch_semaphore_wait(semaphore_t, DISPATCH_TIME_FOREVER); dispatch_async(dispatch_get_main_queue(), ^&#123; if (count == 2) &#123; dispatch_async(dispatch_get_main_queue(), ^&#123; self.view.headerRecommandDict = [recommandArray firstObject]; self.view.headerPlannerNewsDict = [plannerNewsArray firstObject]; &#125;); &#125; else &#123; DLog(@&quot;没有获取到ad 或者某个ad 获取失败&quot;); &#125; &#125;); &#125;);&#125; 这里记录一个前端在解析json字符串,内容包含#\\n# 产生无法解析且报错情景123if ([json containsString:@&quot;\\n&quot;]) &#123; json = [json stringByReplacingOccurrencesOfString:@&quot;\\n&quot; withString:@&quot;\\\\u000A&quot;]; &#125; 首先解决方案如上，在解析前先替换该字符为ascii码。 出现的错误：Printing description of error:Error Domain=NSCocoaErrorDomain Code=3840 &quot;Unescaped control character around character 90.&quot; UserInfo={NSDebugDescription=Unescaped control character around character 90.} 出现的类似语句: 12345678910111213141516171819202122232425262728&#123;\"font\":&#123;&#125;,\"stickDate\":\"\",\"bookId\":18558,\"diaryType\":0,\"diaryEmotionNode\":&#123;\"content\":\"1♡可乐要加冰柠檬要加水我的生活要加你咖啡要加糖披萨要加盐我们的感情要加点油别说什么东南西北都是你别说什么天涯海角都是你别说什么心里眼里都是你我只需要你说你的生活加点我.或者给我一条人生建议让我和你在一起.感情不要甜言蜜语不要纠缠不休.只需要一句“我喜欢你”感谢收听悦兮电台第六期《要加点你》我是主播:苏雨诺编辑:苏雨纤写文:江抒本次播音结束，请大家期待下一期～\",\"imageList\":[]&#125;,\"geo\":&#123;\"region\":\"普陀区\",\"city\":\"上海市\",\"address\":\"上海市普陀区云岭东路靠近东渡国际嘉庭广场\",\"longitude\":\"121.387844\",\"latitude\":\"31.222706\",\"name\":\"东渡国际嘉庭广场\",\"province\":\"上海市\"&#125;,\"lbsChange\":0,\"lbs\":&#123;\"region\":\"普陀区\",\"city\":\"上海市\",\"address\":\"上海市普陀区云岭东路靠近东渡国际嘉庭广场\",\"longitude\":\"121.387844\",\"latitude\":\"31.222706\",\"name\":\"东渡国际嘉庭广场\",\"province\":\"上海市\"&#125;&#125; 1&#123;\"content\":\"23333♡\\n可乐要加冰\\n柠檬要加水\\n我的生活要加你\\n\\n咖啡要加糖\\n披萨要加盐\\n我们的感情要加点油\\n\\n别说什么东南西北都是你\\n别说什么天涯海角都是你\\n别说什么心里眼里都是你\\n\\n我只需要你说\\n你的生活加点我.\\n\\n或者给我一条人生建议\\n让我和你在一起.\\n\\n感情不要甜言蜜语\\n不要纠缠不休.\\n只需要一句“我喜欢你”\\n\\n感谢收听悦兮电台第六期《要加点你》\\n我是主播:苏雨诺\\n编辑:苏雨纤\\n写文:江抒\\n本次播音结束，请大家期待下一期～\",\"imageList\":[]&#125; 今天2018/2/9 放假过年啦2018/2/24 redis 的homebrew 安装http://blog.csdn.net/chenshuai1993/article/details/51519384 12345678什么是原子性,什么是原子性操作？举个例子：A想要从自己的帐户中转1000块钱到B的帐户里。那个从A开始转帐，到转帐结束的这一个过程，称之为一个事务。在这个事务里，要做如下操作： 1. 从A的帐户中减去1000块钱。如果A的帐户原来有3000块钱，现在就变成2000块钱了。 2. 在B的帐户里加1000块钱。如果B的帐户如果原来有2000块钱，现在则变成3000块钱了。如果在A的帐户已经减去了1000块钱的时候，忽然发生了意外，比如停电什么的，导致转帐事务意外终止了，而此时B的帐户里还没有增加1000块钱。那么，我们称这个操作失败了，要进行回滚。回滚就是回到事务开始之前的状态，也就是回到A的帐户还没减1000块的状态，B的帐户的原来的状态。此时A的帐户仍然有3000块，B的帐户仍然有2000块。我们把这种要么一起成功（A帐户成功减少1000，同时B帐户成功增加1000），要么一起失败（A帐户回到原来状态，B帐户也回到原来状态）的操作叫原子性操作。如果把一个事务可看作是一个程序,它要么完整的被执行,要么完全不执行。这种特性就叫原子性。 mac 下安装也可以使用 homebrew，homebrew 是 mac 的包管理器。 1、执行 brew install redis 2、启动 redis，可以使用后台服务启动 brew services start redis。或者直接启动：redis-server /usr/local/etc/redis.conf 在远程服务上执行命令redis-cli -h host -p port -a password 查看redis服务是否启动 ps aux | grep redis 这篇文章也不错https://www.jianshu.com/p/af33284aa57a 记一次Mac node logger 保存path 权限问题记一次运行node 服务器，其logger 记录path 在xxxx。该目录没有获得权限，为只读。错误表现：console 一直print：ERROR 29252 [egg-logger] [/data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2000/egg-web.log] Error: EACCES: permission denied, open ‘/data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2018/egg-web.log’解决方案: ctrl C 打断输出 在ternimal cd 到该目录,如:$ cd /data0/wwwlogs/envelop.xxxx.com/logs/xxx-envelop-2000 然后 $ chmod -R 777 * 将该目录下使用递归 赋予777 权限(chmod : change mode ,-R recursive, 777 可读可写权限) 将本地git push 到远程repositorygit initgit commit -m “first commit”git remote add origin git@github.com:shaohung001/ahuang_project.gitgit push -u origin master","categories":[],"tags":[]},{"title":"2017-08-29lesson","slug":"2017-08-29lesson","date":"2017-10-06T12:23:31.000Z","updated":"2017-10-10T16:07:26.000Z","comments":true,"path":"2017/10/06/2017-08-29lesson/","link":"","permalink":"https://shaohung001.github.io/2017/10/06/2017-08-29lesson/","excerpt":"","text":"2017/8/29123456789101112NSURL *url = [NSURL URLWithString: @&quot;http://www.baidu.com/s?tn=baiduhome_pg&amp;bs=NSRUL&amp;f=8&amp;rsv_bp=1&amp;rsv_spt=1&amp;wd=NSurl&amp;inputT=2709&quot;]; NSLog(@&quot;Scheme: %@&quot;, [url scheme]); NSLog(@&quot;Host: %@&quot;, [url host]); NSLog(@&quot;Port: %@&quot;, [url port]); NSLog(@&quot;Path: %@&quot;, [url path]); NSLog(@&quot;Relative path: %@&quot;, [url relativePath]); NSLog(@&quot;Path components as array: %@&quot;, [url pathComponents]); NSLog(@&quot;Parameter string: %@&quot;, [url parameterString]); NSLog(@&quot;Query: %@&quot;, [url query]); NSLog(@&quot;Fragment: %@&quot;, [url fragment]); NSLog(@&quot;User: %@&quot;, [url user]); NSLog(@&quot;Password: %@&quot;, [url password]); 12345678910111213142012-03-31 18:22:20.904 SmallDemoList[5473:11603] 121312322012-03-31 18:22:20.907 SmallDemoList[5473:11603] Scheme: http 2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Host: www.baidu.com 2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Port: (null) 2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Path: /s 2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Relative path: /s 2012-03-31 18:22:20.907 SmallDemoList[5473:11603] Path components as array: ( &quot;/&quot;, ) 2012-03-31 18:22:20.916 SmallDemoList[5473:11603] Parameter string: (null) 2012-03-31 18:22:20.917 SmallDemoList[5473:11603] Query: tn=baiduhome_pg&amp;bs=NSRUL&amp;f=8&amp;rsv_bp=1&amp;rsv_spt=1&amp;wd=NSurl&amp;inputT=27092012-03-31 18:22:20.917 SmallDemoList[5473:11603] Fragment: (null) 2012-03-31 18:22:20.917 SmallDemoList[5473:11603] User: (null) 2012-03-31 18:22:20.917 SmallDemoList[5473:11603] Password: (null) sourcetree 自己比较常用的1：amand 钩子 对本地的进行amand2：将“xxx”重置到本次提交 - 强行合并 丢弃所有工作副本改动 将本地数据回调到选中版本，删除所有工作副本3：要commit 前，查看所有改动，确认所有改动是否正确 接下来的时间，是时候拆解一个项目，成为一个一个精品轮子了 日记 单位换算 BMI 手账 给他们写一个小型聊天demo 记一次输入键盘 在inputView替换状态resignKeyboard 出现的问题其中在 emoji状态，如果resign 那么其会走 showKeyboard 和hideKeyboard ，由于keyboard 比较慢，，会出现completion 最慢，，最后导致界面不能滑动 导航栏的几种推栈、退栈 没导航栏-&gt;有导航栏 没导航栏&lt;-有导航栏 有导航栏-&gt;有导航栏 有导航栏&lt;-有导航栏 没导航栏-&gt;没导航栏 没导航栏&lt;-没导航栏 这一类都是需要注意的一个地方，在viewwillApeare 和viewWillDisapear 2个方法里面的对应2个方法优化:12self.navigationController.navigationBarHidden = YES;[self.navigationController setNavigationBarHidden:YES animated:animated]; 日期格式http://www.cnblogs.com/wayne23/archive/2013/03/25/2981009.html 时间与日期处理 主要有以下类：NSDate – 表示一个绝对的时间点NSTimeZone – 时区信息NSLocale – 本地化信息NSDateComponents – 一个封装了具体年月日、时秒分、周、季度等的类NSCalendar – 日历类，它提供了大部分的日期计算接口，并且允许您在NSDate和NSDateComponents之间转换NSDateFormatter – 用来在日期和字符串之间转换 NSDate NSDate用来表示公历的GMT时间(格林威治时间)。 有下面几种初始化方法： (id)init 默认初始化，返回当前时间，也可以直接调用类方法 +(id)date NSDate date = [[NSDate alloc] init];//NSDate date = [NSDate date];NSLog(@”print date is %@”,date);将打印出计算机当前时间：2013-03-04 08:57:20 +0000 (id)initWithTimeIntervalSinceNow:(NSTimeInterval)seconds 以当前时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSinceNow:(NSTimeInterval)seconds NSDate date = [[NSDate alloc] initWithTimeIntervalSinceNow:20];//NSDate date = [NSDate dateWithTimeIntervalSinceNow:20];NSLog(@”print date is %@”,date);假如当前时间是2013-03-04 08:57:20 +0000，那么初始化后得到的时间是2013-03-04 08:57:40 +0000 (id)initWithTimeIntervalSince1970:(NSTimeInterval)seconds 以GMT时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSince1970:(NSTimeInterval)seconds NSDate date = [[NSDate alloc] initWithTimeIntervalSince1970:-20];//NSDate date = [NSDate dateWithTimeIntervalSince1970:-20];NSLog(@”print date is %@”,date);得到的时间是格林威治时间往前20秒，将打印出：1969-12-31 23:59:40 +0000 (id)initWithTimeIntervalSinceReferenceDate:(NSTimeInterval)seconds 以2001-1-1 0:0:0的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeIntervalSinceReferenceDate:(NSTimeInterval)seconds NSDate date = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:80];//NSDate date = [NSDate dateWithTimeIntervalSinceReferenceDate:80];NSLog(@”print date is %@”,date);将打印出：2001-01-01 00:01:20 +0000 (id)initWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)refDate 以基准时间的偏移秒数来初始化，也可以直接调用类方法 + (id)dateWithTimeInterval:(NSTimeInterval)seconds sinceDate:(NSDate *)date 复制代码NSDate *date1 = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:20];NSLog(@”print date1 is %@”,date1); NSDate date2 = [[NSDate alloc] initWithTimeInterval:10 sinceDate:date1];//NSDate date2 = [NSDate dateWithTimeInterval:10 sinceDate:date1];NSLog(@”print date2 is %@”,date2);复制代码第一个基准时间是2001-01-01 00:00:20 +0000，根据基准时间偏移10秒的结果是2001-01-01 00:00:30 +0000 (id)distantPast 与 + (id)distantFuture 这两个是类方法，分别用来返回一个极早的时间点和一个极晚的时间点 NSDate *date = [NSDate distantFuture];NSLog(@”future date is %@”,date); NSDate *date2 = [NSDate distantPast];NSLog(@”past date is %@”,date2);distantPast将返回：0001-12-30 00:00:00 +0000，distantFuture将返回：4001-01-01 00:00:00 +0000 NSDate的常用对象方法： -(id)dateByAddingTimeInterval:(NSTimeInterval)seconds 返回以当前NSDate对象为基准，偏移多少秒后得到的新NSDate对象。(旧方法 - (id)addTimeInterval:(NSTimeInterval)seconds已被弃用) NSDate date = [NSDate dateWithTimeIntervalSince1970:0];NSDate date2 = [date dateByAddingTimeInterval:-20];NSLog(@”%@”,date2); (BOOL)isEqualToDate:(NSDate *)anotherDate 将当前对象与参数传递的对象进行比较，根据是否相同返回BOOL值 NSDate date = [NSDate dateWithTimeIntervalSince1970:0];NSDate date2 = [NSDate dateWithTimeInterval:0 sinceDate:date];BOOL isEqual = [date isEqualToDate:date2];NSLog(@”%i”,isEqual); (NSDate )earlierDate:(NSDate )anotherDate 与 - (NSDate )laterDate:(NSDate )anotherDate 比较两个NSDate对象，返回较早/较晚的时间点，并以新NSDate对象的形式返回 复制代码NSDate date = [NSDate dateWithTimeIntervalSince1970:0];NSDate date2 = [NSDate dateWithTimeInterval:-50 sinceDate:date]; NSDate *date3 = [date earlierDate:date2];NSLog(@”earlier date is %@”,date3); NSDate *date4 = [date laterDate:date2];NSLog(@”later date is %@”,date4);复制代码 (NSComparisonResult)compare:(NSDate *)anotherDate 将当前对象与参数传递的对象进行比较，如果相同，返回0(NSOrderedSame)；对象时间早于参数时间，返回-1(NSOrderedAscending)；对象时间晚于参数时间，返回1(NSOrderedDescending) NSDate date = [NSDate dateWithTimeIntervalSince1970:0];NSDate date2 = [NSDate dateWithTimeInterval:-50 sinceDate:date]; NSInteger result = [date compare:date2];NSLog(@”%i”,result); (NSTimeInterval)timeIntervalSince1970 返回当前对象时间与1970-1-1 0:0:0的相隔秒数，也可以这样理解：从1970-1-1 0:0:0开始，经过多少秒到达对象指定时间。 NSDate *date = [NSDate dateWithTimeIntervalSince1970:50];NSInteger seconds = [date timeIntervalSince1970];NSLog(@”%i”,seconds);将返回结果50 (NSTimeInterval)timeIntervalSinceReferenceDate 返回当前对象时间与2001-1-1 0:0:0的相隔秒数，也可以这样理解：从2001-1-1 0:0:0开始，经过多少秒到达对象指定时间。 NSDate *date = [NSDate dateWithTimeIntervalSinceReferenceDate:-30];NSInteger seconds = [date timeIntervalSinceReferenceDate];NSLog(@”%i”,seconds);将返回结果-30，负数代表从2001-1-1 0:0:0开始，倒退30秒到达当前时间。 (NSTimeInterval)timeIntervalSinceNow 返回当前对象时间与客户端时间的相隔秒数，也可以这样理解：从客户端当前时间开始，经过多少秒到达对象指定时间。 NSDate *date = [NSDate dateWithTimeIntervalSinceNow:100];NSInteger seconds = [date timeIntervalSinceNow];NSLog(@”%i”,seconds);经测试返回了结果99，但初始化时提供的参数是100。这可能是因为第一句初始化代码到第二句计算代码之间有个1秒内的延时，所以计算时的客户端时间比初始化时的客户端时间快了1秒。 (NSTimeInterval)timeIntervalSinceDate:(NSDate *)anotherDate 返回当前对象时间与参数传递的对象时间的相隔秒数，也可以这样理解：从参数时间开始，经过多少秒到达对象执行时间。 NSDate date = [NSDate dateWithTimeIntervalSince1970:0];NSDate date2 = [NSDate dateWithTimeInterval:50 sinceDate:date];NSInteger seconds = [date timeIntervalSinceDate:date2];NSLog(@”%i”,seconds);将返回结果-50，date为1970-1-1 0:0:0，date2为1970-1-1 0:0:50，从date2的时间开始，倒退50秒到达date的时间。 NSTimeZone NSTimeZone表示时区信息。 有下面几种初始化方法： (id)timeZoneWithName:(NSString )aTimeZoneName / - (id)initWithName:(NSString )aName 根据时区名称初始化。可以调用NSTimeZone的类方法 + (NSArray *)knownTimeZoneNames来返回所有已知的时区名称。 NSTimeZone zone = [[NSTimeZone alloc] initWithName:@”America/Chicago”];//NSTimeZone zone = [NSTimeZone timeZoneWithName:@”America/Chicago”];NSLog(@”%@”,zone);打印出：America/Chicago (CST) offset -21600 (id)timeZoneWithAbbreviation:(NSString *)abbreviation 根据时区缩写初始化。例如：EST(美国东部标准时间)、HKT(香港标准时间) NSTimeZone *zone = [NSTimeZone timeZoneWithAbbreviation:@”EST”];NSLog(@”%@”,zone);打印出：Asia/Hong_Kong (HKT) offset 28800 (NSTimeZone *)systemTimeZone 返回系统时区 NSTimeZone zone = [NSTimeZone systemTimeZone];NSLog(@”%@”,zone);假如时区是上海，打印出的时区信息将会是：Asia/Shanghai (CST (China)) offset 28800，28800代表相对于GMT时间偏移的秒数，即8个小时。(860*60) (NSTimeZone *)localTimeZone 返回本地时区，与systemTimeZone的区别在于：本地时区可以被修改，而系统时区不能修改。 复制代码[NSTimeZone setDefaultTimeZone:[[NSTimeZone alloc] initWithName:@”America/Chicago”]]; NSTimeZone systemZone = [NSTimeZone systemTimeZone];NSTimeZone localZone = [NSTimeZone localTimeZone]; NSLog(@”%@”,systemZone);NSLog(@”%@”,localZone);复制代码打印出的系统时区仍然是：Asia/Shanghai (CST (China)) offset 28800；而本地时区经过修改后，变成了：Local Time Zone (America/Chicago (CST) offset -21600) (id)timeZoneForSecondsFromGMT:(NSInteger)seconds 根据零时区的秒数偏移返回一个新时区对象 NSTimeZone *zone = [NSTimeZone timeZoneForSecondsFromGMT:28800];NSLog(@”%@”,zone);打印出：GMT+0800 (GMT+08:00) offset 28800 NSTimeZone常用对象方法与类方法： (NSArray *)knownTimeZoneNames 以数组的形式返回所有已知的时区名称 NSArray zoneArray = [NSTimeZone knownTimeZoneNames];for(NSString str in zoneArray){ NSLog(@”%@”,str);} (NSString )name / - (NSString )abbreviation 返回时区对象的名称或缩写 NSTimeZone zone = [NSTimeZone localTimeZone];NSString strZoneName = [zone name];NSString *strZoneAbbreviation = [zone abbreviation];NSLog(@”name is %@”,strZoneName);NSLog(@”abbreviation is %@”,strZoneAbbreviation);name is Asia/Hong_Kong abbreviation is HKT (NSInteger)secondsFromGMT 得到当前时区与零时区的间隔秒数 NSTimeZone *zone = [NSTimeZone localTimeZone];int seconds = [zone secondsFromGMT];NSLog(@”%i”,seconds);NSLoale NSLoale类返回本地化信息，主要体现在”语言”和”区域格式”这两个设置项。有下面几种初始化方法： (id)systemLocale 返回系统初始本地化信息 NSLocale *locale = [NSLocale systemLocale];NSLog(@”%@”,[[locale objectForKey:NSLocaleCalendar] calendarIdentifier]); (id)currentLocale / + (id)autoupdatingCurrentLocale 这两个类方法都将返回当前客户端的本地化信息，区别在于：currentLocale取得的值会一直保持在cache中，第一次用此方法实例化对象后，即使修改了本地化设定，这个对象也不会改变。而使用autoupdatingCurrentLocale，当每次修改本地化设定，其实例化的对象也会随之改变。 下面的代码演示了区别所在，假设初始本地化信息为en_US，先用这两个函数分别初始化两个对象，然后修改本地化设定语言为台湾繁体中文，再重新打印这两个对象的信息： 复制代码NSLocale locale1;NSLocale locale2; (IBAction)doTest:(id)sender{ locale1 = [NSLocale currentLocale]; locale2 = [NSLocale autoupdatingCurrentLocale]; NSLog(@”%@”,locale1.localeIdentifier); //print “en_US” NSLog(@”%@”,locale2.localeIdentifier); //print “en_US”} (IBAction)doAgain:(id)sender{ NSLog(@”%@”,locale1.localeIdentifier); //print “en_US” NSLog(@”%@”,locale2.localeIdentifier); //print “zh_TW”}复制代码 (id)initWithLocaleIdentifier:(NSString *)string 用标示符初始化本地化信息 NSLocale locale = [[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”];NSString strSymbol = [locale objectForKey:NSLocaleCurrencySymbol];NSLog(@”%@”,strSymbol);代码用”zh_CN”来初始化对象，然后再打印出对象的货币符号，得到的结果是人民币符号￥ NSLoale常用对象方法与类方法： (id)objectForKey:(id)key 根据不同的key返回各种本地化信息，例如下面的代码返回了当前货币符号： NSLocale locale = [NSLocale currentLocale];NSString strSymbol = [locale objectForKey:NSLocaleCurrencySymbol];NSCalendar *calendar = [[NSLocale currentLocale] objectForKey:NSLocaleCalendar]; (NSString *)displayNameForKey:(id)key value:(id)value 显示特定地区代号下相应键的显示名称： NSLocale locale = [[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”];NSString str = [locale displayNameForKey:NSLocaleIdentifier value:@”en_US”];NSLog(@”%@”,str);第一句代码代表以中文来实例化对象，然后得到”en_US”的NSLocaleIdentifier键的显示名称。最后输出的结果是”英文（美国）” NSDateComponents NSDateComponents封装了具体年月日、时秒分、周、季度等 复制代码NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setEra:1];[compt setYear:2013];[compt setMonth:3];[compt setDay:15];[compt setHour:11];[compt setMinute:20];[compt setSecond:55];[compt setQuarter:2];[compt setTimeZone:[NSTimeZone systemTimeZone]];[compt setWeek:3];[compt setWeekday:4];[compt setWeekOfMonth:3];[compt setWeekOfYear:2];[compt setCalendar:[NSCalendar currentCalendar]];复制代码NSDateComponents相关方法： NSCalendar对象的 - (NSDateComponents )components:(NSUInteger)unitFlags fromDate:(NSDate )date 取得一个NSDate对象的1个或多个部分，用NSDateComponents来封装 复制代码NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [NSDate date];//NSDateComponents compt = [calendar components:NSDayCalendarUnit fromDate:date];NSDateComponents compt = [calendar components:(NSYearCalendarUnit|NSMonthCalendarUnit|NSDayCalendarUnit) fromDate:date]; NSLog(@”%d,%@”,[compt year],date);NSLog(@”%d,%@”,[compt month],date);NSLog(@”%d,%@”,[compt day],date);复制代码需要注意的是，只有明确指定了unitFlags，NSDateComponents相应的那一部分才有值。 NSCalendar对象的 - (NSDateComponents )components:(NSUInteger)unitFlags fromDate:(NSDate )startingDate toDate:(NSDate *)resultDate options : (NSUInteger)opts 取得两个NSDate对象的时间间隔，用NSDateComponents来封装 复制代码NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [NSDate date];NSDate date2 = [NSDate dateWithTimeInterval:56060+75 sinceDate:date];NSDateComponents compt = [calendar components:(NSMinuteCalendarUnit|NSSecondCalendarUnit) fromDate:date toDate:date2 options:0]; NSLog(@”%d”,[compt minute]);NSLog(@”%d”,[compt second]);复制代码有几点需要注意： ① 得到的NSDateComponents对象可能会包含负数。例如：当toDate比fromDate晚10秒，second部分返回10；当toDate比fromDate早10秒，second部分返回-10 ② 当指定unitFlags返回多个部分时，相隔的时间由多个部分共同组成(而不是独立去表示)。例如：上面的例子时间相差5小时1分15秒，如果指定只返回second部分，将得到18075秒；如果指定返回minute和second部分，将得到301分15秒；如果指定返回hour、minute和second，将得到5小时1分15秒。 NSCalendar对象的 - (NSDate )dateFromComponents:(NSDateComponents )comps 根据NSDateComponents对象得到一个NSDate对象 复制代码NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setYear:2012];[compt setMonth:5];[compt setDay:11]; NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [calendar dateFromComponents:compt];//得到本地时间，避免时区问题NSTimeZone zone = [NSTimeZone systemTimeZone];NSInteger interval = [zone secondsFromGMTForDate:date];NSDate localeDate = [date dateByAddingTimeInterval:interval]; NSLog(@”%@”,localeDate);复制代码 NSCalendar对象的 - (NSDate )dateByAddingComponents:(NSDateComponents )comps toDate:(NSDate *)date options:(NSUInteger)opts 在参数date基础上，增加一个NSDateComponents类型的时间增量 复制代码NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setDay:25];[compt setHour:4];[compt setMinute:66]; NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [calendar dateByAddingComponents:compt toDate:[NSDate date] options:0]; //得到本地时间，避免时区问题NSTimeZone zone = [NSTimeZone systemTimeZone];NSInteger interval = [zone secondsFromGMTForDate:date];NSDate localeDate = [date dateByAddingTimeInterval:interval]; NSLog(@”%@”,localeDate);复制代码当前时间的基础上，增加25天4小时66秒 NSCalendar (id)currentCalendar / + (id)autoupdatingCurrentCalendar 这两个类方法都将返回当前客户端的逻辑日历，区别在于：currentCalendar取得的值会一直保持在cache中，第一次用此方法实例化对象后，即使修改了系统日历设定，这个对象也不会改变。而使用autoupdatingCurrentCalendar，当每次修改系统日历设定，其实例化的对象也会随之改变。 下面的代码演示了区别所在，假设初始Calendar设定为NSGregorianCalendar(公历)，先用这两个函数分别初始化两个对象，然后修改系统日历为NSJapaneseCalendar(日本和历)，再重新打印这两个对象的信息： 复制代码NSCalendar calendar;NSCalendar calendar2; (IBAction)doTest:(id)sender{ calendar = [NSCalendar currentCalendar]; calendar2 = [NSCalendar autoupdatingCurrentCalendar]; NSLog(@”%@”,calendar.calendarIdentifier); //print “gregorian” NSLog(@”%@”,calendar2.calendarIdentifier); //print “gregorian”} (IBAction)doAgain:(id)sender{ NSLog(@”%@”,calendar.calendarIdentifier); //print “gregorian” NSLog(@”%@”,calendar2.calendarIdentifier); //print “japanese”}复制代码 (id)initWithCalendarIdentifier:(NSString *)string 根据提供的日历标示符初始化 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSChineseCalendar];NSLog(@”%@”,calendar.calendarIdentifier);系统中定义的日历有： NSGregorianCalendar – 公历NSBuddhistCalendar – 佛教日历NSChineseCalendar – 中国农历NSHebrewCalendar – 希伯来日历NSIslamicCalendar – 伊斯兰历NSIslamicCivilCalendar – 伊斯兰教日历NSJapaneseCalendar – 日本日历NSRepublicOfChinaCalendar – 中华民国日历（台湾）NSPersianCalendar – 波斯历NSIndianCalendar – 印度日历NSISO8601Calendar – ISO8601 NSCalendar常用对象方法与类方法： (void)setLocale:(NSLocale *)locale 设置本地化信息 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];[calendar setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@”zh_CN”]];NSLog(@”%@”,calendar.locale.localeIdentifier); (void)setTimeZone:(NSTimeZone *)tz 设置时区信息 NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];[calendar setTimeZone:[NSTimeZone timeZoneWithAbbreviation:@”HKT”]];NSLog(@”%@”,calendar.timeZone); (void)setFirstWeekday:(NSUInteger)weekday 设置每周的第一天从星期几开始，比如：1代表星期日开始，2代表星期一开始，以此类推。默认值是1 如图所示，如果从星期天开始，日历的表现形式： 如果从星期二开始，日历的表现形式： NSCalendar *calendar = [NSCalendar currentCalendar];[calendar setFirstWeekday:3];NSLog(@”%i”,calendar.firstWeekday); (void)setMinimumDaysInFirstWeek:(NSUInteger)mdw 设置每年及每月第一周必须包含的最少天数，比如：设定第一周最少包括3天，则value传入3 NSCalendar *calendar = [NSCalendar currentCalendar];[calendar setMinimumDaysInFirstWeek:3];NSLog(@”%i”,calendar.minimumDaysInFirstWeek); (NSUInteger)ordinalityOfUnit:(NSCalendarUnit)smaller inUnit:(NSCalendarUnit)larger forDate:(NSDate *)date 获取一个小的单位在一个大的单位里面的序数 NSCalendarUnit包含的值有： NSEraCalendarUnit – 纪元单位。对于NSGregorianCalendar(公历)来说，只有公元前(BC)和公元(AD)；而对于其它历法可能有很多，例如日本和历是以每一代君王统治来做计算。NSYearCalendarUnit – 年单位。值很大，相当于经历了多少年，未来多少年。NSMonthCalendarUnit – 月单位。范围为1-12NSDayCalendarUnit – 天单位。范围为1-31NSHourCalendarUnit – 小时单位。范围为0-24NSMinuteCalendarUnit – 分钟单位。范围为0-60NSSecondCalendarUnit – 秒单位。范围为0-60NSWeekCalendarUnit – 周单位。范围为1-53NSWeekdayCalendarUnit – 星期单位，每周的7天。范围为1-7NSWeekdayOrdinalCalendarUnit – 没完全搞清楚NSQuarterCalendarUnit – 几刻钟，也就是15分钟。范围为1-4NSWeekOfMonthCalendarUnit – 月包含的周数。最多为6个周NSWeekOfYearCalendarUnit – 年包含的周数。最多为53个周NSYearForWeekOfYearCalendarUnit – 没完全搞清楚NSTimeZoneCalendarUnit – 没完全搞清楚 下面是一些示例： ① 当小单位为NSWeekdayCalendarUnit，大单位为NSWeekCalendarUnit时(即某个日期在这一周是第几天)，根据firstWeekday属性不同，返回的结果也不同。 NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [NSDate dateWithTimeIntervalSinceReferenceDate:10];//[calendar setFirstWeekday:2];int count = [calendar ordinalityOfUnit:NSWeekdayCalendarUnit inUnit:NSWeekCalendarUnit forDate:date];NSLog(@”%d”,count);默认firstWeekday为1(星期天开始)的情况下，得到的结果是2，从下图可以看到是第2天。 假如firstWeekday被设置为2(星期一开始)的情况下，得到的结果是1，从下图可以看到是第1天 ② 当小单位为NSWeekCalendarUnit，大单位为NSYearCalendarUnit时(即某个日期在这一年中是第几周)，根据minimumDaysInFirstWeek属性不同，返回的结果也不同。 复制代码NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setYear:2013];[compt setMonth:1];[compt setDay:20]; NSCalendar *calendar = [NSCalendar currentCalendar]; NSDate *date = [calendar dateFromComponents:compt]; //[calendar setMinimumDaysInFirstWeek:6];int count = [calendar ordinalityOfUnit:NSWeekCalendarUnit inUnit:NSYearCalendarUnit forDate:date];NSLog(@”%d”,count);复制代码从上图的日历中可以看出，在没有设置minimumDaysInFirstWeek的情况下，1月20日得到的结果是4(第四个周)。 默认情况下第一个周有5天，如果将minimumDaysInFirstWeek设置为6天，则原本是第一周的1月1日–1月5日被划分到了上一年，返回0；而1月6日–1月12日升为第一周，1月13日–1月19日升为第二周。。依此类推。 所以需要关注的是minimumDaysInFirstWeek与实际第一周包含天数的大小比较，如果提供的minimumDaysInFirstWeek比实际第一周的天数小，则一切不变；否则统计”一年中第几周”、”一个月中第几周”会产生变化。 (NSRange)rangeOfUnit:(NSCalendarUnit)smaller inUnit:(NSCalendarUnit)larger forDate:(NSDate *)date 根据参数提供的时间点，得到一个小的单位在一个大的单位里面的取值范围 复制代码NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setYear:2013];[compt setMonth:2];[compt setDay:21];[compt setHour:9];[compt setMinute:45];[compt setSecond:30]; NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [calendar dateFromComponents:compt]; //得到本地时间，避免时区问题NSTimeZone zone = [NSTimeZone systemTimeZone];NSInteger interval = [zone secondsFromGMTForDate:date];NSDate localeDate = [date dateByAddingTimeInterval:interval]; NSRange range = [calendar rangeOfUnit:NSDayCalendarUnit inUnit:NSYearCalendarUnit forDate:localeDate]; NSLog(@”%d – %d”,range.location,range.length);复制代码调用这个方法要明确一点，取得的是”范围”而不是”包含”，下面是一些例子： ① 小单位是NSDayCalendarUnit，大单位是NSYearCalendarUnit，并不是要取这一年包含多少天，而是要取”天”(Day)这个单位在这一年(Year)的取值范围。其实不管你提供的日期是多少，返回的值都是”1–31”。 ② 小单位是NSDayCalendarUnit，大单位是NSMonthCalendarUnit。要取得参数时间点所对应的月份下，”天”(Day)的取值范围。根据参数时间的月份不同，值也不同。例如2月是1–28、3月是1–31、4月是1–30。 ③ 小单位是NSWeekCalendarUnit，大单位是NSMonthCalendarUnit。要取得参数时间点所对应的月份下，”周”(Week)的取值范围。需要注意的是结果会受到minimumDaysInFirstWeek属性的影响。在默认minimumDaysInFirstWeek情况下，取得的范围值一般是”1–5”，从日历上可以看出来这个月包含5排，即5个周。 ④ 小单位是NSDayCalendarUnit，大单位是NSWeekCalendarUnit。要取得周所包含的”天”(Day)的取值范围。下面是一个示例日历图： 在上图的日期条件下，假如提供的参数是4月1日–4月6日，那么对应的week就是1(第一个周)，可以看到第一个周包含有6天，从1号开始，那么最终得到的范围值为1–6。 假如提供的参数是4月18日，那么对应的week是3(第三个周)，第三个周包含有7天，从14号开始，那么最终得到的范围值是14–7。 假如提供的参数是4月30日，那么对应的week是5(第五个周)，第五个周只包含3天，从28号开始，那么最终得到的范围值是28–3。 (BOOL)rangeOfUnit:(NSCalendarUnit)unit startDate:(NSDate *)datep interval:(NSTimeInterval )tip forDate:(NSDate *)date 根据参数提供的时间点，返回所在日历单位的开始时间。如果startDate和interval均可以计算，则返回YES；否则返回NO unit – 日历单位datep – 开始时间，通过参数返回tip – 日历单位所对应的秒数，通过参数返回date – 时间点参数 复制代码NSDate *dateOut = nil;NSTimeInterval count = 0; NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setYear:2013];[compt setMonth:3];[compt setDay:22]; NSCalendar calendar = [NSCalendar currentCalendar];NSDate date = [calendar dateFromComponents:compt];BOOL b = [calendar rangeOfUnit:NSMonthCalendarUnit startDate:&amp;dateOut interval:&amp;count forDate:date];if(b){ //得到本地时间，避免时区问题 NSTimeZone zone = [NSTimeZone systemTimeZone]; NSInteger interval = [zone secondsFromGMTForDate:dateOut]; NSDate localeDate = [dateOut dateByAddingTimeInterval:interval]; NSLog(@&quot;%@&quot;,localeDate); NSLog(@&quot;%f&quot;,count); }else{ NSLog(@”无法计算”);}复制代码上面的例子要求返回2013年3月22日当月的起始时间，以及当月的秒数。得到的结果是：2013-03-01 00:00:00 +0000，2678400。(2678400 = 31天 24小时 60分 * 60秒)。 假如将上面的日历单位改为NSWeekCalendarUnit，那么得到的结果是：2013-03-17 00:00:00 +0000，604800。当周的第一天是3月17日。(604800 = 7天 24小时 60分 * 60秒)。 假如将上面的日历单位改为NSYearCalendarUnit，那么得到的结果是：2013-01-01 00:00:00 +0000，31536000。这一年的第一天是1月1日，(31536000 = 365天 24小时 60分 * 60秒)。 NSDateFormatter NSDateFormatter的日期格式如下: 复制代码G – 纪元一般会显示公元前(BC)和公元(AD) y – 年假如是2013年，那么yyyy=2013，yy=13 M – 月假如是3月，那么M=3，MM=03，MMM=Mar，MMMM=March假如是11月，那么M=11，MM=11，MMM=Nov，MMMM=November w – 年包含的周假如是1月8日，那么w=2(这一年的第二个周) W – 月份包含的周(与日历排列有关)假如是2013年4月21日，那么W=4(这个月的第四个周) F – 月份包含的周(与日历排列无关)和上面的W不一样，F只是单纯以7天为一个单位来统计周，例如7号一定是第一个周，15号一定是第三个周，与日历排列无关。 D – 年包含的天数假如是1月20日，那么D=20(这一年的第20天)假如是2月25日，那么D=31+25=56(这一年的第56天) d – 月份包含的天数假如是5号，那么d=5，dd=05假如是15号，那么d=15，dd=15 E – 星期假如是星期五，那么E=Fri，EEEE=Friday a – 上午(AM)/下午(PM) H – 24小时制，显示为0–23假如是午夜00:40，那么H=0:40，HH=00:40 h – 12小时制，显示为1–12假如是午夜00:40，那么h=12:40 K – 12小时制，显示为0–11假如是午夜00:40，那么K=0:40，KK=00:40 k – 24小时制，显示为1–24假如是午夜00:40，那么k=24:40 m – 分钟假如是5分钟，那么m=5，mm=05假如是45分钟，那么m=45，mm=45 s – 秒假如是5秒钟，那么s=5，ss=05假如是45秒钟，那么s=45，ss=45 S – 毫秒一般用SSS来显示 z – 时区表现形式为GMT+08:00 Z – 时区表现形式为+0800复制代码NSDateFormatter的两个最实用的方法是dateFromString和stringFromDate，前者将一个字符串经过格式化后变成NSDate对象，后者将NSDate对象格式化成字符串。 在调用setDateFormat设置格式化字符串时，可以加入一些别的字符串，用单引号来引入，例如： [formatter setDateFormat:@”yyyy-MM-dd ‘some ‘’special’’ string’ HH:mm:ss”];使用NSDateFormatter转换时间字符串时，默认的时区是系统时区，例如在中国一般都是北京时间(+8)，如果直接转换会导致结果相差8小时，所以一般的做法是先指定时区为GMT标准时间再转换，例如： 复制代码NSDateFormatter *formatter = [[NSDateFormatter alloc] init];[formatter setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];[formatter setDateFormat:@”yyyy-MM-dd HH:mm:ss z”]; NSDateComponents *compt = [[NSDateComponents alloc] init];[compt setYear:2013];[compt setMonth:3];[compt setDay:13];[compt setHour:1];[compt setMinute:55];[compt setSecond:28]; NSCalendar calendar = [NSCalendar currentCalendar];[calendar setTimeZone:[NSTimeZone timeZoneForSecondsFromGMT:0]];NSDate date = [calendar dateFromComponents:compt];NSLog(@”%@”,date);NSString *str = [formatter stringFromDate:date];NSLog(@”%@”,str); 关于pop 动画引擎两个例子取色功能动效遇到两个比较麻烦的点，1). 今天在做一个动画的时候，使用‘pop’时候，发现动作做完了，然后一个按钮使其回归原位，但是再做动作的时候，就只动了一下。难以查看过程，当我打断点到layoutSubviews的时候，果然进去了。然后不知道是谁调用的，于是我去使用time profile看了那一段时间干了什么事。于是看到了layoutSubviews被调用了，是‘pop’某一块调用了，使view又跑回原位。这时候，要么将布局代码写到其他地方，要么使用UIView的动画，我选择了后者。2). 在一个回馈动效中使用POPSpringAnimation，但是由于滑块可以快速多次滑动，所以在弹性高过预定值，会产生negative值，即负值，这时3D transform中，scaleXY会出现rotate情况，https://github.com/facebook/pop/issues/76，这里采用clamp，在结束时，不超过回弹值。可以使用下面给出的两端中其一都可：12345678-(void)popupMensionNode&#123; POPBasicAnimation *nodeAnim = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)]; nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; nodeAnim.autoreverses = YES; nodeAnim.duration = 0.25; [_textNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)];&#125; 12345678910-(void)popupMensionNode&#123; POPSpringAnimation *imageNodeAnim = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; imageNodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)]; imageNodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; imageNodeAnim.autoreverses = YES; imageNodeAnim.clampMode = kPOPAnimationClampEnd; imageNodeAnim.springBounciness = 8;// imageNodeAnim.springSpeed = 20; [_textNode.layer pop_addAnimation:imageNodeAnim forKey:NSStringFromSelector(_cmd)];&#125; 今天遇到这么个问题 UIImageView 上面有控件 label 和button ,但是看起来很模糊今天遇到这么个问题 UIImageView 上面有控件 label 和button ,但是看起来很模糊。我当时以为其是否因为是被设置backgroundColor ,但是在设置了UIImageView的图片时，还是模糊。目前未知原因，leave a tag。 浮点精度计算 http://www.jianshu.com/p/25d24a184016NSDecimalNumber price1 = [NSDecimalNumber decimalNumberWithString:@”15.99”];NSDecimalNumber price2 = [NSDecimalNumber decimalNumberWithString:@”29.99”];NSDecimalNumber coupon = [NSDecimalNumber decimalNumberWithString:@”5.00”];NSDecimalNumber discount = [NSDecimalNumber decimalNumberWithString:@”.90”];NSDecimalNumber numProducts = [NSDecimalNumber decimalNumberWithString:@”2.0”];NSDecimalNumber subtotal = [price1 decimalNumberByAdding:price2];//price1+price2NSDecimalNumber afterCoupon = [subtotal decimalNumberBySubtracting:coupon];//subtotal-conponNSDecimalNumber afterDiscount = [afterCoupon decimalNumberByMultiplyingBy:discount];//afterCoupondiscountNSDecimalNumber average = [afterDiscount decimalNumberByDividingBy:numProducts];//afterDiscount/2NSDecimalNumber averageSquared = [average decimalNumberByRaisingToPower:2];//averageaverageNSLog(@”Subtotal: %@”, subtotal); // 45.98NSLog(@”After coupon: %@”, afterCoupon); // 40.98NSLog((@”After discount: %@”), afterDiscount); // 36.882NSLog(@”Average price per product: %@”, average); // 18.441NSLog(@”Average price squared: %@”, averageSquared); // 340.070481 iOS多target http://www.cnblogs.com/yajunLi/p/6001132.htmliOS 如何创建多个target，同时表达多target的意义 理解的营收模式1：类似onePassword 可以试用1个月 然后，需要购买服务，，收费，，也不贵，，大概也是6、7、10块这样的，永久使用，，，2：限制一些输入，，比如用户可以选择我们给的默认文案，但是用户要自定义，，那就收费，，再给会员予以多个账本创建能力，，，未付费仅能使用1个3：增值服务收费吧；云同步，导出账本，这一类功能开放4：增值服务和广告 多快好省","categories":[],"tags":[]},{"title":"2017/08/24lesson","slug":"2017-08-24lesson","date":"2017-08-24T15:52:28.000Z","updated":"2017-08-26T14:22:10.000Z","comments":true,"path":"2017/08/24/2017-08-24lesson/","link":"","permalink":"https://shaohung001.github.io/2017/08/24/2017-08-24lesson/","excerpt":"","text":"2017/08/0712345678910111213141516171819202122232425vim .gitignore*/build/**.pbxuser!default.pbxuser*.mode1v3!default.mode1v3*.mode2v3!default.mode2v3*.perspectivev3!default.perspectivev3xcuserdataprofile*.moved-asideDerivedData.idea/*.hmapDS_Store#CocoaPodsPodsPodfile.lockbuild*pics*a.diff 这时还没生效，要么全部quit掉，要么clean cache：12345改动过.gitignore文件之后，在repo的根目录下运行：git rm -r --cached .git add .之后可以进行提交：git commit -m &quot;fixed untracked files&quot;w 最近在学习openGL ES发现这没有速成方法，遂接下来要每天都抄写熟悉，熟练。这，是一门必修课，肯定会有大用处的。另附学习的metaball学习，还没学成，继续。罗列好的学习网址： http://labs.byhook.com/2011/09/26/vector-metaballs/ https://github.com/Dillion/VectorMetaballs http://t-machine.org/index.php/2013/10/18/ios-open-gl-es-2-multiple-objects-at-once/ https://www.khronos.org/opengl/wiki/Framebuffer_Object_Extension_Examples http://blog.db-in.com/all-about-opengl-es-2-x-part-2/#primitives https://github.com/kesalin/OpenGLES http://www.jianshu.com/p/750fde1d8b6a https://www.raywenderlich.com/3664/opengl-tutorial-for-ios-opengl-es-2-0 https://www.raywenderlich.com/4404/opengl-es-2-0-for-iphone-tutorial-part-2-textures http://blog.csdn.net/icetime17/article/details/50429658 http://www.cnblogs.com/salam/p/5113572.html http://mobile.51cto.com/app-show-436793.htm http://blog.csdn.net/yzfuture2010/article/details/7799800 小的app 的生存之道就只有做好，然后苹果推荐。不然没有推广，再好都没用。是金子总会发光，可会发光的金子，时间一长，人就变了胃口喜欢钞票了。IT，时时刻刻要变化。说这些就是要推荐，那随随便便就可以苹果推荐了？？想多了，我查看了推过苹果推荐的，要么是公司花人力物力累积，要么是大牛写写出来绚丽。所以好的东西，需要的沉淀是必然的。没有花心思，只是小东西，苹果商店不缺，只有好的拼一把，才能出众！！！openGL ES 这是非学不可。只要在我要用的领域学够！！！ 使用宏忽略警告 http://blog.csdn.net/majiakun1/article/details/464249251.使用函数指针方式1234SEL selector = NSSelectorFromString(@&quot;someMethod&quot;);IMP imp = [_controller methodForSelector:selector];void (*func)(id, SEL) = (void *)imp;func(_controller, selector); 当有额外参数时，如1234SEL selector = NSSelectorFromString(@&quot;processRegion:ofView:&quot;);IMP imp = [_controller methodForSelector:selector];CGRect (*func)(id, SEL, CGRect, UIView *) = (void *)imp;CGRect result = func(_controller, selector, someRect, someView); 2.使用宏忽略警告1234#pragma clang diagnostic push #pragma clang diagnostic ignored &quot;-Warc-performSelector-leaks&quot; [someController performSelector: NSSelectorFromString(@&quot;someMethod&quot;)]#pragma clang diagnostic pop 通过使用#pragma clang diagnostic push/pop，你可以告诉Clang编译器仅仅为某一特定部分的代码来忽视特定警告。如果需要忽视的警告有多处，可以定义一个宏1234567#define SuppressPerformSelectorLeakWarning(Stuff) \\ do &#123; \\ _Pragma(&quot;clang diagnostic push&quot;) \\ _Pragma(&quot;clang diagnostic ignored \\&quot;-Warc-performSelector-leaks\\&quot;&quot;) \\ Stuff; \\ _Pragma(&quot;clang diagnostic pop&quot;) \\ &#125; while (0) 在产生警告也就是performSelector的地方用使用该宏，如123SuppressPerformSelectorLeakWarning( [_target performSelector:_action withObject:self]); 如果需要performSelector返回值的话，1234id result;SuppressPerformSelectorLeakWarning( result = [_target performSelector:_action withObject:self]); iOS时区ADT = &quot;America/Halifax&quot;; AKDT = &quot;America/Juneau&quot;; AKST = &quot;America/Juneau&quot;; ART = &quot;America/Argentina/Buenos_Aires&quot;; AST = &quot;America/Halifax&quot;; BDT = &quot;Asia/Dhaka&quot;; BRST = &quot;America/Sao_Paulo&quot;; BRT = &quot;America/Sao_Paulo&quot;; BST = &quot;Europe/London&quot;; CAT = &quot;Africa/Harare&quot;; CDT = &quot;America/Chicago&quot;; CEST = &quot;Europe/Paris&quot;; CET = &quot;Europe/Paris&quot;; CLST = &quot;America/Santiago&quot;; CLT = &quot;America/Santiago&quot;; COT = &quot;America/Bogota&quot;; CST = &quot;America/Chicago&quot;; EAT = &quot;Africa/Addis_Ababa&quot;; EDT = &quot;America/New_York&quot;; EEST = &quot;Europe/Istanbul&quot;; EET = &quot;Europe/Istanbul&quot;; EST = &quot;America/New_York&quot;; GMT = GMT; GST = &quot;Asia/Dubai&quot;; HKT = &quot;Asia/Hong_Kong&quot;; HST = &quot;Pacific/Honolulu&quot;; ICT = &quot;Asia/Bangkok&quot;; IRST = &quot;Asia/Tehran&quot;; IST = &quot;Asia/Calcutta&quot;; JST = &quot;Asia/Tokyo&quot;; KST = &quot;Asia/Seoul&quot;; MDT = &quot;America/Denver&quot;; MSD = &quot;Europe/Moscow&quot;; MSK = &quot;Europe/Moscow&quot;; MST = &quot;America/Denver&quot;; NZDT = &quot;Pacific/Auckland&quot;; NZST = &quot;Pacific/Auckland&quot;; PDT = &quot;America/Los_Angeles&quot;; PET = &quot;America/Lima&quot;; PHT = &quot;Asia/Manila&quot;; PKT = &quot;Asia/Karachi&quot;; PST = &quot;America/Los_Angeles&quot;; SGT = &quot;Asia/Singapore&quot;; UTC = UTC; WAT = &quot;Africa/Lagos&quot;; WEST = &quot;Europe/Lisbon&quot;; WET = &quot;Europe/Lisbon&quot;; WIT = &quot;Asia/Jakarta&quot;; 离开海外部,稍微总结一下twitter 分享，是不跳转instagram 只能分享图片twitter 在创建完app key、secret 时需要在permission 里面再设置一项：获得access 能力。同时update。外国在UI上注重的比国内要强很多。外国在矩阵、重度OpenGL 比国内要强很多。 Reveal_iFile_路径http://www.cnblogs.com/blfbuaa/p/7248252.html这时候，我们在Mac浏览器里打开192.168..**，就能够查看iPhone上的文件系统。并上传文件到iPhone了。 打开Mac上的Reveal。并选择”Help”-“Show Reveal Library in Finder”。这时候有2个文件：Reveal.framework和libReveal.dylib。 将Reveal.framework压缩(不能上传文件夹)并上传到iPhone的”/System/Library/Frameworks/”文件夹中，然后解压缩； 在iFile里打开”应用程序”文件夹(iFile的内置书签)，找到你想查看的APP文件夹里的info.plist文件。查找这个APP的Bundle ID，如果为com.example.domain。 在Mac上创建libReveal.plist，编辑内容为：“`{Filter={Bundles = “com.example.domain”;}}上传libReveal.plist到”/Library/MobileSubstrate/DynamicLibraries”，也就是和libReveal.dylib在一起。 最后一步。重新启动iPhone。然后打开想要查看的APP。Mac上的Reveal就有反应啦！ 记一次GPUImage 在export movie 内存暴涨，崩溃问题原因是在GPUImage 加了UIElementFilter 现实纹理，其在update中需要update 操作。机型是iOS 9 以上，只要视频大于2分钟，就一定出现崩溃现象。原因为，uielement 在update 内部操作中没有进行及时内存释放。此时操作，是将@autoreleasepool { [x update]; }包裹即可解决。 记一次比较闹心的事之前从海外组回归到原本团队，海外组探求之后，没能做到利益，没办法，其实海外领队和其中内部全部开发:两个开发-.-都知道。这其实是一个没有绝对胜仗可打的局。前面没有路走，只有试试、只有闯闯，成功就成功，失败领队都没有怨言，壮士扼腕，是我觉得的扼腕。回来之后我完成原本project内部的业务部分。正如当时进来时，大师和我们说的，这里面基本都是业务，全是业务。是的，基本都是业务，按照其中条条框框，按部就班，规规矩矩。重回到之前状态，还是没找到感觉，但一回来就给我weex 和内部代码之间的交互。那好，我搞搞，建了个类写一写，写到一半，他们又说继承他们的。好好好，继承你们的，想着他们还可能用得上这个，没去掉，至少之后可以继续扩展下去，就留着那个类，这个留着后话。继承他人的类，那个类不小啊，，700多行，然后其有一些view 是weex 交流。weex 的html是军哥那边搞的，他都没做好，我要和他一起搞。继承的类，想着尽量不动那些代码，就用for 循环 把其上的view 全部删了。那个页面真不要啊，和他们讨论，他们说要是有要添加的，那不就一块没啦。。听到这里我蛋疼的一比。这是weex 页面，客户端要改也是在我新添加的层上加啊。我仅仅是使用你的功能而已，整个view 都应该给你扔了了，全部在我新写的功能页面上才对。虽然我知道，这种删除做法是绝对的错误，但是，他适用在这。接下来是一个打log 的问题上。这个project 能使用的log 有：CCLog、DLog、FSLog、等等等，NSLog 我也不清楚他们有否在Release 上去掉相应的定义，所以尽量不敢用NSLog。那就想着用我以前用的CCLog吧。然而问题又来了，不要打CCLog 啊(我当时还不知道有DLog这玩意)，难道用console window，用断点。我曹，我都骂出来。我现在用的黑苹果，不知为何其在大型项目会这么卡，编译也比较慢。先讲断点，我用的iPhone 6s，project如果不在断点页面运行，那么肯定断点几乎就不相应的；在相应断点页面却也不一定出来，出来也卡的半死。再讲我未断点和断点切换都能卡，我要特么不打log，是别想开发了。而且这种业务型的，不看内里数据，是无法继续的了，这又是一个蛋疼。再说一个我的缺点吧，这是我的不对地方：我不爱写注释。我不写注释，前提是东西简单、业务单项、方法名已经取好了。还有就是我从海外部转回来，作为我安分守己的性格，尽量都是做到不动其他代码，于是出现了我新建一个和之前类名很类似的类，却没有把他删除。我有错这个，但却不能错在我。我回来的时候，什么都没有知会，没有权利，只有义务。说我好歹是中级开发者，代码却没有好好维护，写不好代码，这我就更不同意了，我就一码农，开开心心生活的码农，，，开开心心多好，哈哈哈接下来还是一个蛋疼的地方，注释掉的东西，我有时会留在那里。一个类东西不多，注释掉的有些用处，或者不太占位置，我就不会太在意那些。于是在这次也特别说我的这点，这点我认了。之后勤快些吧，尽量谢谢注释吧，毕竟确实是我不对；如果有需要删除、测试代码等对源码可能造成影响的，我都要注意了；毕竟这也是个人修养，对我有好处，让我升级为好好码农也是不错的。。。继承他人，有我不需要实现的功能，甚至替换他人代码层面，看到那些就蛋疼了。最最最后说一个。我特么一过来就丢给我一个UI、丢一个wiki、我都还是不知道里面什么鬼，要问个人要转好几个弯，来来回回，晕头转向，过去了，大师态度我自己知道，说的很迷糊那种，问回来了还是迷迷糊糊。然而项目已经把时间差不多给你定好了。你说蛋疼不。发版的时间就这么几天，那边都还没做好，下一个要做的功能又来了。这次说我，我觉得很小题大作，我觉得无所谓，我会吸取教训，“小心、小心再小心”而已。我只是那只跳起来的鸡，刚好从海外组过来，是该杀杀锐气的。也为他人警示，警示也是有好处的警示，我认了。规范也没说，那就个人尽量做好即可。我那一两个空文件，project 就卡的半死啦？？那么多的重复库，重复定义，奇奇怪怪的内容、图片，就把我说一通？？这个我嘴里服，心里也不服。说我不把项目当自己的搞，毛蛋！我要是不当回事，我代码就能写成以完成任务为主了。再说之前那个类，那个类是我特么要写着留下来升华的，不用我早删了好伐，虽然不见得目前这个功能还没好，我可能会后面补上，但这个本来我就是要自己写，被你们决定要换思路的好伐，忘记是正常的，我现在还不知道这个weex内部怎么沟通的，脑子还是一团浆糊咧，哪可能记得那个啊。不要说你们写demo的时候第一次写把每个api 铭记，能记住的往后站，大部分都记不住好伐。我特么不标榜自己是多高尚的人，多聪明的人，我特么就是个努力的人，仅仅努力而已，我也不想我能写出多么超级超级好的代码，中国人是需要生活的，不是码神。OK，说了那么多，是该说重点了。这么多年来，我一直说着，学完这一个，是会上升自己空间了，学完这一个，我又更强大了，基本在这个层面的人都是比较好的，普遍普通类别之上的了。但是还是不够。我来当前公司，其实就是奔着学习而来。其实已经大差不差。比如一些思维开拓，一些产品思维、一些业务逻辑，一些控制管理，把控等，在新的知识储备方面也更加的好了，也更多的接触到底层，能做更好的了。其实好的东西不是说拼命往上赶，拼命往上堆叠，就能好的。好的东西，都是要有好的技术，好的底层。正如我之前思考的，很多的好的，能令人轰动的都是别人能学其表，难成其里的，好在了内在，真正的技术。其实现在我所做的，不过就是真的业务员，能研究的机会都不多，再难一点的东西都是局限于业务、功能块内，不能超脱，比如我们的技术领导“大师”，都把东西做到一半了，其他只不过是堆叠。我自己私下，需要有两个地方开花。第一是面向工资编程的实现，没有金钱入手，什么都是没用的。第二是将我这三十岁之前最后一个，最难的的东西学好：opengl。以前确实都不是我该学习该物的时候，但，现在已经可以。以前的知识储备完全不能理解其中变化，现在已经能够得着了，也就是时候了。是时候了。想想兰姐2年5多部电影。我更努力学习难道不应该乎？","categories":[],"tags":[]},{"title":"2017/7/30lesson","slug":"2017-7-30lesson","date":"2017-07-29T16:02:57.000Z","updated":"2020-05-29T03:53:32.582Z","comments":true,"path":"2017/07/30/2017-7-30lesson/","link":"","permalink":"https://shaohung001.github.io/2017/07/30/2017-7-30lesson/","excerpt":"","text":"新App上传上传碰见这事：构建的版本上去了，也出现在构建版本里面，不过过没一会就消失了。由于邮箱什么的都不在我这，过了好久才想起来，用的另一个邮箱，于是去看看有没有什么说明： 1234567891011121314Dear developer,We have discovered one or more issues with your recent delivery for &quot;Color Saga - Coloring book&quot;. To process your delivery, the following issues must be corrected:Non-public API usage:The app references non-public symbols in XXT: _UICreateCGImageFromIOSurfaceIf method names in your source code match the private Apple APIs listed above, altering your method names will help prevent this app from being flagged in future submissions. In addition, note that one or more of the above APIs may be located in a static library that was included with your app. If so, they must be removed.If you think this message was sent in error and that you have only used Apple-published APIs in accordance with the guidelines, send the app&apos;s nine-digit Apple ID, along with detailed information about why you believe the above APIs were incorrectly flagged, to appreview@apple.com. For further information, visit the Technical Support Information page.Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSCalendarsUsageDescription key with a string value explaining to the user how the app uses this data.Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSPhotoLibraryUsageDescription key with a string value explaining to the user how the app uses this data.Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSBluetoothPeripheralUsageDescription key with a string value explaining to the user how the app uses this data.Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSMicrophoneUsageDescription key with a string value explaining to the user how the app uses this data.Missing Info.plist key - This app attempts to access privacy-sensitive data without a usage description. The app&apos;s Info.plist must contain an NSMotionUsageDescription key with a string value explaining to the user how the app uses this data.Once these issues have been corrected, you can then redeliver the corrected binary.Regards,The App Store team 然后就找到这篇文章，唉，，Reavel我按照教程，说不出问题了呀，但还是出这个问题了。 http://www.cnblogs.com/WayneLiu/p/5251565.html YTKNetWork 在cacheData 时出错缘由是cacheData数据没有在拿到缓存之后继续跟服务器获取，查到https://github.com/yuantiku/YTKNetwork/issues/106处理为下例: 123456789XXHomeCateListApi *cateListApi = [[XXHomeCateListApi alloc]initWithData:@&#123;@&quot;category_id&quot;:self.cateModel.id,@&quot;start&quot;:input,@&quot;category_name&quot;:self.cateModel.name&#125;];if ([cateListApi loadCacheWithError:nil]) &#123;[self requestSuccessWithapi:cateListApi subscriber:subscriber];&#125;cateListApi = [[XXHomeCateListApi alloc]initWithData:@&#123;@&quot;category_id&quot;:self.cateModel.id,@&quot;start&quot;:input,@&quot;category_name&quot;:self.cateModel.name&#125;];[cateListApi startWithoutCache];[cateListApi startWithCompletionBlockWithSuccess:^(__kindof YTKBaseRequest * _Nonnull request) &#123;&#125; failure:^(__kindof YTKBaseRequest * _Nonnull request) &#123;&#125;]; InAPPPurchase这几天有做内购遇到的问题 首先是刚进入先确认一次内购金额和手机当前货币的对比，保存该数据（如果没有获取到则显示默认的美金金额）如 1234567891011121314151617+(void)queryProductMoney&#123;dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^&#123;NSArray *googsArray = @[@&quot;0&quot;,@&quot;1&quot;,@&quot;12&quot;];NSSet *products = [NSSet setWithArray:googsArray];[[RMStore defaultStore] requestProducts:products success:^(NSArray *products, NSArray *invalidProductIdentifiers) &#123;NSLog(@&quot;Products loaded&quot;);NSMutableDictionary *priceDic = [@&#123;&#125; mutableCopy];[products enumerateObjectsUsingBlock:^(SKProduct* _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) &#123;LxDBAnyVar(obj);NSString *str = [XXPurchaseRequest currencyPriceWithProduct:obj];[priceDic setObject:str forKey:obj.productIdentifier];&#125;];[USERDEFAULT setObject:priceDic forKey:kAPPProduct];&#125; failure:^(NSError *error) &#123;&#125;];&#125;);&#125; 这样便能显示出你当前要展示的加个信息了。 关于内购时省查最严的就是More Info这个关键词。More Info 填写在有持续性扣费，会更加严格，我们当时在“Mine APP” 备注加上we have the purchase info at setting page ,click the &quot;Subscription FAQ&quot;&amp;&quot;About&quot; which user purchase info is display there. when user is about to pay, there have a button name &quot;more info&quot; , user can get enough help with that. 然后在相应位置提供more info。特么注明要有如以下词汇：改词汇来自“ColorSaga” 123456789ColorSaga Premium- With ColorSaga Premium you can subscribe for daily new picture updates and unlimited access to the full picture catalog- You&apos;ll be able to access all available pictures- The subscriptions are $2.99 USD weekly, $7.99 USD monthly and $39.99 USD annually or equal to the same price tier that &quot;Apple&apos;s App Store Matrix&quot; determines in other currencies.- You may cancel a subscription or free-trial anytime via the subscription setting through your iTunes account. This must be done 24 hours before the end of the free-trial or subscription period to avoid being charged.- Subscription automatically renews unless auto-renew is turned off at least 24-hours before the end of the current period. No cancellation of the current subscription is allowed during active subscription period. Any unused portion of a free-trial period, will be forfeited when the user purchases a ColorSaga PremiumTerms of use: http://d.fenfenriji.com/colorx/html/termsOfService.htmlPrivacy policy: http://d.fenfenriji.com/colorx/html/privacyPolicy.html 技术支持URL 可以使用github 网址或者博客网址，但是一定要有两个因素：1，该为为xxx提供技术支持 2，该含有联系电话或联系邮箱 在上线一两天之后开始做一次应用购买以提升曝光率。小技巧 应用如果有付费情况，然后过几天之后就解开，那么会有一些网站给该应用写报道，称限免应用，这样会出现一波高增长。 CaLayer drawInContext 绘图方法，出现&lt;Error&gt;: CGContextSetFlatness: invalid context 0x0. If you want to see the backtrace, please set CG_CONTEXT_SHOW_BACKTRACE environmental variable.在-(void)drawInContext:(CGContextRef)ctx方法开始第一句加上UIGraphicsPushContext(ctx);，因为当前绘图上下文在上层 UIColor colorWithPattern-&gt;提供一个图最近在做绘图工具，思考要一个东西。即要画一个有texture layer的图，没法输入。一开始有想法说在layer的contents，将图片叠加之后的image填为contents，后来重新看到这个方法即想到了，我可以使用color 的其中一个方法colorWithPattern的方法得到texture 图了。 上海办理公积金由于公积金可以付房租，对于待上海人来说能缓解很大很大的压力。这里给出前几天去办理大概过程。地点：##汉中路120号##。地铁下来之后找到#汉中路#出口，走上楼梯之后往右走。大概100米有个不是门的小入口有一个向上的logo，写着上二楼。上二楼之后填写两张表格，记得人多先取等号机。需要的材料：(结婚)结婚证、两人一起去(看情况，那次老婆先去也办成功，尽量一起去吧)、身份证、银行卡(上海银行卡、办理支行,作用是到时办理人员要刷一下)、手机；未结婚的话，除去结婚证其他同样；金额：每人（每户）最多2000，按季度发放，家庭办理一个之后，扣完款没有余额了才能办理另一个人的；办理成功大概需要半个月；上班时间：上午9点到11点40左右 下午一点半到4点半左右； 通过越狱机iFile 导出手机数据由于手机不是完美越狱，很久没更新，导入导出数据都巨麻烦。这里提供一个思路。由于iFunbox提供导入导出路径在Home 的Media文件目录。首先，app 路径在/var/containers/Bundle/Application 里面找到自己要的数据，右上角Edit，右下角Copy。然后点击中间的Home键，翻到Media目录，Paste。在电脑使用\u0010iFunbox 到Media目录，然后导出改文件。导入文件也同理反操作。","categories":[],"tags":[]},{"title":"2017/0709lesson","slug":"2017-0709lesson","date":"2017-07-09T15:22:09.000Z","updated":"2017-07-09T15:23:58.000Z","comments":true,"path":"2017/07/09/2017-0709lesson/","link":"","permalink":"https://shaohung001.github.io/2017/07/09/2017-0709lesson/","excerpt":"","text":"2017/05/31使用UIEffectView 的一个坑：UIEffectView的实现方式是将底部的着色吸附到当前View中。我喜欢使用帧动画，pop更加爱，于是出现一个情况，该effectView在上下滑动时，吸附的图片会出现在之前的位置，很不稳定，估计是使用局部变量编写，然后没有着色在之前的rect上面，出现有刷新当前区域指令的时候，就会清楚这块不稳定内容。这个问题重点在动画上。pop帧动画，采用逐步转移，而不是我现在解决使用的UIView动画。UIView动画是点到终点的动画，而pop是过程可逆的过程动画。 这里记录一次ASDK中滑动卡顿一愣一愣，以及push卡顿。ASDK滑动卡顿解决过程，使用将其他因素全部关掉方法。心里解决难，是因为其还有其他可能卡顿因素，所以不觉得是因为在ASDK内容物问题，因为试图由好几个层级嵌套合成。真正卡顿在ASCellNode里面，由于设计图要有cornerRadius ，单元格要有shadow，于是我加在didLoad方法里面。但是每次滑动过程，可能走到了shadow 过程，于是试图又尝试算了一遍。push卡顿问题，首先要理解试图从创建过程，到压栈完成的流程。首先走init方法、接着走pushViewcontroller、viewDidLoad方法、然后走push压栈动画、最后viewwillappear。由于压栈动画是要有主线程的，当然viewDidLoad中也是有主线程卡主，那么也会有进入很慢的过程。这次是因为我加了一个小方法-&gt;使用SVGKit 加载一个svg 然后转成image过程。在其中一个UIView的子UIButton使用了该转换的Image，于是我一次次打log，计算时间消耗，该处消耗0.6s，而且是在主线程，于是该处出现了卡顿。 锤子和钉子，工具和需求前两天在看数据库Realm，后半段功能。然不尽了解内里，所以想问公司其他人了解我所不了解的需求完成过程。但是和他们说的过程中，博士一句话点醒了我：钉子是先存在的，然后找到了锤子解决；而不是拿着锤子寻找钉子。给我的醒悟是，如果我一开始还没有钉子（后半段功能产生的需求），却急于找到锤子，那么没有钉子的需求，很快我也将忘了锤子；所以我慢了下来：在目前碰到的钉子，使用一个个不同的锤子解决。 记录一次碰到僵尸代码以及解决过程当前页面是这样：push到的DetailVC 有navigationDelegate，作为转场代理，DetailVC操作完进入“完成、分享页面”，然后有这一份代码：12self.tabBarController.selectedIndex = 1;[self.navigationController popToRootViewControllerAnimated:NO]; 让其转向tabbar为1（之前tabbarindex=0），然后popToRootVC；这里引导出了一个问题，我再点击Tabbar=0时，此时的navigationDelegate还是detailVC，但是却早已经被dealloc了，于是就崩溃。解决是viewwillDisappear处将navigationDelegate置空。OK，代码解决为之上处理，但是一开始碰到这个crash的时候，程序什么提示都没有，直接进入AppDelegate的“Bad Access XXXX”。查阅资料： :你得先知道哪报错，按下面设一下，结合日志，先找到错误的代码,设置NSZombieEnabled、MallocStackLogging、NSAutoreleaseFreedObjectCheckEnabled、NSDebugEnabled：123451. Product-&gt;Edit Scheme...-&gt;Run...-&gt;EnvironmentVariables. 2. add NSZombieEnabled，set the value with YES3. add MallocStackLogging, set the value with YES.4. add NSAutoreleaseFreedObjectCheckEnabled, set the value with YES.5. add NSDebugEnabled, set the value with YES. 这时程序console才会打出说*** -[XXXXXViewC respondsToSelector:]: message sent to deallocated instance 0x134ed5900这时又借鉴这两篇文章:后一篇跟我的很类似，都是根据VC 和 delegate 之间的关系。然后得以解决 library not found for -lcrt出现这个错误，是因为你的测试版本号太高了，以前Demo的版本低于你能运行的版本，解决：Targets-&gt;General-&gt;Deployment Info-&gt;Deployment Target改为当前Xcode能运行的最低版本 [viewModel.xxxCommand execute]在其返回executionSignals之前调用，不会走executionSignal方法今天调试一个网络，由于试试写法execute方法，这次将其写在executionSignals之前，怎么都不会走，我怎么看写法都不可能错，在将挂起方法：execute写到后面才走。在此记录一个，有机会再看是什么缘由。 iOS跳转到具体某个应用的设置http://blog.csdn.net/jsjxiaobing/article/details/512607531234567891011121314151617181920212223242526272829303132333435363738394041NSString * UIApplicationOpenSettingsURLString = @&quot;prefs:root=WIFI&quot;; NSURL * url = [NSURL URLWithString:UIApplicationOpenSettingsURLString]; if([[UIApplication sharedApplication] canOpenURL:url]) &#123; [[UIApplication sharedApplication] openURL:url]; &#125;About — prefs:root=General&amp;path=About Accessibility — prefs:root=General&amp;path=ACCESSIBILITY AirplaneModeOn— prefs:root=AIRPLANE_MODE Auto-Lock — prefs:root=General&amp;path=AUTOLOCK Brightness — prefs:root=Brightness Bluetooth — prefs:root=General&amp;path=Bluetooth Date&amp; Time — prefs:root=General&amp;path=DATE_AND_TIME FaceTime — prefs:root=FACETIME General— prefs:root=General Keyboard — prefs:root=General&amp;path=Keyboard iCloud — prefs:root=CASTLE iCloud Storage &amp; Backup — prefs:root=CASTLE&amp;path=STORAGE_AND_BACKUP International — prefs:root=General&amp;path=INTERNATIONAL Location Services — prefs:root=LOCATION_SERVICES Music — prefs:root=MUSIC Music Equalizer — prefs:root=MUSIC&amp;path=EQ Music VolumeLimit— prefs:root=MUSIC&amp;path=VolumeLimit Network — prefs:root=General&amp;path=Network Nike + iPod — prefs:root=NIKE_PLUS_IPOD Notes — prefs:root=NOTES Notification — prefs:root=NOTIFICATIONS_ID Phone — prefs:root=Phone Photos — prefs:root=Photos Profile — prefs:root=General&amp;path=ManagedConfigurationList Reset — prefs:root=General&amp;path=Reset Safari — prefs:root=Safari Siri — prefs:root=General&amp;path=Assistant Sounds — prefs:root=Sounds SoftwareUpdate— prefs:root=General&amp;path=SOFTWARE_UPDATE_LINK Store — prefs:root=STORE Twitter — prefs:root=TWITTER Usage — prefs:root=General&amp;path=USAGE VPN — prefs:root=General&amp;path=Network/VPN Wallpaper — prefs:root=Wallpaper Wi-Fi — prefs:root=WIFI Setting—prefs:root=INTERNET_TETHERING 记一次Instrument - Time Profile 过程xcode 8.+在使用Time Profile中，会出现信息不完整，没法指示更多有用的信息。首先由这篇文章：http://www.cnblogs.com/ym123/p/4324335.html能明白大概操作内容。在xcode 8.+中，CallTree被移动到最下方而不是右下角处。然后跟着走的时候，并没有显示文章中说的图标为黑色头像的就是Time Profiler给我们的提示，有可能存在性能瓶颈的地方，可以逐渐向下展开，找到产生的根本原因。这个；我又找了找这篇文章：http://www.jianshu.com/p/179d69f636b0原来是需要在Target-Build Settings-Debug Information Format-Debug 选择dwarf-with-dsym，如果没有该选项，需要手动打入。同时开启TimeProfile就可以看到黑色头像，同时各个方法调用栈就出来。我的操作是：先点击你需要debug的附近区域，然后CPU Usage会有很多波动，然后你可以暂停（stop，不是shut down）同时选中该波动区域附近，形成一个区间。然后下方的调用栈即为该时间区域的调用信息。即得到所需要信息。 记一次硬磕UI、转场遇到的问题1：转场的时候alpha很重要，比如pushTransitino的时候，toVC的alpha一开始就要设好，如果animate组，半途还有转变动画，那么会带来感觉像是掉帧的bug。fromVC也一样，多调试这一块，结合Time Profile看这中间有没有其他重操作，提前做，或者之后做。2：pop的时候，与push很像。这里提一点，动作与控制要同步，比如转场里面某一元素，如果动画场景不一致，会带来断层，中间的东西没了，然后又有了。比如我后退，立马把该元素隐藏，但是等到要做动画其实还要几毫秒，于是就会出现断层。这时候最好的就是先在contextView中添好该元素试图覆盖，然后再隐藏。多用动画稿，尽量不要埋头苦调试，没有数值真的很麻烦。 昨晚看到一个帖子列出好的一些iOS片段，我继续删减，留下适合我，我可能会遇到的去除数组中重复的对象NSArray *newArr = [oldArr valueForKeyPath:@“@distinctUnionOfObjects.self&quot;]; 动画切换window的根控制器12345678// options是动画选项[UIView transitionWithView:[UIApplication sharedApplication].keyWindow duration:0.5f options:UIViewAnimationOptionTransitionCrossDissolve animations:^&#123; BOOL oldState = [UIView areAnimationsEnabled]; [UIView setAnimationsEnabled:NO]; [UIApplication sharedApplication].keyWindow.rootViewController = [RootViewController new]; [UIView setAnimationsEnabled:oldState]; &#125; completion:^(BOOL finished) &#123; &#125;]; 由角度转换弧度` #define DegreesToRadian(x) (M_PI * (x) / 180.0)` 控制屏幕旋转，在控制器中写1234567891011121314/** 是否支持自动转屏 */- (BOOL)shouldAutorotate &#123; return YES;&#125; /** 支持哪些屏幕方向 */- (UIInterfaceOrientationMask)supportedInterfaceOrientations &#123; return UIInterfaceOrientationMaskLandscapeLeft | UIInterfaceOrientationMaskLandscapeRight;&#125; /** 默认的屏幕方向（当前ViewController必须是通过模态出来的UIViewController（模态带导航的无效）方式展现出来的，才会调用这个方法） */- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation &#123; return UIInterfaceOrientationLandscapeLeft | UIInterfaceOrientationLandscapeRight;&#125; 几个常用权限判断1234567891011121314151617 if ([CLLocationManager authorizationStatus] ==kCLAuthorizationStatusDenied) &#123; NSLog(@&quot;没有定位权限&quot;); &#125; AVAuthorizationStatus statusVideo = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeVideo]; if (statusVideo == AVAuthorizationStatusDenied) &#123; NSLog(@&quot;没有摄像头权限&quot;); &#125; //是否有麦克风权限 AVAuthorizationStatus statusAudio = [AVCaptureDevice authorizationStatusForMediaType:AVMediaTypeAudio]; if (statusAudio == AVAuthorizationStatusDenied) &#123; NSLog(@&quot;没有录音权限&quot;); &#125; [PHPhotoLibrary requestAuthorization:^(PHAuthorizationStatus status) &#123; if (status == PHAuthorizationStatusDenied) &#123; NSLog(@&quot;没有相册权限&quot;); &#125; &#125;]; 判断图片类型12345678910111213141516171819202122232425262728293031323334353637//通过图片Data数据第一个字节 来获取图片扩展名- (NSString *)contentTypeForImageData:(NSData *)data&#123; uint8_t c; [data getBytes:&amp;c length:1]; switch (c) &#123; case 0xFF: return @&quot;jpeg&quot;; case 0x89: return @&quot;png&quot;; case 0x47: return @&quot;gif&quot;; case 0x49: case 0x4D: return @&quot;tiff&quot;; case 0x52: if ([data length] &lt; 12) &#123; return nil; &#125; NSString *testString = [[NSString alloc] initWithData:[data subdataWithRange:NSMakeRange(0, 12)] encoding:NSASCIIStringEncoding]; if ([testString hasPrefix:@&quot;RIFF&quot;] &amp;&amp; [testString hasSuffix:@&quot;WEBP&quot;]) &#123; return @&quot;webp&quot;; &#125; return nil; &#125; return nil;&#125; 获取手机和app信息12345678910111213141516171819202122232425262728293031323334353637383940NSDictionary *infoDictionary = [[NSBundle mainBundle] infoDictionary]; CFShow(infoDictionary); // app名称 NSString *app_Name = [infoDictionary objectForKey:@&quot;CFBundleDisplayName&quot;]; // app版本 NSString *app_Version = [infoDictionary objectForKey:@&quot;CFBundleShortVersionString&quot;]; // app build版本 NSString *app_build = [infoDictionary objectForKey:@&quot;CFBundleVersion&quot;]; //手机序列号 NSString* identifierNumber = [[UIDevice currentDevice] uniqueIdentifier]; NSLog(@&quot;手机序列号: %@&quot;,identifierNumber); //手机别名： 用户定义的名称 NSString* userPhoneName = [[UIDevice currentDevice] name]; NSLog(@&quot;手机别名: %@&quot;, userPhoneName); //设备名称 NSString* deviceName = [[UIDevice currentDevice] systemName]; NSLog(@&quot;设备名称: %@&quot;,deviceName ); //手机系统版本 NSString* phoneVersion = [[UIDevice currentDevice] systemVersion]; NSLog(@&quot;手机系统版本: %@&quot;, phoneVersion); //手机型号 NSString* phoneModel = [[UIDevice currentDevice] model]; NSLog(@&quot;手机型号: %@&quot;,phoneModel ); //地方型号 （国际化区域名称） NSString* localPhoneModel = [[UIDevice currentDevice] localizedModel]; NSLog(@&quot;国际化区域名称: %@&quot;,localPhoneModel ); NSDictionary *infoDictionary = [[NSBundle mainBundle] infoDictionary]; // 当前应用名称 NSString *appCurName = [infoDictionary objectForKey:@&quot;CFBundleDisplayName&quot;]; NSLog(@&quot;当前应用名称：%@&quot;,appCurName); // 当前应用软件版本 比如：1.0.1 NSString *appCurVersion = [infoDictionary objectForKey:@&quot;CFBundleShortVersionString&quot;]; NSLog(@&quot;当前应用软件版本:%@&quot;,appCurVersion); // 当前应用版本号码 int类型 NSString *appCurVersionNum = [infoDictionary objectForKey:@&quot;CFBundleVersion&quot;]; NSLog(@&quot;当前应用版本号码：%@&quot;,appCurVersionNum); 获取设备mac地址12345678910111213141516171819202122232425262728293031323334353637383940414243+ (NSString *)macAddress &#123; int mib[6]; size_t len; char *buf; unsigned char *ptr; struct if_msghdr *ifm; struct sockaddr_dl *sdl; mib[0] = CTL_NET; mib[1] = AF_ROUTE; mib[2] = 0; mib[3] = AF_LINK; mib[4] = NET_RT_IFLIST; if((mib[5] = if_nametoindex(&quot;en0&quot;)) == 0) &#123; printf(&quot;Error: if_nametoindex error\\n&quot;); return NULL; &#125; if(sysctl(mib, 6, NULL, &amp;len, NULL, 0) &lt; 0) &#123; printf(&quot;Error: sysctl, take 1\\n&quot;); return NULL; &#125; if((buf = malloc(len)) == NULL) &#123; printf(&quot;Could not allocate memory. Rrror!\\n&quot;); return NULL; &#125; if(sysctl(mib, 6, buf, &amp;len, NULL, 0) &lt; 0) &#123; printf(&quot;Error: sysctl, take 2&quot;); return NULL; &#125; ifm = (struct if_msghdr *)buf; sdl = (struct sockaddr_dl *)(ifm + 1); ptr = (unsigned char *)LLADDR(sdl); NSString *outstring = [NSString stringWithFormat:@&quot;X:X:X:X:X:X&quot;, *ptr, *(ptr+1), *(ptr+2), *(ptr+3), *(ptr+4), *(ptr+5)]; free(buf); return outstring;&#125; 拿到当前正在显示的控制器，不管是push进去的，还是present进去的都能拿到12345678910111213- (UIViewController *)getVisibleViewControllerFrom:(UIViewController*)vc &#123; if ([vc isKindOfClass:[UINavigationController class]]) &#123; return [self getVisibleViewControllerFrom:[((UINavigationController*) vc) visibleViewController]]; &#125;else if ([vc isKindOfClass:[UITabBarController class]])&#123; return [self getVisibleViewControllerFrom:[((UITabBarController*) vc) selectedViewController]]; &#125; else &#123; if (vc.presentedViewController) &#123; return [self getVisibleViewControllerFrom:vc.presentedViewController]; &#125; else &#123; return vc; &#125; &#125;&#125; AFNetworking监听网络状态123456789101112131415161718192021// 监听网络状况 AFNetworkReachabilityManager *mgr = [AFNetworkReachabilityManager sharedManager]; [mgr setReachabilityStatusChangeBlock:^(AFNetworkReachabilityStatus status) &#123; switch (status) &#123; case AFNetworkReachabilityStatusUnknown: break; case AFNetworkReachabilityStatusNotReachable: &#123; [SVProgressHUD showInfoWithStatus:@&quot;当前设备无网络&quot;]; &#125; break; case AFNetworkReachabilityStatusReachableViaWiFi: [SVProgressHUD showInfoWithStatus:@&quot;当前Wi-Fi网络&quot;]; break; case AFNetworkReachabilityStatusReachableViaWWAN: [SVProgressHUD showInfoWithStatus:@&quot;当前蜂窝移动网络&quot;]; break; default: break; &#125; &#125;]; [mgr startMonitoring]; 判断该图片是否有透明度通道12345678 - (BOOL)hasAlphaChannel&#123; CGImageAlphaInfo alpha = CGImageGetAlphaInfo(self.CGImage); return (alpha == kCGImageAlphaFirst || alpha == kCGImageAlphaLast || alpha == kCGImageAlphaPremultipliedFirst || alpha == kCGImageAlphaPremultipliedLast);&#125; 获得灰度图123456789101112131415161718192021+ (UIImage*)covertToGrayImageFromImage:(UIImage*)sourceImage&#123; int width = sourceImage.size.width; int height = sourceImage.size.height; CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray(); CGContextRef context = CGBitmapContextCreate (nil,width,height,8,0,colorSpace,kCGImageAlphaNone); CGColorSpaceRelease(colorSpace); if (context == NULL) &#123; return nil; &#125; CGContextDrawImage(context,CGRectMake(0, 0, width, height), sourceImage.CGImage); CGImageRef contextRef = CGBitmapContextCreateImage(context); UIImage *grayImage = [UIImage imageWithCGImage:contextRef]; CGContextRelease(context); CGImageRelease(contextRef); return grayImage;&#125; UILabel设置内边距123456子类化UILabel，重写drawTextInRect方法- (void)drawTextInRect:(CGRect)rect &#123; // 边距，上左下右 UIEdgeInsets insets = &#123;0, 5, 0, 5&#125;; [super drawTextInRect:UIEdgeInsetsInsetRect(rect, insets)];&#125; 让手机震动一下12345倒入框架#importAudioServicesPlayAlertSound(kSystemSoundID_Vibrate);或者AudioServicesPlaySystemSound(kSystemSoundID_Vibrate); 摇一摇功能1234567891011121、打开摇一摇功能 [UIApplication sharedApplication].applicationSupportsShakeToEdit = YES;2、让需要摇动的控制器成为第一响应者[self becomeFirstResponder];3、实现以下方法 // 开始摇动- (void)motionBegan:(UIEventSubtype)motion withEvent:(UIEvent *)event// 取消摇动- (void)motionCancelled:(UIEventSubtype)motion withEvent:(UIEvent *)event// 摇动结束- (void)motionEnded:(UIEventSubtype)motion withEvent:(UIEvent *)event UITextView中打开或禁用复制，剪切，选择，全选等功能1234567891011121314151617181920// 继承UITextView重写这个方法- (BOOL)canPerformAction:(SEL)action withSender:(id)sender&#123;// 返回NO为禁用，YES为开启 // 粘贴 if (action == @selector(paste:)) return NO; // 剪切 if (action == @selector(cut:)) return NO; // 复制 if (action == @selector(copy:)) return NO; // 选择 if (action == @selector(select:)) return NO; // 选中全部 if (action == @selector(selectAll:)) return NO; // 删除 if (action == @selector(delete:)) return NO; // 分享 if (action == @selector(share)) return NO; return [super canPerformAction:action withSender:sender];&#125; 记录一个“POP”引擎动画后调用了superView的layoutSubViews方法今天在做一个动画的时候，使用‘pop’时候，发现动作做完了，然后一个按钮使其回归原位，但是再做动作的时候，就只动了一下。难以查看过程，当我打断点到layoutSubviews的时候，果然进去了。然后不知道是谁调用的，于是我去使用time profile看了那一段时间干了什么事。于是看到了layoutSubviews被调用了，是‘pop’某一块调用了，使view又跑回原位。这时候，要么将布局代码写到其他地方，要么使用UIView的动画，我选择了后者。 POPSpringAnimation ‘scaleXY’ 会出现rotate 情况在一个回馈动效中使用POPSpringAnimation，但是由于滑块可以快速多次滑动，所以在弹性高过预定值，会产生negative值，即负值，这时3D transform中，scaleXY会出现rotate情况，https://github.com/facebook/pop/issues/76，这里采用clamp，在结束时，不超过回弹值。可以使用下面给出的两端中其一都可：12345678-(void)popupMensionNode&#123; POPBasicAnimation *nodeAnim = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)]; nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; nodeAnim.autoreverses = YES; nodeAnim.duration = 0.25; [_textNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)];&#125; 12345678910-(void)popupMensionNode&#123; POPSpringAnimation *imageNodeAnim = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; imageNodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)]; imageNodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; imageNodeAnim.autoreverses = YES; imageNodeAnim.clampMode = kPOPAnimationClampEnd; imageNodeAnim.springBounciness = 8;// imageNodeAnim.springSpeed = 20; [_textNode.layer pop_addAnimation:imageNodeAnim forKey:NSStringFromSelector(_cmd)];&#125; 上面两个带来的效果还是不尽完美，这时可以更进一步，又要同时有Spring动画效果，又要有回弹，那么只能使用自主操作：12345678910111213141516171819202122232425262728-(POPSpringAnimation *)popupMensionNode&#123; [_popNode.layer pop_removeAllAnimations]; POPSpringAnimation *nodeAnim = self.popNodeAnima; nodeAnim.fromValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; nodeAnim.toValue = [NSValue valueWithCGSize:CGSizeMake(1.f, 1.f)];// nodeAnim.autoreverses = YES; nodeAnim.springBounciness = 6; [_popNode.layer pop_addAnimation:nodeAnim forKey:NSStringFromSelector(_cmd)]; POPBasicAnimation *minScaleXYAnimate = [POPBasicAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; minScaleXYAnimate.duration = .2; minScaleXYAnimate.toValue = [NSValue valueWithCGSize:CGSizeMake(0.f, 0.f)]; [nodeAnim setCompletionBlock:^(POPAnimation *animation,BOOL complete)&#123; if (complete) &#123; [_popNode.layer pop_addAnimation:minScaleXYAnimate forKey:@&quot;kminScaleAnimate&quot;]; &#125; &#125;]; return nodeAnim;&#125;-(POPSpringAnimation *)popNodeAnima&#123; if (!_popNodeAnima) &#123; _popNodeAnima = [POPSpringAnimation animationWithPropertyNamed:kPOPLayerScaleXY]; &#125; return _popNodeAnima;&#125; 这样子便不会出现negative值，不会发生rotate，同时还保留有spring动画的停顿效果，多次快速点击也能相应，不会出问题。 更换PinRemoteImage已经保存的图片这种做法比较少，但是还是会有此需求，比如我现在做的。要更换就要更换两处，memory cache 和disk cache。12345PINRemoteImageManager *imageManager = [PINRemoteImageManager sharedImageManager];[imageManager.cache removeObjectForKeyFromMemory:model.img_url];NSData *data = UIImagePNGRepresentation(para1.contentImg);[imageManager.defaultImageCache setObjectInMemory:data forKey:model.img_url withCost:data.length];[imageManager.cache setObjectOnDisk:data forKey:model.img_url]; model.img_url 是其地址，在disk-&gt;library-&gt;cache-&gt;pincache-&gt;com.pinterest.pinremoteImage目录下，记不清其目录地址，大概是这样的。data是我们要保存的图片的NSData 。 记一次Apple Develop center 加多个device id经历1：首先先下载上面一段话的特殊字，写着实例文件。2：然后我跟着写了其格式：1）第一行为无效文字，苹果不填写，仅做log实例。2）第二行开始，左边填写”devices id+’tab’+名称(名称全部用英文写，不要有中文符号，不要有空格，不要奇奇怪怪东西)”3：然后上传基本就可以了 如果中间有出问题，尽量分段上传，这样就可以测试时什么个情况了 iOS解决bug几个方法1：用代码管理，每天记录。如果有解决不了的bug，看看几天改了什么，站起来思考（不要坐着）有没有关联；2：如果是在一个文件class 内，可以试试将无关联代码去掉，单方面测试要定位的问题；解决了再回退，最好保存一份文件；3：在断点出左下角+号，有个Exceptions BreakPoint…，直接点击添加，然后运行时自动大部分会自动定位到目标代码；4：如果有崩溃现象，会进入到调用栈，IDE的左上角的小页签会跑到第六个，调用栈里边，这里可以看到你最近的几个方法是怎么跳转的，比如你是哪个线程，调用了哪个栈方法，连续调了哪些方法等等，这个方法很能反应问题实质，你还可以点击到相应的方法，同时打出相应的属性，lldb是可用状态；其他线程的lldb，只能看，不能再记录那些线程的方法属性了；5：看性能损耗，主要还是要看Time Profile;同时僵尸代码的崩溃监控；这个记录由上边的Instrument 记录有记录。","categories":[],"tags":[]},{"title":"2017/05/20travel","slug":"2017-05-20travel","date":"2017-05-21T05:04:19.000Z","updated":"2018-11-14T14:56:26.000Z","comments":true,"path":"2017/05/21/2017-05-20travel/","link":"","permalink":"https://shaohung001.github.io/2017/05/21/2017-05-20travel/","excerpt":"","text":"今天,晚春公司组织的一次团建活动。用时三天，公司员工基本都前去。 第一天集合，大家一起坐大巴出发，从楼下直接开到景区，花费三个半小时。刚上车不久，由于是跑着过来，全身都是汗，过没一会我就感觉到很想吐的感觉，幸得带了晕车药。以前都觉得晕车药没用，以后能信任晕车药的药效了。 中午先在东钱湖边用了午餐（菜肴丰富），然后车子继续开。在东钱湖大家拍了合影后都散开玩。由于一个人无聊，就周围农舍转了转，最后到了湖边休憩。没一会，周围聚拢了一堆伙伴（c哥、鲁强等），在湖边聊聊天，吹吹牛，说说话，感觉在大城市里的紧实放松了下来。集合后前往宁波市中心办理入住。有意思的是我最后一个上车，所以选择坐最后一排，可萌测试“小哥”坐我边上。他1.9m个的腿好长啊，没地放，只能斜着。人高也是有坏处的，我也深有体会，哈哈。小哥一直很关注运动步数，下车时看了下，惊呆了：最后一排，车子震动严重，计数以为真在走动，于是一直在计数，所以他的排行居然是第一。 入住时我和雨哥cto一间房间，在大堂大家取得房卡便先上楼安顿。我的原则，多和大伙增进友情，毕竟难得有这么多伙伴一起加油。休息了会，大家伙一起约了先去吃饭，再去网吧。去网吧有个好处，只要打上游戏，那么人和人之间的感情就是战友，一起共荣辱，团结、互助、牺牲、胜任等都能体现。 晚上大家伙一起回去，一路畅聊。晚上洗澡的时候，由于没用过此等喷头，喊上cto帮忙。这里写是因为有几点想说。首先，友情是互助的，你不让人帮忙，聊上话都么得。再者，我看了会喷头图标，不大体会到底怎么\b开；雨哥一进来，捣鼓了下就好了：雨哥脑袋真的很能理解那些晦涩难解的题：就跟我以前在搞视频遇到的一个难题一般，我当时用了不那么友好的方法，而雨哥却在很短时间内快速定位到最佳方案。这里真的值得我推敲推敲，思考方法方式有待提高。遇到解决方法时间长的情况，我都会变得浮躁些，估计这也是我在学识、经验上的欠缺。 第二天雪窦山行。刚下车，便下起了小雨。但是我的兴致还是很高，这里绿树环抱的野外，简直是天堂一般。累是累，但是也从中领悟到了些东西。首先是组织纪律性，安全性，我们一行都是很好；其中有各种互动，都是好伙伴；再者是我在走到一个有名的桥边时领悟到一个思想：这个桥是挺有名-&gt;险峻，难行，过桥都在晃动，各种属性叠加使得该桥有一定意义。但是这个景区总不能叫该桥的名字吧？或者说，我遇到的很高的著名瀑布，水花都能打到岸边游客的脸，总不能叫该瀑布的名字吧？是的，一个地方会被大家称颂，一个产品会被大家提及，她是因为内在各个惊喜，各个容易体会的完美才被记录。大家不会因为你叫雪窦山，不会因为其中某个著名桥、瀑布等而欣然前往；但是他们是一个集合，一个一个聚合勾画的场景，就使得大家有迫切欣然前往的动力。 我也为这次出行，怦然心动中写了两首诗，其中一首很对味雪窦山的壮丽景色，希望能对他添一笔： 雪窦山行倒挂青葱绿，平波卷碧漾。移山别有影，呼啸震癫狂。 妙高台处，很让我感叹，这类小屋才是别墅，其他的只能称之为别屋吧。场临崖壁，居高雾缭。进堂，三阶，步步高升。内有小池鱼戏，边有松树环抱。这就是顶级奢华的低调。也幸得这成为景区，我们才有幸得以观看。 雪窦寺占地也是挺大的，看到这么好的景色，屋宇，感慨也是蛮多的：和尚庙、总统府总是能占据最好的地段，最好的景色，最好的资源配比。从此得出一个结论，思想拉拢在中国（封建制国家）是最能起到思想禁锢的手段。这种官场、职场中的管控能力不是他人能比。人民们也不得更好的发展。仅仅是寺庙，用的最好的木材（整木），香火、连佛像资金都不需思考，思想管控中的子民们自己主动交出善款。成功不要靠外在的，而是用内在的东西一次次更改其思想，”花钱吧，花钱对自己才是最好的，才是最忠诚的体现“； 第二天的行程都在溪口古镇，那天在一个饭店吃饭，伙食确实是相当丰富，好吃，赞不绝口。第二天其实大家都走的很累了，去吃饭的时候，去网吧的哥们都扎堆，今天去一个“北疆”饭店，羊肉串一吃，我就知道不是新疆好味道，不过吃饱就行。吃完在楼下等等,看他们说的音乐喷泉。音乐喷泉这玩意我觉得是一个消耗品，在引进来的时候大家都觉得蛮赞的，但是基本1个月过去，周围人理都不理；再过一个月，音乐喷泉估计会老化，要修理什么的，这时又没有钱投进去了；得，就废弃了，这东西就是一个浪费；不过讨好一下，这个设备比如50万，采购的说60万，嘿嘿，棒棒哒； 晚上去打游戏没昨天那么多人，凑够5人就开打；那个网吧着实贵，最便宜的会员1小时要5块，不是会员10块。我的天，简直是抢。算了，就充个30玩了两天，心里还是心疼。晚上几个人一起回去，说说笑笑，谈谈刚才的操作、意识，回味回味（好像我打的adc 小炮最后把他们坑了，其实内心很对不住）。 第三天要回去了，每个人的腿都是大考验，这不，过去了三天，我写这的时候在周六了，腿还是酸软无力；早上启程出发，转转1个多小时来到“浙东小九寨”。我在进景区的路上（停车场到景区还有很长一段路）就觉得没聊，应该不会是很给力的地方吧？ 刚进去就看到的溪流，溪流里鹅卵石大大小小。没一会，我们做安卓的“君哥”手里拿着根木棍就去挑战沿水路走鹅卵石之旅了。过一会，一个设计大哥“聪哥”、一个运营大哥“鲁强大哥”也在那走。有意思，我也拿着拾得的竹棍下去走走。走着走着，两位大佬不一会就“下水”了，踏空下去。过没一会，又加入两个女生，都玩得很开，有意思。路上照应，遇到险阻一起互助；有一段路，水不大，但是中间石子很少，我们一起办了好几块大石头建立起了一个能踩踏过去的路。之前鞋子湿了的，想都没想，就过去。我们几个没湿的小心翼翼想着点子终于过去了。在后面一段路，都没办法想出“无伤”过河的法子，全员鞋子都湿了。我算幸运的，只鞋子前跟湿了。大家在一堆大石那里休憩，等着去终点的人们回来。我们在那里泡脚、晒鞋子、晒袜子。刚才玩的忘我，在水路石子上面周转腾挪都还能拼尽全力，现在休憩之后，浑身乏力ing…大家终于使完最后的力，挪动身子往山下去。 中午吃个饭便启程回上海了。老实说，宁波那边小桥蛮多的，为什么我这么记得住？因为每过一个桥，车子都蹦跶起来，刚迷迷糊糊难受的想睡着，就蹦跶一次，小心脏都给吓跳出来了。","categories":[],"tags":[]},{"title":"2017/5/21lesson","slug":"2017-5-21lesson","date":"2017-05-21T04:06:46.000Z","updated":"2017-05-21T04:07:58.000Z","comments":true,"path":"2017/05/21/2017-5-21lesson/","link":"","permalink":"https://shaohung001.github.io/2017/05/21/2017-5-21lesson/","excerpt":"","text":"2017/05/04总结下最近哪里有没有长进。劳动节之前，比较大的收获，估计就是git的时候更熟练了。在处理数据库路上，也有稍许开窍，比较coreData是我一直不喜欢整的一个东西。劳动节放假三天，我花了半天写东西，搞了搞liveQuery，没有结果，卡在那里。花了1天多一点打游戏，莫名烦躁。花了点时间陪丫头去公园看别人开心花钱，我和丫头就这样走走，看看，突然想着，咦，有时间可以来露营，但是要买个帐篷，闲鱼逛逛去。还有的时间就是一直在逛闲鱼，各种逛。闲鱼的模式在于交换二手物品，但是他有几个点别人学不来： 强大的背景：背靠阿里，值得信赖； 支付宝第三方保障，信用分可查； 法院的单都能谈下来，还有什么做不到？ 精通买卖物品模式； 其强大的物品推荐能力和搜索推荐物品能力； 不买即走的概念 这些都是58、赶集 办不到的地方。 这几天想着自己的事情，大项目还是要尝试，小的东西也要搞起来，为了精细小功能，加些广告，广告这块要赶紧接触，磨合；什么时候有广告；会员去广告；能不弹出一定不能弹出；项目要写的小而Q；git PUSH、PULL 在ssh 都有情况下出现说没法处理，可以在terminal 校验sshcat ~/.ssh/id_rsa.pub; 然后在git中更换了ssh还是出现问题 ，输入：sudo killall -HUP mDNSResponder 然后 git pull master master、然后 git remote master ;其中的#master#为要处理的HEADUndefined symbols for architecture XXXX 昨天有个问题workspace 传到SVN ，然后之前能运行的，现在却pod 很多library找不到。做法是先clean 一次，然后将driveData 全删了。build一下还是不行的话，将pod所有文件全删了，然后重新pod 一份。就可以了。 cocoapods里Taobao源 改为HTTPS Reveal 查看导入Reveal.framework在Link Library 删除Reveal.framework在other link flag 中的DEBug一项中，加入:-ObjC、-lz、-framework、Reveal 今天做视频的时候重写了滑动条，果然更熟练了，哈哈。这里注意到了一个方法- (void)seekToTime:(CMTime)time toleranceBefore:(CMTime)toleranceBefore toleranceAfter:(CMTime)toleranceAfter这是用来节选视频的中间节点同时测试的时候发现，手机在接下来的页面中都会比较卡，或者会发烫：原来在拍摄的时候，跳转页面，没有关掉视频拍摄；返回去看我以前写的，果然，以前我也是没有关掉视频拍摄。终于找出来我的锅！！！ 在 Mac 上用 SourceTree 克隆 svn 的时候, 出现了 warning: templates not found /usr/local/Git/share/git-core/templates 警告,导致克隆失败. 怎么办呢. 在终端输入 sudo mkdir /usr/local/git sudo mkdir /usr/local/git/share sudo mkdir /usr/local/git/share/git-core sudo mkdir /usr/local/git/share/git-core/templates sudo chmod -R 755 /usr/local/git/share/git-core/templates 前四条创建目录,最后一条给修改目录添加权限. 注意 sudo 创建目录需要输入当前 Mac 用户的密码 再重新克隆, 云消雨散. 今天感受到了“火眼精金”那种感觉了：你们可以试试，把眼镜环着热水杯稍微放那么一小会。呵呵，棒棒哒：戴起来的时候眼镜暖暖的，就像火眼精金。哈哈 什么是响应链，它是怎么工作的？如何访问并修改一个类的私有属性？iOS Extension 是什么？能列举几个常用的 Extension 么？如何把一个包含自定义对象的数组序列化到磁盘？Apple Pay 是什么？它的大概工作流程是怎样的？iOS 的沙盒目录结构是怎样的？ App Bundle 里面都有什么？iOS 的签名机制大概是怎样的？iOS 7的多任务添加了哪两个新的 API? 各自的使用场景是什么？Objective-C 的 class 是如何实现的？Selector 是如何被转化为 C 语言的函数调用的？UIScrollView 大概是如何实现的，它是如何捕捉、响应手势的？Objective-C 如何对已有的方法，添加自己的功能代码以实现类似记录日志这样的功能？+load 和 +initialize 的区别是什么？如何让 Category 支持属性？NSOperation 相比于 GCD 有哪些优势？strong / weak / unsafe_unretained 的区别？如何为 Class 定义一个对外只读对内可读写的属性?Objective-C 中，meta-class 指的是什么？UIView 和 CALayer 之间的关系？+[UIView animateWithDuration:animations:completion:] 内部大概是如何实现的？什么时候会发生「隐式动画」？如何处理异步的网络请求？frame 和 bounds 的区别是什么？如何把一张大图缩小为1/4大小的缩略图？一个 App 会处于哪些状态？Push Notification 是如何工作的？什么是 Runloop？Toll-Free Bridging 是什么？什么情况下会使用？当系统出现内存警告时会发生什么？什么是 Protocol，Delegate 一般是怎么用的？autorelease 对象在什么情况下会被释放？UIWebView 有哪些性能问题？有没有可替代的方案。为什么 NotificationCenter 要 removeObserver? 如何实现自动 remove?当 TableView 的 Cell 改变时，如何让这些改变以动画的形式呈现？什么是 Method Swizzle，什么情况下会使用？","categories":[],"tags":[]},{"title":"2017/05/1lesson","slug":"2017-05-1lesson","date":"2017-05-01T05:39:20.000Z","updated":"2018-11-14T15:07:26.000Z","comments":true,"path":"2017/05/01/2017-05-1lesson/","link":"","permalink":"https://shaohung001.github.io/2017/05/01/2017-05-1lesson/","excerpt":"","text":"2017/4/12 这里记录一个关于自定义控件改不改放到window的问题。项目中有一个功能，将控件放到view上，当控件里面获得由delegate将控件的父级试图push到下一个页面，同时，下一个页面不出现该控件。这时候如果控件是挂载keyWindow或者其他上，则会出问题了：push的时候，控件仍然存在。如果有这个需求，可以在计算高度上，给其加上一个property：containerFrameFixY用来适应其他页面中可以偏移的坐标优化。 这是一个最好的时代，也是一个最坏的时代。谁能抓住这个时代的线索，就有机会突破。 我们有数不尽的第三方库、数据库、图片、设计参考等等。基本都可以一个人几天就做一个东西。但是相同的，每个人都有机会，那么每个人的机会都是很大的，自己不努力一转眼就会跑到后面。现在要做的是，做小而精的东西，实现流量变现、流量入口观测、广告营收、产品推广、内容博人眼球！！！现在的路有两条： 继续研究多媒体，或者更多多媒体能力 将现今的能力优化，将所学获得额外回报 对，还有第三条：在[2]的基础上，在继续研究多媒体。 我觉得最好方法，正是第三条。程序员也是人，没有好的生活保障是没办法将知识扩展深化，那么我现今的目标是在now：2017/04/18开始一个月搞定parse服务器、客户端、cloudCode、liveQuery、push、analysis、产品等 做出来，是的！！！ 学习别人怎么做的，很简单的方法就是对着别人的东西抄一遍；再抄一遍；再再抄一遍；再再再抄一遍；知道抄出心得；再默写一遍，那么基本都有7、8层把握得到他人的精髓了。去年我这么做的，今年再加把劲获得更多的知识和经验！！！先获取事业上的知识，然后再继续深入研究多媒体能力。 这里提一点有意思的，这几天抄faceBook一个示例，他们在import 一些库的时候，会分类那些作用类，中间隔空格分开。有意思，跟我思路一样，我觉得，这是必须的，好认啊，宁愿多浪费一行空格行得到阅读代码的体验。 . Ctrl+Command+left/right 返回前一浏览页，进入之前前一浏览页. Ctrl+Alt+left/right 将代码折起来 2017/04/18 记录一件事，事情是这样的：昨天晚上加班，下班晚，出门刚好看到老板。打招呼，问我最近适应否，答曰还行。我和老板都感慨”适应难度也是跟项目大小正比，我们产品精细，功能乍看不多，但一接触就知道确实很多，每个都是小而精的。”这时老板打开手机，随意打开几个界面，停留到一个界面：这是最近我开发的一个切面功能。他来来回回滑动那个功能，跟我说，你看这个飞机，飞的很好，还有云，背景，，还有你感觉，这里面的体验也是非常好的，来回切换，非常顺滑。我不动声色的感慨，能让用户觉得使用这个功能很开心，真是会让我这个开发者深受感动啊。开发者和老板之间的关系，我个人觉得工作是互赢的态势，不应该是疲劳驾驶般；但另一方面来讲，由于开发者、工作者需要获得工作资金的来源而和老板成了有主次关系的区别，这也正是为什么我觉得是时候搞一些#务副业#的事。今天回头想想一些事情经过，其实还是有可能老板知道我最近处理这方面功能，毕竟老板其实都是那么随随便便做出某些举动，然后乘机鼓励鼓励下属的行为，应该是吧。不过，最后一句，我很感动，能为他人服务是我的荣幸。我是服务者，至始至终都是大家的服务者，就为了大家的生活便利、开心，如果没有人愿意得到我的服务，那我就是真的失败了。 今天写到正则，由于需要在判别字符里面的搜索，如：”#[卷卷公主的日常打喷嚏]”，搜索这个字符，这时会出现特殊字符，使用”(%@)”输入字符，则成了”(#[卷卷公主的日常打喷嚏])”,然而”#”、”[“、”]”都为特殊字符，这时要替换里面的字符，此处处理为replaceOccurredString:@”#” -&gt;@”\\#”。 http://stackoverflow.com/questions/11442101/ios-regex-unknown-escape-sequence 这里有答案: You’re getting the warning because | is not a valid escape sequence in Objective-C (or C or C++ for that matter). The compiler is ignoring that and just using a raw | character instead, so the string you’re actually passing in is @”|(.)|”.To get the behavior you want, you have to escape the backslash in your source code so that the regex engine sees the literal backslash and interprets the | character as a literal instead of as alternation, e.g. @”\\|(.)\\|”. 最近想了些问题。怎么为他人服务，怎么让他人觉得我的服务到位。 来到粉粉平台，努力工作，实现自己的人生价值？是的，谁都有其位要去领悟，谁都有机会去得到自己的人生价值。我一直要让自己成为一名真正的服务者，但是来到一个大家庭，成为一份子的同时，与大家共同加油为更多的人服务；和比如我开一个小餐馆，好好为每个顾客从进门的一开始就尽心尽力让他们感到家的体验，这两种是不一样的。有人选择与一个大家庭共进退，分享，共赢；有人会自己寻找一个天地；虽然都是为了“服务”他人而生，只是选择的路，身边的人不同，有自己的择决。 最近就有这些方面的择决。从小家庭出来的，底子薄，我的事业全是自己走，父母帮不上，那么我小心一点，先从大家庭增长经历，有历练了，那就是时候在共进退方案进化去带领前进，最后自己有直接为大家“服务”的机会。是的，在大家庭，是看不出汪洋大海，那一滴是你的心血。他人是不会说“哟，这个就是你的作品”的，只是匆匆而过，也许稍作停留，可是最终的视线还是远观大的方面。 努力让大家看到你的影子吧，努力让大家看到自己的心血，而不是被淹没，被掩盖！ 添加远程仓库:git remote add remoteName url 获取或推送: 1234// pullgit pull remoteName branchName// pushgit push remoteName branchName 评分标准 态度 10%:考勤主动性自我管理技能 30%:技术能力评估能力执行 30%:完成速度完成质量创新 20%:新技术学习重构能力分享 iOS 初中高级技能推荐标准 初级：2-3年工作经验1 熟练使用Foundation CocoaTouch等基础UI框架，配合动画，开发各种常见界面；2 熟练使用网络和图片库，理解同步异步原理，有图片前后处理意识；3 熟练掌握数据持久化；4 能开发自定义界面；5 熟练使用常用第三方框架。关键字：UIKit GCD UITableView AFNetwroking SDWebImage 中级：3-4年工作经验1 掌握面向对象设计，理解设计模式；2 对常用组件使用有自己的理解；3 了解流行的第三方框架原理，并有自己的封装库；4 开发过自定义界面，能横向对比类似实现。关键字：引入，封装，性能，界面库，网络库 高级5年以上工作经验1 熟练搭建项目，选择合适的框架，指导初中级开发；2 具备需求分析、技术规划、项目管理能力，带领团队开发；3 善于沟通，管理团队。 今天和同时旭哥搞版本合并，做法和以前完全不同，每次操作都是慎重处理，合并完那么就会很轻松，这种态度。放一个链接http://blog.sina.com.cn/s/blog_68af3f090100rp5r.html 是这条命令先查看两个版本差异在哪里,然后打开 a.diff 文件git diff --name-status --diff-filter=A 当前分支 需要合过来分支 &gt; a.diff 切换到主分支，然后使用下面语句，或者用#SourceTree#的合并版本到当前版本 git merge 需要合过来分支 解决冲突 使用这条命令pod install --verbose --no-repo-update更新那些pod需要更新的文件 解决冲突之后不要立马commit到本地，先运行一遍，然后将丢失的文件找回来，bug冲突，build不过原因解决掉。 coommit到本地 project文件，使用‘当前’我们不熟悉片段的，比如在5.2中，当前“我的”指“5.2”，然后我很清楚合过来的是我做的代码，那么solving trouble using mine 其他类文件，查看&lt;&lt;&lt;、===、&gt;&gt;&gt;，然后将之解决掉 由于中途出现了错误，我commit了当前有冲突的代码，然后不知道怎么处理： 12git stash //将还没push的文件保存至本地git reset --hard HEAD~1 //将版本commit情况回退到 HEAD~x x为回退第几个版本 上周做了次code review，是剖析了下我当时写天气时候代码的快慢和质量。在完成天气那段代码，使用js方式分块将独立功能模块自己整合，由外部调用。 然而外部调用的时候却没有好好管理好这个组织过程，组织过程交给了vc做，当时为了更快没有更好的做一个adapter。我这里设想：我有个天气管理器，他暴露出来需要require的dataSource，和option完成的dataSource，然后在vc提供好相应模块即可。然后天气管理器再产生reloadData方法重新设置内容物。 代码log，里面由于用到log，所以在有些没有识别价值的log在完成后应当去掉。 里面出现一些没有意义的变量名。不管如何，还是不要出现这种情况 在逻辑多、容易混淆，正确的注解将会很大有效的帮助理解。毕竟写这代码和将来某个人来改，将比重做还要难。 合理使用PM分区，此处给出一段:(下一段代码) 代码重复优化 硬编码，在不了解其硬编码在其中有什么意义，一定一定要做好注释 循环引用的问题，也许多改的一个问题将会提升APP使用体验。 当时开展活动的是旭哥。他提到的一点：破窗理论，我觉得很有道理，给自己的工作留点心。 12345#pragma mark - life cycle#pragma mark - private methods#pragma mark - event response#pragma mark - UITablViewDelegate#pragma mark - getters / setters 最后总结一点，时间一定要把握好。之上的问题，很大原因也是跟时间不够，为了挤时间，在短时间内达到目的，赶紧转战其他问题。但是在力所能及的问题上，多累一些自己，可能会带来更好的结果吧。这也是一个等效时间转换：自己时间节省了，机器就要多累一些；自己多花时间了，机器就更节省了。如何看待，就看这个功能在用户使用频率问题上多考究考究。毕竟作为人，一定要有所谋，有所舍弃吧。","categories":[],"tags":[]},{"title":"2017/4/11Lesson","slug":"2017-4-11Lesson","date":"2017-04-11T14:10:44.000Z","updated":"2017-04-11T14:11:44.000Z","comments":true,"path":"2017/04/11/2017-4-11Lesson/","link":"","permalink":"https://shaohung001.github.io/2017/04/11/2017-4-11Lesson/","excerpt":"","text":"2017/3/23最近用黑苹果开发，稍稍适应了下黑苹果开发了。首先黑苹果如果出现警告、QQ新消息什么的，屏幕会闪一下。这是因为系统要弹出音频警告声，但是没有音频驱动，所以就闪一下吧。查找了下，没有找到可以关掉那玩意的地方。 最近到粉粉这类公司之后可以感觉得到，这类公司今天都是拼了命了。今天要是不进步，估计要出问题，所以老板也是经常下来“打交道”，转一转了。是时机，也是机会，也是一手扑空等可能机会。完全看自己选择了。 今天用git在gitLab上签名，以前都是填密码什么的。然后一直连不上git，无法push，今早来，同事让我不要填密码、这个Enter passphrase for key &#39;/Users/xxtstudio/.ssh/id_rsa&#39;:出现也直接按enter就可以了。然后就OK了。一直按enter键哦。 并发数，并发机子；查询语句优化；数据量大小也会影响客户端获取数据速度；带宽，影响不大；只说了大概用了5M；并发机子用了5个左右；其他基本都是小测试机子； 这里返回一下滤镜功能话题。我以前的公司处理滤镜时候，是多使用了level色阶滤镜，这样可以很方便在里面添加5个参数，就能达到大部分需求。昨晚公司博士看了些文章，跑过来提议说可以这样处理：使用GPUImageLookupFilter滤镜，先将图片按照某些好的效果在Photoshop里面调节好，然后将GPUImage的原滤镜的方格图在PS里面将之前的数值和step走一遍，这时候GPUImage的原方格图就变了模样。其实这时候就是可被使用的image了。然后在GPUImage里面使用lookup滤镜添加进去，然后就有一定的效果了。 这里记录一个解决动画不动的一个问题：由于我做的几个动画，比如云从左至右，或者从右至左一个感觉，但是其又有多了一个属性，叫做autoReverse，自动往回走，此时我创建的6个云在被重利用的时候由于动画被autoReverse，所以动画还没有结束，但是记录的动画最长运行时间longestTime已经到了，却出现没有将可用的对象抽出来，所以导致我寻找可用对象时，出错了-》崩溃在for循环里的重复寻找对象当中，然后又被continue，重新寻找。 这两天接触网络层，先进入浅一点的地方学习。比如GET请求，一般都是静态数据，POST请求，都是动态数据，于是可以使用缓存方式在网络层中将GET请求缓存下来。当然，也有GET是需要实时更新的，于是将你的url+parameter中的parameter实时更新，在判别request.hash是否在缓存中存在时，就能知道GET在缓存中不存在，于是，其还是要去更新。这样子就做到，GET静态数据缓存其数据，要更换则将其hash变动。 http://blog.csdn.net/sw_gegewu/article/details/51443478UIPageControl是用来显示分页的，一般和scrollerView一起搭配使用，但是UIPageControl的内部属性很少，就仅仅下面的几个，（1）numberOfPages； // 总共有多少页（2）currentPage； // 当前页数（3）hidesForSinglePage； // YES表示当页数只有一个的话就隐藏不显示（4）pageIndicatorTintColor； // 所有页的颜色（5）currentPageIndicatorTintColor； // 当前页的颜色 如果想要把当前页设置为镂空的，可能就不好办了，但是可以通过给起属性内部赋值，// 设置内部的原点图片[pageControl setValue:[UIImage imageNamed:@”“] forKeyPath:@”pageImage”];[pageControl setValue:[UIImage imageNamed:@”“] forKeyPath:@”currentPageImage”];这样的话就可以达到效果了。 占位文字颜色设置self.textInputView.attributedPlaceholder = [[NSAttributedString alloc]initWithString:AppLocalString(@”设置日期”) attributes:@{NSForegroundColorAttributeName:[UIColor colorWithHexString:@”#97858A” alpha:1]}]; 此处记录一次纠结的崩溃问题：我在改动之前的缓存策略的时候，由于有些在Build过程中和搜索过程中没有提示一定要更换的api，于是我没有给某几处function更换，某一处位置刚好是图片SDK位置。原先要传进去的是BOOL指针，更换方案使用NSTimeInterVal的指针。两者内存地址空间大小就不一样，于是出现了使用的内存不够，引发了崩溃。此种崩溃在DEBUG环境，竟然没有反应，只有真机Release环境下才会崩溃，头疼的地方来了，需要真机Release测试时，Entitlements的识别文件不是我这个机子。如果我要重新制作Entitlements文件，不知道是否会影响项目某些操作，作罢；看Bugly输出？我这里没有账号查看，另一个同事帮忙看了下，没有发出来，暂时作罢；我手头还有某一个功能急于完成，连续加班两天无果；而且其崩溃位置在其他类似位置有同样表现；我对该APP之前功能没有认知，以为其之前便有存在，想让其延后；等等原因致使这个bug存在几个时日。最后是一个同事配合Bugly将许多行log打在不同位置，看走到哪里，慢慢定位出问题。 总结一下，这个问题是我的锅，也可以不是我的锅，但是我要注意类似的事情再发生。是我的锅，原因在于一系列的原因，加之任务比较重，UI时时改动，功能不明确带来预期时间的延长而使得没有更多时间注重于效能上。不是我的锅在于：之上也说了效能和时间成正比，急于加之诸般成果，必失之他项。无法看到log，等于找到问题能力全部失去：盲人无法行走，除非有个类似于log的拐杖的帮助。我还是要继续稳中求果，切勿操之过急，不过一切基于时间。 记录一个BUG，使用CoreGraphics裁剪Image，却会将Image变大。这个问题还没有认知，之后查出来会记录一下。 今天花时间阅读了下objc的runtime，理解了以前没能凑在一起看的知识点。网址：http://www.cocoachina.com/ios/20170301/18804.html 获取类名 获取成员变量 获取成员属性 获取类的实例方法 获取协议列表 动态添加方法实现 方法实现交换 属性关联（动态添加相应的属性），完成在一个类中动态添加方法，同时生成set、get方法 消息处理与消息转发，这一块粗略的看了下，没有深入了解。。。当做看过一下。 看完这篇，再看这篇http://www.cocoachina.com/ios/20170228/18798.html，收益匪浅啊 最近查资料老是觉得这个网站：“xxxxx - 红黑联盟”经常能查到的都是挺不错的别人记录过得文章。简洁易懂类型。再来看我今天想要查找的一个关于UDID和UUID的获取，网址：http://www.2cto.com/kf/201605/513333.html123456UDID，iOS 5以前使用：[[UIDevice cuurrent] uniqueIdenfier] 现在不可能了。现在使用NSUUID *uuid = [UIDevice currentDevice].identifierForVendor;NSLog(@&quot;uuid 1 = %@&quot;,uuid.UUIDString);UUID,NSString *uuid = [NSUUID UUID].UUIDString; 这里记录一个bug，我做的一个HUD，继承与UIView。我选择了用keyWindow作为父布局，然后在某些情况下会出现弹出来，又诡异的消失了，牛逼；然后我给他改成windows[0]：第0个，这个时候还会出现第三方库SVProgressHUD和我的HUD一起弹出来，这时会出现window在那，然后全屏点不了了。没办法，使用最后一个招吧，使用APPDelegate的window作为底部试图，这样终于解决了。 记录git问题。每次打开project，git都会记录，但是这不是我们想要的，我们只想给我们改过的代码进行commit，其他不需要。12cd /xxxProjectvim .gitignore 然后输入：1234567891011121314151617181920212223build/**/build/**.pbxuser!default.pbxuser*.mode1v3!default.mode1v3*.mode2v3!default.mode2v3*.perspectivev3!default.perspectivev3xcuserdataprofile*.moved-asideDerivedData.idea/*.hmapDS_Store#CocoaPodsPodsPodfile.lockbuild*pics* 这时还没生效，要么全部quit掉，要么clean cache：12345改动过.gitignore文件之后，在repo的根目录下运行：git rm -r --cached .git add .之后可以进行提交：git commit -m &quot;fixed untracked files&quot;","categories":[],"tags":[]},{"title":"2017/3/18lesson","slug":"2017-3-18lesson","date":"2017-03-19T15:55:33.000Z","updated":"2017-03-19T15:56:18.000Z","comments":true,"path":"2017/03/19/2017-3-18lesson/","link":"","permalink":"https://shaohung001.github.io/2017/03/19/2017-3-18lesson/","excerpt":"","text":"2017/3/15CoreData的坑说不清，妈的首先是NSOrderSet和NSSet的区别对于One To One和One To Many 中午的时候看了下JavaScriptCore，对RN以前的对语言转换，混合工作有了一些了解。比如JSValue、JSVirtualMachine、JSContext、JSExport等作用。Native和JS语句调用交互过程、调用、传值，回传等工作过程等。看的地址JSCrotCore博客有点意思，关键是能做出的效果很令我感叹。 有空的时候测试了下另外两个东西：FBNotification、ZipArchive ZipArChive比较适用于内容稍微大点的内容物，不然小体积下，似乎压缩效果没有很大差异 FBNotification这个有个很厉害的地方，弹出的动作、画面都是可控的，屌爆了，非常喜欢。我对于本地发送localNotification发送没去尝试过，有这个轮子，还是不去整那些东西。 今天给xcode加一个插件，Chisel但是发生了Homebrew-&gt;Error: Running Homebrew as root is extremely dangerous and no longer supported. As Homebrew does not drop privileges on installation you would be giving all build scripts full access to your system.这个没想到要怎么操作，好吧，加个sudo估计会好吧，没想到还是不行。百度查了下找到这个网址：https://segmentfault.com/q/1010000007575129?_ea=1389173 terminal 里面 sudo chown -R $(whoami) /usr/local把/use/local的owner換成自己，就有write權限了 whoami就是一個命令，會echo當前登錄用戶的名字。當然你知道自己的用戶名，比如jack,就直接 sudo chown -R jack /usr/local也可以 修改過權限之後，就直接跑 brew install node不需要再用sudo，因為當前用戶已經有權限寫入/usr/local了或者你用 ls -ld /usr/local確認一下這個目錄的owner是否已改到自己 Chisel好东西好东西，给力 来工作的这么一段时间，接触SourceTree，确实感觉很是强大。版本回滚，合并，文件差异等都是很实用。今天碰到，将一个Branch合进我的版本，然后，我有一个文件和xib都被遗失了。搞了很久，版本我也找不到是哪一个，最后我点击右上角的文件差异化对比，然后将文件给拷贝出来，要不是这一个操作，我估计以后我在合版本，我一定不会再相信电脑了。 今天很好奇的一个地方：Curl还没看清Curl的操作方式，我先去看了篇http://www.jianshu.com/p/23cccb3a90b1文章读一读REST API的架构设计。前面品味不出什么思想，一直到作者的一些感想上面，有点理解REST API设计思路。 API请求中应该加入API版本号，比如在URL中加入版本号：https://api.example.com/v1/，这样API升级就可以将api版本也升级了。 API返回的数据量问题。数据量大的话，估计是得在某些页面数据很大，或者文件传输等，不过视频、图片等估计不能在此列了。 性能方面我也是赞同的，不过我是前段方面，那么不能做的事，就是不能设计出一些使用猥琐方式暂时完成的功能和逻辑，尽量避免这种错误。 安全性和用户认证。这一块对于前段来说也是相当重要的。这里其就推荐使用Keychain的方式还有第三方Access Key之类尽可能使其为在启动的时候动态请求。估计这块得用HTTPS加密，然后每几天去更换才能处理好吧。 OK，想到这里，还是没想明白Curl怎么使用，改天有机会用到的时候才会懂吧。 #\u0010## 缓存策略今天刚好做到公司要求的一个问题：缓存策略。要求是将其之前有做的缓存方案，改成带有时间判别的方案，那么如果时间线以内，便不让其再次请求；如果用户手动刷新的话，那就不用去考虑了。 我自己倒是似懂非懂，直接在其基础上，变换成比较麻烦的方案：在这个基础上，需要更简易处理，稳定。我觉得要增加一个date，那就说保存的Array外面再包一层Diction吧，增加一个字段：Date诺，就变成了这个不理想的样子：这里的区别主要就是这种改动范围很大，而且把原有的全都换了一遍。虽说我的做法也能满足需求，但姜确实是老的辣，没能更好的解决这个问题。只能说，他们之前把方案讨论好了，我突然插进来的，搞的时候还是迷迷糊糊的，肯定没把所有方案走一遍，没找到最好的，嘿嘿。这里处理是给保存时的方法替换一下，变成传入参数增加一个指针，返回的时候就靠着这个保存了文件本身的信息，保存信息等，作为判别当前时长是否超过1小时。这个方案确实不错。 记录一个犯的错误。使用Masonry和自动计算行高的Third Part，我将UI贴在了TableViewCell上，而不是TableViewCellWraperView上—&gt;[self addSubview:xx];始终出现控件不如我所想，我觉得不会呀，不可能错呀。过了2天，我突然想起来，TableViewCell是没有自动布局能力的，要写成—&gt;[self.contentView addSubview:xx]; 周六中午得时候自己写了个自我感觉非常良好的主题管理器，基本功能都能达到啦，哈哈，那一刻非常开心。非常开森。","categories":[],"tags":[]},{"title":"2017/3/13lesson","slug":"2017-3-13lesson","date":"2017-03-13T12:45:24.000Z","updated":"2017-03-13T12:45:40.000Z","comments":true,"path":"2017/03/13/2017-3-13lesson/","link":"","permalink":"https://shaohung001.github.io/2017/03/13/2017-3-13lesson/","excerpt":"","text":"123456789101112131415161718192021222324252627282930//创建标准的变换矩阵CGAffineTransform CGAffineTransformIdentity;//手动创建变换矩阵CGAffineTransform CGAffineTransformMake(CGFloat a, CGFloat b, CGFloat c, CGFloat d, CGFloat tx, CGFloat ty);//创建平移变换CGAffineTransform CGAffineTransformMakeTranslation(CGFloat tx, CGFloat ty);//创建缩放变换CGAffineTransform CGAffineTransformMakeScale(CGFloat sx, CGFloat sy);//创建旋转变换CGAffineTransform CGAffineTransformMakeRotation(CGFloat angle);//判断某个变化是否是来自标准矩阵的变换bool CGAffineTransformIsIdentity(CGAffineTransform t);//对某个变换矩阵进行平移变换CGAffineTransform CGAffineTransformTranslate(CGAffineTransform t, CGFloat tx, CGFloat ty);//对某个变换矩阵进行缩放变换CGAffineTransform CGAffineTransformScale(CGAffineTransform t, CGFloat sx, CGFloat sy);//对某个变换矩阵进行旋转变换CGAffineTransform CGAffineTransformRotate(CGAffineTransform t, CGFloat angle);//对某个变换矩阵进行翻转变换CGAffineTransform CGAffineTransformInvert(CGAffineTransform t);//对两个变换矩阵进行计算CGAffineTransform CGAffineTransformConcat(CGAffineTransform t1, CGAffineTransform t2);//比较两个变换矩阵是否相同bool CGAffineTransformEqualToTransform(CGAffineTransform t1, CGAffineTransform t2);//获取应用变换后某点的坐标CGPoint CGPointApplyAffineTransform(CGPoint point, CGAffineTransform t);//获取应用变换后某个区域的尺寸CGSize CGSizeApplyAffineTransform(CGSize size, CGAffineTransform t);//获取应用变换后某个区域的位置和尺寸CGRect CGRectApplyAffineTransform(CGRect rect, CGAffineTransform t); 记录一下矩阵变换含义 昨天做了下图片PhotoKit取图片，使用PHImageManager 同步获取200*200某张图片直接在cellForItem里面，性能还是不错的。估计得判断GIF，只能在用户点击之后，才能使用方法验证其属性。继续往下做吧。 12345678910111213141516171819202122232425262xx 成功 200 正常；请求已完成。 201 正常；紧接 POST 命令。 202 正常；已接受用于处理，但处理尚未完成。 203 正常；部分信息 — 返回的信息只是一部分。 204 正常；无响应 — 已接收请求，但不存在要回送的信息。 3xx 重定向 301 已移动 — 请求的数据具有新的位置且更改是永久的。 302 已找到 — 请求的数据临时具有不同 URI。 303 请参阅其它 — 可在另一 URI 下找到对请求的响应，且应使用 GET 方法检索此响应。 304 未修改 — 未按预期修改文档。 305 使用代理 — 必须通过位置字段中提供的代理来访问请求的资源。 306 未使用 — 不再使用；保留此代码以便将来使用。 4xx 客户机中出现的错误 400 错误请求 — 请求中有语法问题，或不能满足请求。 401 未授权 — 未授权客户机访问数据。 402 需要付款 — 表示计费系统已有效。 403 禁止 — 即使有授权也不需要访问。 404 找不到 — 服务器找不到给定的资源；文档不存在。 407 代理认证请求 — 客户机首先必须使用代理认证自身。 415 介质类型不受支持 — 服务器拒绝服务请求，因为不支持请求实体的格式。 5xx 服务器中出现的错误 500 内部错误 — 因为意外情况，服务器不能完成请求。 501 未执行 — 服务器不支持请求的工具。 502 错误网关 — 服务器接收到来自上游服务器的无效响应。 503 无法获得服务 — 由于临时过载或维护，服务器无法处理请求。 遇到一个问题，就是字符里面出现\\r\\n、\\r、\\n、\\t等特殊字符，做法是将其replace成\\r\\n、\\r、\\n、\\t、，没有其他做法了，，特殊的是，\\r\\n需要最先被替换 // 一列数：-1,2,3,10,15,26…n，写一个方法计算第n个数的值 答案：3-&gt;17-&gt;511-&gt;??应该是9然后接下去是隔下去数是加15 12345678910111213BOOL needDescount = NO;int increaseCount = 4;int totalNum = -1;while (true) &#123;if (needDescount) &#123;increaseCount -=2;needDescount = YES;&#125;else&#123;increaseCount +=4;needDescount = NO;&#125;totalNum +=increaseCount;&#125; IOS－－ UIView中的坐标转换 1234567891011121314151617181920212223// 将像素point由point所在视图转换到目标视图view中，返回在目标视图view中的像素值- (CGPoint)convertPoint:(CGPoint)point toView:(UIView *)view;// 将像素point从view中转换到当前视图中，返回在当前视图中的像素值- (CGPoint)convertPoint:(CGPoint)point fromView:(UIView *)view;// 将rect由rect所在视图转换到目标视图view中，返回在目标视图view中的rect- (CGRect)convertRect:(CGRect)rect toView:(UIView *)view;// 将rect从view中转换到当前视图中，返回在当前视图中的rect- (CGRect)convertRect:(CGRect)rect fromView:(UIView *)view;例把UITableViewCell中的subview(btn)的frame转换到 controllerA中// controllerA 中有一个UITableView, UITableView里有多行UITableVieCell，cell上放有一个button// 在controllerA中实现:CGRect rc = [cell convertRect:cell.btn.frame toView:self.view];或CGRect rc = [self.view convertRect:cell.btn.frame fromView:cell];// 此rc为btn在controllerA中的rect或当已知btn时：CGRect rc = [btn.superview convertRect:btn.frame toView:self.view];或CGRect rc = [self.view convertRect:btn.frame fromView:btn.superview];","categories":[],"tags":[]},{"title":"2017/3/3lesson","slug":"2017-3-3lesson","date":"2017-03-03T14:12:42.000Z","updated":"2017-03-03T14:36:52.000Z","comments":true,"path":"2017/03/03/2017-3-3lesson/","link":"","permalink":"https://shaohung001.github.io/2017/03/03/2017-3-3lesson/","excerpt":"","text":"这几天打算使用Bundle管理SVG文件，给项目加上Theme功能。SVG使用，使用的是SVGKit，使用Bundle需要稍微注意写法比如使用寻找Path，12345NSString *path = [[NSBundle mainBundle] pathForResource:@&quot;AnimalTheme&quot; ofType:@&quot;bundle&quot;];NSString *ciweiFilePath = [path stringByAppendingPathComponent:@&quot;刺猬.svg&quot;];SVGKImage *ciweiImage = [SVGKImage imageWithContentsOfFile:ciweiFilePath];ciweiImage.size = CGSizeMake(30, 30);ciweiImage.UIImage 123456SVGKImage im = [SVGKImage imageNamed:&quot;myImage&quot;];CGSize originalSize = im.size; // this defaults to the SVG&apos;s internal sizefloat half = 1.0 / 2.0f;im.size = CGSizeApplyAffineTransform( im.size, CGAffineTransformMakeScale( half, half ));SVGKImageView* iv = [[SVGKFastImageView alloc] initWithSVGKImage: im];[self.view addSubview: iv]; 1234SVGKImage im = [SVGKImage imageNamed:&quot;myImage&quot;];im.scale = 0.5f; // NB: this will BE REJECTED if your SVG is non-infinite;SVGKImageView* iv = [[SVGKFastImageView alloc] initWithSVGKImage: im];[self.view addSubview: iv];","categories":[],"tags":[]},{"title":"2017/3/2lxlesson","slug":"2017-3-2lxlesson","date":"2017-03-02T15:47:26.000Z","updated":"2017-03-02T16:04:52.000Z","comments":true,"path":"2017/03/02/2017-3-2lxlesson/","link":"","permalink":"https://shaohung001.github.io/2017/03/02/2017-3-2lxlesson/","excerpt":"","text":"强引用，tableview嵌套 今天写“仿写墨迹天气app”的时候把用到的tableview单独拿出来创建tableviewcontroller单独管理，本来是这样想的，但是在把tableview贴到首页上的时候出现tableview没有显示完全而嵌套在tableview上的小tableview滑动消失，点击小tableview整个tableview消失的问题，后来经过老公的一番审查之后发现问题出在内存泄漏上，东西被提前释放掉了。具体是这样的，我要把tableviewcontroller上的tableview贴在首页上，但是LXHomeTableViewC *homeTVC = [[LXHomeTableViewC alloc]init];self.a = homeTVC; 这里是强引用，拉住不能提前释放homeTVC.view.frame = CGRectMake(0, 60, SelfSize.width, SelfSize.height-60);[self.view addSubview:homeTVC.view]; 这里我拉住了homeTVC。view，如果没有self.a = homeTVC;的话homeTVC就会被提前释放，载体释放了，那么载体上的东西就不可能有用了","categories":[],"tags":[]},{"title":"2017/3/2lesson","slug":"2017-3-2lesson","date":"2017-03-02T14:14:16.000Z","updated":"2017-03-02T14:14:46.000Z","comments":true,"path":"2017/03/02/2017-3-2lesson/","link":"","permalink":"https://shaohung001.github.io/2017/03/02/2017-3-2lesson/","excerpt":"","text":"记录这几天的发现或者想到了的东西，哈哈 关于retweeded的数据结构获取，是否可以使用 [quary include@”retweeded”]; [quary include@“retweeded.user”]; 缓存策略，使用一进去拿缓存，在判别skip数，为0则将这次数据保存替换之前的cache collection需要使用self.collectionNode performBatchUpdates:^ 如果-(BOOL)shouldBatchFetchForCollectionNode:(ASCollectionNode *)collectionNode为YES，但是不再获取数据，那么就是你没有给上次Batch确认completeBatch 这里处理了一次collectionNode的获取数据和返回数据的完整逻辑，可以参照，实战demo Theme能力由发通知会更好，毕竟如果有缓存，单元格没法刷新，还是需要发通知更改背景颜色、某些图片等，可以一步步更改 主流方向可以往可爱等线路发展 小玩意之类往往能点亮用户好奇心，比如“粉粉日记”的首页台灯、不同时间的首页动物、不同时段，该动物、背景会替换，让动物动起来等；每晚开放的树洞功能等 会员能力很重要，要让他们感到与众不同，代价每次都是一点点就很正确 首页采用多屏处理，展示不同格局东西。 首页是很能体现APP动机的地方。如果是微博类，首页就是Feed分类；如果是淘宝类，首页就是商品分类；如果是QQ、微信，首页就是你的聊天列表类；如果是游戏、地图等，首页就是你该展示的地方；“粉粉”这里首页就是展示萌创意、手账的地方，那么他走的主路线就该是这方面功能。 APP功能太全有时候会成为累赘，可以参考“花瓣”、“Facebook”的分离法，将不同业务分出去，将主功能留下。比如“Facebook”的Message功能就会让你跳出去到另一个App。 粒度这个东西有时候要考虑清楚，有时候深一点使用组件化，有时候直接写有他的好处 说一个今天遇到的缓存能力ASDK，当我刷新，我将dataSource的数据都删光了，然后没写好，没有reloadData全部，而是insert数据到当前单元格，下面数据仍然在，ASDK的缓存能力确实太厉害了，然而反观“粉粉”里面的缓存，其实他做的就是将基本数据缓存起来，等还要再cellForItemAtIndexPath的时候，他还是会更新当前的单元格。所以严格意义上说，“粉粉”里面之前的缓存方案，仅是对数据的再次缓存得到快速获取，而不是前缘科技里面的Feed页面写法。 从前一个公司到现在的粉粉日记领悟到一个思想：前一个公司很在意功能上的全，比如我们要有自己的图片选取工具、纯文字发布能力的特立独行、视频这块大块头的实现类似“美拍”的全逻辑。由于人员的不够，我在竭尽全力下初窥视频骨架，但是公司在一次次的冲击市场下都没有反响中放弃了。其中原因是大骨头很难啃，其他东西没抓住，人员配置不够；粉粉公司反其道，一步一步走，走的路也更早，探索出了抓住青少年人群的美少女“萌”。粉粉到现在才开始有了拍摄视频的能力，而且仅仅只有拍摄这一步，目前还是内测；粉粉每走一步都测试、保证再保证没有问题才将功能加上去。粉粉的选取图片能力还有滤镜能力，目前走到了这么一个地步：使用其他公司的SDK：在功能左下角还有某某SDK的字样。里面框架也是挺卡的，我拿了个iPod5的测试机，FPS有时直接到0了，有些页面写的，连复用都没有；比如图片这块，我们使用qiniu作为图片保存地址，他们使用的UPYun是腾讯的，目前还属于内测阶段，而且他们居然没有看文档，不知道可以图片地址后面拼接image的后缀，让服务器帮忙更改图片属性功能。可以这么说，内容、市场、人员、测试、流程，粉粉都比“呱拍”走的很远，但是一些功能上的，确实“呱拍”使用的前缘功能，要比粉粉走太远：当我已经要试试FaceDetect功能的时候，粉粉才在有拍摄功能。。。 最近练手了一个自定义CollectionLayout，联系之前看的OpenGL ES 的皮毛，类比到ASDK和autoLayout中布局说明，终于理解了一个原理：程序是死的，目前我接触到的都是死的，他需要人说明，包括每个pixel需要展示什么颜色定义，需要opacity多少，每个点需要人告诉程序。比如手机、电脑在某一快需要展示蓝色，布局定义等都会转化为绝对坐标，绝对坐标再转化为在底层GPU需要的布局信息，GPU在将每一层需要的颜色重叠起来，看需要输出到屏幕的是什么，才最终呈现出来 如果要判别一个公司的团队实力，可以在看市场竞争能力，我想到作为在iOS技能求职者一个新方法：下一个该公司的APP—&gt;使用iPhone4s看其表现能力，iPhone6不能作为功能测试机，不过可以作为布局测试机！！！ 今天改了下host，进入公司的FTP服务器，改host需要vim的权限，于是我使用sudo vim +“对应文件夹Path” 写完后按左上角esc键盘按键，然后输入:wq意思是write and quit 今天下午搞了下git branch，之前使用都是小心翼翼，不太懂整，他们搞过来搞过去，嗯哼，还不太给力ing","categories":[],"tags":[]},{"title":"2017/2/20lesson","slug":"2017-2-20lesson","date":"2017-02-20T14:18:31.000Z","updated":"2017-02-20T06:44:40.000Z","comments":true,"path":"2017/02/20/2017-2-20lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/20/2017-2-20lesson/","excerpt":"","text":"今天第一次去粉粉日记报到，记录下流程。这几天是大风大雪天，最后一次寒潮，连着2周晚睡晚起，而且还是没有开空调裸睡，，，嘴里一直念叨着我是要做大事之人才哆嗦着起来，，，本来打算今早去体检，怕来回来不及，小电驴也没充电，赶紧吃了俩小面包就出发了。到公司后人事先给我安排到桌子前，没想到公司都用Mac mini，嘿嘿，很久没用啦，开发效率估计要打折，，哈哈我先捣鼓下开启主机，然后写入职表。过了一会，公司每天的早会，我看他们全围成一圈报告，有一定好处，有规划知道做什么是很重要的事。接着我继续下载我可能要用到的软件呀、下homebrew、cocoapods啊；常用软件：蓝灯、Chrome、微信、Reveal等等常用的；设置下电脑，看看PhotoKit（最近要开始gif图片等研究）等。公司里面“粉粉日记”成员蛮多的，才知道粉粉是从2013年的项目到现在，过了一会，他们把代码发过来我先看着了。里面项目有几点想说的，包确实很大，比环球高尔夫还大，但是资源管理很有条例（我自己处理的话尽量用IconFont管理图片资源吧），用的一些技术我没去掌握的有那么几个：JSBridge、Mantal、CoreData、Archive、以及一些其他一些以前没去接触过的。JSBridge以前没有实验对象；Mantal以前觉得对model有入侵；CoreData觉得一些啥啥问题等；Archive没试验对象；之后可以看看哪里有没有契机接触使用等了，，，11点多的时候在钉钉里面和大家大哥招呼，大家群里立马热闹起来了，互开着玩笑。中午一下就来了，和iOS几个一起吃午饭，还不知道这附近怎么吃，跟着他们吃就好了。他们人挺热情的，那么多人在办公室，大家工作有讨论，有去开会，挺热闹；大家吃饭，我们几个在一个厅里吃饭，也是来来回回大家玩闹。下午的时候，我先看了很久的代码。过没一会还要填一些规章、录个指纹啥的，然后人事小妹带我跟大家都走一遍认识认识。我估计记不清，只能记大概范围的工作区，还有去可萌记账组走一下，大概知道销售、商务、iOS开发、后台开发、安卓开发、网页开发、UI组、插画组等的位置。也去转了财务、经理处。回来继续看代码，他们安排了一个小任务。这个小任务是本来别的地方有的，我给写到新的地方，不是太难。我考虑的比较多，以为其图片是从外部传递进去控制的，没想到是内部写好，这样估计没法再重新用的；不过另一层也会考虑到不能过度封装，也会带来一些隐患。我也能看到这项目有些没设计好的地方，毕竟项目大了，有些没能全盘思考，总体设计方案很值得我学习，细节方面值得我学习注意规避。有些设计我粗略看了下还没看全。textView的inputView、accessInputView原来是用来代替keyboardPad的，环球高尔夫看到过，没留意，现在清楚了。将代码直接拖到sourceTree建立branch，新建一个branch给代码添分支，这些我居然以前没去搞过，一直花时间写/学新东西，现在有的补上了，，，下午的时候主要就是改那个需求，改成和另一个完全一样，还差和后台人对接数据。到最后7点多了也确实饿了，给上级发了个今天任务完成邮件后先回来吃饭了。发每日任务有个好处，上级对下面的管控，知道过程、进程如何。我看到他们有写一句话的，不过我记录修改习惯早就养成，修改哪里，细节等都会列举，如果有技术手段处理过程、试验过程也会记录，习惯，让我不这么写我也会在便签记下，哈哈。晚上回来，总要学点啥，或者写点啥吧，我问了下parse中I have a mainPostTable and three other tables,three other tables owns mainPostTable&#39;s objectId, how can i count from other three table??这样怎么处理，等待他们回答结果。然后测试数据include “user”这个pointer，哇哈，返回数据了，那就好啦，，哈哈，，首页就差问他们的那个问题啦。等会看看文章，就早点睡了，面对明天新的任务，毕竟给我的任务肯定会越来越重，赶紧在公司的时候多看代码，不然做的效率在不知道相应代码位置的话会吃亏的。再多说一句，加入“粉粉”组有好处，比如知道他们怎么运营，我这里看到的数据最直观；也有坏处，我的一身本事，不能乱显身手，哈哈哈，不要乱加代码嘛，是吧，尽量和原作者手法一致；私下多写自己代码，不然有些自己的东西会忘却的哦，加油2017，，，","categories":[],"tags":[]},{"title":"2017/2/18lesson","slug":"2017-2-18lesson","date":"2017-02-18T07:53:32.000Z","updated":"2017-02-19T10:45:34.000Z","comments":true,"path":"2017/02/18/2017-2-18lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/18/2017-2-18lesson/","excerpt":"","text":"因为近期离职的原因，生活有点乱，主要就是本来习惯的节奏变化，自己感觉拼不上，倒不是因为离职带来的主要影响。离职这几天有时候晚上会思考我要走什么样的路，有时候晚上玩游戏，玩着玩着就太晚，晚？那也不行嘞，写东西还是要写，于是又变成熬夜，最近2周基本是1点、1点半左右睡。本来我已经拿到一个公司A的offer，那边同学也盛情邀请，但是有几点考虑。第一是我感觉不到那个方向所能带来的前进，第二是做的跟我以前做的有点杂很相似；主要是能有公司B的一个对比。我觉得我是时候往上突破了。这几年沉淀下来的能力也差不多可以破开另一个点了。公司Aoffer拿到的那天下午，我刚好答应公司B隔天去面试。我在接到去公司B邀请面试的电话，心里对公司A评价也很好。有些人可能会觉得我公司A已经有offer不怕没饭吃了，随便去就好了，又不是就你们一家。有时候年轻的气盛不是叫“年轻气盛”，有时候却会成了“自以为是”。我在心里重复给自己鼓气，你是要做大事的人，机会是给有准备的人，给沉心静气，给贤者。我觉得我会爬上顶端，所以我给自己定义都是求职者，虚心求学求职者，公司和求职者双向共赢的姿态。去公司B面试的时候比较正规，毕竟是走的比较前缘。面试的是一个大哥，我一开始介绍自己、项目，他说问几个吧。1：http，我就说计算机硬件课程里面知道的什么3次握手4次挥手，socket在底层利用比如路由头、什么头什么头拼接成数据在物理链传输；2：post协议，我就说比如请求头这块，body体这块，跟get请求大概区别，也说了我以前利用charles请求iTunes的https请求中利用其excuse更改传输数据内容下载不同版本app；3：json转model，他问往上扩展，这个我不知道他想我能给他说什么，那我就往上扩展，说该不该在json转为dic之后需要转为model这个，于是blablabla，后来他说不是想问这个，比如MJExtension，json转为dic之后，找个一个个key值，然后给他赋上–&gt;这么说我终于知道他想问的什么，那我就说使用runTime遍历出来property列表，然后在json中某一属性对应数据，使用kvo给property列表赋值即可；4、5我可真不会紧张，只是不知道他表达的我应该回答哪某一领域，我觉得都是工作几年了，应该不会那么简单的吧，我一直以为是探讨些东西吧。后来我跟这个大哥说了，我这有个offer，可能需要在下午3点前给个回复，求职是相互沟通的过程，如果您们对我不是很满意，那么请直接拒绝我，我都懂，毕竟双向选择啦，不然这里我不敢拖，另一边也不能拖答复延时，诚信为主。他说等会，他把CTO喊来了，CTO又跟我聊了很久。跟CTO聊天，也算是给我后面做的决定定了基础。不是说工资高就去，而是奔着职业规划，我心中路线而去，进这个公司哪个能带给我前进的步伐和台阶。后来面试结束要离开了，他说他们会尽快，2、3点前给我回复。我出门在地铁上公司B前台就打电话过来，给定工资结构说明和工作时间、安排事项等。offer是这样，前台这里口头说好，然后需要我接下来的背景调查，然后写单子审批，然后offer才发到我这里。那天下午回到住所，我跟公司A人事说了决定，邮件回复公司Aoffer邮件。然后等待公司B的一些背景调查配合。公司B基本问一些为什么之前离开公司啦，说了试用期情况啦，然后公司B前台打电话给我之前老板人事们。offer直到隔天下午还没发过来，我也是时不时就看一下邮箱，没有定下来，心确实有点不在焉状态，毕竟另一个offer推掉，如果这个说offer不发了，那我又得继续投简历咯，比较麻烦。大概在隔天晚些时候，offer终于发过来，确定好了。我也没停歇，继续搞我自己的事，我该写的东西还是要写，是吧，嘿嘿，停不下来。今天周六，本来要去体检，早上写东西忘记还在煮粥，粥都煮成饭了，下午去医院看到没人-&gt;我去的时间太晚了，只能回来继续写写文章、写写东西啦。明天计划是处理图文混排和骑车去新公司看看，毕竟不是很远，6km左右，我要坐地铁还要2站转乘1站，还不如看看我的小电驴能不能撑到，不能的话，考虑换一个小电驴^.^。","categories":[],"tags":[]},{"title":"ASTextNode图文","slug":"ASTextNode图文","date":"2017-02-14T12:38:43.000Z","updated":"2017-02-18T15:36:00.000Z","comments":true,"path":"2017/02/14/ASTextNode图文/","link":"","permalink":"https://shaohung001.github.io/2017/02/14/ASTextNode图文/","excerpt":"","text":"过段时间，写一个关于ASTextNode的图文混排的demo这里才参考一个博客：http://blog.csdn.net/pjk1129/article/details/45559647http://tutuge.me/2015/04/21/resizable-nstextattachment/到时讲讲如何实现包括插入image，解析image成string；使用正则将string的标记改为image插入到ASTextNode时间定为这周周末吧","categories":[],"tags":[]},{"title":"2017/2/14lesson","slug":"2017-2-14lesson","date":"2017-02-14T07:20:34.000Z","updated":"2017-02-14T10:31:20.000Z","comments":true,"path":"2017/02/14/2017-2-14lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/14/2017-2-14lesson/","excerpt":"","text":"这几天正好离职，离职对于我来说更大的是机遇，更好的确定自己的方向。以前的知识都是积累，就如学校里面学习，你要学线代、微积分、几何、数据结构等等，你还要有专项的如Visual-C、汇编、jave等等工作中可能会用到的语种。但是最后你要确定好自己的方向。你不可能什么都学会，不同的人创建的语法都有自己的特点，什么都学，什么都是皮毛，这是我的观点，没办法，中国人，除了工作，你还要生活啊。。。找工作对我来说，最大的挑战就是-&gt;晕车挑战，有几回头确实很晕，但都还能忍。离职能让你重新审视这个行业,同时去面试的偏重自己的热爱方向，面试的时候比如今天碰到比我厉害，走的比我远的大哥，我不多问几个问题，我不就白去了。所以也可以刚好审视自己以前的研究成果的熟悉度和错误地方。先说前两天去面试的一家：某个资产行业公司，他想做一个类K线PK的即时对战app，团队还没有组件。我这里给他主推一些方案。你需要即时对战，那么对信息的更改，便需要很高，于是推荐Parse服务器、Firebase、自己花钱雇人搭建服务器.K线原型的话，UIKit也能实现，我这方面可以私下花个时间学习写一个，毕竟没搞过，私下自己搞搞也是有点意思。之后可能我自己就会去实现一个可以对战的小游戏，个人兴趣爱好，决心继续发展就不能浪费时间。这个老板比较对生意上在意，我去的时候问的一直都是觉得以前的工作做到位，却前景不看好，我觉得这个大哥估计数学方面或者金融方面浸淫很深，我缺少的就是这方面知识和操作。我从小就没被往这方面培养，肯定不行，算了，人各有道，有机会再说往上爬的事，哈哈。 昨天去面试的一家是一个做共享自行车🚲类的，一样，和前两天的要做1个小时车过去，我小脑袋晕车晕呀晕呀，摇呀摇呀，回来的时候都是浑浑噩噩的。去到那里，里面感觉还有一点点油漆未干那种味道，办公地点很大，人10来个。反正我来就是来玩的，我哪可能干这行。跟里面大哥聊了会，说了我能带来什么技术，我知道他做后台，我说的很多他也都不懂，他说的一些跟蓝牙某些技术，我1年前搞过BlueTooth这块的peerTalk，继续研究也没啥，看看资料一个个攻克也有可能搞得好，但是现在ofo、摩拜、小鸣等占据了很大市场，算了，我直接说我可能不太适合，我对音视频这块比较热衷，浪费您的时间，打扰了，双方都很客气，知道都不适合，只能算打扰。 今天去面试的一家叫初生科技的一家公司，他的产品热拉在春节的时候跻身免费榜前十，做的是挺不错的。我有点心动，心动的不是其除去功能的其他原因。我想更了解音视频这块，他们是做的比较好的了。首先我先自我介绍，这东西说来说去就说到我们最近做的呱拍APP，里面使用的技术点、里面负责模块等。大哥对细节比较在意，细节是能体现很多方面的能力。我觉得做东西，就要把他当情人，每天都是热爱，每天都是把情人打扮的更美。这里我们沟通了很多，我记录几天我以前做APP的时候想到不敢确定的一些事情。 我查阅一些资料，觉得我多个页面都是用到了GPUImage，也就是说context对很多页面都有一些buffer没有清除，他的建议的是在关键页面使用GPUImage，我的拍摄页面需要改掉，单纯给需要添加filter或者MV页面使用GPUImage。 MV效果中，他的一个说法让我解开MV的真正面纱，使用playItem，先让movieFile process，然后在相应时间play或者seekToTime，跟我想的一模一样。 关于切换滤镜可能会卡顿，这点和我想的一样，不是那些问题，估计是其他一些什么东西的原因吧，切换某一些filter的时候会有那么点卡顿。 效果滤镜里边，他说其中有一些可以实现比如detect事件，这个我知道有，不太会用；有一些是效果滤镜，比如画面移动、波纹滤镜等，这个我当时还真没找到。这个就是我比较差的一个地方了，网上资料甚少啊，我当时也没时间处理，光找demo就能花去很多时间。 关于询问音频打包问题，最终我的操作原来是对的，他们的操作是GPUImage 处理出来视频，然后使用AVFoundation再处理出来视频。没办法，视频、音频只能两个地方分别打包，毕竟GPUImage干的事就是处理AVMediaType的事情。 我也提出一些观点，在处理每一帧出来的framebuffer中，可以使用CIDetector或者OpenCV的观测点。OpenCV确实没接触，我需要去搞搞的事情啊。 在学习方向，他给的说3个建议 第一，demo使用到场景中。这个当然了，硬着头皮上！！！ 第二，做压力测试。比如他提到聊天方面，在一万条数据面前，保存和未保存，读写保护等的情况。我之前没这么做过，这个倒是我真正要学习的，这个或许是我要进入的下一个阶段。其实就是某些场景，耐不耐用的体现。不再是小打小闹啦 第三，将做出来的东西在github开源，接受大家的考验。这点我赞同，，，，，，一半，哈哈，，，这个是在第二个建议之后的事啦。我现在也有将写出来的项目拿出来，不过都是我的一些测试类的，等到第二个建议实现，才会到达第三个层面吧 总的来说，离职是件好事，趁着这个时间，好好沉淀，好好实现之前一直想自己做的东西，努力花时间，不要再颓废，每天定时定量完成！！！ 因为离职，有些东西要去规划，要学的可能更知道哪个方向，这里确定好最近要学的东西吧。 APP中，使用IGListKit进行归类Setting_Module 使用FxForms填写个人信息表单。 LiveQuary 在ASTextNode使用NSAttachment","categories":[],"tags":[]},{"title":"2017/2/13lesson","slug":"2017-2-13lesson","date":"2017-02-13T08:58:42.000Z","updated":"2017-02-13T09:01:08.000Z","comments":true,"path":"2017/02/13/2017-2-13lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/13/2017-2-13lesson/","excerpt":"","text":"练习了一个UI试图，嘿嘿，挺好玩的。http://www.jianshu.com/p/a7f5cab17395大概长这样有兴趣的可以去试试，有时间我看能不能改成代码形式，嘿嘿。","categories":[],"tags":[]},{"title":"2017/2/10lesson","slug":"2017-2-10lesson","date":"2017-02-10T15:43:18.000Z","updated":"2017-02-11T05:10:32.000Z","comments":true,"path":"2017/02/10/2017-2-10lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/10/2017-2-10lesson/","excerpt":"","text":"parse-server出现[Error]: schema mismatch for feedPost.pageInfo; expected String but got Pointer&lt;pageInfo&gt; (Code: 111, Version: 1.14.2)保存不进去。原理是因为server在我们创建类的时候，为类保存了一个总纲类似的table_SCHEMA,我之前创建feedPost table的时候，总纲给pageInfo定义为string，这时候改成Pointer，那么需要做的要么是删除table_SCHEMA，要么更改里面某一条collection里的pageInfo类型啦。 NSString中提取单词 enumerateSubstringsInRange NSCharacterSet CFStringTokenizerRef看了这篇网址给的说明http://blog.csdn.net/god_chong/article/details/49589499 function1:NSString popo = @”Lorem __ ! @ () “” ipsum “” dolar ?~ # $ % ^ &amp; &lt; &gt;{}\\ |;:sit amet.”;[popo enumerateSubstringsInRange:NSMakeRange(0, popo.length) options:NSStringEnumerationByWords usingBlock:^(NSString _Nullable substring, NSRange substringRange, NSRange enclosingRange, BOOLBOOL _Nonnull stop) { NSLog(@”substring :%@”,substring); NSLog(@”substringRange:%lu,length:%lu”,(unsigned long)substringRange.location,substringRange.length); NSLog(@”enclosingRange:%lu,length:%lu \\n\\n”,(unsigned long)enclosingRange.location,enclosingRange.length);}];打印如下：2015-11-02 17:22:07.244 AFNetWorkingDemo[8620:300513] substring :Lorem2015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] substringRange:0,length:52015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] enclosingRange:0,length:6 2015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] substring :__2015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] substringRange:6,length:22015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] enclosingRange:6,length:11 2015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] substring :ipsum2015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] substringRange:17,length:52015-11-02 17:22:07.245 AFNetWorkingDemo[8620:300513] enclosingRange:17,length:7 2015-11-02 17:22:07.246 AFNetWorkingDemo[8620:300513] substring :dolar2015-11-02 17:22:07.246 AFNetWorkingDemo[8620:300513] substringRange:24,length:52015-11-02 17:22:07.246 AFNetWorkingDemo[8620:300513] enclosingRange:24,length:33 2015-11-02 17:22:07.246 AFNetWorkingDemo[8620:300513] substring :sit2015-11-02 17:22:07.246 AFNetWorkingDemo[8620:300513] substringRange:57,length:32015-11-02 17:22:07.273 AFNetWorkingDemo[8620:300513] enclosingRange:57,length:5 2015-11-02 17:22:07.273 AFNetWorkingDemo[8620:300513] substring :amet2015-11-02 17:22:07.273 AFNetWorkingDemo[8620:300513] substringRange:62,length:42015-11-02 17:22:07.273 AFNetWorkingDemo[8620:300513] enclosingRange:62,length:5 function2:CFStringRef string1 = (__bridge CFStringRef)([NSString stringWithFormat:@”Lorem ipsum dolar sit amet.”]); // Get string from somewhere CFLocaleRef locale = CFLocaleCopyCurrent();CFStringTokenizerRef tokenizer =CFStringTokenizerCreate( kCFAllocatorDefault , string1 , CFRangeMake(0, CFStringGetLength(string1)) , kCFStringTokenizerUnitWord , locale);CFStringTokenizerTokenType tokenType = kCFStringTokenizerTokenNone;unsigned tokensFound = 0;while(kCFStringTokenizerTokenNone != (tokenType = CFStringTokenizerAdvanceToNextToken(tokenizer))) { CFRange tokenRange = CFStringTokenizerGetCurrentTokenRange(tokenizer); CFStringRef tokenValue = CFStringCreateWithSubstring( kCFAllocatorDefault , string1 , tokenRange); // Do something with the token NSLog(@”tokenValue:%@”,tokenValue); NSLog(@”tokenRange:%ld,%ld”,tokenRange.location,tokenRange.length); CFShow(tokenValue); CFRelease(tokenValue); ++tokensFound;}// Clean upCFRelease(tokenizer);CFRelease(locale);打印如下：2015-11-02 17:22:07.276 AFNetWorkingDemo[8620:300513] string:Lorem ipsum dolar sit amet.2015-11-02 17:22:07.276 AFNetWorkingDemo[8620:300513] sss:Loremipsumdolarsitamet.2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenValue:Lorem2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenRange:0,5Lorem2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenValue:ipsum2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenRange:9,5ipsum2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenValue:dolar2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenRange:15,5dolar2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenValue:sit2015-11-02 17:22:07.277 AFNetWorkingDemo[8620:300513] tokenRange:23,3sit2015-11-02 17:22:07.278 AFNetWorkingDemo[8620:300513] tokenValue:amet2015-11-02 17:22:07.278 AFNetWorkingDemo[8620:300513] tokenRange:28,4amet function3：NSString string = @”Lorem ipsum dolar sit amet.”;string = [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];NSArray components = [string componentsSeparatedByCharactersInSet:[NSCharacterSet whitespaceCharacterSet]];NSLog(@”%@”,components);components = [components filteredArrayUsingPredicate:[NSPredicate predicateWithFormat:@”self &lt;&gt; ‘’”]];NSLog(@”%@”,components);string = [components componentsJoinedByString:@” “];NSLog(@”string:%@”,string);打印如下：2015-11-02 17:22:07.275 AFNetWorkingDemo[8620:300513] ( Lorem, “”, “”, “”, ipsum, dolar, “”, “”, sit, “”, “amet.”)2015-11-02 17:22:07.275 AFNetWorkingDemo[8620:300513] ( Lorem, ipsum, dolar, sit, “amet.”)2015-11-02 17:22:07.276 AFNetWorkingDemo[8620:300513] string:Lorem ipsum dolar sit amet. 摘抄自大神可可的笔记https://zhuanlan.zhihu.com/p/20669823?refer=cocoanotes想要把 UITableView 的 header 全都换成同一个效果，不用做任何 Subclassing，也不用做任何 Swizzling，直接 Appearance 搞定：[[UILabel appearanceWhenContainedIn:[UITableViewHeaderFooterView class], nil] setTextColor:[UIColor redColor]]; 想要短信 app 里面那种元素之间相互挤压的物理效果，使用 UIDynamicAnimator 就可以了，这里有一个很不错的范例：GitHub - ashfurrow/ASHSpringyCollectionView","categories":[],"tags":[]},{"title":"","slug":"Overview","date":"2017-02-10T09:01:36.000Z","updated":"2017-02-10T09:01:36.000Z","comments":true,"path":"2017/02/10/Overview/","link":"","permalink":"https://shaohung001.github.io/2017/02/10/Overview/","excerpt":"","text":"OverviewThere is an established pattern where UICollectionViewLayout talks directly to the collection view’s delegate to get additional layout info e.g. the size of a header in a given section. This pattern is established by Apple’s flow layout, and it is used by Pinterest and I’m sure others. It is dangerous when used with ASDK because we update asynchronously, sofor instance if you delete a section from your data source, the layout won’t find out until later and in the meantime it may ask the delegate about a section that doesn’t exist! The solution is to capture this kind of information from the data source immediately when a section is inserted, and make it available to the layout as we update the UICollectionView so that everyone is on the same page. Enter: ASSectionUserInfo Internally, we use a private object ASCollectionSection to represent one version of a section of items and supplementaries. If the user wants, they can provide us with an ASSectionUserInfo object to accompany the section, which will be read synchronously when the section is inserted. Usage During LayoutThe collection view will make these section infos available in the same way that finished nodes are currently available. Sequence Diagram: Creation When Inserting SectionsThe section infos for any inserted/reloaded sections are queried synchronously, before the node blocks for their items. The top part of this diagram is the same as the current behavior but I think it’s useful info =) Sequence Diagram:","categories":[],"tags":[]},{"title":"记录一次Issues in NSObjCRuntime, NSZone, and NSObject","slug":"2017-2-6lesson","date":"2017-02-06T09:20:33.000Z","updated":"2017-02-06T09:24:50.000Z","comments":true,"path":"2017/02/06/2017-2-6lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/06/2017-2-6lesson/","excerpt":"","text":"iOS 我加了一个c的程序进到程序，然后程序始终编译不过。这里有两个方案： http://stackoverflow.com/questions/11857765/ios-parse-issues-in-nsobjcruntime-nszone-and-nsobject https://my.oschina.net/ioslighter/blog/416199","categories":[],"tags":[]},{"title":"2月5日lesson","slug":"2月5日lesson","date":"2017-02-05T03:00:02.000Z","updated":"2017-02-05T08:34:20.000Z","comments":true,"path":"2017/02/05/2月5日lesson/","link":"","permalink":"https://shaohung001.github.io/2017/02/05/2月5日lesson/","excerpt":"","text":"这里记录一下给他人介绍一个想法 闲鱼闲鱼是淘宝的子APP，用来对付58等同城信息发布的应用闲鱼有一个很了不起的功能：法院拍卖法院拍卖这种交易不是谁想做就做的，马云能把这谈下来，简直了闲鱼有个查询身份还有一些信用的手段，58或者赶集什么的，基本压力超大的了闲鱼账号，你有淘宝账号，就有闲鱼账号 如何操作首先在闲鱼网站，或者闲鱼APP，推荐app，搜索类似图例 因为转卖为必须要卖出去，留在手上没毛用的，又不需要用，所以优先考虑全新,奖品,未拆封之类的我就先拿闲鱼截了一张某一商品图图在淘宝上可以搜索当今的价格这里说给定了价，其实你还可以还价。还价在闲鱼里面私聊，然后还价还到无耻为止，你就说“你不用了，你留着没用，浪费资源，尽早出了”之类的话。最好自己亲自前往勘察物品真实性，这个环节做多了都会。 亲自前往费用基本属于乘坐地铁、坐公交、自己骑车前往等。所在城市，推荐中国直辖市，物品很多很多，每天都一堆的更新。 拿一次我的经历：2015年时候我抽奖抽到一个蓝牙Beat音响。我自己根本不用，耳机的话还好说；寄回家里吧，没必要，家里还不如空放音响，那就只能卖了。淘宝我自己查了大概450多，我连外面的拆封都没有撕开。然后一个估计也是做这个的，跟我要价到320。好吧，留着也是留着。见面的时候他提了个黑色大挎包，鬼知道里面什么东西，矮胖矮胖的，他看到没拆封，300直接拿给我说“就300吧，我都亲自来取的”，然后直接往后走。他给的钱比较散，我还没说完，人就走远了。算了，亏20就20吧，我特么真的用不到，还不如买糖吃。 呐，真的如此，这就是做生意了。里面还有很多门道，自己喜欢搞七搞八，都试试才知道世事不是那么简单。我也不喜欢整天憋家里，就靠赚那几毛生活。打“蛇蛇争霸”这游戏，大家都会围着大蛇在旁边，就等着有肉吃自己上去抢一波，老妈还让我在小乡村卖菜？老妈老爸真的老了，所以才会有这思想，安稳才好。安稳当然好，但是也只有灰色地带，才有油水了吧。不要太平凡，不要太激烈，循序渐进发展，能冲一波就冲，嘿嘿，，，有空我多整整一些门道，，，","categories":[],"tags":[]},{"title":"device连接到本地电脑服务器","slug":"device连接到本地电脑服务器","date":"2017-02-04T09:31:16.000Z","updated":"2017-02-05T08:39:56.000Z","comments":true,"path":"2017/02/04/device连接到本地电脑服务器/","link":"","permalink":"https://shaohung001.github.io/2017/02/04/device连接到本地电脑服务器/","excerpt":"","text":"首先是根据这个答案http://stackoverflow.com/questions/12657651/connect-device-to-mac-localhost-server我搞了一会，parse服务器地址不变，将我的configuration.server = @&quot;http://localhost:1337/parse&quot;的地址改为@&quot;http://&quot;MAC IP&quot;:1337/parse&quot; MAC IP就是你电脑的地址，即可。很类似RN中将其指向本地构建的服务器中，脑袋没转过弯来，居然还要去查答案，万幸，没有花太多时间。记录一下。","categories":[],"tags":[]},{"title":"大年初二研究成果","slug":"大年初二研究成果","date":"2017-01-29T12:50:01.000Z","updated":"2017-01-30T03:26:10.000Z","comments":true,"path":"2017/01/29/大年初二研究成果/","link":"","permalink":"https://shaohung001.github.io/2017/01/29/大年初二研究成果/","excerpt":"","text":"今天大年初二，还是不能停歇，毕竟有兴趣，马达就一直在脑袋转着，哈哈。先介绍我之前想用不敢用的一款文本创建第三方工具：ZSSRichTextEditor ZSSRichTextEditor这款作用是将你输入转化为html文本，你直接就可以将它当做链接用，如：`NSString *htmlStr = @”\\\\ This is a test of the ZSSRichTextEditor by Zed Said Studio\\\\Dffhhhfffffgggggggggggggggggggggggguuuuuuuuuuuuuuyyttttttttggggggggggggggvvv\\ baidubaidu\\“;如果其中的&lt;img src=\\”data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAASABIAAD/4QBYR……alt=””&gt;那么其为数据类型，data可能会很大，可能我会想办法将其作为图片传到服务器，然后再将其类型更改为地址，这样其中的数据就变小了。 使用的话，很简单，如：[self.webView loadHTMLString:self.htmlStr baseURL:nil];`你可以自己加上头、背景啥的，一个文章便创建成功了，哈哈。慢慢我也要学习前段知识啦，刚好之前学的React语法用得上，估计可以比较快用的顺手，嗷嗷，提供一个学习地址:大牛博客 快要睡觉了,直接贴FontAwesome学习使用代码FAKIonIcons *starIcon = [FAKIonIcons starIconWithSize:30]; UIImage *starImage = [starIcon imageWithSize:CGSizeMake(30, 30)]; FAKFontAwesome *settingIcon = [FAKFontAwesome cogIconWithSize:30]; UIImage *settingImage = [settingIcon imageWithSize:CGSizeMake(30, 30)]; NSArray *imageArr = @[starImage,settingImage]; NSArray *selectedArr = @[starImage,settingImage]; NSArray *nameArr = @[@&quot;&quot;,@&quot;&quot;]; // self.label.attributedText = [starIcon attributedString]; // starIcon.drawingBackgroundColor = [UIColor blackColor]; // starIcon.drawingPositionAdjustment = UIOffsetMake(2, 2); // [starIcon removeAttribute:NSForegroundColorAttributeName]; // [starIcon setAttributes:attributes]; // [starIcon attributes]; // [starIcon addAttribute:NSForegroundColorAttributeName value:[UIColor whiteColor]]; 这里提一点，我将其Cocoapods导入的，然后捏，本身有.a文件，但是搜不到，于是我将其Resources文件复制到主工程的Resource下才OK，哈哈，记录一下吧 Array使用valueForKeyPath参考：http://blog.csdn.net/binyanye1/article/details/43413333NSArray *testArray = [NSArray arrayWithObjects:@&quot;2.0&quot;, @&quot;2.3&quot;, @&quot;3.0&quot;, @&quot;4.0&quot;, nil]; NSNumber *sum = [testArray valueForKeyPath:@&quot;@sum.floatValue&quot;]; NSNumber *avg = [testArray valueForKeyPath:@&quot;@avg.floatValue&quot;]; NSNumber *avg = [testArray valueForKeyPath:@&quot;@max.floatValue&quot;]; NSNumber *avg = [testArray valueForKeyPath:@&quot;@min.floatValue&quot;]; 如果类型如下：( { city = “Beijing”; country = “China”; }, { city = “Tokyo”; country = “Japan”; }, { city = “New York”; country = “U.S.”; } ) 使用[array valueForKeyPath:@&quot;city&quot;];则会得到( “Beijing”, “Tokyo”, “New York” )然后利用array的index:[[array valueForKeyPath:@&quot;city&quot;] indexOfObject:@”Beijing”];然后用得到的index获取对象：[array objectAtIndex:[[array valueForKeyPath:@&quot;city&quot;] indexOfObject:@”Beijing]]; 这是一个例子NSMutableDictionary *dic=[NSMutableDictionary dictionary]; [dic setObject:@&quot;v1&quot; forKey:@&quot;k1&quot;]; [dic setObject:@&quot;v2&quot; forKey:@&quot;k2&quot;]; [dic setObject:@&quot;v3&quot; forKey:@&quot;k3&quot;]; NSArray *array=[NSArray arrayWithObjects:@&quot;2&quot;,@&quot;3&quot;,@&quot;4&quot;,@&quot;5&quot;,nil]; [dic setObject:array forKey:@&quot;k4&quot;]; id obj=[dic valueForKeyPath:@&quot;k4.@sum.floatValue&quot;]; NSLog(@&quot;%@&quot;,[obj description]);//==14","categories":[],"tags":[]},{"title":"记一次和后台讨论bug的过程吧","slug":"记一次和后台讨论bug的过程吧","date":"2017-01-25T08:30:05.000Z","updated":"2017-01-25T09:30:26.000Z","comments":true,"path":"2017/01/25/记一次和后台讨论bug的过程吧/","link":"","permalink":"https://shaohung001.github.io/2017/01/25/记一次和后台讨论bug的过程吧/","excerpt":"","text":"和公司后台大哥打交道也有几次了，都不是很给力的解决bug过程。 先说一下上一次的情形吧。我们的后台是用php写的，我以前都是和java后台打交道，所以有些怪，而且后台用的他们以前公司的架构，我们之前的所有api，重要不重要都需要post请求，而且调试bug需要我们前段调节，我记得以前的java那边可以使用terminal调试。这些都不是事，接下来的才是比较蛋疼的。我们那次调试发布，类似发布帖子情形，怎么都发布不出去。我跟后台调了好久，最后我先下去吃饭了，一上来，说解决了。这件事离得比较久，有些忘记了，不过跟后台沟通真麻烦，真蛋疼的那种，我说说这次的吧，基本差不多，感受一下。 “我这代码绝对没有问题，想想你们代码怎么写的吧；不是你们的错，也绝对不是我代码有问题，好吧，那就不用做了，不要做了”是的，这个真是他这样说的。这次是2017年1月23号，也就是鸡年快过年最后一天班。心比较急是真的。后台把代码放到线上，我们都发现登陆、发布这两块不能用。我们可以用排除法： 登陆我使用测试登陆：手机号登陆、第三方登陆都没有问题； 我使用线上登陆：手机号登陆失败，第三方登陆没有问题； 我们前段iOS，线上线下唯一区别就是域名不一样，没有其他。 发布这个接口也有问题 我很久没有修改登陆位置的代码了呐，上面可以看出，真的，要么线上线下都不能登录，要么所有接口全都不能用，那肯定是我们哪里错了，他就一句话一开始：肯定是你们前段的错，你们代码没有写好。我当时一直的态度都是确定的知道是后台的错，我愿意陪你来改，帮后台查查那边的错误。他一直说我们这都问题，好吧，毕竟是我当时写的，那我看看代码有没有变动吧：没有，只字未变，，，我说，大哥，我们这里真的没有问题，要不你再查一查。他就说，绝对不可能，怎么可能我这里有问题，你再查查再查查。说的很激动，，肯定是你们的错的。我还是好言好语，毕竟做不好，大家年都不好过，心里想着。接着他说，不然我们调bug。好吧，于是调bug过程也很蛋疼，我用AFNetworking，简单使用网络连接的，他说88888，有没有，我说收到383838 38，中间有个空格。他说我给你88888，你给我383838中间还有空格，肯定是你们那里错了，不然那里来的3，还出来空格，你赶紧改你们代码。我说，大哥啊，我们收到什么就是什么，你给383838空格38，我当然收到相应的了，真不是我们这有错啊。然后他就很凶的，我给你88888，你到时给出来38383838，你还说我这里有问题，那你说这3还有空格哪里来的。我当时回说不知道啊，我们前段收到什么就是什么了。他就一扭头，你先解决3和空格哪里来的在跟我说下一步，再说调试。我无奈的说，你发过来什么我怎么可能找出来哪里来的3，真是服务器的情况啊，你看看测试可以用，线上第三方都能用他插话，语气很凶的说，你不要跟我说什么测试能用，第三方能用，你先把383838那个3和空格找出来（这纯粹转移话题了，解决登陆、发布问题变成了解决3和空格问题）我说，大哥，这没法测了，我们解决登陆问题，你让我查3和空格，我们这，你要什么参数我们提供给你们，你返回什么数据我们就收，我真查不出来啊。然后他就更凶了，你说不是你们问题，那还不是我们问题类，那这样不要测了，不能做不要做了，我蛋疼啊，我还是苦口婆心（毕竟这大过年的，登陆都没法，大家过年都不用过了，老板肯定会很气愤的啊，做了大半年），大哥，我们再查一查吧，毕竟不能登陆，老板肯定发飙啊。他的凶依旧，查什么查，我这里根本不用查，你那边多出来3和空格还让我这边查，那要这样，我把代码还原，要是你还不能登陆，发布有问题，我跟你说好，接下来也不用找我，你自己解决，也不用找我帮忙。（呐，听到这，真的很心寒，我确定是他那边有问题，我都是打着帮他调试bug的态度，心里也嘀咕，要真登陆不了，我没有后台帮忙调试，没法搞啊），我就说先下去吃饭了，登陆上来就换回之前代码试试，没办法了呀，只有这样才能确定是他那边还是我这边，要真我这边，那我也没话说啊，，，我下去吃饭中，，，心情也没被搞坏，毕竟出来给人工作，没必要受同事的气的，吃个饭，慢走慢走的上来了，大冬天，有点太阳，心情还是有点蛋疼。上来看见我们iOS另一个同事和大哥调试着代码，慢慢调着，始终能把矛头指向他们那服务器有问题。因为我一开始就能预见—&gt;才没几行代码啊，出去回来一个过程。后来好吧，后台把代码退回去，（服务器还没运行）还是登不上，我做对面，觉得不对啊，然后他们退到首页看其他数据也没有，然后大哥说还没启动。（服务器运行着）：登陆、发布全部正常，这回后台没话说了，真的没话说了。我也没说什么，搞我自己的东西，这明显的啊。后来说是当时他们搞一些别的东西给代码加上别的东西。可以这么说，这回我是真的蛋疼，特别蛋疼，我一直好声好气，给别人打工啊，没办法啊，后台那边就可以一句话：那就不用做了，不要做了，，，我只是发泄一下，，，毕竟有苦闷着绝对不好，哈哈如果界面有问题，那不用说了，前段的错。逻辑有问题，可能双方哪里合作没有调试好。如果比较矛盾问题，那估计是服务器有问题了。基本都是，前段的东西基本很少的，就这么几个代码啊！！！我真是老好人，人家都凶成这样，我都还是笑脸相迎，我都恨不得给自己一巴掌得了：做你麻痹程序员，写你麻痹代码，，，我其实也可以甩手，不用做就不用做呗，不做就不做呗，我本职做好，谁都没话说，你凶就你凶呗。额弥陀福，，，也记住这一次，下一次还有类似蛋疼的，我就发这给大哥看看好了，我真的以大局为重，要都不解决，登陆不了，明年我们都散伙得了，我怎么对得起其他同事，，，真不想管那么多啊，真想随便拿个工资做做自己手上的事多好，，，，","categories":[],"tags":[]},{"title":"微博API分析","slug":"微博API分析","date":"2017-01-23T09:26:10.000Z","updated":"2017-01-23T09:26:34.000Z","comments":true,"path":"2017/01/23/微博API分析/","link":"","permalink":"https://shaohung001.github.io/2017/01/23/微博API分析/","excerpt":"","text":"createdAt:id:pics:[“”,””,””]text:”文字内容”sourcetype:””—–&gt;不知道是什么鬼geo:”地理位置”source:”从哪里发过来的，什么设备”video:”……..” 视频链接user:{id:screen_name:”新浪财经”province:”11”city:”8”description:”……” 简介url:”……..” 其选填官网“profile_image_url”:”……” 头像“cover_image_phone”:”……” 其个人主页的背景图片“gender”:m/ffollowers_count:14020824friends_count:1450following:true/false 是否我关注了他follow_me:false 是否关注了我“level”:2 这里可以使用自己的积分}reposts_count:678 转发数comments_count:262 评论数attitudes_count:96 点赞数page_info:{ 这个是文章在外边时候展示的page_id:page_title:”…..”page_url:”…….”page_pic:”…….”content1:”银行汇出100元就要进口100元”content2:”。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。。”object_type:”webpage”}url_struct:[{ 这个应该是文章的构造，跳转构造page_id:””ori_url:”……..” 文章跳转urlurl_title:”银行汇出100元就要进口100原”url_type_pic:”” 图片}]topic_struct:[{ 这个是#xxx#“topic_title”:”一盒子的年味”“topic_url”:”…………”}]retweeted_status:{被转发的内容，同上内容} 文章类型图片类型纯文字类型视频类型","categories":[],"tags":[]},{"title":"读文章微信导航栏实现写了demo","slug":"读文章微信导航栏实现写了demo","date":"2017-01-23T08:39:50.000Z","updated":"2017-01-23T08:44:02.000Z","comments":true,"path":"2017/01/23/读文章微信导航栏实现写了demo/","link":"","permalink":"https://shaohung001.github.io/2017/01/23/读文章微信导航栏实现写了demo/","excerpt":"","text":"看了这位大哥http://www.jobbole.com/members/3170539585/的文章，关于微信导航栏的实现。由于他没有给出代码实现，当时我没有设置barstyle，导致不好看，哈哈。这里给出完整代码`#import “SHNavigationVC.h” #import “UIColor+expanded.h”@interface SHNavigationVC ()@property (nonatomic, strong) UIView *blurBackView;@end@implementation SHNavigationVC (void)viewDidLoad {[super viewDidLoad];// Do any additional setup after loading the view.UINavigationBar navBar = self.navigationBar;[navBar insertSubview:self.blurBackView atIndex:0];}-(UIView )blurBackView{if (!_blurBackView) {_blurBackView = [UIView new];_blurBackView.frame = CGRectMake(0, -20, KScreenSize.width, 64);CAGradientLayer *gradientLayer = [[CAGradientLayer alloc]init];gradientLayer.frame = CGRectMake(0, 0, KScreenSize.width, 64);gradientLayer.colors = @[(bridge id)[UIColor colorWithHexString:@”0x040012” andAlpha:0.76].CGColor,(bridge id)[UIColor colorWithHexString:@”0x040012” andAlpha:0.28].CGColor];gradientLayer.startPoint = CGPointMake(0, 0);gradientLayer.endPoint = CGPointMake(0, 1.0);[_blurBackView.layer addSublayer:gradientLayer];_blurBackView.userInteractionEnabled = NO;_blurBackView.alpha = 0.5;}return _blurBackView;}`","categories":[],"tags":[]},{"title":"动画显示和隐藏Tabbar和NaviBar","slug":"动画显示和隐藏Tabbar和NaviBar","date":"2017-01-19T06:55:07.000Z","updated":"2017-01-19T06:56:26.000Z","comments":true,"path":"2017/01/19/动画显示和隐藏Tabbar和NaviBar/","link":"","permalink":"https://shaohung001.github.io/2017/01/19/动画显示和隐藏Tabbar和NaviBar/","excerpt":"","text":"‘//隐藏标签栏 (void)hiddenTheTabBar{if (![[NSUserDefaults standardUserDefaults] boolForKey:@”isHiddenTabBar”]) {for (UIView *v in [self.view subviews]) {if ([v isKindOfClass:[UITabBar class]]) {[UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^(){CGRect frame = v.frame;frame.origin.y += 49.0f;v.frame = frame;} completion:nil];} else {[UIView animateWithDuration:0.5f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^(){CGRect frame = v.frame;frame.size.height += 49.0f;v.frame = frame;} completion:nil];}}[[NSUserDefaults standardUserDefaults] setBool:YES forKey:@”isHiddenTabBar”];}}//显示标签栏 (void)showTheTabBar{if ([[NSUserDefaults standardUserDefaults] boolForKey:@”isHiddenTabBar”]) {for (UIView *v in [self.view subviews]) {if ([v isKindOfClass:[UITabBar class]]) {[UIView animateWithDuration:0.3f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^(){CGRect frame = v.frame;frame.origin.y -= 49.0f;v.frame = frame;} completion:nil];} else {[UIView animateWithDuration:0.3f delay:0.0f options:UIViewAnimationOptionCurveEaseOut animations:^(){CGRect frame = v.frame;frame.size.height -= 49.0f;v.frame = frame;} completion:nil];}}[[NSUserDefaults standardUserDefaults] setBool:NO forKey:@”isHiddenTabBar”];}}‘思路就是这样，别人那边看到的，就是找出来，然后拿着这玩意做动效，存着吧","categories":[],"tags":[]},{"title":"最近做项目要用到的库","slug":"最近做项目要用到的库","date":"2017-01-18T14:52:28.000Z","updated":"2017-02-06T09:17:36.000Z","comments":true,"path":"2017/01/18/最近做项目要用到的库/","link":"","permalink":"https://shaohung001.github.io/2017/01/18/最近做项目要用到的库/","excerpt":"","text":"由于2017年了，没有一个非常好的，拿得出手的项目，决定在闲暇时间花更多精力去写好一个产品。不能总是东拼西凑完成一些功能，代码自己也要完善好。这里先想好需要哪些东西，从哪里开始，做到哪里。 framework由于想做的内容有多媒体，GPUImage必不可少，最近也研究了很久，公司项目又正好有用到，虽然还不太熟悉，不过，硬着头皮也要上。 GPUImage ReactiveCocoa AsyncDisplayKit Parse&amp;&amp;ParseServer MBProgress MMMarkdown Shimmer ChameleonFramework MLeaksFinder pop Qiniu MJRefresh/MJExtension AVOS(这个怎么讲，免费额度还是不错的，一些快捷数据存放在那边，很好。) CTMediator ijk Realm 320 AF FLAnimatedImage SD GYBootingProtection DZNEmptyDataSet FontAwesome LxDBAnything Origami FontAwesome PermissionScope大型库就差不多了。小的自己撸。做个啥 能发布内容，包括文本-&gt;markdown语法，解析棒啊图片-&gt;拍摄加本地存取图片滤镜+gif视频-&gt;拍摄加本地存取+视频+背景音乐+贴图+MV效果 展示页面参考了微博、Facebook、twitter、内涵段子 总共界面Feed界面、登陆界面、上传等界面、我的界面、查看用户界面 首先先这么多，哈哈什么方向 我估计会做成跟内涵段子差不多方向 百思不得骑姐不行 那还是想内涵段子学习，多研究推送，参考大亨“Pinterest”、“Facebook”、“Weibo”、“即刻”、“微信”等推送能力 做东西不能想着赚钱，不过要想好赚钱渠道： 比如进入时的广告页 广场的广告页 观看时的广告页 推送做到哪里做到哪里不如说，我想做什么。 之前大半年的业余时间，大半都浪费了。有想法了，就持续做出好的来，别东一个西一个。 由于最近搞的东西很多，没把React-native嵌进去已然减轻了很多了 边写边学。 比如视频部分，公司最近一直有往这一方向走。不过说实话，由于没资源、没人问导、老板又催促，着实很着急，这方面知识很难，毕竟这一块作品又不是烂大街。市场上有很多？更多的是新闻类好伐。 自己也有对视频有爱好，继续往里面学习。早先我就研究WebRTC，不过学的很粗浅，最后面用别人的（OpenTok+parse实现无后台操作）才实现了方案。GPUImage，很多坑，你没有做这些尝试，你都不知道做下去能不能出来。 这方面市场上还不是非常非常多人，尝试往里面挤挤，说不定有一些油水哟。 由于SVG对做地图比较好，我这里基本想用ttf搞定，就先忽略SVG #最近要做的事情给他列一下好了 CTMediator学习并直接使用到新项目 完成 系统主题变色学习，将其swift改为OC版本，并且直接使用到新项目 使用微信导航栏方案代替 GIF图搞进去,保存可以选择将GIF转成视频保存、或者GIF保存也行，便于复制转发。 编写APP啦 Origami继续搞 collection layout tutorial学习 学习一个非常酷的3D效果菜单，以前我写过一些类似的，但没有从大方向，不伦不类，好好看看他们怎么写的 OpenCV学习 阅读几个源码：FLAnimatedImage、RESidemenu、SDWebImage等文章 给我的博客优化优化，添加百度谷歌搜索 给我的博客加上广告，哈哈 评论区加上 统计 这样梳理下来，有搞头了，知道方向就好多了，哈哈。","categories":[],"tags":[]},{"title":"使用charles下载appStore历史版本","slug":"使用charles下载appStore历史版本","date":"2017-01-17T03:47:12.000Z","updated":"2017-01-17T05:33:38.000Z","comments":true,"path":"2017/01/17/使用charles下载appStore历史版本/","link":"","permalink":"https://shaohung001.github.io/2017/01/17/使用charles下载appStore历史版本/","excerpt":"","text":"今早想看秒拍最早版本长啥样，于是就看看教程捣鼓捣鼓。说实话，网上的教程都是东一个西一个，缺少章节，重要位置往往遗漏。我这里自己写一个完整一些的，也算是记录，完全给菜鸟看，因为我也是菜鸟，连我特么都搞定了，你怕个鸟。 申明几点charles可以使用手机代理来查看http或者https内容。但是到了App Store去下载时，点击下去，始终出现 https://p33-buy.itunes.apple.com SSLHandshake: Remote host closed connection during handshake 懒得整了，于是这里全部使用电脑端的使用，而且很快。 记得要翻墙，对了，姿势要对，比如左手放在大腿附近，右手点击快进键。 我这里charles版本为3.11.2版本。正不正版无所谓，没付费不就是老是弹提示嘛，多弹几次能给我钱，那就更好了。 我这里使用的是MAC电脑进入正题 下载https证书https://www.charlesproxy.com/assets/legacy-ssl/ssl.zip 解压之后,双击该证书。 前往钥匙串，搜索charles，然后就出现 双击该证书，同时点击第一项，使其始终信任 左上角关闭，同时要求输入mac电脑密码。因为我们在电脑上搞，那么我们要将代理设到电脑上。 打开网络设置偏好-&gt;高级-&gt;代理-&gt;将http和https都设置为127.0.0.1 port:8888 完了之后选择“应用”这里开始搞charles 打开charles，我这个版本的ssl proxy设置在 proxy下边的#SSL Proxying settings#里边，点击他进入，同时按图中设置 proxy设置这时打开iTunes和charles 在charles startRecording的时候，在iTunes-&gt;应用-&gt;App Store里面搜索“秒拍”可以看到图中解释 往下翻看到key&gt;softwareVersionBundleIdcom.yixia.iphonesoftwareVersionExternalIdentifier820135955softwareVersionExternalIdentifiers4981074539418068792717521689768864479413058166440900704794110919872854106330661589267815974682160602111609193016504676172638125959265981073287139932634192742647220962670294852730305732696329852736398862656468142680513982646572242779589372761641902654652212932655043181662912853701362692709942656770264233811423848811487803811635729811781222812037027812232597812328295812440942812536145812563006812597840812675604812763862812874619812980000813078957813307221813588175813621742813630679814108034814127199814228608814261627814370408814372706814567037814567882814592662814800494814875099815021644815023592815055555815350442815358012815393500815457608815607029815608372815615057815654426816131497816162845816749956816873466816998702817114988817301959818053825818219564818406305818614237818735711818784109818961748819270136819601281820135955vendorId1754660drmVersionNumber0 这里820135955为目前最新的下载版本号，这个4981074，则为其第一个版本 820135955 softwareVersionExternalIdentifiers 4981074 进入重点啦！！！ 删掉刚才的秒拍，给charles的那条链接点选这两个勾！！！breakpoint会让程序停在一开始的将要开始地方(这里就可以更改里面的参数，让其下载4981074历史版本) 关掉charles,iTunes不要关闭 打开charles,选上proxy-&gt;MAC OS X proxy 到将要下载秒拍的那个地方,点击获取，charles breakpoint到这张图 根据下图，修改里面的参数当版本号修改过后，即可点击下面的按钮“excuse”，可能要点击2次，观察iTunes下载是否开始，当要结束时，似乎还要点击一次“excuse”，最后反正就是下载成功了。我这里使用iTool安装，你也可以直接用iTunes安装，个人爱好。到这里，你就可以随意搞你要的各个app版本啦。 附我参考的文章http://www.cocoachina.com/ios/20161214/18351.html","categories":[],"tags":[{"name":"Charles https iTunes 下载历史版本","slug":"Charles-https-iTunes-下载历史版本","permalink":"https://shaohung001.github.io/tags/Charles-https-iTunes-下载历史版本/"}]},{"title":"20170112meetbug","slug":"20170112meetbug","date":"2017-01-12T07:52:13.000Z","updated":"2017-01-12T08:05:34.000Z","comments":true,"path":"2017/01/12/20170112meetbug/","link":"","permalink":"https://shaohung001.github.io/2017/01/12/20170112meetbug/","excerpt":"","text":"记一个比较逗比的bug。由于使用ASDK，在里面使用create a displayNode and return a block uiview: self.progressView = [[SHRecordProgressView alloc]initWithFrame:CGRectMake(0, 0, KScreenWidth, 8)]; self.progressView.backgroundColor = RGBA(245, 245, 245, 0.6); self.progressNode = [[ASDisplayNode alloc]initWithViewBlock:^UIView * _Nonnull{ @strongify(self); return self.progressView; }]; progressView create views when user interactor with device,I change the one of the “views”‘s width,effect that come:progressView-(void)layoutSubviews{ [super layoutSubviews]; NSLog(@&quot;%@&quot;,self); } infinite log :round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0; frame = (0 342; 320 8); layer = &lt;CALayer: 0x180f0080&gt;&gt;:round_pushpin:-[SHRecordProgressView layoutSubviews] + 31:balloon: self = &lt;SHRecordProgressView: 0x1807afd0what does it mean??help:joy: akerdi [3:48 PM]I figure it out,I use FBShimmerView add to the progressView, subViews not inside of shimmerView will disappeare:joy:I am not use to ShimmerView 我使用ASDK，每当我改变progressView中某个subView的Width，程序便一直进入layoutSubViews，同时所有其他的progressView的subViews都不见了，关键是不见了。我以为是ASDK哪里引发的。最后注释掉了FBShimmerView，才发现问题跟他有关。progressView addSubView:FBShimmerView当ShimmerView的contentView大小被我改成和progressView中subViews的最后一个时，除了rect里面View，其他的都不见了。没搞懂FBShimmer的思想，确实不好找问题啊。","categories":[],"tags":[]},{"title":"根据一张gif图返回每张图片","slug":"根据一张gif图返回每张图片","date":"2017-01-10T03:03:38.000Z","updated":"2017-01-10T03:09:06.000Z","comments":true,"path":"2017/01/10/根据一张gif图返回每张图片/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/根据一张gif图返回每张图片/","excerpt":"","text":"由于GPUImage的UIElement在processFrame的block中回调需要用到过渡图片调用，这里处理是将gif图全部取出来，然后在里面进行更新根据一篇博客http://blog.csdn.net/zafir_zzf/article/details/52993853有以下操作： 获取到GIF图的源数据 CGImageSourceRefCGImageSourceRef gifSource = CGImageSourceCreateWithURL((CFURLRef)fileUrl, NULL); 由源数据 SourceRef生成一张CGImageRef类型图片CGImageRef imageRef = CGImageSourceCreateImageAtIndex(gifSource, i, NULL); 拿到里面的图片数size_t gifCount = CGImageSourceGetCount(gifSource); 有CGImageRef生成UIImage ,我们想要的.UIImage *image = [UIImage imageWithCGImage:imageRef]; 最后别忘了给他释放掉CGImageRelease(imageRef);他这里提供了一段代码,记得，需要添加Binary：ImageIO`#import &lt;ImageIO/ImageIO.h&gt;@implementation NSArray (CDIExtention) (NSArray )cdi_imagesWithGif:(NSString )gifNameInBoundle {NSURL fileUrl = [[NSBundle mainBundle] URLForResource:gifNameInBoundle withExtension:@”gif”];CGImageSourceRef gifSource = CGImageSourceCreateWithURL((CFURLRef)fileUrl, NULL);size_t gifCount = CGImageSourceGetCount(gifSource);NSMutableArray frames = [[NSMutableArray alloc]init];for (size_t i = 0; i&lt; gifCount; i++) {CGImageRef imageRef = CGImageSourceCreateImageAtIndex(gifSource, i, NULL);UIImage *image = [UIImage imageWithCGImage:imageRef];[frames addObject:image];CGImageRelease(imageRef);}return frames;}@end`","categories":[],"tags":[]},{"title":"忙碌的2016","slug":"忙碌的2016","date":"2017-01-10T02:07:21.000Z","updated":"2017-01-10T02:07:42.000Z","comments":true,"path":"2017/01/10/忙碌的2016/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/忙碌的2016/","excerpt":"","text":"刚过年回来不到一个月就被公司辞了，原因是这样的：第一我是去年进的公司，具体几月份进的记不清了，反正离6个月的试用期还有半个月而已。试用期间能做的基本也算是安分守己的做了，最后由于ios主管度蜜月去了，把工作丢给我了，从来没有自己扛过项目的我就这样被利用给踢了。哎，说实话，那主管真不是什么好鸟，明知道他的技术后续工作也是无法完成的，就找个理由把皮球踢我了（他知道我家里有个帮手，一直提防着我）。其实大可不必这样的，小心眼。后面我说我要结婚了，估计他们也猜到几分了，看我比较简单吧，辞了就辞了，忍了。 辞掉工作的我一直在房间里学习并养胎，但是那做饭太惨了，厨房在一楼，我们住在三楼，还是共用的厨房，每次煮个饭所有的的东西要搬下去，煮好了还得搬回来，作为一个孕妇的我确实也是不太方便的。四月份的时候决定还是回家养胎好了。 回到家的我（婆婆家），刚开始婆婆照顾的确实非常不错的，全心全意的照顾我，每天都给我煮好吃的。可是五一之后，我们是5.3号结的婚，5.4号二姐生小孩，之后全家人就天天围着二姐转了，哎，地位从此一落千丈啊。悲伤。。。说实话有点不大乐意住家里了的。但是又没有办法。忍了，毕竟产妇也是非常重要的，如果没有照顾我的话或许会留下bing","categories":[],"tags":[]},{"title":"2016年回顾","slug":"2016年回顾","date":"2017-01-10T01:59:09.000Z","updated":"2017-01-10T02:03:26.000Z","comments":true,"path":"2017/01/10/2016年回顾/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/2016年回顾/","excerpt":"","text":"说说我的2016年，回顾下我一共做了啥，学了啥，经历了啥。 我从2015年年末任职目前的公司“鱼渊”，直到2016年4月左右停止更新“宝来屋”这一款上线的APP。这个APP跟我渊源之深，也只能说，里面主要的全部代码以及框架构建是我一次比较大的尝试，在里面学到了很多很多。由于在“宝来屋”大规模使用RAC，接下来的由于有新的要求，我们重做了一款“呱拍”这一款APP至今，思路都没太走偏。2016的春节把丫头带回去见爸妈，别说媳妇要娶进门了，爸妈还没见过，哈哈，然后我说，这丫头，怀孕了。春节回上海，丫头也还在上班，我继续加班搞“宝来屋”。由于住在类似酒店公寓，丫头怀孕不能吃到比较好的，确实比较麻烦，丫头在3、4月份的时候也由于经常呕吐、肚子越来越大，后来被辞职在家。一楼做个菜整到住的3楼来菜都凉了。于是我特么做了个大胆决定，让只在春节回到家的丫头，送她带火车站，一个人到我老家，大姐开车去接她。蛋疼蛋疼。。。 5月份的时候，我放了10天得假期回去结婚了。那个时候丫头肚子大大的，简简单单举行完婚礼，下午的时候家族一个大叔在我们小房间帮忙举行完我们俩的夫妻酒。那个酒很劲大，我们俩都睡着了。现在回想起来，一切皆是那么顺其自然。虽然有点草草了事，不过没办法，先生存，这是我的座右铭。 回来后，我的工作继续着。一个人待着实在无趣不行。期间暑假，大学班长和哥们转来上海工作，住我那。由于一个人住惯了，难免不太喜欢，毕竟大男人的我喜欢裸睡。最后的最后有点不欢，因为呆的时间过久（两个月），他在找到住所没那么快搬过去，我也是过于心急。不过希望对方不要想歪了，把大学难得的同学关系想复杂了。我没有别的不满和不快，毕竟一个结婚的人确实变化会很大，能让同学到主卧住俩月，我已经没谁了，他以后会明白的😁。 七八月份我们开始了新的APP“呱拍”，里面有用到诸如拍摄、文字图片、图片滤镜。我在“宝来屋”全面使用的RAC和nimbus在前期帮下了忙，和新来的同事哥们“杰张”努力完成着。图片滤镜那边，始终不得要领，看不懂GPUImage的使用，没关系，最后用完全生成图片方法全部替换，于是有些时候会出现内存暴涨的情况。纯文字在之前为文字text，后来改成了文字图片，最开始的图始终无法生成高清图，后来也终于成功。图片滤镜后来加功能，要有贴图，贴图这时又不高清，后来搞清楚，把图片放到@3x情况下，终于解决。下半年的晚上都很堕落，老婆不在，刚结完婚就离开了，很失落，一直打游戏。白天都还好，得到的知识也是数之不尽，晚上就堕落了很多。这里排列一下学习到的相关知识能力：写了一个LOLdemo，地址：https://github.com/shaohung001/LOLDemo-SomeTransitionDemo ，使用了ASDK、GPUImage、转场、RAC、POP动画；研究了jsPatch的在线修改bug方案、Realm集成leancloudIM的聊天框架、qiniu的一些图片、视频在线适配方案、qiniu的域名更改方案、fontAwesome结合阿里的IconFont方案，需要注意的一点，其text需要使用Attribute富文本哟、IJK视频库的简单使用以及搞了个播放功能类；React-native的使用，这个比较牛逼，已经能开发一两个小程序，也只能小程序，止于学习Redux，认识了其局限性，不过帮我平缓的过度了没写过Css布局的ASDK的布局方式；前期硬着头皮写了swift，用RAC封装了一个简单聊天使用类，后来，你懂得，console基本打不出po代码，不能debug的代码多么不幸，留待以后继续，没学的很深，swift不会难。只要我们能写，不怕没资料，肯定能学会的；整了个越狱苹果，用破解Reveal分析各个APP内部构造，以下给出Apple APP的APPID：App Store - com.apple.AppStoreCalculator - com.apple.calculatorCalendar - com.apple.mobilecalCamera - com.apple.cameraClock - com.apple.mobiletimerCompass - com.apple.compassContacts - com.apple.MobileAddressBookFaceTime - com.apple.facetimeFind Friends - com.apple.mobileme.fmf1Find iPhone - com.apple.mobileme.fmip1Game Center - com.apple.gamecenterHealth - com.apple.HealthiBooks - com.apple.iBooksiTunes Store - com.apple.MobileStoreMail - com.apple.mobilemailMaps - com.apple.MapsMessages - com.apple.MobileSMSMusic - com.apple.MusicNews - com.apple.newsNotes - com.apple.mobilenotesPhone - com.apple.mobilephonePhotos - com.apple.mobileslideshowPodcasts - com.apple.podcastsReminders - com.apple.remindersSafari - com.apple.mobilesafariSettings - com.apple.PreferencesStocks - com.apple.stocksTips - com.apple.tipsVideos - com.apple.videosVoice Memos - com.apple.VoiceMemosWallet - com.apple.PassbookWatch - com.apple.BridgeWeather - com.apple.weather 搞了图片贴图功能（一开始觉得很难，返回一看，瞬间明了）；用公司项目测试了节日换肤活动；丢弃了环信的聊天方案，改成轻量级的leanCloudIM，原因无他，leancloudIM你只需要能自己服务，即能使用仅仅通讯数据，我去掉所有database，自己整合了一个，虽然方案还不满意，不过，自己能控制，将能做更多的事情；同时使用了leancloud的在线crashReport功能；在制作视频这一块，目前的2.0“呱拍”上线全部使用SCPlayer的整套方案，原因是老板需要能有undo功能，我在没尝试GPUImage的相关movieWriter能力，不敢使用，毕竟使用下去，如果失败将失去很多时间。SCPlayer这里有个好处，就是其在滤镜更换页面，使用openGL能力，在我拍摄或者从手机取视频，到trim、crop、rotate、addMusic，addFilter，到最终发布，才export一个Movie，在某种程度来说，很轻便。不过目前我越来越觉得局限性，目前的功能需要有mv的更换场景能力，SCPlayer使用CIImage，里面很多滤镜要么不能用，要么用起来很别扭，尝试了几次后放弃了，咬着牙转换GPUImage。我在过渡过来的页面，先打包好，这一点参考了美拍。目前参考了别的前辈的知识，准备重写拍摄页面，这一块结合ASDK和GPUImage来做；trim视频、旋转视频、crop视频的页面使用AVFoundation的能力； 基本我在研究新的技术，我负责的页面也很少，仅为发布、聊天、登陆页面维稳，其他的基本由另一个队友使命扛着。由于我的工作比较蛋疼，说难吧，真特么难，有多难，只有自己知道，老板肯定不知道，我早上一开始工作坐着就起不开身，但是将就着3、4个星期都没有进展，说什么自己都蛋疼。每次开会，蛋疼；心里老想着，这次开会我估计会被批评了吧，该滚蛋了吧。然后心里就那里嘀咕，不怕不怕，我这技术，出去很多公司多搂着要咧，蛋疼蛋疼。帮不了老板，确实蛋疼，老板要的功能还是特别前沿，特别难的，我一个研究framework都快hold不住了。也多亏老板现在还没给我T了，，，T.T;搞懂了CMTime到底是怎么回事、CGAffineTransform的真实能力，以及其一些基本用途；学习过“Origami”的使用，终于在后头搞懂其做法：switch、transition、和连线、start、end、更换其他属性，如color。“Origami”给我最大的印象就是，他最最直观；我的学习曲线是，不管啥，facebook最牛逼，facebook的开源技术能学的全学了，对了facebook的直播技术什么时候开源！！！哈哈😆；把facebook开源的parse Server在本地建立了起来，那个叫心动啊；曾经使用过郭宏宇的BeeFramework，也测试过他的另一款使用html开发的framework，后来放弃，不是好的解决方案。在看到React-native，湿了，眼眶湿了，使命的把玩，由于不精通前段，硬是搞到能开发几个小APP，不过缺陷也是明显的，想着全栈，绕过Apple审查，确实比较难，等着腾讯的OCS或者滴滴的DynamicCocoa出来吧，毕竟我觉得facebook会做正确的选择；使用MLeaksFinder找找内存泄漏；还有整了半个github.io的挂载网页；还有很多很多的framework被我用了又丢丢了又用的。 这个2016学到的技术，要好好消化确实很多。 以上有几个能力学起来之后便可以自己独立开发一款很好很好的APP，绝对不是外面那些个妖艳贱货APP能比的。 8月20号我提前回家，计算了后面的节日，觉得差不多可以回去。没想到，丫头当天晚上就开始肚子痛。晚上12点把大姐喊过来，我和大姐、老妈、丫头就这么几个去市妇幼保健院了。隔天下午生下来现在的小宝。我干儿子名字我取的，叫承集，这个小屁孩就叫启程好啦。 在医院那个叫累啊，睡都没地方，妈妈睡地板，好硬好硬的，我老是跑到外面睡，那些天真累，又担心小宝被偷了，又热、又累，，，一堆堆事情。后来终于回家了，不用担心小宝被偷了，就是蛋疼的睡地板，背好疼好疼，好硬的地板啊。半夜丫头起来好多次，都不敢喊我，硬是一个人扛着到现在，心疼，，，我只能尽力帮忙，小宝还特能叫，这猴🐒，尖叫猴🐒。陪产假回去公司继续搞我的工作，在快10月多的时候，把丫头和小宝整到上海来，由于小宝太能叫，然后他的黄疸还没有消下去，于是又把他送去他外公家（之前他们先到外公家住了好久，原因是家里丫头一个人带太累，老妈老爸在帮二姐带孩子）。。。当时是这样的，我把大宝小宝送到火车站后，心疼死了，他们两个坐到目的地，小宝外公接的他们。 后来不久说小宝被细菌感染，肿了，我周五晚上坐火车去照顾，那个时候小宝黄的眼睛都绿了—-&gt;最喜欢取外号的我送给小宝最好听的名字“阿黄”。那几天也是累的呀，周日正好都出院，我就先回上海了，他们一行回家了。 回来继续晚上打游戏，白天上班，周末就找“蓉儿”同桌玩，但系，他找女朋友后玩的机会就变少咯。。。 11月份，我搬家了，搬得不远，我和我以前的同事“队长”和队长老婆，就是他老婆，没结婚也没差了，一直搬一直搬，东西也太多了，，我去。 后来要办理暂住证，我的拖拉症还是硬着头皮，确实是硬着头皮啦，一直打电话给中介，帮我忙去办理暂住证，中介就打电话给房东，最后终于办成功了。签字需要丫头回来，刚好，我爸也被我说动，过来上海帮忙带孩子，丫头和小宝就先过来了，我去了趟小宝外公家，把母子俩接过来，因为丫头公积金一直没落下，所以要居住证去办理生育金。 年前终于丫头把生育金也领了下来。过程让丫头写着了，后期会贴上。 一年顺顺利利的过来了，过来那么久，老爸还没转过上海，趁着元旦放假三天，把老婆、老爸、儿子带去转了下。老爸第一次做地铁，进闸门的时候，没及时过来，被闸门卡在外面，后来钻进来，哈哈。过去我一路背着阿黄，他一直睡着，真能睡。逛了陆家嘴，一路给老爸和阿黄拍拍照，去坐渡轮，经过南京东路，下午过得真开心，好久没有把工作丢在后面了。后来回来，阿黄太久没换尿布，腿都快湿掉了。 小时候我们的时间都是按5分钟算，小学按课间操算，初中按一节课算，高中按半天算，大学都是1天天打游戏过去算，出来工作，时间都是一星期一星期，于是1年回头一下就过去。但是还是希望未来更好，高歌猛进，不停歇就会前行。丫头回来，晚上都打不了游戏了，要不帮忙带孩子，要不写东西学东西，学的还不少啊，就是阿黄好吵，这尖叫猴 啊。。。蛋疼蛋疼，，，就蛋疼蛋疼吧，别人想尖叫猴都么得，哈哈哈","categories":[],"tags":[]},{"title":"Realm数据库的创建","slug":"Realm数据库的创建","date":"2017-01-10T01:55:23.000Z","updated":"2017-01-10T01:58:50.000Z","comments":true,"path":"2017/01/10/Realm数据库的创建/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/Realm数据库的创建/","excerpt":"","text":"1：创建成一个库重要的几点，一定要加到Embed framework里面，如图还有！！！bash&quot;${BUILT_PRODUCTS_DIR}/${FRAMEWORKS_FOLDER_PATH}/Realm.framework/strip-frameworks.sh&quot;Run Script是让你在上传到苹果商店的时候打进去。不然里面会有问题，最大的问题就是，通不过审核，哈哈。使用的话，去看Realm的doc。","categories":[],"tags":[]},{"title":"xcode碰到-lcrt1.3.1.o","slug":"xcode碰到-lcrt1-3-1-o","date":"2017-01-10T01:54:43.000Z","updated":"2017-01-10T01:54:58.000Z","comments":true,"path":"2017/01/10/xcode碰到-lcrt1-3-1-o/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/xcode碰到-lcrt1-3-1-o/","excerpt":"","text":"xcode 碰到这种错误 选择target-》General-》Deployment Target 一项，将手机版本改为8.0以后即可","categories":[],"tags":[]},{"title":"使用GPUImage一些坑","slug":"使用GPUImage一些坑","date":"2017-01-10T01:50:38.000Z","updated":"2017-01-10T01:54:08.000Z","comments":true,"path":"2017/01/10/使用GPUImage一些坑/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/使用GPUImage一些坑/","excerpt":"","text":"首先理解了安装，作者推荐动态库安装，好处就是特么的，你看到的source都是输入源，filters都是滤镜过程，output就是出口啦 GPUImageMovie能接受1）asset、2）AVPlayItem、3）URL路径，，，如果你有特殊要求，可以使用GPUImageMovieComposition这个类，允许你输入AVFoundation的多音频输入、画质动作、剪切之后的AVMutableComposition，我就用的这个 GPUImageMovie没有音频播放，美拍不知道怎么整的，估计我觉得就是使用另外一些人提供的思路，对源码侵入加入播放器可以参考这个：1）：http://blog.csdn.net/personsky/article/details/529929192）：https://gist.github.com/anonymous/5112961毕竟音频播放就是个形式，，要不然你有没有美拍的源码，对了美拍还真就是用GPUImage，用的真是6啊，，偶像3)：如果你没有用AVMutableComposition修改视频orientation，其滤镜里面也有能修改方向的方法setInputRotation用法如：[sepiaFilter setInputRotation:kGPUImageRotateRight atIndex:0]; 检查滤镜过程使用：filter setFrameProcessingCompletionBlock:^(GPUImageOutput *output,CMTime frameTime)比如你可以在GPUImageElement里面修改这个 注意检查输入滤镜的pipeline过程有没有问题http://blog.csdn.net/u1031/article/details/48712163这个大哥的几张图挺好的，看了之后对addTarget有更多的理解 多视频输入我这还好，没有什么问题，多语音的话，你就考虑使用GPUImageMovieComposition的audiomix，但是没法控制播放了似乎， NSString*pathToMovie = [self movieSavedPath];unlink([pathToMovieUTF8String]);// If a file already exists, AVAssetWriter won’t let you record new frames, so delete the old movie可以使用快捷unlink视频，我特么不知道，仍然在使用filemanager，low逼格 附一个滤镜表在我国—&gt;China🇨🇳境内的名字翻译地址http://blog.csdn.net/qq_27074387/article/details/52221938 在多视频输入里面，将self.movieFile.playAtActualSpeed=YES;playAtActualSpeed都写上，如果视频不同步，有一个先完成了，则会有可能10s视频变成了4s，有时前一段视频播放正常，后一段就视频画面不动了。 forceProcessingAtSize：CGSize给其定义大小 GPUImage pipeline1）、创建图片处理类GPUImagePicture把图片传进去stillImageGPUImagePicture staticPicture = [[GPUImagePicture alloc] initWithImage:stillImage smoothlyScaleOutput:YES];2）、把多个滤镜对象放到数组中NSMutableArray arrayTemp=[NSMutableArray array];[arrayTempaddObject:RGBFilter];3）、创建GPUImageFilterPipeline对象 初始化使用initWithOrderedFilters:(NSArray) filters input:(GPUImageOutput)input output:(id )output;这个方法；这个方法需要三个参数：filters：多个滤镜的数组input：被渲染的图片（步骤1 的staticPicture 对象）output：渲染后的图片的容器（类型是view）GPUImageFilterPipeline filterPipeline = [[GPUImageFilterPipeline alloc] initWithOrderedFilters:arrayTempinput:staticPictureoutput:output];4）、渲染图片 使用processImage（此方法是GPUImagePicture类下的）和useNextFrameForImageCapture(此方法是GPUImageOutput下也就是单个滤镜)；[staticPicture processImage];[filteruseNextFrameForImageCapture];//这个filter 可以是RGBFiltertoonFilter等5）、获取图片 使用currentFilteredFrame（此方法是GPUImageFilterPipeline类下的）；UIImage img = [pipeline currentFilteredFrame];6）、对于使用GPUImageUIElement没有给contentView设置rect则会出现：: CGContextTranslateCTM: invalid context 0x0. If you want to see the backtrace, please set CG_CONTEXT_SHOW_BACKTRACE environmental variable.*** Assertion failure in -[GPUImageFramebuffer generateFramebuffer], address/Submodules/framework/Source/GPUImageFramebuffer.m:156同时breakpoint跳到","categories":[],"tags":[]},{"title":"debug断点不进去且无效","slug":"debug断点不进去且无效","date":"2017-01-10T01:49:46.000Z","updated":"2017-01-10T01:49:56.000Z","comments":true,"path":"2017/01/10/debug断点不进去且无效/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/debug断点不进去且无效/","excerpt":"","text":"检查edit scheme 的Build Configuration 是否为debug模式 还有一点，在target里面的Build Setting 的 generate debug symbols 改为YES。 generate debug symbols在打包上传APP Store时能给项目压缩，平常给其打开可调试断点。 其原理？不懂，不过打开就能debug了，，，","categories":[],"tags":[]},{"title":"mac升级到10.11cocoapods不能用","slug":"mac升级到10-11cocoapods不能用","date":"2017-01-10T01:48:53.000Z","updated":"2017-01-10T01:49:20.000Z","comments":true,"path":"2017/01/10/mac升级到10-11cocoapods不能用/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/mac升级到10-11cocoapods不能用/","excerpt":"","text":"10.11 cocoapods安装： sudo gem install -n /usr/local/bin cocoapods","categories":[],"tags":[{"name":"cocoapods","slug":"cocoapods","permalink":"https://shaohung001.github.io/tags/cocoapods/"}]},{"title":"UIBazier学习和CAMediaTimingFunction","slug":"UIBazier学习和CAMediaTimingFunction","date":"2017-01-10T01:34:44.000Z","updated":"2017-01-10T01:47:36.000Z","comments":true,"path":"2017/01/10/UIBazier学习和CAMediaTimingFunction/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/UIBazier学习和CAMediaTimingFunction/","excerpt":"","text":"UIBezier，这篇文章写得很好，简洁易懂。我认为主要用到的有：1：创建UIBezierPath* aPath = [UIBezierPath bezierPath];2：设置初始位置[aPath moveToPoint:CGPointMake(100.0, 0.0)];3：拐点aPath.lineCapStyle = kCGLineCapRound;//线条拐角aPath.lineJoinStyle = kCGLineCapRound;//终点处理4：stroke和fill的区别5：- (void)addQuadCurveToPoint:(CGPoint)endPoint controlPoint:(CGPoint)controlPoint方法由于有setToPoint初始位置，有endPoint，然后controlPoint为改变曲面的可以参考下图6：- (void)addCurveToPoint:(CGPoint)endPoint controlPoint1:(CGPoint)controlPoint1 controlPoint2:(CGPoint)controlPoint2//多参值7：这句话很好：使用UIBezierPath创建多边形—在path下面添加直线条形成多边形多边形是一些简单的形状,这些形状是由一些直线线条组成，我们可以用moveToPoint: 和 addLineToPoint:方法去构建。方法moveToPoint:设置我们想要创建形状的起点。从这点开始，我们可以用方法addLineToPoint:去创建一个形状的线段。我们可以连续的创建line，每一个line的起点都是先前的终点，终点就是指定的点。// Only override drawRect: if you perform custom drawing.// An empty implementation adversely affects performance during animation.- (void)drawRect:(CGRect)rect{ UIColor *color = [UIColor redColor]; [color set];//设置线条颜色 UIBezierPath* aPath = [UIBezierPath bezierPath]; aPath.lineWidth = 5.0; aPath.lineCapStyle = kCGLineCapRound;//线条拐角 aPath.lineJoinStyle = kCGLineCapRound;//终点处理 // Set the starting point of the shape. [aPath moveToPoint:CGPointMake(100.0, 0.0)]; // Draw the lines [aPath addLineToPoint:CGPointMake(200.0, 40.0)]; [aPath addLineToPoint:CGPointMake(160, 140)]; [aPath addLineToPoint:CGPointMake(40.0, 140)]; [aPath addLineToPoint:CGPointMake(0.0, 40.0)]; [aPath closePath];//第五条线通过调用closePath方法得到的 [aPath stroke];//Draws line 根据坐标点连线 } CAMediaTimingFunction时间线可以通过CAMediaTimingFunction *a = [CAMediaTimingFunction functionWithControlPoints:0.85 :0.01 :0.33 :1.14];//创建","categories":[],"tags":[]},{"title":"一些查询很久才得出的答案或者尝试很久得到的答案","slug":"一些查询很久才得出的答案或者尝试很久得到的答案","date":"2017-01-10T01:31:14.000Z","updated":"2017-01-10T01:33:56.000Z","comments":true,"path":"2017/01/10/一些查询很久才得出的答案或者尝试很久得到的答案/","link":"","permalink":"https://shaohung001.github.io/2017/01/10/一些查询很久才得出的答案或者尝试很久得到的答案/","excerpt":"","text":"发表于(2 months ago) 地址 一些查询很久才得出的答案或者尝试很久得到的答案，类目主要用在chat、social、video、multi pic、watermark、filter、audio、Parse（FB）、个人无后台开发 1：由于用到贴图，网上寻觅不得，只说 UIGraphicsBeginImageContext(&lt;#CGSize size#&gt;)-&gt;换成UIGraphicsBeginImageContextWithOptions(&lt;#CGSize size#&gt;,&lt;#Bool opaque#&gt;,&lt;#CGFloat scale#&gt;) 上面这句话是重点 scale是缩放因子，使用[UIScreen mainScreen].scale即可； 中间的opaque是识别里面有没有alpha通道，如果有通道则填入NO，相反的哦； size则为你的图片的大小，比如上面一张大图，下面一张watermark，这size为大图的大小，毕竟大图在下面，第一个放入的； 这样子图片就会变为高清！！！没错，如果还没有变为高清，是有另一个原因的，那就是你的贴图不是@2x或者@3x的倍率，将其放入图片文件夹或者source，加入后缀，一定使用@3x，@2x也不怎么清晰！！！ 最后一步才是本文重点，网上没人说，自己尝试出来的 这一段是苹果私密api，用来找出Reveal的各个APP的bundleID，挺好用的 Class LSApplicationWorkspace_class = objc_getClass(&quot;LSApplicationWorkspace&quot;); NSObject* workspace = [LSApplicationWorkspace_class performSelector:@selector(defaultWorkspace)]; NSArray *array = [workspace performSelector:@selector(allApplications)]; id a = array[0]; NSLog(@&quot;apps: %@&quot;, [workspace performSelector:@selector(allApplications)]);","categories":[],"tags":[]},{"title":"iOS导航栏颜色和给的颜色不一样","slug":"iOS导航栏颜色和给的颜色不一样","date":"2017-01-09T02:11:10.000Z","updated":"2017-01-09T02:11:32.000Z","comments":true,"path":"2017/01/09/iOS导航栏颜色和给的颜色不一样/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/iOS导航栏颜色和给的颜色不一样/","excerpt":"","text":"发表于(2016-12-14 19:43:11) 原因在于navigationBar的translucent，也就是是否带有透视选项的原因。有时候APP上滑要看到美轮美奂的下边的图片如油画膜一般，慢慢掠过，默认该属性为true。此时的设置颜色就会和给定的颜色不一般，会有一层白色膜一般。但是将translucent设置为NO的话，加入的颜色，导航栏会看来有点厚重，看情况而定吧","categories":[],"tags":[]},{"title":"UIBazier学习","slug":"UIBazier学习","date":"2017-01-09T02:10:05.000Z","updated":"2017-01-09T02:10:44.000Z","comments":true,"path":"2017/01/09/UIBazier学习/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/UIBazier学习/","excerpt":"","text":"发表于(2016-12-14 19:41:34) 粗略的看了一遍这篇博客UIBezier简介易懂，","categories":[],"tags":[]},{"title":"列举Apple的示例demo，同时提供了一个github下载地址","slug":"列举Apple的示例demo，同时提供了一个github下载地址","date":"2017-01-09T02:09:02.000Z","updated":"2017-01-09T02:09:48.000Z","comments":true,"path":"2017/01/09/列举Apple的示例demo，同时提供了一个github下载地址/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/列举Apple的示例demo，同时提供了一个github下载地址/","excerpt":"","text":"发表于(2016-12-06 18:24:22) http://www.jianshu.com/p/79a29a23d980这个简书写了，感觉挺有用的，毕竟看其介绍能学到比较中肯的内容","categories":[],"tags":[]},{"title":"使用JSPatch的一些经验总结","slug":"使用JSPatch的一些经验总结","date":"2017-01-09T02:05:35.000Z","updated":"2017-01-09T02:08:34.000Z","comments":true,"path":"2017/01/09/使用JSPatch的一些经验总结/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/使用JSPatch的一些经验总结/","excerpt":"","text":"发表于(2016-12-01 09:20:19) 在这之前你得 尽量简化你的代码,尽量把你要实现的功能写成方法,这好替换, 在使用oc转换成js的时候,可以使用JSPatch convertor 这个软件来先转换一下,然后在具体修改,转换以后修改你的代码的时候 一定要注意是否是js对象,还是oc对象,这个地方是我解析数据用的,传进来的是一个id类型的一个对象.这是oc的,所以我要在js里使用的话必须得用,.toJS()来转化成 (图一),如果你是在js里面初始化的对象,那就是js的obj,不用再转换,如(图二) 你oc里面的下划线_,都要替换成双下划线__,是都要替换 NSArray/NSDictionary/NSString的处理:这个用JSPatch convertor 都可以转换出来要注意的就是你操做的是不是js对象, 只要是类带的属性,都要加()比如 model.ptitle(),因为默认帮你实现了setter 和getter的方法,你调用的是方法,方法就得加() 有一个大坑.是for in 在js里面的for in和oc里面的不一样【链接】JSPatch使用原理详解http://blog.csdn.net/iphonecat/article/details/50963317这文章很详细,可以看一下","categories":[],"tags":[]},{"title":"was mutated while being enumerate 这个错误","slug":"用for循环的出操作中操作错误","date":"2017-01-09T02:03:42.000Z","updated":"2017-01-09T02:04:52.000Z","comments":true,"path":"2017/01/09/用for循环的出操作中操作错误/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/用for循环的出操作中操作错误/","excerpt":"","text":"发表于(2016-11-30 10:38:14) 用for循环的（id object in array）这种方法，如果内部有调整操作，则会跳出来was mutated while being enumerate 这个错误。面对这个崩溃，不知道从哪里入手。其实可以这样理解，我要操作object对象，挪动它，那么势必会影响后面哥们的战队。扩展一下，我object在最后，是不是就不会崩溃了？是的，因为操作了就不影响有站错队的哥们了，他们全都有队可站。这里有几个做法： for （int i=0；i&lt;x;i++) [array enumerateObjectsUsingBlock:^(id _Nonnull obj, NSUInteger idx, BOOL * _Nonnull stop) { do something... *stop = YES; }]; 或者操作完你这一个之后，break整个循环双击666","categories":[],"tags":[]},{"title":"AsyncDisplayKit的learning","slug":"AsyncDisplayKit的learning","date":"2017-01-09T01:59:17.000Z","updated":"2017-01-09T02:02:08.000Z","comments":true,"path":"2017/01/09/AsyncDisplayKit的learning/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/AsyncDisplayKit的learning/","excerpt":"","text":"发表于(2016-11-29 17:35:30) 文章一这篇文章讲了布局调用顺序measureWithSizeRange当我们使用 ASDK 布局时，需要做下面四件事情中的一件：提供 layoutSpecBlock 覆写 - layoutSpecThatFits: 方法覆写 - calculateSizeThatFits: 方法 覆写 - calculateLayoutThatFits: 方法*只有做上面四件事情中的其中一件才能对 ASDK 中的视图或者说结点进行布局。同时给了一个网址Foggy-ASDK-Layout，我学了一下，对比React-native，一模一样。然后找了下这篇文章文章二里面主要讲了有哪些基本属性enum可以使用","categories":[],"tags":[]},{"title":"CMTime中fps的scale理解和UIPanGestureRecorgnize的手势记录","slug":"CMTime中fps的scale理解和UIPanGestureRecorgnize的手势记录","date":"2017-01-09T01:57:27.000Z","updated":"2017-01-09T01:58:42.000Z","comments":true,"path":"2017/01/09/CMTime中fps的scale理解和UIPanGestureRecorgnize的手势记录/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/CMTime中fps的scale理解和UIPanGestureRecorgnize的手势记录/","excerpt":"","text":"发表于(2016-11-29 10:39:20) 视频帧处理有一点要明确，CMTimeMakeWithSeconds(Float64 seconds,int32_t preferredTimescale)这里seconds是第几次，preferredTimescale为片，比如我要每秒一帧图片从视频取出来`AVAssetImageGenerator assetImageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:self.viewModel.asset];CGFloat scale = KScreenWidth1.f/MAXImageShowInCollection/80;//collectionFlowSize width/heightassetImageGenerator.maximumSize = CGSizeMake(200scale,200);assetImageGenerator.appliesPreferredTrackTransform = TRUE;Float64 duration = CMTimeGetSeconds(self.viewModel.asset.duration);NSMutableArray timeArr = [[NSMutableArray alloc]initWithCapacity:0];if (self.segmentedControl.selectedSegmentIndex) {for (int i=0; i&lt;8; i++) {//MIN(duration, 60)[timeArr addObject:[NSValue valueWithCMTime:CMTimeMakeWithSeconds(i, duration/8)]];}}else{for (int i=0; i&lt;floor(duration); i++) {[timeArr addObject:[NSValue valueWithCMTime:CMTimeMakeWithSeconds(i, 1)]];}}[assetImageGenerator generateCGImagesAsynchronouslyForTimes:timeArr completionHandler:^(CMTime requestedTime, CGImageRef image, CMTime actualTime, AVAssetImageGeneratorResult result, NSError error){@strongify(self);NSLog(@”actual got image at time:%f”, CMTimeGetSeconds(actualTime));if (image){UIImage img = [UIImage imageWithCGImage:image];[self.imageArray addObject:img];if (self.imageArray.count==timeArr.count) {dispatch_async(dispatch_get_main_queue(), ^{@strongify(self);[self.collection reloadData];});}} }];` 此处参考了美拍的如果取10s以内的视频，则都是以1s一片取图片CMTimeMakeWithSeconds(i, 1)，如果为1分钟或者美拍的那种5分钟，则就取8帧，总共就8帧CMTimeMakeWithSeconds(i, duration/8)。 UIPanGestureRecognize在手势滑动的判断我犯得错误是使用坐标对坐标，两个会变动的参数判断，这里给自己提一个醒！！！每次对其内部判断，都是在判断时，对[x locationInView:trimView]判断，对目前你的手在区域内位置判断，不然会狂闪。[[leftPanGesture rac_gestureSignal] subscribeNext:^(UIPanGestureRecognizer * x) { @strongify(self); if (x.state == UIGestureRecognizerStateBegan) { }else if (x.state == UIGestureRecognizerStateChanged) { if ((rightPullView.centerX-[x locationInView:trimView].x)&gt;self.miniTwoLineLength) { }else{ } }道理都懂，有时就会犯迷糊，谨记","categories":[],"tags":[]},{"title":"苹果加急审核","slug":"苹果加急审核","date":"2017-01-09T01:56:12.000Z","updated":"2017-01-09T01:56:42.000Z","comments":true,"path":"2017/01/09/苹果加急审核/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/苹果加急审核/","excerpt":"","text":"发表于(2016-11-29 10:34:01) 转载至http://blog.csdn.net/showhilllee/article/details/19541493加急入口在Apple Connection 右下角 打电话的似乎寻求不到太大帮助，毕竟团队不一样。apple 审核团队向来神秘闻名，我们由于UGC的问题，被打了很多次了，其实对着他写的回复修改，也只能遮掩。我们遇到这次很逗，审核团队要求我们给“注册”时的账号，不是demo account，我们注册时有短信验证，给也没用啊，，，蛋疼，，，","categories":[],"tags":[]},{"title":"这里讲述一个7牛存放图片服务的更改为自定义融合CDN的经历","slug":"这里讲述一个7牛存放图片服务的更改为自定义融合CDN的经历","date":"2017-01-09T01:52:17.000Z","updated":"2018-02-24T15:48:40.000Z","comments":true,"path":"2017/01/09/这里讲述一个7牛存放图片服务的更改为自定义融合CDN的经历/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/这里讲述一个7牛存放图片服务的更改为自定义融合CDN的经历/","excerpt":"","text":"发表于(2016-11-24 15:25:55) 测试域名是有限制的,测试域名，其客户端配置：单 IP 每秒限制请求次数 10 次，大于 10 次 403 禁止 5 秒；限速：单 url 限速 8Mbps，下载到 10MB 之后，限速 1Mbps 带宽没有区别。所以不建议将测试域名配置在生产环境上。上面是需要更改为自定义融合CDN的原因。接下来需要做的是，点开“融合CDN”-&gt;新增一个加速域名列表，其中一个填写你要做的二级域名，比如主域名为baidu.com，那么你可以写example.baidu.com,直接选确定。审核12个小时以内（我的2个小时），出现在其“域名信息”一栏“填写CNAME”，此时复制“源站信息”的右边一串字符，将其复制到服务器(因为公司大陆备案过的域名在阿里云，那么就进入阿里云的服务器控制端)上的新增二级域名的地方。按照https://support.qiniu.com/hc/kb/article/68977这个里面的这张图片记录类型：就写CNAME主机记录：比如我的example.baidu.com就写example即可解析线路：为默认记录值：填写七牛在“域名配置”-&gt;CNAME所属值：别的其他都不用管，保存即可接下来等待大概半小时，在“内容管理”随便一个您已经上传的文件，点击小眼睛，文件显示出来，那么就是正确的了，以后就可以使用这个链接了。这里补充两点1：你可以用站长工具测试某一个文件，看ping通花了多少毫秒，我对比了7牛的测试连接，44ms，而通过新的自定义的却很慢，达到280ms，提个工单，确实快了很多，88ms。2：https://www.v2ex.com/t/292587这里有个文章讲了这么个事情，所以特么需要注意啦，我现在还在调整这个问题，看如何解决。","categories":[],"tags":[]},{"title":"16-11-18办理暂住证_过程_上海","slug":"16-11-18办理暂住证-过程-上海","date":"2017-01-09T01:47:46.000Z","updated":"2017-01-09T01:52:02.000Z","comments":true,"path":"2017/01/09/16-11-18办理暂住证-过程-上海/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/16-11-18办理暂住证-过程-上海/","excerpt":"","text":"发表于(2016-11-18 15:11:27) 昨天去搞暂住证，我这里记录下过程，可以参考参考，毕竟这么累比的，当做吐槽加有意义的参考文案吧。首先办理证件必须是周一至周五。当天还上班，中午特地骑到（闸北区工作的话，社保中心在沪太路延长中路附近）电动车去把超过6个月的社保单打印出来了。大概1点半，出发去问门卫处（小区在合阳小区），门卫告诉我去小区的居委会（合阳小区内的居委会，问一下就到了）；到了居委会，居委会说，我们这里办不了，这里一个工作人员也在附近的公安局（其实就在附近，很近，一定一定要保证电动车满电，说不定有其他用处）；好吧，我屁颠屁颠骑电动车到公安局（宜川路/白水路的公安局），取个号，到我了，该处为40多号，说往前走几步到51号左转，2点开始办公；我又屁颠屁颠去跑过去，似乎是户籍管理什么的办事处；好，进去，几个大叔在聊天，我点头弯腰说来办理暂住证，租赁客户，最里面的大叔说租赁的话，比较麻烦，这里办理不了，要前往这个地方（这里说几点，如果房子是你的，办就很快，还有就是前往你的亲戚的城市，办理亲属证明，也会非常快，我这属于最麻烦的，需要一堆的手续和文件，后面会一一道来）黄陵路/宜君路的街道事务中心；我赶紧出来，车子快没电了，赶紧去充电；这时，之前我打电话把房东喊过来（幸好遇到好房东的情况：我打电话让房东到公安局了，女房东到了公安局了，我又跑出来充电），说前往街道事务中心，于是她又开车前往街道事务中心；我先到地点，前台服务是一个胖大哥，问了是办暂住证，直接给我一个“综合服务”的号，我进去，问我需要的材料都对吗（我这里有我的身份证、工作合同、租赁合同原件、社保单（街道事务中心有机子可以取社保单）），然后等待房东来（记得，办这事，一定一定要房东来，房东那边需要准备的材料等会说明）；过没一会，房东来了，然后出示了有房产原件、身份证；然后说去12号台先填写申请，于是我们又跑过去12号，我这里需要准备的材料：有多少个人入住，我和我老婆的身份证+正反复印件、结婚证+复印件、工作合同的第二页和最后一页复印件、社保单、租赁合同+复印件、填写申请表如实填写，房东那边需要准备的材料：房东房产原件+房产原件复印件、房东身份证+复印件（如果房产有多人，必须有一个到场，没到场的需要填写委托书的文件，委托书文件格式，12号窗工作人员会给，你就到旁边写，内容有姓名、身份证，房产证有多少个人就写多少委托，签名写房东名字就可）。反正就是复印复印复印（期间我没带老婆的身份证、结婚证等，骑电动车回去，半路没电，用脚腾回去的，到家赶紧冲出来打车，到了目的地给钱，给他一张50块，司机说换一张，我说怎么了，他说这张是假的，我一看，我去，真是，我好久之前换的，之后一直手机支付没看那张50，后来用微信支付，接着去打印，特么零钱也用完了，那个大叔不肯给打印，真是没帮助的精神，不过是我，我可能也会有类似的作为就赶紧跑好远去取钱，还挺蛋疼的这次）。12号窗口办理，办理这个，如果多少个人写进去了，之后想更改就不能的了，所以确定好要写进去的人数和需要准备好的文件材料；12号窗口办理完会给你一张“信息填入”完的单子（这时房东的帮助已经完了，接下来就是自己的事情了），然后我们去“综合服务”窗口；我这里还需要提供租赁合同复印件、身份证复印件、社保单、“信息填入”文件的复印件，工作人员会给每一个敲一个章，我一一填入我的名字和时间（时间关系不大，如是说），老婆的部分由于本人未到场，必须她到场，不然办不了；这里说一下，这一办理过程是需要24小时生效时间，就是那张“信息填入”文件生效时间是在24小时之后，而且其左下角有个时间终止日期，超过也不能办，办理入住人必须都在场；诺，我又拿着我的文件屁颠屁颠回来了；当时周四，我还是下周一带老婆一起过来好了。到时整好之后给大家一张截图，如若失败，没办法了，花钱办了，，文章里面需要的文件都写好了，也写好了过程步骤，幸好我的是有个好房东啊，，中间等了我接近50分钟，，我的天，，非常非常感谢房东，不管办不办的下来，好房东，，谢谢你，估计你看不见，不过我由衷感谢，，，前两天11月22号，我拎着老婆孩子还去那个街道办事处。直接去“综合服务”办事点，把身份证+复印件、“信息填入”+复印件、社保单、合同原件+第二页和第四页的复印件准备好。他那边输入一些数据后知道我们第一次办，带我们到旁边拍了个照片，深色领子好。（中间原因一些原委，老婆合同原件没带，而且其复印件有文字涂改，需要在上面盖章，来来回回，而且那天下雨，车子堵得呀，花的钱又多-&gt;出租车，4点半街道办事处下班差点赶不及，直接下车跑了3个街道，气都快喘不过来了。）最后改签字的都签好，工作人员给了一张单子，说一个月后来这里领取办卡，也就是说，全部办好了，要办卡。出来办事，，真不是一般的累，来来回回整，而且需要的文件、流程都不熟悉，其中知道门道的，都是可以从中捞水了。一个月后去领卡了。另外，我问了，这不是暂住证，这是居住证，一年的居住证，嗷嗷嗷嗷。","categories":[],"tags":[]},{"title":"watermark贴图模糊","slug":"watermark贴图模糊","date":"2017-01-09T01:44:49.000Z","updated":"2017-01-09T01:45:22.000Z","comments":true,"path":"2017/01/09/watermark贴图模糊/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/watermark贴图模糊/","excerpt":"","text":"发表于(2016-11-07 10:51:54) 博客内容转至github，妈蛋，打个字，复制也不行，打字也不行，经常写了老半天，点提交，特么什么东西没了，幸好保存了，，，心塞过，，，地址https://github.com/shaohung001/One-person-project/tree/master","categories":[],"tags":[]},{"title":"制作滤镜的贴图，rotate、scale、pull，以及实现过程","slug":"制作滤镜的贴图，rotate、scale、pull，以及实现过程","date":"2017-01-09T01:43:35.000Z","updated":"2017-01-09T01:43:58.000Z","comments":true,"path":"2017/01/09/制作滤镜的贴图，rotate、scale、pull，以及实现过程/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/制作滤镜的贴图，rotate、scale、pull，以及实现过程/","excerpt":"","text":"发表于(2016-10-17 16:43:22) https://github.com/shaohung001/Tie-tu-ScaleRotateView.git代码里面有相关注释","categories":[],"tags":[]},{"title":"最近iOSAPP打包Success但是没有包，上传不了","slug":"最近iOSAPP打包Success但是没有包，上传不了","date":"2017-01-09T01:41:25.000Z","updated":"2017-01-09T01:42:58.000Z","comments":true,"path":"2017/01/09/最近iOSAPP打包Success但是没有包，上传不了/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/最近iOSAPP打包Success但是没有包，上传不了/","excerpt":"","text":"发表于(2016-10-17 15:59:47) 最近iOS APP打包Success 但是没有包 上传不了，如Cannot generate iOS App archive in xcodehttp://stackoverflow.com/questions/10715211/cannot-generate-ios-app-archive-in-xcode/31645306#31645306 项目这里参考了这篇博文解决了打包success但是没有包的问题：【链接】新版本Xcode无法打包生成ipa的问题解决Cannotghttp://blog.csdn.net/iunion/article/details/49886973 希望能帮到大家。。。","categories":[],"tags":[]},{"title":"国庆放完假，重新找目标","slug":"国庆放完假，重新找目标","date":"2017-01-09T01:38:27.000Z","updated":"2017-01-09T01:40:10.000Z","comments":true,"path":"2017/01/09/国庆放完假，重新找目标/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/国庆放完假，重新找目标/","excerpt":"","text":"发表于(2016-10-10 13:30:14)国庆，公司放了10天。把老婆孩子接过来住几天，孩子不好带，又送回去了，感觉还是挺累的，，，，有时候总是会失去一会目标，就如目前，除了工作，回家之后就是打游戏，消遣，没有去年拼命的状态了。原因是今年来来去去的，没有停歇，没有好好思考总结我要干什么，，，每天晚上都在计划明天该干啥，然后当晚很晚睡，第二天要么很晚起，要么无精打采，，，这么累，于是又继续沉迷网络，，，放下心来想了想为什么吃饭吃不香，睡觉睡不好，生活不自在，，，自己给自己了一个答案：人不要太忙碌，要放慢脚步，稳步向前，，，脚踏实地，一步一脚印，，，大都市的人会不由自主的失去目标，没有朋友在附近，没有好友搭起话，除了工作，老婆，孩子，，没别的了，，也就是这样，老婆孩子不在身边，，，前大半年我都过得浑浑噩噩，像极了猪，但人家猪还会早睡，我却总觉得，我不想睡，我还能消遣好一会，不能浪费啊，，，于是沉淀起来的疲惫，把我自己给迷糊了，，，最近除了工作，要给自己下一些目标，让自己爱生活，，这样精神状态好起来，说不定对工作的热忱会更好，效率更高，发散思维能力越强，，，找找自己能持续作战的副业吧，，，找到一个自己也同样热衷的副业，其实是完美生活的一个调剂品，好好品尝，好好活着，，，，","categories":[],"tags":[]},{"title":"RAC循环引用","slug":"RAC循环引用","date":"2017-01-09T01:35:39.000Z","updated":"2017-01-09T01:38:10.000Z","comments":true,"path":"2017/01/09/RAC循环引用/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/RAC循环引用/","excerpt":"","text":"发表于(2016-09-27 16:35:49) 最近项目到某个节点，我在解决一些问题的时候，记录一下： RAC 在引用的时候会忽略一点，如@weakify(self); @weakify(cell); [[[cell.clearButton rac_signalForControlEvents:UIControlEventTouchUpInside] takeUntil:cell.rac_prepareForReuseSignal] subscribeNext:^(UIButton *x) { if ([self_weak_.selectedNumArray containsObject:asset]) { [self_weak_.selectedNumArray removeObject:asset]; cell_weak_.numButton.selected = NO; [self_weak_.collectionView reloadData]; }else{ if (self_weak_.addMorePicture) { if (self_weak_.selectedNumArray.count==self_weak_.maxPictureCanAdd) { LxDBAnyVar(self_weak_.selectedNumArray); LxDBAnyVar(self_weak_.maxPictureCanAdd); [SHUIHelper showAlertMessage:[NSString stringWithFormat:@&quot;您最多可添加%ld张哦&quot;,self_weak_.maxPictureCanAdd]]; }else{ [self_weak_.selectedNumArray addObject:asset]; cell_weak_.numButton.selected = YES; [cell_weak_.numButton setTitle:[NSString stringWithFormat:@&quot;%ld&quot;,(unsigned long)self_weak_.selectedNumArray.count] forState:UIControlStateNormal]; } }else{ if (self_weak_.selectedNumArray.count==6) { [SHUIHelper showAlertMessage:@&quot;选取最多6张&quot;]; }else{ [self_weak_.selectedNumArray addObject:asset]; cell_weak_.numButton.selected = YES; [cell_weak_.numButton setTitle:[NSString stringWithFormat:@&quot;%ld&quot;,(unsigned long)self_weak_.selectedNumArray.count] forState:UIControlStateNormal]; } } } cell_weak_.grayLayerView.hidden = !cell_weak_.numButton.selected; }];上面这里的cell，自己对自己进行了循环引用，原因就是：这一段如果写在该Cell class里面，那么block里面的cell，其实在自身类里面也叫self，于是也需要进行weak处理。这里会出现这样的错误，就是因为写得太快了，然后有时候会想不出来，可以慢慢思考。 Realm 的RLMArray 如果添加某一个元素，但其已经存在数据库中，那么做法是先使用[RLMObject objectForPrimaryKey：@“keyID”]找出该元素添加进去，即可 Just want to add a comment for future users of Realm. I think TiM means[ objectForPrimaryKey:…]. I literally typed [RLMObject objectForPrimaryKey:…] and got a crash about “RLMObject” is not persisted in Realm database","categories":[],"tags":[{"name":"reactivecocoa","slug":"reactivecocoa","permalink":"https://shaohung001.github.io/tags/reactivecocoa/"}]},{"title":"MleaksFinder手动导入framework","slug":"MleaksFinder手动导入framework","date":"2017-01-09T01:23:27.000Z","updated":"2017-01-09T01:34:44.000Z","comments":true,"path":"2017/01/09/MleaksFinder手动导入framework/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/MleaksFinder手动导入framework/","excerpt":"","text":"发表于(2016-09-19 18:24:20)由于前段时间cocoapods有个issue，导致我的第三方工程都得手动导入，今天抽出时间把MleaksFinder这款很好的监测内存泄漏的工具用手动导入方式写出来。 先去下两个zip： https://github.com/Zepo/MLeaksFinder https://github.com/facebook/FBRetainCycleDetector 直接将 将下载下来的FBRetainCycleDetector-master直接复制到根目录文件 如图操作： 同时将FBRetainCycleDetector.xcodeproj-》Targets-》Deployment Info的Deployment Target 改为手机适用的，不然会运行起来说target版本不对 加入framework 至此，不需要添加代码，你就可以使用啦。我先记录，慢慢来开发他的使用啦","categories":[],"tags":[]},{"title":"RN了SecRandomCopyBytes_ignoring_return_value","slug":"RN了SecRandomCopyBytes-ignoring-return-value","date":"2017-01-09T01:19:16.000Z","updated":"2017-01-09T01:20:42.000Z","comments":true,"path":"2017/01/09/RN了SecRandomCopyBytes-ignoring-return-value/","link":"","permalink":"https://shaohung001.github.io/2017/01/09/RN了SecRandomCopyBytes-ignoring-return-value/","excerpt":"","text":"发表于(2016-09-19 10:16:43) 大早上的起来，在XCode8，iOS10环境中，就看见RN编译不起来，报SecRandomCopyBytes ignoring return value这样的错。在RCTWebSocket 的SecRandomCopyBytes函数编译不过去，有3种方法，自行实测一种，很方便的一种（1）1：https://github.com/facebook/react-native/issues/8584中双击Library里面的RCTWebSocket进入上图界面，将“3”中的两个删除即可2、3：https://github.com/facebook/react-native/issues/8108中mskalra所述和antoor所述，针对不同问题的解决方案","categories":[],"tags":[]},{"title":"展示大图出现卡顿","slug":"展示大图出现卡顿","date":"2017-01-08T15:08:27.000Z","updated":"2017-01-08T15:09:32.000Z","comments":true,"path":"2017/01/08/展示大图出现卡顿/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/展示大图出现卡顿/","excerpt":"","text":"发表于(2016-09-18 12:06:12) 这里拿iOS里边代码做考究：图片页面，我之前不是说会很卡吗？？如果用户拿去很大的图片的话，我这里之前的处理是压缩这里压缩是把相同临近像素融合，减小像素密度，，但是卡顿原因不是这个，，其实是—》这样理解，就是我有一张比如一个墙壁大的图片，相框只有200*200，于是照片要放进去就比较麻烦，但是我减小照片大小，这样图片不大，放进相框就好放啦，，，1000是系数，可以自行比例系数哦","categories":[],"tags":[]},{"title":"这里记录一个获取图片时，图片旋转问题","slug":"这里记录一个获取图片时，图片旋转问题","date":"2017-01-08T15:07:34.000Z","updated":"2017-01-08T15:08:00.000Z","comments":true,"path":"2017/01/08/这里记录一个获取图片时，图片旋转问题/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/这里记录一个获取图片时，图片旋转问题/","excerpt":"","text":"发表于(2016-09-05 11:09:26)这里记录一个获取图片时，图片旋转问题：ALAssetRepresentation rep = self.asset.defaultRepresentation;if (rep) {UIImage image = [UIImage imageWithCGImage:rep.fullResolutionImagescale:rep.scaleorientation:0];return image; 如上写法，orientation：0的时候会发生图片旋转，即使本应该的说要拿取肖像orientation，改成如下：ALAssetRepresentation rep = self.asset.defaultRepresentation;if (rep) {UIImage image = [UIImage imageWithCGImage:rep.fullResolutionImagescale:rep.scaleorientation:(UIImageOrientation)rep.orientation];//0]; return image; 此时拿到的图片不再旋转。。。","categories":[],"tags":[]},{"title":"很长时间没有更新记录了","slug":"很长时间没有更新记录了","date":"2017-01-08T15:06:40.000Z","updated":"2017-01-08T15:06:58.000Z","comments":true,"path":"2017/01/08/很长时间没有更新记录了/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/很长时间没有更新记录了/","excerpt":"","text":"发表于(2016-09-01 00:05:08) 之前老婆要生产进入尾声了，工作也进入紧张阶段，一直忙忙忙，接下来会陆续写上：1：GPUImage在生产中可能会用到的单滤镜、多滤镜处理2：贴图3：对接LeanIM的聊天，使用Realm接本地数据库的心得4：还有一些其他的尽量快些写出来哦，么么哒","categories":[],"tags":[]},{"title":"计算机算三角函数和圆心角","slug":"计算机算三角函数和圆心角","date":"2017-01-08T15:05:40.000Z","updated":"2017-01-08T15:06:02.000Z","comments":true,"path":"2017/01/08/计算机算三角函数和圆心角/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/计算机算三角函数和圆心角/","excerpt":"","text":"发表于(2016-07-01 10:09:21) http://c.biancheng.net/cpp/html/2526.htmlc语言的一个圆心角计算","categories":[],"tags":[]},{"title":"appstore链接的mt=x意义","slug":"appstore链接的mt-x意义","date":"2017-01-08T15:04:51.000Z","updated":"2017-01-08T15:05:12.000Z","comments":true,"path":"2017/01/08/appstore链接的mt-x意义/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/appstore链接的mt-x意义/","excerpt":"","text":"发表于(2016-06-30 11:48:22) 我自己试了下，这个问题，mt的作用，也就是你加跟不加都可以。mt 代表 meta-type，有效值如下：1 Music2 Podcasts3 Audiobooks4 TV Shows5 Music Videos6 Movies7 iPod Games8 Mobile Software Applications9 Ringtones10 iTunes U11 E-Books12 Desktop Apps当链接进行查询时，如果没有定义id，就有可能出现不同类别的内容，但是名字相同，例如某专辑的名字和某个app的名字重合。这时mt就起作用了。ls代表link special，当查询的类型为某首歌曲时，不定义ls，默认指向歌曲的专辑，定义后直接进入该歌曲并试播。（貌似是这样，apple的论坛里看到的，跟app的关系不大）这是上面的解释，我觉得行得通。我一开始觉得是1是美国mt的简称，我们APP有两个版本，美国版本和中国版本，不过追根始源，找到了他的真正意义，，哈哈","categories":[],"tags":[]},{"title":"GPUImage如何创建，图文介绍","slug":"GPUImage如何创建，图文介绍","date":"2017-01-08T15:00:58.000Z","updated":"2017-01-08T15:03:26.000Z","comments":true,"path":"2017/01/08/GPUImage如何创建，图文介绍/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/GPUImage如何创建，图文介绍/","excerpt":"","text":"发表于(2016-06-20 00:29:06) GPUImage的网上教程，在建立方面，“头文件搜索路径: project’s build settings, 把GPUImage的source和source下的iOS目录加到搜索路径里, 使用相对路径和递归.“总有这样的词汇，根本不知道怎么创建，这里使用图文并茂，一步步跟着来做首先1：在你的工程文件建立一个Submodules文件夹，再在下一级创建GPUImage文件夹2：将在https://github.com/BradLarson/GPUImage下的framework放到上图位置，，3：在工程里面引用，记得1，2，4的勾选上，如图，4：接着在下图中加入箭头所标记的5：这是最重要的一步，很多人不理解“头文件搜索路径: project’s build settings, 把GPUImage的source和source下的iOS目录加到搜索路径里, 使用相对路径和递归.”里面的相对路径、递归什么的，那就按照上面一步一步，就可以了。６：target-build setting里面，other linker flags 里面添加 -fobjc-arc -ObjC 这两项OK,这一步之后就可以，第五步的作用就是让工程找到头文件。这时#import “GPUImage.h”就能找到你的滤镜效果啦。","categories":[],"tags":[{"name":"GPUimage","slug":"GPUimage","permalink":"https://shaohung001.github.io/tags/GPUimage/"}]},{"title":"昨天尝试了rsa加密的问题","slug":"昨天尝试了rsa加密的问题","date":"2017-01-08T14:57:57.000Z","updated":"2017-01-08T14:59:58.000Z","comments":true,"path":"2017/01/08/昨天尝试了rsa加密的问题/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/昨天尝试了rsa加密的问题/","excerpt":"","text":"发表于(2016-06-16 11:59:05) 这几天的问题出现在，当时后台的底层构架他们没法改，在请求头将sign给服务器的同时，在parameter传送过程也需要将sign（数据库钥匙）以及用户账号密码等也在此中。这时出现的一个问题，在charles截取数据，sign、密码等都是明文，这是很恐怖的：服务器钥匙串、密码等都是暴露在人前。你说你去银行，这时你的账号、密码以及银行最重要的钥匙只要有点经验的人都能获取得到，谁还敢将钱放在银行。这时前段将密码过滤多少次都没用，唯一的就是服务器和前段进行密码加密才可解决（服务器那边说没办法，只能这么处理，目前没去更改https，也没法将密码、sign值等放入header中），ok，下面是我们的处理。可以参考这篇文章：http://www.tuicool.com/articles/bAN7BrR #!/usr/bin/env bash echo “Generating RSA key pair …” echo “1024 RSA key: private_key.pem” openssl genrsa -out private_key.pem 1024 echo “create certification require file: rsaCertReq.csr” openssl req -new -key private_key.pem -out rsaCertReq.csr echo “create certification using x509: rsaCert.crt” openssl x509 -req -days 3650 -in rsaCertReq.csr -signkey private_key.pem -out rsaCert.crt echo “create public_key.der For IOS” openssl x509 -outform der -in rsaCert.crt -out public_key.der echo “create private_key.p12 For IOS. Please remember your password. The password will be used in iOS.” openssl pkcs12 -export -out private_key.p12 -inkey private_key.pem -in rsaCert.crt echo “create rsa_public_key.pem For Java” openssl rsa -in private_key.pem -out rsa_public_key.pem -pubout echo “create pkcs8_private_key.pem For Java” openssl pkcs8 -topk8 -in private_key.pem -out pkcs8_private_key.pem -nocrypt echo “finished.” 上面的为分开处理，一条一条的哟，有需要填入比如密码、公司信息、province一堆信息，记得信息记录下来哦。 Tips: 在创建证书的时候, terminal会提示输入证书信息. 根据wizard输入对应信息就OK. 在创建p12密匙时, 会提示输入密码, 此时的密码必须记住, 之后会用到. 如果上面指令有问题,请参考最新的openssl官方文档, 以官方的为准. 之前在网上搜索指令, 被坑了一圈之后, 还是会到啃官方文档上. 每条指令文档在最后都会有几个sample,参考sample即可. 里面有个RSAEncryptor,自己去github上下载。base64在NSData里边，从iOS 7.0开始自动支持 加密 RSAEncryptor *rsa = [[RSAEncryptor alloc] init]; NSLog(@&quot;encryptor using rsa&quot;); NSString *publicKeyPath = [[NSBundle mainBundle] pathForResource:@&quot;public_key&quot; ofType:@&quot;der&quot;]; NSLog(@&quot;public key: %@&quot;, publicKeyPath); [rsa loadPublicKeyFromFile:publicKeyPath]; NSString *securityText = @&quot;hello ~&quot;; NSString *encryptedString = [rsa rsaEncryptString:securityText]; NSLog(@&quot;encrypted data: %@&quot;, encryptedString); [rsa rsaEncryptString:securityText]会返回decrypted base64编码的字符串: console out 写道encrypted data: I1Mnu33cU7QcgaC9uo2bxV0vyfJSqAwyC3DZ+p8jm0G2EmcClarrR5R2xLDdXqvtKj+UJbES7TT+AgkK1NDoQvOJBY+jkmrpAchmRbV2jvi3cEZYQG955jrdSAu21NzQe8xWtEc3YzP+TACPdP4B3Cyy0u8N2RcSFWyxu0YKPXE= 解密:NSLog(@&quot;decryptor using rsa&quot;); [rsa loadPrivateKeyFromFile:[[NSBundle mainBundle] pathForResource:@&quot;private_key&quot; ofType:@&quot;p12&quot;] password:@&quot;123456&quot;]; NSString *decryptedString = [rsa rsaDecryptString:encryptedString]; NSLog(@&quot;decrypted data: %@&quot;, decryptedString); 服务器那边就让他们服务器去弄，这就是我们前段需要处理的地方 上边整理下来的文件有7个 .gem .der p12等等","categories":[],"tags":[]},{"title":"swift的xib在模拟器显示正常，真机不显示","slug":"swift的xib在模拟器显示正常，真机不显示","date":"2017-01-08T14:57:11.000Z","updated":"2017-01-08T14:57:44.000Z","comments":true,"path":"2017/01/08/swift的xib在模拟器显示正常，真机不显示/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/swift的xib在模拟器显示正常，真机不显示/","excerpt":"","text":"发表于(2016-06-13 11:34:52) 这个完美解决了swift会不加载xib的问题~~xib都OK，模拟器可以显示，但是真机却没有显示的解决方案，原因就是swift不默认加载xib，强制让他加上就好了http://my.oschina.net/227/blog/470553这个是转帖嘿嘿，谢谢大哥啦 import UIKitclass FormController: UIViewController { override init(nibName nibNameOrNil: String?, bundle nibBundleOrNil: NSBundle?) {super.init(nibName: nibNameOrNil, bundle: nibBundleOrNil)//println(nibName); }convenience init() {var nibNameOrNil = String?(“FormController”) // //考虑到xib文件可能不存在或被删，故加入判断// if NSBundle.mainBundle().pathForResource(nibNameOrNil, ofType: “xib”) == nil{ nibNameOrNil = nil}self.init(nibName: nibNameOrNil, bundle: nil)}required init(coder aDecoder: NSCoder) {fatalError(“init(coder:) has not been implemented”)} override func viewDidLoad() { }override func didReceiveMemoryWarning() {super.didReceiveMemoryWarning()// Dispose of any resources that can be recreated. } }","categories":[],"tags":[]},{"title":"collectionView的minimumLineSpacing内部空隙默认不为空","slug":"collectionView的minimumLineSpacing内部空隙默认不为空","date":"2017-01-08T14:56:05.000Z","updated":"2017-01-08T14:56:26.000Z","comments":true,"path":"2017/01/08/collectionView的minimumLineSpacing内部空隙默认不为空/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/collectionView的minimumLineSpacing内部空隙默认不为空/","excerpt":"","text":"发表于(2016-06-06 17:29:45) 我这里有个需求，用了collectionView做，中间是没有空隙的，但是实际上，没有设置minimumLineSpacing的时候，老是有空隙，后台我直接设置collectionView.minimumLineSpacing = 0的时候才完成。把坑位留下，下次不犯了，哈哈","categories":[],"tags":[]},{"title":"xcode一直不会更新的新下载的证书","slug":"xcode一直不会更新的新下载的证书","date":"2017-01-08T14:54:30.000Z","updated":"2017-01-08T14:55:18.000Z","comments":true,"path":"2017/01/08/xcode一直不会更新的新下载的证书/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/xcode一直不会更新的新下载的证书/","excerpt":"","text":"发表于(2016-06-02 10:12:04) 个人觉得这个是帮了个大忙，xcode一直不会更新的新下载的证书，好烦，很久以前就一直有的问题。明明我刚下好的certificate，就是不出现，说没有这个。我说下我的步骤：1，在project，是的，如果你用workspace，还是要右键project“显示包文件”；2，找到图中所说的project.pbxproj文件，编辑器打开；3：将所有“PROVISIONING_PROFILE”的一整行删除，不放心的话，你可以提前先拷贝一份你的绿色的project文件，安全是吧。然后重开xcode，这简直帮了我大忙。","categories":[],"tags":[]},{"title":"谈谈对swift的看法","slug":"谈谈对swift的看法","date":"2017-01-08T14:52:40.000Z","updated":"2017-01-08T14:53:34.000Z","comments":true,"path":"2017/01/08/谈谈对swift的看法/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/谈谈对swift的看法/","excerpt":"","text":"发表于(2016-05-29 22:24:22) swift出来挺久的了，我一直在升级OC的技能，基本基础都OK。最近要开始一个新的项目，我就在思考，如果不写swift会带来的后果，这是考量我该不该使用新的语言，毕竟我之前从来没看。 我感觉，预计今年十月份开始，swift将会大行其道。你不会可能都说不过去了，毕竟就如一些技能“ASI”的过气、“MRC”也过气等等；这都是知名的，都是我之前的时代，我也在改变，那就毋庸置疑了，应该改变。 我个人觉得，目前程序员不就是一直在学新的东西么，不就是一个语言么，没啥难度，用法不会，查不查就可以，毕竟和OC很相近的。 之前我用的库也都能用，而且swift语言其实是基于OC的库，OC多稳定，swift只是一个编译程序的过程用的工具 我当时花了两天，边打游戏边看github一个“30天30 swift demo”，基本也能掌握。 怕个鸟，就是从ReactiveCocoa转到RxSwift比较麻烦这里贴一个大哥的“简书”地址—-&gt;http://www.jianshu.com/p/7e286fbbc3d7，我当时学ReactiveCocoa的时候，其实也是比较值的变化，慢慢学，看了一会其实跟OC的响应式编程相近。项目中用到，多用几次就会了。其实后期我越来越感觉到，其实语言这东西，就是一个工具，就是一个工具，你写的东西，在相应的编译器才识别，也就是一个描述性文档，想要学的深，只能慢慢来，现在的范围广这一步我走的还行，多用多接触一些东西，慢慢的也要试试走更底层一些东西啦，，人生不停下就好，，，我还想当管理，我还想多学点，我还想户外运动，我还想业余活动，，，你慢慢想吧，，，，，，，，，","categories":[],"tags":[]},{"title":"IOS图片加水印或文字","slug":"IOS图片加水印或文字","date":"2017-01-08T14:51:30.000Z","updated":"2017-01-08T14:52:16.000Z","comments":true,"path":"2017/01/08/IOS图片加水印或文字/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/IOS图片加水印或文字/","excerpt":"","text":"发表于(2016-04-30 23:40:20) http://blog.sina.com.cn/s/blog_70854cfb0101d2dr.html转载自这里，最近有做类似图片、视频的进阶，所以查阅了下博客，谢谢博主的分享啦 1.加文字 -(UIImage )addText:(UIImage )img text:(NSString )text1{//get image width and heightint w = img.size.width;int h = img.size.height;CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();//create a graphic context with CGBitmapContextCreateCGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 w, colorSpace, kCGImageAlphaPremultipliedFirst);CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);CGContextSetRGBFillColor(context, 0.0, 1.0, 1.0, 1);char text = (char )[text1 cStringUsingEncoding:NSASCIIStringEncoding];CGContextSelectFont(context, “Georgia”, 30, kCGEncodingMacRoman);CGContextSetTextDrawingMode(context, kCGTextFill);CGContextSetRGBFillColor(context, 255, 0, 0, 1);CGContextShowTextAtPoint(context, w/2-strlen(text)*5, h/2, text, strlen(text));//Create image ref from the contextCGImageRef imageMasked = CGBitmapContextCreateImage(context);CGContextRelease(context);CGColorSpaceRelease(colorSpace);return [UIImage imageWithCGImage:imageMasked];} 2.加图片-(UIImage )addImageLogo:(UIImage )img text:(UIImage )logo{//get image width and heightint w = img.size.width;int h = img.size.height;int logoWidth = logo.size.width;int logoHeight = logo.size.height;CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();//create a graphic context with CGBitmapContextCreateCGContextRef context = CGBitmapContextCreate(NULL, w, h, 8, 4 w, colorSpace, kCGImageAlphaPremultipliedFirst);CGContextDrawImage(context, CGRectMake(0, 0, w, h), img.CGImage);CGContextDrawImage(context, CGRectMake(w-logoWidth, 0, logoWidth, logoHeight), [logo CGImage]);CGImageRef imageMasked = CGBitmapContextCreateImage(context);CGContextRelease(context);CGColorSpaceRelease(colorSpace);return [UIImage imageWithCGImage:imageMasked];// CGContextDrawImage(contextRef, CGRectMake(100, 50, 200, 80), [smallImg CGImage]);} 3.加半透明的水印 (UIImage )addImage:(UIImage )useImage addImage1:(UIImage )addImage1{UIGraphicsBeginImageContext(useImage.size);[useImage drawInRect:CGRectMake(0, 0, useImage.size.width, useImage.size.height)];[addImage1 drawInRect:CGRectMake(0, useImage.size.height-addImage1.size.height, addImage1.size.width, addImage1.size.height)];UIImage resultingImage = UIGraphicsGetImageFromCurrentImageContext();UIGraphicsEndImageContext();return resultingImage;}","categories":[],"tags":[]},{"title":"iOS单元格分割线","slug":"iOS单元格分割线","date":"2017-01-08T14:50:26.000Z","updated":"2017-01-08T14:51:04.000Z","comments":true,"path":"2017/01/08/iOS单元格分割线/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/iOS单元格分割线/","excerpt":"","text":"发表于(2016-04-28 15:41:01) 网上找的一个改表格的分割线方法，测试有用，记录一下了 void)viewDidLayoutSubviews{if ([self.tableView respondsToSelector:@selector(setSeparatorInset:)]) {[self.tableView setSeparatorInset:UIEdgeInsetsMake(0,0,0,0)];} if ([self.tableView respondsToSelector:@selector(setLayoutMargins:)]) {[self.tableView setLayoutMargins:UIEdgeInsetsMake(0,0,0,0)];}} -(void)tableView:(UITableView )tableView willDisplayCell:(UITableViewCell )cell forRowAtIndexPath:(NSIndexPath *)indexPath{if ([cell respondsToSelector:@selector(setSeparatorInset:)]) {[cell setSeparatorInset:UIEdgeInsetsZero];} if ([cell respondsToSelector:@selector(setLayoutMargins:)]) {[cell setLayoutMargins:UIEdgeInsetsZero];}}","categories":[],"tags":[]},{"title":"近期生活回顾","slug":"近期生活回顾","date":"2017-01-08T14:49:16.000Z","updated":"2017-01-08T14:49:44.000Z","comments":true,"path":"2017/01/08/近期生活回顾/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/近期生活回顾/","excerpt":"","text":"发表于(2016-04-08 09:31:51)近期，，也就是清明，刚过去。和同伴们闹腾的比较嗨的一次玩乐，主要是老板人年轻，活力。嘎嘎，，，清明前一天，一大堆人坐车前往老板定好的大轰趴现场，我拎着丫头去，一个pregnant4/5Month的，让她不要乱动。过去之后，老板陪我们玩乐会，就喊上了几个姑娘做饭菜去了。我从一楼玩到地下，有唱K的，有桌球比拼的，有台球，有x-box，有游戏厅玩的那种游戏机，有麻将机。反正，这是我第一次看过，简直不要太好的、太豪华的（没见过世面，莫怪）住所。我玩得几件衣服都脱掉了。晚上，吃个饭当然是打牌啦，赌钱，现在我觉得，确实是很有魔力。不赌钱，没动力，赌大钱，玩不起。慢慢来，玩“干瞪眼”、“21点”（老板自创，，）、“德州”。傍晚，老板来了两个朋友，超会赌。安妮玩“干瞪眼”还是一样，能打的很好，我本来不咋地，座位往她们那片移，风气来的挡都挡不住。后来姑凉们去睡了，11点左右。丫头时不时担心我，跑来给我热水，又跑回去躺一躺，睡不着，她。我们后来玩了“21点”，不好玩，玩了一圈，这简直就是赌博，换一个–“德州”。这个我比较喜欢，一开始的筹码，我慢慢的全输光了，她们说我是赌徒，很快ALL IN,老板看不下去，给了我不知道几次的资助，MONA也是，给了，不用还了。要知道，我的牌肯定是很大我才会压，没想到，永远差最后一张牌，她们都能成立，那我也就没办法了。每个人赢钱，又输掉，大哥很谨慎，最后都输了一些。MONA，她的心态比较简单，不想赢你们太多钱，我会赢，你们小心一点。老板，从玩“干瞪眼”起就一直输，“德州”的时候一开始赢了好多好多，同时资助了我好多好多。一段时间会输好多，然后猛吸一口气，,啧啧，还别说，立马来好牌，这是我发现的规律，，，老板，人，，，，运气真的很好，，，，，业华，女同事刚开始玩，也挺开心的，但是玩到“21点”觉得无趣，确实，我也是这么认为的。那晚我都是当做游戏的，玩的开心就好，“21点”没有玩劲，不给力不给力。老板的朋友，经常玩打牌赌博把，，发了一晚上牌，是我肯定早崩溃，他越发越带劲。好吧，那晚我们除了女孩子们，硬是撑到了过夜5点。我是捂着眼睛（尽量减少力气）撑过去；老板太困，跑去洗了个澡，回来—牌突然又好了，神奇吧；大哥舍命陪君子，不过第二天他居然还有精力跑去外滩，我也是醉了；MONA，嗯哼，她表示没问题；老板朋友们，你懂得，越玩越带劲；第二天我带着丫头回家，他们早走回去了，我和丫头实在是太累，她昨晚没睡好，我和她在徐汇站凳子做了好久好久，回去的时候，我一点都不敢睡，特么一个孕妇在旁边，得用命保护啊—我看着对面窗户反射看到的自己，简直是大熊猫，超级黑眼圈。下午睡了一觉，醒了无聊打游戏，打到11点，，就感觉不自在——于是写代码写到2点，心里才舒坦啊。。。","categories":[],"tags":[]},{"title":"多图上传，一个接着一个上传Reactivecocoa方法","slug":"多图上传，一个接着一个上传Reactivecocoa方法","date":"2017-01-08T14:45:27.000Z","updated":"2017-01-08T14:48:56.000Z","comments":true,"path":"2017/01/08/多图上传，一个接着一个上传Reactivecocoa方法/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/多图上传，一个接着一个上传Reactivecocoa方法/","excerpt":"","text":"发表于(2016-03-17 16:49:49)这里使用RAC方法，发送多图上传的方法，目标是七牛，可以作为队列使用。图片会一个一个的有序上传。username拼接上idx是为了防止图片上传速度过快，名字重名，导致失败，于是拼上idx的话，可以有唯一性。链式需求可以很好解决。在图片超过9张那里，没有设置timeout：30，记得加入哟，，还有可以优化的地方。希望能帮到你。final code:","categories":[],"tags":[]},{"title":"修改底部TabBar样式","slug":"修改底部TabBar样式","date":"2017-01-08T14:43:18.000Z","updated":"2017-01-08T14:44:06.000Z","comments":true,"path":"2017/01/08/修改底部TabBar样式/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/修改底部TabBar样式/","excerpt":"","text":"发表于(2016-03-16 10:21:44) http://blog.csdn.net/l863784757/article/details/45167389这是一个博主修改底部TabBar的UI，感觉很好，谢谢资源 这需要讲一点imageWithRenderingMode可以避免主题色被tabbarItem转换；如果UIEdgeInsetsMake(6, 0, -6, 0)这里的6和-6要对其，不然会出现其中的图片拉伸情况，我这里把title=“”之后，摆放imageInset，一定要对齐","categories":[],"tags":[]},{"title":"利用Reveal看任何APP，亲测有用","slug":"利用Reveal看任何APP，亲测有用","date":"2017-01-08T14:40:54.000Z","updated":"2017-02-04T05:34:16.000Z","comments":true,"path":"2017/01/08/利用Reveal看任何APP，亲测有用/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/利用Reveal看任何APP，亲测有用/","excerpt":"","text":"发表于(2016-03-08 11:48:18) http://www.ianisme.com/ios/1887.html我是按着这个网址的教程，有几个麻烦的， Reavel包括内破解方法，链接地址Reveal 破解可以用pp越狱助手，下一堆鬼东西，至少你也得懂越狱吧，哈哈。 在Cydia下iFile，这个好东西我就不说了，越狱了第一个就想用的东西。按照上面教程走。我这里遇到的问题是，那个什么iFunBox或者iTools都没法打开Mobile的目录，但是他们能打开Media的文件夹，直接把libReveal.dylib放到那边,目录为：上面文章提供的地址 将文件存放的地址为/Library/MobileSubstrate/DynamicLibraries目录下","categories":[],"tags":[]},{"title":"解决Xcode断点调试值都为nil的问题","slug":"解决Xcode断点调试值都为nil的问题","date":"2017-01-08T14:39:41.000Z","updated":"2017-01-08T14:40:16.000Z","comments":true,"path":"2017/01/08/解决Xcode断点调试值都为nil的问题/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/解决Xcode断点调试值都为nil的问题/","excerpt":"","text":"发表于(2016-02-25 14:04:24) 解决Xcode断点调试值都为nil的问题 在Build Settings中 Optimization Level 设置成 None http://www.cocoachina.com/bbs/read.php?tid=229014 我从这里抄来的，没有debug功能，叫什么开发，开你妹的开。。。。。。 最近学习react-native，没有买书籍，没办法，只能一点点学，写一点，在google断点调试一点，就只有这样。用debug方式一点点走程序，这是最好的方法，知道了程序的走向，就知道怎么回事了。 debug是学习之路，望多打断点哟。","categories":[],"tags":[]},{"title":"github里demoMChat使用的EaseMob的版本，这里发上来","slug":"github里demoMChat使用的EaseMob的版本，这里发上来","date":"2017-01-08T14:35:37.000Z","updated":"2017-01-08T14:39:18.000Z","comments":true,"path":"2017/01/08/github里demoMChat使用的EaseMob的版本，这里发上来/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/github里demoMChat使用的EaseMob的版本，这里发上来/","excerpt":"","text":"发表于2016-02-17 09:32项目地址remove easeMob folder and some big frame, you should add some framework in the Build Phases with ‘Foundation’/‘UIKit’/‘CFNetwork’/‘MobileCoreServices’ before start.And fold fold ./MChat/Thirdpart/EaseMobSDK is empty, you need to go to the address of EaseMob ,download which’s SDK and move it to the fold . The SDK cost 130M, and the one’s download resource is hereSDK下载地址版本记得是这两个中的一个，记得去掉UI库版本：V2.2.1r2 2015-12-26 bug fix: SDK bug: 内部优化。版本：V2.2.1 2015-10-28 新功能: 新增一个UI库EaseUI，方便开发者更加快速的集成环信sdk，新的demo也基于此库开发，旧demo将不再维护。bug fix: SDK bug: 修复离线收不到被踢出群及群解散的通知的bug。SDK细节调整: 视频通话优化了优化了码率控制，降低码率视频质量不下降。 还有文件目录 ThirdPart/Nimbus/的压缩地址：SDK下载地址","categories":[],"tags":[]},{"title":"React-native经历","slug":"React-native经历","date":"2017-01-08T14:31:40.000Z","updated":"2017-01-08T14:34:44.000Z","comments":true,"path":"2017/01/08/React-native经历/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/React-native经历/","excerpt":"","text":"发表于(2016-02-01 13:25:13)有个哥们在React-native遇到如 at process._tickCallback问题，一哥们在如下设置即可以解决。留着吧。","categories":[],"tags":[]},{"title":"React-native自学之路","slug":"React-native自学之路","date":"2017-01-08T14:31:17.000Z","updated":"2017-01-08T14:32:04.000Z","comments":true,"path":"2017/01/08/React-native自学之路/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/React-native自学之路/","excerpt":"","text":"发表于(2016-01-26 12:12:40)首先先去React-native官网看看。网上一堆的文章；这里推荐两篇文章1：https://github.com/ele828/react-native-guide；https://github.com/vczero/react-native-lesson大爱第二个，宇宙无敌超级详细；谢谢作者。接下来说几点我觉得我踩得坑：1、react-native的Exmaple里面的运行不了，他的URL错了，用下面的注释掉的那个，多试几次就可以了。2：忍住性子把第二个大神给的demo全部写几遍，，当然，我现在才写到第二个，共勉励之啦。3、不要用atom，特别不要用atom的那个FaceBook的那个插件，卡成娘了。我现在用sublime，老是弹出来让我去purchase，特么没钱。他喵的。4、sublime没有提示，去这个网址https://packagecontrol.io/installation#st2，官网里下package control 安装插件：使用Package Control组件安装,先安装此组件按Ctrl+`调出console，粘贴以下代码到底部命令行并回车：import urllib.request,os,hashlib; h = ‘eb2297e1a458f27d836c04bb0cbaf282’ +‘d0e7a3098092775ccb37ca9d6b2e4b7d’; pf = ‘Package Control.sublime-package’; ipp = sublime.installed_packages_path();urllib.request.install_opener( urllib.request.build_opener( urllib.request.ProxyHandler()) ); by = urllib.request.urlopen( ‘http://packagecontrol.io/&#39; + pf.replace(‘ ‘, ‘ ‘)).read(); dh =hashlib.sha256(by).hexdigest(); print(‘Error validating download (got %s instead of %s), please try manual install’ % (dh, h)) if dh != h else open(os.path.join( ipp, pf), ‘wb’ ).write(by)重启Sublime Text 3，如果在Perferences-&gt;package settings中看到package control这一项，则安装成功。用Package Control安装插件的方法按下Ctrl+Shift+P调出命令面板，输入install 调出 Install Package 选项并回车，然后在列表中选中要安装的插件。 5、重点说下，snippet是代码片段，就是提示你用的，一步一步试试。不要放弃，走多了的，我相信花时间投资React-native肯定会有回报的。未来肯定很明亮。","categories":[],"tags":[]},{"title":"iOSpop返回手势向右滑动","slug":"iOSpop返回手势向右滑动","date":"2017-01-08T14:27:00.000Z","updated":"2017-01-08T14:30:58.000Z","comments":true,"path":"2017/01/08/iOSpop返回手势向右滑动/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/iOSpop返回手势向右滑动/","excerpt":"","text":"根据这篇文章http://www.jianshu.com/p/349636eb3fca 这是一篇简书的技术文章和一篇优化的文章：http://blog.csdn.net/chenyong05314/article/details/40344763。读懂几个信息： 如果你重新定义返回按钮，这个按钮变为自定义的leftBarButtonItem的时候，iOS7之后的pop手势交互就失效。 如果需要重新启用，你可以用自定义的导航栏，更改两个东西或者新添几个地方：1）：@interface CBNavigationController : UINavigationController &lt;UINavigationControllerDelegate, UIGestureRecognizerDelegate&gt;在类别中声明需要接收两个协议2）：`-(void)viewDidLoad{ __weak CBNavigationController *weakSelf = self; if ([self respondsToSelector:@selector(interactivePopGestureRecognizer)]) {self.interactivePopGestureRecognizer.delegate = weakSelf; self.delegate = weakSelf; }}然后还有两个协议： 3）：-(void)pushViewController:(UIViewController )viewController animated:(BOOL)animated{ if ([self respondsToSelector:@selector(interactivePopGestureRecognizer)]) { self.interactivePopGestureRecognizer.enabled = NO; } [super pushViewController:viewController animated:animated];}-(void)navigationController:(UINavigationController )navigationController didShowViewController:(UIViewController *)viewController animated:(BOOL)animated{ if ([navigationController respondsToSelector:@selector(interactivePopGestureRecognizer)]) {if ([navigationController.viewControllers count]==1) { navigationController.interactivePopGestureRecognizer.enabled = NO; }else{ navigationController.interactivePopGestureRecognizer.enabled = YES; } }}`这样你就可以愉快的使用返回手势啦","categories":[],"tags":[]},{"title":"说说iOS7布局的俩坑","slug":"说说iOS7布局的俩坑","date":"2017-01-08T14:25:03.000Z","updated":"2017-01-09T10:28:24.000Z","comments":true,"path":"2017/01/08/说说iOS7布局的俩坑/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/说说iOS7布局的俩坑/","excerpt":"","text":"发表于(2015-12-23 09:01:55) 首先，贴两段代码： if ([self respondsToSelector:@selector(edgesForExtendedLayout)]) { self.edgesForExtendedLayout = UIRectEdgeNone; } if ([self respondsToSelector:@selector(setAutomaticallyAdjustsScrollViewInsets:)]) { self.automaticallyAdjustsScrollViewInsets = NO; } 视图透明的时候，下面的view会往上顶就是第一个控制的（如果导航栏为透明的话，不透明则默认不顶上去）第二个是更坑爹的，你在滑动tableView的时候，会发现uitableviewwrapperview（你用三维视图，可以看到贴在tableview上得一层膜，就是uitableviewwrapperview）在刚开始的时候正常，越滑，这玩意越短，到最后视图不如我们所想，就是第二个控制的，，反正我发现的时候烦死。比较需要注意的是第二个，不管我用UITableViewController或者VC贴上TableView后，wrapperView都会有变动。","categories":[],"tags":[{"name":"ios7","slug":"ios7","permalink":"https://shaohung001.github.io/tags/ios7/"}]},{"title":"RACCommand的使用","slug":"RACCommand的使用","date":"2017-01-08T14:21:42.000Z","updated":"2017-01-08T14:32:36.000Z","comments":true,"path":"2017/01/08/RACCommand的使用/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/RACCommand的使用/","excerpt":"","text":"发表于2015-12-20 22:17具体直接给图，这样写比较正规，具体组织代码，看自己咯","categories":[],"tags":[]},{"title":"应用瘦身","slug":"应用瘦身","date":"2017-01-08T14:19:21.000Z","updated":"2017-01-08T14:32:56.000Z","comments":true,"path":"2017/01/08/应用瘦身/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/应用瘦身/","excerpt":"","text":"发表于2015-12-20 22:14rtyley/bfg-repo-cleaner源码管理系统不是永远不出问题的黑盒子。如果你没有合理地维护好你的仓库，对于要使用它们的开发人员来说，这些仓库会变成一个重大的负担。有些工具能帮你维护它们，Roberto Tyley的BFG Repo-Cleaner for Git就是这样一个工具。这个工具可以用来删除那些你不小心提交到git分支上的二进制大文件。如果是给api瘦身，可以从资源文件入手、没有使用的类、将一些图片打进iconfont、使用bitcode，参考下面文章我是一片文章blablabla","categories":[],"tags":[]},{"title":"这一段时间的工作安排","slug":"这一段时间的工作安排","date":"2017-01-08T14:18:02.000Z","updated":"2017-01-08T14:19:04.000Z","comments":true,"path":"2017/01/08/这一段时间的工作安排/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/这一段时间的工作安排/","excerpt":"","text":"发表于(2015-12-10 10:09:49)由于工作没有排期，很没有效率。到目前为止，公司开过一个会说了上下班时间安排，之后没有提及工作事由，进程难以把控。写在这里，是想说，管理层很重要，为每人安排充足时间干要紧事，充实。工作闲，我却不能，毕竟时间不多，我的学习期也就这一两年了，过了我要么转型做管理层，要么去做股东或者自己创业。花个1星期写个coretext库，接下来研究研究雷神的demo，接下来开始css的开发了，一个个来。人生没有停下这一说，毕竟我是男人。","categories":[],"tags":[]},{"title":"对于从xcode6的代码搬迁至xcode7.1.1beta版出：dylib文件找不到","slug":"对于从xcode6的代码搬迁至xcode7-1-1beta版出：dylib文件找不到","date":"2017-01-08T14:11:52.000Z","updated":"2017-01-08T14:14:28.000Z","comments":true,"path":"2017/01/08/对于从xcode6的代码搬迁至xcode7-1-1beta版出：dylib文件找不到/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/对于从xcode6的代码搬迁至xcode7-1-1beta版出：dylib文件找不到/","excerpt":"","text":"发表于(2015-12-07 10:44:04)这个问题是xcode7.1.1beta版本的版本，我从网上阅历几篇文章，得出两种解决方法； 首先这个问题，是因为xcode6有dylib的苹果的库文件，但是xcode7之后全部换成了.tbd的库文件，也就是说，在/Applications/Xcode7.1.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/目录下去找xcode 库文件储存地址没有找到要用到的.dylib xcode 6的后缀名file，所以就报错。我根据stack flow的解释（http://stackoverflow.com/questions/32734097/xcode7-ios9-about-libz-tbd-is-not-an-object-file-not-allowed-in-a-library、https://forums.developer.apple.com/thread/4572），得出两种，一种就如他们说的那般，很麻烦，，到settings/Other link flag 更改相应的取名（听不懂）第二种方法：第一种方法给人直接想到的是，我这工程到哪里都是可以被别人用的，这也是为外国人推崇，不用说我把工程递交给其他人之后还需要处理什么。于是第二种方法较为简单！！你只需要将dylib文件置放于/Applications/Xcode7.1.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/目录下，xcode说找不到，，那我就去xcode6去移植dylib文件过来即可（目录相同），这个问题同样可以解决。下面为压缩包6.4xcodedylib压缩包xcode6.4下载地址","categories":[],"tags":[{"name":"ios it dylib(nosuchfileordirectory)","slug":"ios-it-dylib-nosuchfileordirectory","permalink":"https://shaohung001.github.io/tags/ios-it-dylib-nosuchfileordirectory/"}]},{"title":"BitBucket和MAC版的sourcetree初次使用","slug":"BitBucket和MAC版的sourcetree初次使用","date":"2017-01-08T14:04:24.000Z","updated":"2017-01-09T13:19:22.000Z","comments":true,"path":"2017/01/08/BitBucket和MAC版的sourcetree初次使用/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/BitBucket和MAC版的sourcetree初次使用/","excerpt":"","text":"发表于(2015-11-28 23:48:42) 先来说说近况，由于工作需要协同开发，考虑要么svn，要么git。git管理我知道的有两大热门：github和bitbucketgithub公开源码是免费的，但是要私有的就必须教每个月5（RMB还是dollar忘了）块钱费用，于是就只有bitbucket了。bitbucket5人以下完全免费，无限量。首先参考这篇文章：http://www.open-open.com/lib/view/open1420034265890.html学到如何将其由英文改为中文就好啦。接着米西米西到了创建团队、创建仓库。右边有个按钮invite人，点击之后输入队友邮箱，队友收到邮件，点击进入：如果有bitbucket账号则直接登录，否则进入注册界面。bitbucket配备sourcetree：最左边那个点击进入：上面那个写上你的：https的那个链接，下面则是你到时要储存的地址，点击OK就到了这个页面：这时右下角有两个按钮，鼠标放上去才会有的，点左边那个按钮，跳转到类似svn的sourcetree文件操作页面。主要说几点我懂得的，我用没多久，要是有懂得的大哥不妨赐教。 第一次把代码放到bitbucket，你需要把文件（不是大文件夹，而是里面的全部文件）全部拷到你本地路径，同时在sourcetree点击commit，这时，仅仅是把更改内容同步在本地，（svn点击commit按钮就相当于更新服务器数据），这时你还需要点击push。 fetch的作用，我是将其作为第一次从网上拉取数据的操作，pull是同步。其他按钮我没去搞明白。 删除的话，在sourcetree一级页面的设置按钮（如图3的右下角那个按钮）,点击删除；同时在bitbucket那边也点击删除 基本操作就这么多，大概也够用了，毕竟免费这东西，我习惯自己开发，现在公司连服务器都没有，，蛋疼。网上这类例子都是东一个西一个，我在此将bitbucket和sourcetree的一些基本操作和作用一起写下来，希望对大家有用。最后还是希望多动手把，知道什么功能，试试成功了那就OK了。","categories":[],"tags":[{"name":"bitbucket  ios","slug":"bitbucket-ios","permalink":"https://shaohung001.github.io/tags/bitbucket-ios/"}]},{"title":"GET请求InvalidParameternotsatisfying","slug":"GET请求InvalidParameternotsatisfying","date":"2017-01-08T14:01:22.000Z","updated":"2017-01-08T14:02:44.000Z","comments":true,"path":"2017/01/08/GET请求InvalidParameternotsatisfying/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/GET请求InvalidParameternotsatisfying/","excerpt":"","text":"发表于(2015-11-26 11:54:45)GET请求是最常见的请求，对于链接可以不需要parameter，但是有时链接古怪，在请求过程中，请求方法对NSParameterAssert(URLString);的URLString 进行判别，于是乎，控制台崩溃打印为“Invalid parameter not satisfying: URLString”。(http://www.bubuko.com/infodetail-398645.html)这个地址可以解释，做法很简单，不要把你的paramater拼进URLString，单独写出来，如：[[AFHTTPRequestOperationManager manager] GET:urlString parameters:paraDic success:^(AFHTTPRequestOperation *operation, id responseObject) { successBlock(operation,responseObject); NSLog(@&quot;-----responseObject:%@&quot;,responseObject); } failure:^(AFHTTPRequestOperation *operation, NSError *error) { NSLog(@&quot;-----error:%@&quot;,error); failBlock(operation,error); }];","categories":[],"tags":[]},{"title":"定时器","slug":"定时器","date":"2017-01-08T13:42:59.000Z","updated":"2017-01-08T13:56:02.000Z","comments":true,"path":"2017/01/08/定时器/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/定时器/","excerpt":"","text":"发表于(2015-11-25 10:26:26)今天在群里讨论一个问题这里程序已进入即开始走，而且，当第一次点击时，时间跳转60s走了30s，，减少一半。我判断为：在判断enable的时候，定时器就认为走了，把判断语句换了就可以了 于是程序如下：@weakify(self);RACSignal *timeSignal = [[[[[RACSignal interval:1.0f onScheduler:[RACScheduler mainThreadScheduler]] take:60]startWith:@1] map:^id(NSDate *date) { @strongify(self); NSLog(@&quot;我被执行第%d次___%@&quot;,_number,date); if (_number == 0) { [self.button setTitle:@&quot;重新发送&quot; forState:UIControlStateNormal]; return @YES; } else{ [self.button setTitle:[NSString stringWithFormat:@&quot;%d&quot;, _number--] forState:UIControlStateDisabled]; return @NO; } }] takeUntil:self.rac_willDeallocSignal]; self.button.rac_command = [[RACCommand alloc]initWithEnabled:[self enableSignal] signalBlock:^RACSignal *(id input) { _number = 60; return timeSignal; }]; } -(RACSignal *)enableSignal{ return [[RACSignal createSignal:^RACDisposable *(id subscriber) { return nil; }] map:^id(id value) { return @(self.number&gt;0); }]; } 把enable换成固定signal，这样就不会失误了。记，成功只给勤奋的人，我认为一个demo写的好，我对着写了一遍，不理解，没关系；第二遍重写，理解了里面思路；第三遍，学会了怎么用；第四遍，我思考着他的功能，稍微看了下，自己写。我认为只有这样才会记进心里去。","categories":[],"tags":[{"name":"RAC","slug":"RAC","permalink":"https://shaohung001.github.io/tags/RAC/"}]},{"title":"2015年11月23日","slug":"2015年11月23日","date":"2017-01-08T13:36:41.000Z","updated":"2017-01-08T13:39:34.000Z","comments":true,"path":"2017/01/08/2015年11月23日/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/2015年11月23日/","excerpt":"","text":"发表于(2015-11-23 10:00:27)记一次写朋友圈，当全屏展示照片，然后退下出现原来正常的tableView，向下走了44px。视图进入时，一开始有些坐标，变现正常，后来不正常了。这里我做了两件事来避免，原因没有找对吧 IOS7 导航栏适配 - 王小飞 更改习惯，viewDidLoad只进行控件、信息、内容加载；viewWillAppear进行坐标定位。 昨天给别人改一个问题，LongGesture的方法老是走两次，一直没认真想，为什么。其实很久以前知道，但是不以为然，总的来说，工作的时候，一定以工作为主，活动就以活动为主，不然，活动的时候想工作的事情，毕竟静不下心，想不进去问题的本身。","categories":[],"tags":[{"name":"IT","slug":"IT","permalink":"https://shaohung001.github.io/tags/IT/"}]},{"title":"ReactiveCocoa常用语法","slug":"ReactiveCocoa常用语法","date":"2017-01-08T13:30:24.000Z","updated":"2017-01-08T13:34:48.000Z","comments":true,"path":"2017/01/08/ReactiveCocoa常用语法/","link":"","permalink":"https://shaohung001.github.io/2017/01/08/ReactiveCocoa常用语法/","excerpt":"","text":"发表于(2015-11-20 11:13:34)此为青玉伏案 发表，我觉得挺有概括的，基础学不错，RACSubject我在别的一些文章看到说，不要太范用，不过却又是原生和RAC世界的桥梁，大家看着办吧。`-(void)uppercaseString{RACSequence sequence = @[@”you”,@”are”,@”beautiful”].rac_sequence;RACSignal signal = sequence.signal; RACSignal *capitalizedSignal = [signal map:^id(id value) {return [value capitalizedString];}]; [signal subscribeNext:^(id x) {NSLog(@”%@”,x);}];` `// [capitalizedSignal subscribeNext:^(id x) {// NSLog(@”capitalizedSignal —— %@”,x);// }];//////// [[[@[@”you”,@”are”,@”beautiful”].rac_sequence signal]// map:^id(id value) {// return [value capitalizedString];// }] subscribeNext:^(id x) {// NSLog(@”%@”,x);// }]; }` `-(void)signalSwitch{RACSubject google = [RACSubject subject];RACSubject baidu = [RACSubject subject];RACSubject *signalOfSignal = [RACSubject subject]; RACSignal *switchSignal = [signalOfSignal switchToLatest]; [switchSignal subscribeNext:^(id x) {NSLog(@”%@”,x);}]; [signalOfSignal sendNext:baidu];[baidu sendNext:@”baidu”];[google sendNext:@”google”]; [signalOfSignal sendNext:google];[baidu sendNext:@”baidu”];[google sendNext:@”google”]; }` `-(void)combinaLatest{RACSubject signalA = [RACSubject subject];RACSubject signalB = [RACSubject subject]; [[RACSignal combineLatest:@[signalA,signalB]reduce:^id(NSString a,NSString b){return [a stringByAppendingString:b];}] subscribeNext:^(id x) {NSLog(@”x:%@”,x);}]; [signalA sendNext:@”a”];[signalA sendNext:@”b”];[signalB sendNext:@”1”];[signalB sendNext:@”2”]; }` `-(void)mergeSignal{RACSubject letters = [RACSubject subject];RACSubject numbers = [RACSubject subject]; RACSubject *chinese = [RACSubject subject]; [[RACSignal merge:@[letters,numbers,chinese]] subscribeNext:^(id x) {NSLog(@”merge : %@”,x);}]; [letters sendNext:@”aaa”];[numbers sendNext:@”666”];[chinese sendNext:@”好好好”]; }`","categories":[],"tags":[{"name":"IT","slug":"IT","permalink":"https://shaohung001.github.io/tags/IT/"}]},{"title":"学习进步,记录点滴","slug":"hello-world","date":"2017-01-06T05:57:58.000Z","updated":"2017-01-06T05:57:58.000Z","comments":true,"path":"2017/01/06/hello-world/","link":"","permalink":"https://shaohung001.github.io/2017/01/06/hello-world/","excerpt":"","text":"学习永不止步，前进永不止步，记录永不止步我是一名Object-C开发者，爱记录，爱钻研，还有什么爱好呢，还没好好开发副业，想好就出发 整理知识，学习笔记 发布日记，杂文，所见所想 生活记录，点滴不怠 点子记录 勇于尝试","categories":[],"tags":[]}]}