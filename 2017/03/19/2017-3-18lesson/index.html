<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <!-- PACE Progress Bar START -->
  
    <script src="https://raw.githubusercontent.com/HubSpot/pace/v1.0.2/pace.min.js"></script>
    <link rel="stylesheet" href="https://github.com/HubSpot/pace/raw/master/themes/orange/pace-theme-flash.css">
  
  

  <!-- PACE Progress Bar START -->

  
  <title>2017/3/18lesson | aKer</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  
  
    <meta name="google-site-verification" content="4ibqBFKTH9pzNJzZlbE3r1AaiwTFg4sNw9KZ5oQL9c4">
  
  
  
  <meta name="description" content="2017/3/15CoreData的坑说不清，妈的首先是NSOrderSet和NSSet的区别对于One To One和One To Many 中午的时候看了下JavaScriptCore，对RN以前的对语言转换，混合工作有了一些了解。比如JSValue、JSVirtualMachine、JSContext、JSExport等作用。Native和JS语句调用交互过程、调用、传值，回传等工作过程等。">
<meta property="og:type" content="article">
<meta property="og:title" content="2017&#x2F;3&#x2F;18lesson">
<meta property="og:url" content="https://shaohung001.github.io/2017/03/19/2017-3-18lesson/index.html">
<meta property="og:site_name" content="aKer">
<meta property="og:description" content="2017/3/15CoreData的坑说不清，妈的首先是NSOrderSet和NSSet的区别对于One To One和One To Many 中午的时候看了下JavaScriptCore，对RN以前的对语言转换，混合工作有了一些了解。比如JSValue、JSVirtualMachine、JSContext、JSExport等作用。Native和JS语句调用交互过程、调用、传值，回传等工作过程等。">
<meta property="og:locale" content="default">
<meta property="og:image" content="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18.png">
<meta property="og:image" content="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:getSave.png">
<meta property="og:image" content="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:mine:getFunc.png">
<meta property="og:image" content="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:mine:save.png">
<meta property="og:updated_time" content="2017-03-19T15:56:18.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="2017&#x2F;3&#x2F;18lesson">
<meta name="twitter:description" content="2017/3/15CoreData的坑说不清，妈的首先是NSOrderSet和NSSet的区别对于One To One和One To Many 中午的时候看了下JavaScriptCore，对RN以前的对语言转换，混合工作有了一些了解。比如JSValue、JSVirtualMachine、JSContext、JSExport等作用。Native和JS语句调用交互过程、调用、传值，回传等工作过程等。">
<meta name="twitter:image" content="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18.png">
  
    <link rel="alternate" href="/atom.xml" title="aKer" type="application/atom+xml">
  
  <link rel="icon" href="/css/images/favicon.ico">
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link href="https://fonts.googleapis.com/css?family=Open+Sans|Montserrat:700" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Roboto:400,300,300italic,400italic" rel="stylesheet" type="text/css">
  <link href="https://cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet">
  <style type="text/css">
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/9749f0/00000000000000000001008f/27/l?subset_id=2&fvd=n5) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/90cf9f/000000000000000000010091/27/l?subset_id=2&fvd=n7) format("woff2");font-weight:500;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/8a5494/000000000000000000013365/27/l?subset_id=2&fvd=n4) format("woff2");font-weight:lighter;font-style:normal;}
    @font-face{font-family:futura-pt;src:url(https://use.typekit.net/af/d337d8/000000000000000000010095/27/l?subset_id=2&fvd=i4) format("woff2");font-weight:400;font-style:italic;}</style>

  <link rel="stylesheet" id="athemes-headings-fonts-css" href="//fonts.googleapis.com/css?family=Yanone+Kaffeesatz%3A200%2C300%2C400%2C700&amp;ver=4.6.1" type="text/css" media="all">
  <link rel="stylesheet" href="/css/style.css">

  <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

  <!-- Bootstrap core CSS -->
  <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
  <link rel="stylesheet" href="/css/hiero.css">
  <link rel="stylesheet" href="/css/glyphs.css">
  
    <link rel="stylesheet" href="/css/vdonate.css">
  

  <!-- Custom CSS -->
  <link rel="stylesheet" href="/css/my.css">
  <!-- Google Adsense -->
  
  <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <script>
      (adsbygoogle = window.adsbygoogle || []).push({
          google_ad_client: "ca-pub-7054334687711145",
          enable_page_level_ads: true
      });
  </script>
  
</head>
</html>
<script>
var themeMenus = {};

  themeMenus["/"] = "Home"; 

  themeMenus["/archives"] = "Archives"; 

  themeMenus["/categories"] = "Categories"; 

  themeMenus["/tags"] = "Tags"; 

  themeMenus["/about"] = "About"; 

</script>


  <body data-spy="scroll" data-target="#toc" data-offset="50">


  <header id="allheader" class="site-header" role="banner">
  <div class="clearfix container">
      <div class="site-branding">

          <h1 class="site-title">
            
              <a href="/" title="aKer" rel="home"> aKer </a>
            
          </h1>

          
            
          <nav id="main-navigation" class="main-navigation" role="navigation">
            <a class="nav-open">Menu</a>
            <a class="nav-close">Close</a>
            <div class="clearfix sf-menu">

              <ul id="main-nav" class="nmenu sf-js-enabled">
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/">Home</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/archives">Archives</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/categories">Categories</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/tags">Tags</a> </li>
                    
                      <li class="menu-item menu-item-type-custom menu-item-object-custom menu-item-home menu-item-1663"> <a class href="/about">About</a> </li>
                    
              </ul>
            </div>
          </nav>


      </div>
  </div>
</header>


  <div id="originBgDiv" style="background: #fff; width: 100%;">

      <div style="max-height:600px; overflow: hidden;  display: flex; display: -webkit-flex; align-items: center;">
        <img id="originBg" width="100%" alt src>
      </div>

  </div>

  <script>
  function setAboutIMG(){
      var imgUrls = "css/images/pose.jpg,https://source.unsplash.com/collection/954550/1920x1080".split(",");
      var random = Math.floor((Math.random() * imgUrls.length ));
      if (imgUrls[random].startsWith('http') || imgUrls[random].indexOf('://') >= 0) {
        document.getElementById("originBg").src=imgUrls[random];
      } else {
        document.getElementById("originBg").src='/' + imgUrls[random];
      }
  }
  bgDiv=document.getElementById("originBgDiv");
  if(location.pathname.match('about')){
    setAboutIMG();
    bgDiv.style.display='block';
  }else{
    bgDiv.style.display='none';
  }
  </script>



  <div id="container">
    <div id="wrap">

      <div id="content" class="outer">
        
          <section id="main" style="float:none;"><article id="post-2017-3-18lesson" style="width: 66%; float:left;" class="article article-type-post" itemscope itemprop="blogPost">
  <div id="articleInner" class="clearfix post-1016 post type-post status-publish format-standard has-post-thumbnail hentry category-template-2 category-uncategorized tag-codex tag-edge-case tag-featured-image tag-image tag-template">
    
    
      <header class="article-header">
        
  
    <h1 class="thumb" itemprop="name">
      2017/3/18lesson
    </h1>
  

      </header>
    
    <div class="article-meta">
      
	Posted on <a href="/2017/03/19/2017-3-18lesson/" class="article-date">
	  <time datetime="2017-03-19T15:55:33.000Z" itemprop="datePublished">March 19, 2017</time>
	</a>

      
	<span id="busuanzi_container_page_pv">
	  本文总阅读量<span id="busuanzi_value_page_pv"></span>次
	</span>

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>2017/3/15<br>CoreData的坑<br>说不清，妈的<br>首先是NSOrderSet和NSSet的区别<br>对于One To One和One To Many</p>
<p>中午的时候看了下JavaScriptCore，对RN以前的对语言转换，混合工作有了一些了解。<br>比如JSValue、JSVirtualMachine、JSContext、JSExport等作用。<br>Native和JS语句调用交互过程、调用、传值，回传等工作过程等。<br>看的地址<a href="https://my.oschina.net/u/2340880/blog/856321" target="_blank" rel="noopener">JSCrotCore博客</a><br>有点意思，关键是能做出的效果很令我感叹。</p>
<p>有空的时候测试了下另外两个东西：FBNotification、ZipArchive</p>
<ol>
<li>ZipArChive比较适用于内容稍微大点的内容物，不然小体积下，似乎压缩效果没有很大差异</li>
<li>FBNotification这个有个很厉害的地方，弹出的动作、画面都是可控的，屌爆了，非常喜欢。我对于本地发送localNotification发送没去尝试过，有这个轮子，还是不去整那些东西。</li>
</ol>
<p>今天给xcode加一个插件，<a href="https://blog.cnbluebox.com/blog/2015/03/05/chisel/" target="_blank" rel="noopener">Chisel</a><br>但是发生了Homebrew-&gt;<br><code>Error: Running Homebrew as root is extremely dangerous and no longer supported.
As Homebrew does not drop privileges on installation you would be giving all
build scripts full access to your system.</code><br>这个没想到要怎么操作，好吧，加个<strong>sudo</strong>估计会好吧，没想到还是不行。<br>百度查了下找到这个网址：<a href="https://segmentfault.com/q/1010000007575129?_ea=1389173" target="_blank" rel="noopener">https://segmentfault.com/q/1010000007575129?_ea=1389173</a></p>
<p>terminal 里面</p>
<p>sudo chown -R $(whoami) /usr/local<br>把/use/local的owner換成自己，就有write權限了</p>
<p>whoami就是一個命令，會echo當前登錄用戶的名字。當然你知道自己的用戶名，比如jack,就直接</p>
<p>sudo chown -R jack /usr/local<br>也可以</p>
<p>修改過權限之後，就直接跑</p>
<p>brew install node<br>不需要再用sudo，因為當前用戶已經有權限寫入/usr/local了或者你用</p>
<p>ls -ld /usr/local<br>確認一下這個目錄的owner是否已改到自己</p>
<p>Chisel好东西好东西，给力</p>
<p>来工作的这么一段时间，接触SourceTree，确实感觉很是强大。版本回滚，合并，文件差异等都是很实用。今天碰到，将一个Branch合进我的版本，然后，我有一个文件和xib都被遗失了。搞了很久，版本我也找不到是哪一个，最后我点击右上角的文件差异化对比，然后将文件给拷贝出来，要不是这一个操作，我估计以后我在合版本，我一定不会再相信电脑了。</p>
<p>今天很好奇的一个地方：Curl<br>还没看清Curl的操作方式，我先去看了篇<a href="http://www.jianshu.com/p/23cccb3a90b1文章读一读REST" target="_blank" rel="noopener">http://www.jianshu.com/p/23cccb3a90b1文章读一读REST</a> API的架构设计。<br>前面品味不出什么思想，一直到作者的一些感想上面，有点理解REST API设计思路。</p>
<ol>
<li>API请求中应该加入API版本号，比如在URL中加入版本号：<a href="https://api.example.com/v1/，这样API升级就可以将api版本也升级了。" target="_blank" rel="noopener">https://api.example.com/v1/，这样API升级就可以将api版本也升级了。</a></li>
<li>API返回的数据量问题。数据量大的话，估计是得在某些页面数据很大，或者文件传输等，不过视频、图片等估计不能在此列了。</li>
<li>性能方面我也是赞同的，不过我是前段方面，那么不能做的事，就是不能设计出一些使用猥琐方式暂时完成的功能和逻辑，尽量避免这种错误。</li>
<li>安全性和用户认证。这一块对于前段来说也是相当重要的。这里其就推荐使用Keychain的方式还有第三方Access Key之类尽可能使其为在启动的时候动态请求。估计这块得用HTTPS加密，然后每几天去更换才能处理好吧。</li>
</ol>
<p>OK，想到这里，还是没想明白Curl怎么使用，改天有机会用到的时候才会懂吧。</p>
<p>### 缓存策略<br>今天刚好做到公司要求的一个问题：缓存策略。<br>要求是将其之前有做的缓存方案，改成带有时间判别的方案，那么如果时间线以内，便不让其再次请求；如果用户手动刷新的话，那就不用去考虑了。</p>
<p>我自己倒是似懂非懂，直接在其基础上，变换成比较麻烦的方案：<br><img src="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18.png" alt="未更改保存方案"><br><img src="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:getSave.png" alt="未更改获取、外部保存方案"><br>在这个基础上，需要更简易处理，稳定。<br>我觉得要增加一个date，那就说保存的Array外面再包一层Diction吧，增加一个字段：Date<br>诺，就变成了这个不理想的样子：<br><img src="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:mine:getFunc.png" alt="更改保存方案"><br><img src="http://7xjcms.com1.z0.glb.clouddn.com/2017:3:18:mine:save.png" alt="更改保存方案"><br>这里的区别主要就是这种改动范围很大，而且把原有的全都换了一遍。虽说我的做法也能满足需求，但姜确实是老的辣，没能更好的解决这个问题。只能说，他们之前把方案讨论好了，我突然插进来的，搞的时候还是迷迷糊糊的，肯定没把所有方案走一遍，没找到最好的，嘿嘿。<br>这里处理是给保存时的方法替换一下，变成传入参数增加一个指针，返回的时候就靠着这个保存了文件本身的信息，保存信息等，作为判别当前时长是否超过1小时。<br>这个方案确实不错。</p>
<p>记录一个犯的错误。<br>使用Masonry和自动计算行高的Third Part，我将UI贴在了TableViewCell上，而不是TableViewCellWraperView上—&gt;[self addSubview:xx];始终出现控件不如我所想，我觉得不会呀，不可能错呀。<br>过了2天，我突然想起来，TableViewCell是没有自动布局能力的，要写成—&gt;[self.contentView addSubview:xx];</p>
<p>周六中午得时候自己写了个自我感觉非常良好的主题管理器，基本功能都能达到啦，哈哈，那一刻非常开心。非常开森。</p>

      
    </div>
    <footer class="entry-meta entry-footer">
      
      
      
        <div id="donation_div"></div>

<script src="/js/vdonate.js"></script>
<script>
var a = new Donate({
  title: '如果觉得我的文章对您有用，请随意打赏。您的支持将鼓励我继续创作!', // 可选参数，打赏标题
  btnText: 'Donate', // 可选参数，打赏按钮文字
  el: document.getElementById('donation_div'),
  wechatImage: 'https://github.com/shaohung001/shaohung001.github.io/blob/master/css/images/wechatPay.jpg?raw=true',
  alipayImage: 'https://github.com/shaohung001/shaohung001.github.io/blob/master/css/images/aliPay.jpg?raw=true'
});
</script>
      
            
      
        
	<section id="comments" class="comment">
	  <div id="disqus_thread">
	  <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
	  </div>
	</section>

	<script type="text/javascript">
	var disqus_shortname = 'shaohung001';
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	(function(){
	  var dsq = document.createElement('script');
	  dsq.type = 'text/javascript';
	  dsq.async = true;
	  dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
	  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
	}());
	</script>


      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2017/04/11/2017-4-11Lesson/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          2017/4/11Lesson
        
      </div>
    </a>
  
  
    <a href="/2017/03/13/2017-3-13lesson/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">2017/3/13lesson</div>
    </a>
  
</nav>

  
</article>

<!-- Table of Contents -->

  <aside id="sidebar">
    <div id="toc" class="toc-article" style="overflow-y: scroll; max-width: 28%;">
    <strong class="toc-title">Contents</strong>
    
      <ol class="nav">None</ol>
    
    </div>
  </aside>
</section>
        
      </div>
      <footer id="footer" class="site-footer">
  

  <div class="clearfix container">
      <div class="site-info">
	      &copy; 2019 aKer All Rights Reserved.
          
            <span id="busuanzi_container_site_uv">
              本站访客数<span id="busuanzi_value_site_uv"></span>人次  
              本站总访问量<span id="busuanzi_value_site_pv"></span>次
            </span>
          
      </div>
      <div class="site-credit">
        Theme by <a href="https://github.com/iTimeTraveler/hexo-theme-hiero" target="_blank">hiero</a>
      </div>
  </div>
</footer>


<!-- min height -->

<script>
    var contentdiv = document.getElementById("content");

    contentdiv.style.minHeight = document.body.offsetHeight - document.getElementById("allheader").offsetHeight - document.getElementById("footer").offsetHeight + "px";
</script>

<!-- Custome JS -->
<script src="/js/my.js"></script>
    </div>
    <!-- <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/categories" class="mobile-nav-link">Categories</a>
  
    <a href="/tags" class="mobile-nav-link">Tags</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
</nav> -->
    

<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>



  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.js"></script>


<script src="/js/scripts.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>







  <div style="display: none;">
    <script src="https://s95.cnzz.com/z_stat.php?id=1278024876&web_id=1278024876" language="JavaScript"></script>
  </div>



	<script async src="https://dnqof95d40fo6.cloudfront.net/atw7f8.js">
	</script>






  </div>

  <a id="rocket" href="#top" class=""></a>
  <script type="text/javascript" src="/js/totop.js" async=""></script>
  <!-- 页面点击小红心 -->
  <script type="text/javascript" src="/js/src/click.js"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>
</html>
